var vR=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var bU=vR((CU,Ok)=>{function ib(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in e)){const i=Object.getOwnPropertyDescriptor(r,o);i&&Object.defineProperty(e,o,i.get?i:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();var Zm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function mR(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var o=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return e[r]}})}),n}var ab={exports:{}},Md={},sb={exports:{}},xt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zl=Symbol.for("react.element"),gR=Symbol.for("react.portal"),yR=Symbol.for("react.fragment"),xR=Symbol.for("react.strict_mode"),wR=Symbol.for("react.profiler"),bR=Symbol.for("react.provider"),ER=Symbol.for("react.context"),CR=Symbol.for("react.forward_ref"),SR=Symbol.for("react.suspense"),_R=Symbol.for("react.memo"),kR=Symbol.for("react.lazy"),L0=Symbol.iterator;function RR(e){return e===null||typeof e!="object"?null:(e=L0&&e[L0]||e["@@iterator"],typeof e=="function"?e:null)}var ub={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lb=Object.assign,cb={};function wu(e,t,n){this.props=e,this.context=t,this.refs=cb,this.updater=n||ub}wu.prototype.isReactComponent={};wu.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};wu.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function fb(){}fb.prototype=wu.prototype;function eg(e,t,n){this.props=e,this.context=t,this.refs=cb,this.updater=n||ub}var tg=eg.prototype=new fb;tg.constructor=eg;lb(tg,wu.prototype);tg.isPureReactComponent=!0;var B0=Array.isArray,db=Object.prototype.hasOwnProperty,ng={current:null},hb={key:!0,ref:!0,__self:!0,__source:!0};function pb(e,t,n){var r,o={},i=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)db.call(t,r)&&!hb.hasOwnProperty(r)&&(o[r]=t[r]);var s=arguments.length-2;if(s===1)o.children=n;else if(1<s){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+2];o.children=u}if(e&&e.defaultProps)for(r in s=e.defaultProps,s)o[r]===void 0&&(o[r]=s[r]);return{$$typeof:Zl,type:e,key:i,ref:a,props:o,_owner:ng.current}}function TR(e,t){return{$$typeof:Zl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function rg(e){return typeof e=="object"&&e!==null&&e.$$typeof===Zl}function IR(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var j0=/\/+/g;function Gh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?IR(""+e.key):t.toString(36)}function pf(e,t,n,r,o){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Zl:case gR:a=!0}}if(a)return a=e,o=o(a),e=r===""?"."+Gh(a,0):r,B0(o)?(n="",e!=null&&(n=e.replace(j0,"$&/")+"/"),pf(o,t,n,"",function(l){return l})):o!=null&&(rg(o)&&(o=TR(o,n+(!o.key||a&&a.key===o.key?"":(""+o.key).replace(j0,"$&/")+"/")+e)),t.push(o)),1;if(a=0,r=r===""?".":r+":",B0(e))for(var s=0;s<e.length;s++){i=e[s];var u=r+Gh(i,s);a+=pf(i,t,n,u,o)}else if(u=RR(e),typeof u=="function")for(e=u.call(e),s=0;!(i=e.next()).done;)i=i.value,u=r+Gh(i,s++),a+=pf(i,t,n,u,o);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Nc(e,t,n){if(e==null)return e;var r=[],o=0;return pf(e,r,"","",function(i){return t.call(n,i,o++)}),r}function DR(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ur={current:null},vf={transition:null},NR={ReactCurrentDispatcher:ur,ReactCurrentBatchConfig:vf,ReactCurrentOwner:ng};xt.Children={map:Nc,forEach:function(e,t,n){Nc(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Nc(e,function(){t++}),t},toArray:function(e){return Nc(e,function(t){return t})||[]},only:function(e){if(!rg(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};xt.Component=wu;xt.Fragment=yR;xt.Profiler=wR;xt.PureComponent=eg;xt.StrictMode=xR;xt.Suspense=SR;xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NR;xt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=lb({},e.props),o=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=ng.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(u in t)db.call(t,u)&&!hb.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&s!==void 0?s[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){s=Array(u);for(var l=0;l<u;l++)s[l]=arguments[l+2];r.children=s}return{$$typeof:Zl,type:e.type,key:o,ref:i,props:r,_owner:a}};xt.createContext=function(e){return e={$$typeof:ER,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:bR,_context:e},e.Consumer=e};xt.createElement=pb;xt.createFactory=function(e){var t=pb.bind(null,e);return t.type=e,t};xt.createRef=function(){return{current:null}};xt.forwardRef=function(e){return{$$typeof:CR,render:e}};xt.isValidElement=rg;xt.lazy=function(e){return{$$typeof:kR,_payload:{_status:-1,_result:e},_init:DR}};xt.memo=function(e,t){return{$$typeof:_R,type:e,compare:t===void 0?null:t}};xt.startTransition=function(e){var t=vf.transition;vf.transition={};try{e()}finally{vf.transition=t}};xt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};xt.useCallback=function(e,t){return ur.current.useCallback(e,t)};xt.useContext=function(e){return ur.current.useContext(e)};xt.useDebugValue=function(){};xt.useDeferredValue=function(e){return ur.current.useDeferredValue(e)};xt.useEffect=function(e,t){return ur.current.useEffect(e,t)};xt.useId=function(){return ur.current.useId()};xt.useImperativeHandle=function(e,t,n){return ur.current.useImperativeHandle(e,t,n)};xt.useInsertionEffect=function(e,t){return ur.current.useInsertionEffect(e,t)};xt.useLayoutEffect=function(e,t){return ur.current.useLayoutEffect(e,t)};xt.useMemo=function(e,t){return ur.current.useMemo(e,t)};xt.useReducer=function(e,t,n){return ur.current.useReducer(e,t,n)};xt.useRef=function(e){return ur.current.useRef(e)};xt.useState=function(e){return ur.current.useState(e)};xt.useSyncExternalStore=function(e,t,n){return ur.current.useSyncExternalStore(e,t,n)};xt.useTransition=function(){return ur.current.useTransition()};xt.version="18.2.0";sb.exports=xt;var W=sb.exports;const ar=rs(W),AR=ib({__proto__:null,default:ar},[W]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PR=W,FR=Symbol.for("react.element"),OR=Symbol.for("react.fragment"),MR=Object.prototype.hasOwnProperty,LR=PR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,BR={key:!0,ref:!0,__self:!0,__source:!0};function vb(e,t,n){var r,o={},i=null,a=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)MR.call(t,r)&&!BR.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:FR,type:e,key:i,ref:a,props:o,_owner:LR.current}}Md.Fragment=OR;Md.jsx=vb;Md.jsxs=vb;ab.exports=Md;var F=ab.exports,vv={},mb={exports:{}},Br={},gb={exports:{}},yb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t($,Y){var ee=$.length;$.push(Y);e:for(;0<ee;){var he=ee-1>>>1,me=$[he];if(0<o(me,Y))$[he]=Y,$[ee]=me,ee=he;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var Y=$[0],ee=$.pop();if(ee!==Y){$[0]=ee;e:for(var he=0,me=$.length,be=me>>>1;he<be;){var Se=2*(he+1)-1,Ae=$[Se],Pe=Se+1,$e=$[Pe];if(0>o(Ae,ee))Pe<me&&0>o($e,Ae)?($[he]=$e,$[Pe]=ee,he=Pe):($[he]=Ae,$[Se]=ee,he=Se);else if(Pe<me&&0>o($e,ee))$[he]=$e,$[Pe]=ee,he=Pe;else break e}}return Y}function o($,Y){var ee=$.sortIndex-Y.sortIndex;return ee!==0?ee:$.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,s=a.now();e.unstable_now=function(){return a.now()-s}}var u=[],l=[],c=1,f=null,d=3,p=!1,v=!1,x=!1,w=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E($){for(var Y=n(l);Y!==null;){if(Y.callback===null)r(l);else if(Y.startTime<=$)r(l),Y.sortIndex=Y.expirationTime,t(u,Y);else break;Y=n(l)}}function S($){if(x=!1,E($),!v)if(n(u)!==null)v=!0,ne(R);else{var Y=n(l);Y!==null&&J(S,Y.startTime-$)}}function R($,Y){v=!1,x&&(x=!1,y(P),P=-1),p=!0;var ee=d;try{for(E(Y),f=n(u);f!==null&&(!(f.expirationTime>Y)||$&&!B());){var he=f.callback;if(typeof he=="function"){f.callback=null,d=f.priorityLevel;var me=he(f.expirationTime<=Y);Y=e.unstable_now(),typeof me=="function"?f.callback=me:f===n(u)&&r(u),E(Y)}else r(u);f=n(u)}if(f!==null)var be=!0;else{var Se=n(l);Se!==null&&J(S,Se.startTime-Y),be=!1}return be}finally{f=null,d=ee,p=!1}}var k=!1,m=null,P=-1,D=5,N=-1;function B(){return!(e.unstable_now()-N<D)}function z(){if(m!==null){var $=e.unstable_now();N=$;var Y=!0;try{Y=m(!0,$)}finally{Y?V():(k=!1,m=null)}}else k=!1}var V;if(typeof b=="function")V=function(){b(z)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,K=Z.port2;Z.port1.onmessage=z,V=function(){K.postMessage(null)}}else V=function(){w(z,0)};function ne($){m=$,k||(k=!0,V())}function J($,Y){P=w(function(){$(e.unstable_now())},Y)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($){$.callback=null},e.unstable_continueExecution=function(){v||p||(v=!0,ne(R))},e.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<$?Math.floor(1e3/$):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function($){switch(d){case 1:case 2:case 3:var Y=3;break;default:Y=d}var ee=d;d=Y;try{return $()}finally{d=ee}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function($,Y){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var ee=d;d=$;try{return Y()}finally{d=ee}},e.unstable_scheduleCallback=function($,Y,ee){var he=e.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?he+ee:he):ee=he,$){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=ee+me,$={id:c++,callback:Y,priorityLevel:$,startTime:ee,expirationTime:me,sortIndex:-1},ee>he?($.sortIndex=ee,t(l,$),n(u)===null&&$===n(l)&&(x?(y(P),P=-1):x=!0,J(S,ee-he))):($.sortIndex=me,t(u,$),v||p||(v=!0,ne(R))),$},e.unstable_shouldYield=B,e.unstable_wrapCallback=function($){var Y=d;return function(){var ee=d;d=Y;try{return $.apply(this,arguments)}finally{d=ee}}}})(yb);gb.exports=yb;var jR=gb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xb=W,Mr=jR;function ye(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var wb=new Set,Sl={};function os(e,t){ou(e,t),ou(e+"Capture",t)}function ou(e,t){for(Sl[e]=t,e=0;e<t.length;e++)wb.add(t[e])}var fi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mv=Object.prototype.hasOwnProperty,WR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,W0={},z0={};function zR(e){return mv.call(z0,e)?!0:mv.call(W0,e)?!1:WR.test(e)?z0[e]=!0:(W0[e]=!0,!1)}function UR(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function $R(e,t,n,r){if(t===null||typeof t>"u"||UR(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function lr(e,t,n,r,o,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var Un={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Un[e]=new lr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Un[t]=new lr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Un[e]=new lr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Un[e]=new lr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Un[e]=new lr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Un[e]=new lr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Un[e]=new lr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Un[e]=new lr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Un[e]=new lr(e,5,!1,e.toLowerCase(),null,!1,!1)});var og=/[\-:]([a-z])/g;function ig(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(og,ig);Un[t]=new lr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(og,ig);Un[t]=new lr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(og,ig);Un[t]=new lr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Un[e]=new lr(e,1,!1,e.toLowerCase(),null,!1,!1)});Un.xlinkHref=new lr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Un[e]=new lr(e,1,!1,e.toLowerCase(),null,!0,!0)});function ag(e,t,n,r){var o=Un.hasOwnProperty(t)?Un[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&($R(t,n,o,r)&&(n=null),r||o===null?zR(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var gi=xb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ac=Symbol.for("react.element"),Ds=Symbol.for("react.portal"),Ns=Symbol.for("react.fragment"),sg=Symbol.for("react.strict_mode"),gv=Symbol.for("react.profiler"),bb=Symbol.for("react.provider"),Eb=Symbol.for("react.context"),ug=Symbol.for("react.forward_ref"),yv=Symbol.for("react.suspense"),xv=Symbol.for("react.suspense_list"),lg=Symbol.for("react.memo"),Mi=Symbol.for("react.lazy"),Cb=Symbol.for("react.offscreen"),U0=Symbol.iterator;function Bu(e){return e===null||typeof e!="object"?null:(e=U0&&e[U0]||e["@@iterator"],typeof e=="function"?e:null)}var Xt=Object.assign,qh;function rl(e){if(qh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);qh=t&&t[1]||""}return`
`+qh+e}var Kh=!1;function Xh(e,t){if(!e||Kh)return"";Kh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var o=l.stack.split(`
`),i=r.stack.split(`
`),a=o.length-1,s=i.length-1;1<=a&&0<=s&&o[a]!==i[s];)s--;for(;1<=a&&0<=s;a--,s--)if(o[a]!==i[s]){if(a!==1||s!==1)do if(a--,s--,0>s||o[a]!==i[s]){var u=`
`+o[a].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=a&&0<=s);break}}}finally{Kh=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?rl(e):""}function HR(e){switch(e.tag){case 5:return rl(e.type);case 16:return rl("Lazy");case 13:return rl("Suspense");case 19:return rl("SuspenseList");case 0:case 2:case 15:return e=Xh(e.type,!1),e;case 11:return e=Xh(e.type.render,!1),e;case 1:return e=Xh(e.type,!0),e;default:return""}}function wv(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ns:return"Fragment";case Ds:return"Portal";case gv:return"Profiler";case sg:return"StrictMode";case yv:return"Suspense";case xv:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Eb:return(e.displayName||"Context")+".Consumer";case bb:return(e._context.displayName||"Context")+".Provider";case ug:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case lg:return t=e.displayName||null,t!==null?t:wv(e.type)||"Memo";case Mi:t=e._payload,e=e._init;try{return wv(e(t))}catch{}}return null}function VR(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return wv(t);case 8:return t===sg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function sa(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Sb(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function GR(e){var t=Sb(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Pc(e){e._valueTracker||(e._valueTracker=GR(e))}function _b(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Sb(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Af(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function bv(e,t){var n=t.checked;return Xt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function $0(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=sa(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function kb(e,t){t=t.checked,t!=null&&ag(e,"checked",t,!1)}function Ev(e,t){kb(e,t);var n=sa(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Cv(e,t.type,n):t.hasOwnProperty("defaultValue")&&Cv(e,t.type,sa(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function H0(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Cv(e,t,n){(t!=="number"||Af(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ol=Array.isArray;function Hs(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+sa(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Sv(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ye(91));return Xt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function V0(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ye(92));if(ol(n)){if(1<n.length)throw Error(ye(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:sa(n)}}function Rb(e,t){var n=sa(t.value),r=sa(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function G0(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Tb(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _v(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Tb(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Fc,Ib=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Fc=Fc||document.createElement("div"),Fc.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Fc.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function _l(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ul={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qR=["Webkit","ms","Moz","O"];Object.keys(ul).forEach(function(e){qR.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ul[t]=ul[e]})});function Db(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ul.hasOwnProperty(e)&&ul[e]?(""+t).trim():t+"px"}function Nb(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=Db(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var KR=Xt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kv(e,t){if(t){if(KR[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ye(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ye(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ye(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ye(62))}}function Rv(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tv=null;function cg(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Iv=null,Vs=null,Gs=null;function q0(e){if(e=nc(e)){if(typeof Iv!="function")throw Error(ye(280));var t=e.stateNode;t&&(t=zd(t),Iv(e.stateNode,e.type,t))}}function Ab(e){Vs?Gs?Gs.push(e):Gs=[e]:Vs=e}function Pb(){if(Vs){var e=Vs,t=Gs;if(Gs=Vs=null,q0(e),t)for(e=0;e<t.length;e++)q0(t[e])}}function Fb(e,t){return e(t)}function Ob(){}var Yh=!1;function Mb(e,t,n){if(Yh)return e(t,n);Yh=!0;try{return Fb(e,t,n)}finally{Yh=!1,(Vs!==null||Gs!==null)&&(Ob(),Pb())}}function kl(e,t){var n=e.stateNode;if(n===null)return null;var r=zd(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ye(231,t,typeof n));return n}var Dv=!1;if(fi)try{var ju={};Object.defineProperty(ju,"passive",{get:function(){Dv=!0}}),window.addEventListener("test",ju,ju),window.removeEventListener("test",ju,ju)}catch{Dv=!1}function XR(e,t,n,r,o,i,a,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var ll=!1,Pf=null,Ff=!1,Nv=null,YR={onError:function(e){ll=!0,Pf=e}};function QR(e,t,n,r,o,i,a,s,u){ll=!1,Pf=null,XR.apply(YR,arguments)}function JR(e,t,n,r,o,i,a,s,u){if(QR.apply(this,arguments),ll){if(ll){var l=Pf;ll=!1,Pf=null}else throw Error(ye(198));Ff||(Ff=!0,Nv=l)}}function is(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Lb(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function K0(e){if(is(e)!==e)throw Error(ye(188))}function ZR(e){var t=e.alternate;if(!t){if(t=is(e),t===null)throw Error(ye(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var i=o.alternate;if(i===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return K0(o),e;if(i===r)return K0(o),t;i=i.sibling}throw Error(ye(188))}if(n.return!==r.return)n=o,r=i;else{for(var a=!1,s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}if(!a){for(s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a)throw Error(ye(189))}}if(n.alternate!==r)throw Error(ye(190))}if(n.tag!==3)throw Error(ye(188));return n.stateNode.current===n?e:t}function Bb(e){return e=ZR(e),e!==null?jb(e):null}function jb(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=jb(e);if(t!==null)return t;e=e.sibling}return null}var Wb=Mr.unstable_scheduleCallback,X0=Mr.unstable_cancelCallback,eT=Mr.unstable_shouldYield,tT=Mr.unstable_requestPaint,cn=Mr.unstable_now,nT=Mr.unstable_getCurrentPriorityLevel,fg=Mr.unstable_ImmediatePriority,zb=Mr.unstable_UserBlockingPriority,Of=Mr.unstable_NormalPriority,rT=Mr.unstable_LowPriority,Ub=Mr.unstable_IdlePriority,Ld=null,jo=null;function oT(e){if(jo&&typeof jo.onCommitFiberRoot=="function")try{jo.onCommitFiberRoot(Ld,e,void 0,(e.current.flags&128)===128)}catch{}}var co=Math.clz32?Math.clz32:sT,iT=Math.log,aT=Math.LN2;function sT(e){return e>>>=0,e===0?32:31-(iT(e)/aT|0)|0}var Oc=64,Mc=4194304;function il(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Mf(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,i=e.pingedLanes,a=n&268435455;if(a!==0){var s=a&~o;s!==0?r=il(s):(i&=a,i!==0&&(r=il(i)))}else a=n&~o,a!==0?r=il(a):i!==0&&(r=il(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,i=t&-t,o>=i||o===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-co(t),o=1<<n,r|=e[n],t&=~o;return r}function uT(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lT(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-co(i),s=1<<a,u=o[a];u===-1?(!(s&n)||s&r)&&(o[a]=uT(s,t)):u<=t&&(e.expiredLanes|=s),i&=~s}}function Av(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function $b(){var e=Oc;return Oc<<=1,!(Oc&4194240)&&(Oc=64),e}function Qh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ec(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-co(t),e[t]=n}function cT(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-co(n),i=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~i}}function dg(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-co(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var Nt=0;function Hb(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Vb,hg,Gb,qb,Kb,Pv=!1,Lc=[],Xi=null,Yi=null,Qi=null,Rl=new Map,Tl=new Map,Wi=[],fT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Y0(e,t){switch(e){case"focusin":case"focusout":Xi=null;break;case"dragenter":case"dragleave":Yi=null;break;case"mouseover":case"mouseout":Qi=null;break;case"pointerover":case"pointerout":Rl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tl.delete(t.pointerId)}}function Wu(e,t,n,r,o,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},t!==null&&(t=nc(t),t!==null&&hg(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function dT(e,t,n,r,o){switch(t){case"focusin":return Xi=Wu(Xi,e,t,n,r,o),!0;case"dragenter":return Yi=Wu(Yi,e,t,n,r,o),!0;case"mouseover":return Qi=Wu(Qi,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return Rl.set(i,Wu(Rl.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,Tl.set(i,Wu(Tl.get(i)||null,e,t,n,r,o)),!0}return!1}function Xb(e){var t=Ma(e.target);if(t!==null){var n=is(t);if(n!==null){if(t=n.tag,t===13){if(t=Lb(n),t!==null){e.blockedOn=t,Kb(e.priority,function(){Gb(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function mf(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Fv(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Tv=r,n.target.dispatchEvent(r),Tv=null}else return t=nc(n),t!==null&&hg(t),e.blockedOn=n,!1;t.shift()}return!0}function Q0(e,t,n){mf(e)&&n.delete(t)}function hT(){Pv=!1,Xi!==null&&mf(Xi)&&(Xi=null),Yi!==null&&mf(Yi)&&(Yi=null),Qi!==null&&mf(Qi)&&(Qi=null),Rl.forEach(Q0),Tl.forEach(Q0)}function zu(e,t){e.blockedOn===t&&(e.blockedOn=null,Pv||(Pv=!0,Mr.unstable_scheduleCallback(Mr.unstable_NormalPriority,hT)))}function Il(e){function t(o){return zu(o,e)}if(0<Lc.length){zu(Lc[0],e);for(var n=1;n<Lc.length;n++){var r=Lc[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Xi!==null&&zu(Xi,e),Yi!==null&&zu(Yi,e),Qi!==null&&zu(Qi,e),Rl.forEach(t),Tl.forEach(t),n=0;n<Wi.length;n++)r=Wi[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Wi.length&&(n=Wi[0],n.blockedOn===null);)Xb(n),n.blockedOn===null&&Wi.shift()}var qs=gi.ReactCurrentBatchConfig,Lf=!0;function pT(e,t,n,r){var o=Nt,i=qs.transition;qs.transition=null;try{Nt=1,pg(e,t,n,r)}finally{Nt=o,qs.transition=i}}function vT(e,t,n,r){var o=Nt,i=qs.transition;qs.transition=null;try{Nt=4,pg(e,t,n,r)}finally{Nt=o,qs.transition=i}}function pg(e,t,n,r){if(Lf){var o=Fv(e,t,n,r);if(o===null)sp(e,t,r,Bf,n),Y0(e,r);else if(dT(o,e,t,n,r))r.stopPropagation();else if(Y0(e,r),t&4&&-1<fT.indexOf(e)){for(;o!==null;){var i=nc(o);if(i!==null&&Vb(i),i=Fv(e,t,n,r),i===null&&sp(e,t,r,Bf,n),i===o)break;o=i}o!==null&&r.stopPropagation()}else sp(e,t,r,null,n)}}var Bf=null;function Fv(e,t,n,r){if(Bf=null,e=cg(r),e=Ma(e),e!==null)if(t=is(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Lb(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Bf=e,null}function Yb(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nT()){case fg:return 1;case zb:return 4;case Of:case rT:return 16;case Ub:return 536870912;default:return 16}default:return 16}}var $i=null,vg=null,gf=null;function Qb(){if(gf)return gf;var e,t=vg,n=t.length,r,o="value"in $i?$i.value:$i.textContent,i=o.length;for(e=0;e<n&&t[e]===o[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===o[i-r];r++);return gf=o.slice(e,1<r?1-r:void 0)}function yf(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Bc(){return!0}function J0(){return!1}function jr(e){function t(n,r,o,i,a){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(n=e[s],this[s]=n?n(i):i[s]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Bc:J0,this.isPropagationStopped=J0,this}return Xt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Bc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Bc)},persist:function(){},isPersistent:Bc}),t}var bu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mg=jr(bu),tc=Xt({},bu,{view:0,detail:0}),mT=jr(tc),Jh,Zh,Uu,Bd=Xt({},tc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gg,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Uu&&(Uu&&e.type==="mousemove"?(Jh=e.screenX-Uu.screenX,Zh=e.screenY-Uu.screenY):Zh=Jh=0,Uu=e),Jh)},movementY:function(e){return"movementY"in e?e.movementY:Zh}}),Z0=jr(Bd),gT=Xt({},Bd,{dataTransfer:0}),yT=jr(gT),xT=Xt({},tc,{relatedTarget:0}),ep=jr(xT),wT=Xt({},bu,{animationName:0,elapsedTime:0,pseudoElement:0}),bT=jr(wT),ET=Xt({},bu,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),CT=jr(ET),ST=Xt({},bu,{data:0}),e1=jr(ST),_T={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},RT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function TT(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=RT[e])?!!t[e]:!1}function gg(){return TT}var IT=Xt({},tc,{key:function(e){if(e.key){var t=_T[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=yf(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?kT[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gg,charCode:function(e){return e.type==="keypress"?yf(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?yf(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),DT=jr(IT),NT=Xt({},Bd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),t1=jr(NT),AT=Xt({},tc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gg}),PT=jr(AT),FT=Xt({},bu,{propertyName:0,elapsedTime:0,pseudoElement:0}),OT=jr(FT),MT=Xt({},Bd,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),LT=jr(MT),BT=[9,13,27,32],yg=fi&&"CompositionEvent"in window,cl=null;fi&&"documentMode"in document&&(cl=document.documentMode);var jT=fi&&"TextEvent"in window&&!cl,Jb=fi&&(!yg||cl&&8<cl&&11>=cl),n1=" ",r1=!1;function Zb(e,t){switch(e){case"keyup":return BT.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function e2(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var As=!1;function WT(e,t){switch(e){case"compositionend":return e2(t);case"keypress":return t.which!==32?null:(r1=!0,n1);case"textInput":return e=t.data,e===n1&&r1?null:e;default:return null}}function zT(e,t){if(As)return e==="compositionend"||!yg&&Zb(e,t)?(e=Qb(),gf=vg=$i=null,As=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Jb&&t.locale!=="ko"?null:t.data;default:return null}}var UT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function o1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!UT[e.type]:t==="textarea"}function t2(e,t,n,r){Ab(r),t=jf(t,"onChange"),0<t.length&&(n=new mg("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var fl=null,Dl=null;function $T(e){d2(e,0)}function jd(e){var t=Os(e);if(_b(t))return e}function HT(e,t){if(e==="change")return t}var n2=!1;if(fi){var tp;if(fi){var np="oninput"in document;if(!np){var i1=document.createElement("div");i1.setAttribute("oninput","return;"),np=typeof i1.oninput=="function"}tp=np}else tp=!1;n2=tp&&(!document.documentMode||9<document.documentMode)}function a1(){fl&&(fl.detachEvent("onpropertychange",r2),Dl=fl=null)}function r2(e){if(e.propertyName==="value"&&jd(Dl)){var t=[];t2(t,Dl,e,cg(e)),Mb($T,t)}}function VT(e,t,n){e==="focusin"?(a1(),fl=t,Dl=n,fl.attachEvent("onpropertychange",r2)):e==="focusout"&&a1()}function GT(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return jd(Dl)}function qT(e,t){if(e==="click")return jd(t)}function KT(e,t){if(e==="input"||e==="change")return jd(t)}function XT(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var po=typeof Object.is=="function"?Object.is:XT;function Nl(e,t){if(po(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!mv.call(t,o)||!po(e[o],t[o]))return!1}return!0}function s1(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function u1(e,t){var n=s1(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=s1(n)}}function o2(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?o2(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function i2(){for(var e=window,t=Af();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Af(e.document)}return t}function xg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function YT(e){var t=i2(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&o2(n.ownerDocument.documentElement,n)){if(r!==null&&xg(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,i=Math.min(r.start,o);r=r.end===void 0?i:Math.min(r.end,o),!e.extend&&i>r&&(o=r,r=i,i=o),o=u1(n,i);var a=u1(n,r);o&&a&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var QT=fi&&"documentMode"in document&&11>=document.documentMode,Ps=null,Ov=null,dl=null,Mv=!1;function l1(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Mv||Ps==null||Ps!==Af(r)||(r=Ps,"selectionStart"in r&&xg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),dl&&Nl(dl,r)||(dl=r,r=jf(Ov,"onSelect"),0<r.length&&(t=new mg("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Ps)))}function jc(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Fs={animationend:jc("Animation","AnimationEnd"),animationiteration:jc("Animation","AnimationIteration"),animationstart:jc("Animation","AnimationStart"),transitionend:jc("Transition","TransitionEnd")},rp={},a2={};fi&&(a2=document.createElement("div").style,"AnimationEvent"in window||(delete Fs.animationend.animation,delete Fs.animationiteration.animation,delete Fs.animationstart.animation),"TransitionEvent"in window||delete Fs.transitionend.transition);function Wd(e){if(rp[e])return rp[e];if(!Fs[e])return e;var t=Fs[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in a2)return rp[e]=t[n];return e}var s2=Wd("animationend"),u2=Wd("animationiteration"),l2=Wd("animationstart"),c2=Wd("transitionend"),f2=new Map,c1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ca(e,t){f2.set(e,t),os(t,[e])}for(var op=0;op<c1.length;op++){var ip=c1[op],JT=ip.toLowerCase(),ZT=ip[0].toUpperCase()+ip.slice(1);ca(JT,"on"+ZT)}ca(s2,"onAnimationEnd");ca(u2,"onAnimationIteration");ca(l2,"onAnimationStart");ca("dblclick","onDoubleClick");ca("focusin","onFocus");ca("focusout","onBlur");ca(c2,"onTransitionEnd");ou("onMouseEnter",["mouseout","mouseover"]);ou("onMouseLeave",["mouseout","mouseover"]);ou("onPointerEnter",["pointerout","pointerover"]);ou("onPointerLeave",["pointerout","pointerover"]);os("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));os("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));os("onBeforeInput",["compositionend","keypress","textInput","paste"]);os("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));os("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));os("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var al="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eI=new Set("cancel close invalid load scroll toggle".split(" ").concat(al));function f1(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,JR(r,t,void 0,e),e.currentTarget=null}function d2(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==i&&o.isPropagationStopped())break e;f1(o,s,l),i=u}else for(a=0;a<r.length;a++){if(s=r[a],u=s.instance,l=s.currentTarget,s=s.listener,u!==i&&o.isPropagationStopped())break e;f1(o,s,l),i=u}}}if(Ff)throw e=Nv,Ff=!1,Nv=null,e}function jt(e,t){var n=t[zv];n===void 0&&(n=t[zv]=new Set);var r=e+"__bubble";n.has(r)||(h2(t,e,2,!1),n.add(r))}function ap(e,t,n){var r=0;t&&(r|=4),h2(n,e,r,t)}var Wc="_reactListening"+Math.random().toString(36).slice(2);function Al(e){if(!e[Wc]){e[Wc]=!0,wb.forEach(function(n){n!=="selectionchange"&&(eI.has(n)||ap(n,!1,e),ap(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Wc]||(t[Wc]=!0,ap("selectionchange",!1,t))}}function h2(e,t,n,r){switch(Yb(t)){case 1:var o=pT;break;case 4:o=vT;break;default:o=pg}n=o.bind(null,t,n,e),o=void 0,!Dv||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function sp(e,t,n,r,o){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var s=r.stateNode.containerInfo;if(s===o||s.nodeType===8&&s.parentNode===o)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===o||u.nodeType===8&&u.parentNode===o))return;a=a.return}for(;s!==null;){if(a=Ma(s),a===null)return;if(u=a.tag,u===5||u===6){r=i=a;continue e}s=s.parentNode}}r=r.return}Mb(function(){var l=i,c=cg(n),f=[];e:{var d=f2.get(e);if(d!==void 0){var p=mg,v=e;switch(e){case"keypress":if(yf(n)===0)break e;case"keydown":case"keyup":p=DT;break;case"focusin":v="focus",p=ep;break;case"focusout":v="blur",p=ep;break;case"beforeblur":case"afterblur":p=ep;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Z0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=yT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=PT;break;case s2:case u2:case l2:p=bT;break;case c2:p=OT;break;case"scroll":p=mT;break;case"wheel":p=LT;break;case"copy":case"cut":case"paste":p=CT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=t1}var x=(t&4)!==0,w=!x&&e==="scroll",y=x?d!==null?d+"Capture":null:d;x=[];for(var b=l,E;b!==null;){E=b;var S=E.stateNode;if(E.tag===5&&S!==null&&(E=S,y!==null&&(S=kl(b,y),S!=null&&x.push(Pl(b,S,E)))),w)break;b=b.return}0<x.length&&(d=new p(d,v,null,n,c),f.push({event:d,listeners:x}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",d&&n!==Tv&&(v=n.relatedTarget||n.fromElement)&&(Ma(v)||v[di]))break e;if((p||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,p?(v=n.relatedTarget||n.toElement,p=l,v=v?Ma(v):null,v!==null&&(w=is(v),v!==w||v.tag!==5&&v.tag!==6)&&(v=null)):(p=null,v=l),p!==v)){if(x=Z0,S="onMouseLeave",y="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(x=t1,S="onPointerLeave",y="onPointerEnter",b="pointer"),w=p==null?d:Os(p),E=v==null?d:Os(v),d=new x(S,b+"leave",p,n,c),d.target=w,d.relatedTarget=E,S=null,Ma(c)===l&&(x=new x(y,b+"enter",v,n,c),x.target=E,x.relatedTarget=w,S=x),w=S,p&&v)t:{for(x=p,y=v,b=0,E=x;E;E=vs(E))b++;for(E=0,S=y;S;S=vs(S))E++;for(;0<b-E;)x=vs(x),b--;for(;0<E-b;)y=vs(y),E--;for(;b--;){if(x===y||y!==null&&x===y.alternate)break t;x=vs(x),y=vs(y)}x=null}else x=null;p!==null&&d1(f,d,p,x,!1),v!==null&&w!==null&&d1(f,w,v,x,!0)}}e:{if(d=l?Os(l):window,p=d.nodeName&&d.nodeName.toLowerCase(),p==="select"||p==="input"&&d.type==="file")var R=HT;else if(o1(d))if(n2)R=KT;else{R=GT;var k=VT}else(p=d.nodeName)&&p.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(R=qT);if(R&&(R=R(e,l))){t2(f,R,n,c);break e}k&&k(e,d,l),e==="focusout"&&(k=d._wrapperState)&&k.controlled&&d.type==="number"&&Cv(d,"number",d.value)}switch(k=l?Os(l):window,e){case"focusin":(o1(k)||k.contentEditable==="true")&&(Ps=k,Ov=l,dl=null);break;case"focusout":dl=Ov=Ps=null;break;case"mousedown":Mv=!0;break;case"contextmenu":case"mouseup":case"dragend":Mv=!1,l1(f,n,c);break;case"selectionchange":if(QT)break;case"keydown":case"keyup":l1(f,n,c)}var m;if(yg)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else As?Zb(e,n)&&(P="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(Jb&&n.locale!=="ko"&&(As||P!=="onCompositionStart"?P==="onCompositionEnd"&&As&&(m=Qb()):($i=c,vg="value"in $i?$i.value:$i.textContent,As=!0)),k=jf(l,P),0<k.length&&(P=new e1(P,e,null,n,c),f.push({event:P,listeners:k}),m?P.data=m:(m=e2(n),m!==null&&(P.data=m)))),(m=jT?WT(e,n):zT(e,n))&&(l=jf(l,"onBeforeInput"),0<l.length&&(c=new e1("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=m))}d2(f,t)})}function Pl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function jf(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,i=o.stateNode;o.tag===5&&i!==null&&(o=i,i=kl(e,n),i!=null&&r.unshift(Pl(e,i,o)),i=kl(e,t),i!=null&&r.push(Pl(e,i,o))),e=e.return}return r}function vs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function d1(e,t,n,r,o){for(var i=t._reactName,a=[];n!==null&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(u!==null&&u===r)break;s.tag===5&&l!==null&&(s=l,o?(u=kl(n,i),u!=null&&a.unshift(Pl(n,u,s))):o||(u=kl(n,i),u!=null&&a.push(Pl(n,u,s)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var tI=/\r\n?/g,nI=/\u0000|\uFFFD/g;function h1(e){return(typeof e=="string"?e:""+e).replace(tI,`
`).replace(nI,"")}function zc(e,t,n){if(t=h1(t),h1(e)!==t&&n)throw Error(ye(425))}function Wf(){}var Lv=null,Bv=null;function jv(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Wv=typeof setTimeout=="function"?setTimeout:void 0,rI=typeof clearTimeout=="function"?clearTimeout:void 0,p1=typeof Promise=="function"?Promise:void 0,oI=typeof queueMicrotask=="function"?queueMicrotask:typeof p1<"u"?function(e){return p1.resolve(null).then(e).catch(iI)}:Wv;function iI(e){setTimeout(function(){throw e})}function up(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),Il(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);Il(t)}function Ji(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function v1(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Eu=Math.random().toString(36).slice(2),Ao="__reactFiber$"+Eu,Fl="__reactProps$"+Eu,di="__reactContainer$"+Eu,zv="__reactEvents$"+Eu,aI="__reactListeners$"+Eu,sI="__reactHandles$"+Eu;function Ma(e){var t=e[Ao];if(t)return t;for(var n=e.parentNode;n;){if(t=n[di]||n[Ao]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=v1(e);e!==null;){if(n=e[Ao])return n;e=v1(e)}return t}e=n,n=e.parentNode}return null}function nc(e){return e=e[Ao]||e[di],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Os(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ye(33))}function zd(e){return e[Fl]||null}var Uv=[],Ms=-1;function fa(e){return{current:e}}function zt(e){0>Ms||(e.current=Uv[Ms],Uv[Ms]=null,Ms--)}function Mt(e,t){Ms++,Uv[Ms]=e.current,e.current=t}var ua={},Jn=fa(ua),wr=fa(!1),Qa=ua;function iu(e,t){var n=e.type.contextTypes;if(!n)return ua;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},i;for(i in n)o[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function br(e){return e=e.childContextTypes,e!=null}function zf(){zt(wr),zt(Jn)}function m1(e,t,n){if(Jn.current!==ua)throw Error(ye(168));Mt(Jn,t),Mt(wr,n)}function p2(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(ye(108,VR(e)||"Unknown",o));return Xt({},n,r)}function Uf(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ua,Qa=Jn.current,Mt(Jn,e),Mt(wr,wr.current),!0}function g1(e,t,n){var r=e.stateNode;if(!r)throw Error(ye(169));n?(e=p2(e,t,Qa),r.__reactInternalMemoizedMergedChildContext=e,zt(wr),zt(Jn),Mt(Jn,e)):zt(wr),Mt(wr,n)}var oi=null,Ud=!1,lp=!1;function v2(e){oi===null?oi=[e]:oi.push(e)}function uI(e){Ud=!0,v2(e)}function da(){if(!lp&&oi!==null){lp=!0;var e=0,t=Nt;try{var n=oi;for(Nt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}oi=null,Ud=!1}catch(o){throw oi!==null&&(oi=oi.slice(e+1)),Wb(fg,da),o}finally{Nt=t,lp=!1}}return null}var Ls=[],Bs=0,$f=null,Hf=0,$r=[],Hr=0,Ja=null,ai=1,si="";function Ta(e,t){Ls[Bs++]=Hf,Ls[Bs++]=$f,$f=e,Hf=t}function m2(e,t,n){$r[Hr++]=ai,$r[Hr++]=si,$r[Hr++]=Ja,Ja=e;var r=ai;e=si;var o=32-co(r)-1;r&=~(1<<o),n+=1;var i=32-co(t)+o;if(30<i){var a=o-o%5;i=(r&(1<<a)-1).toString(32),r>>=a,o-=a,ai=1<<32-co(t)+o|n<<o|r,si=i+e}else ai=1<<i|n<<o|r,si=e}function wg(e){e.return!==null&&(Ta(e,1),m2(e,1,0))}function bg(e){for(;e===$f;)$f=Ls[--Bs],Ls[Bs]=null,Hf=Ls[--Bs],Ls[Bs]=null;for(;e===Ja;)Ja=$r[--Hr],$r[Hr]=null,si=$r[--Hr],$r[Hr]=null,ai=$r[--Hr],$r[Hr]=null}var Fr=null,Ir=null,Ht=!1,so=null;function g2(e,t){var n=qr(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function y1(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Fr=e,Ir=Ji(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Fr=e,Ir=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ja!==null?{id:ai,overflow:si}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=qr(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Fr=e,Ir=null,!0):!1;default:return!1}}function $v(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Hv(e){if(Ht){var t=Ir;if(t){var n=t;if(!y1(e,t)){if($v(e))throw Error(ye(418));t=Ji(n.nextSibling);var r=Fr;t&&y1(e,t)?g2(r,n):(e.flags=e.flags&-4097|2,Ht=!1,Fr=e)}}else{if($v(e))throw Error(ye(418));e.flags=e.flags&-4097|2,Ht=!1,Fr=e}}}function x1(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Fr=e}function Uc(e){if(e!==Fr)return!1;if(!Ht)return x1(e),Ht=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!jv(e.type,e.memoizedProps)),t&&(t=Ir)){if($v(e))throw y2(),Error(ye(418));for(;t;)g2(e,t),t=Ji(t.nextSibling)}if(x1(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ye(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ir=Ji(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ir=null}}else Ir=Fr?Ji(e.stateNode.nextSibling):null;return!0}function y2(){for(var e=Ir;e;)e=Ji(e.nextSibling)}function au(){Ir=Fr=null,Ht=!1}function Eg(e){so===null?so=[e]:so.push(e)}var lI=gi.ReactCurrentBatchConfig;function oo(e,t){if(e&&e.defaultProps){t=Xt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var Vf=fa(null),Gf=null,js=null,Cg=null;function Sg(){Cg=js=Gf=null}function _g(e){var t=Vf.current;zt(Vf),e._currentValue=t}function Vv(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ks(e,t){Gf=e,Cg=js=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(xr=!0),e.firstContext=null)}function Qr(e){var t=e._currentValue;if(Cg!==e)if(e={context:e,memoizedValue:t,next:null},js===null){if(Gf===null)throw Error(ye(308));js=e,Gf.dependencies={lanes:0,firstContext:e}}else js=js.next=e;return t}var La=null;function kg(e){La===null?La=[e]:La.push(e)}function x2(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,kg(t)):(n.next=o.next,o.next=n),t.interleaved=n,hi(e,r)}function hi(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Li=!1;function Rg(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function w2(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ui(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Zi(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,kt&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,hi(e,n)}return o=r.interleaved,o===null?(t.next=t,kg(r)):(t.next=o.next,o.next=t),r.interleaved=t,hi(e,n)}function xf(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,dg(e,n)}}function w1(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?o=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?o=i=t:i=i.next=t}else o=i=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function qf(e,t,n,r){var o=e.updateQueue;Li=!1;var i=o.firstBaseUpdate,a=o.lastBaseUpdate,s=o.shared.pending;if(s!==null){o.shared.pending=null;var u=s,l=u.next;u.next=null,a===null?i=l:a.next=l,a=u;var c=e.alternate;c!==null&&(c=c.updateQueue,s=c.lastBaseUpdate,s!==a&&(s===null?c.firstBaseUpdate=l:s.next=l,c.lastBaseUpdate=u))}if(i!==null){var f=o.baseState;a=0,c=l=u=null,s=i;do{var d=s.lane,p=s.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var v=e,x=s;switch(d=t,p=n,x.tag){case 1:if(v=x.payload,typeof v=="function"){f=v.call(p,f,d);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=x.payload,d=typeof v=="function"?v.call(p,f,d):v,d==null)break e;f=Xt({},f,d);break e;case 2:Li=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,d=o.effects,d===null?o.effects=[s]:d.push(s))}else p={eventTime:p,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},c===null?(l=c=p,u=f):c=c.next=p,a|=d;if(s=s.next,s===null){if(s=o.shared.pending,s===null)break;d=s,s=d.next,d.next=null,o.lastBaseUpdate=d,o.shared.pending=null}}while(!0);if(c===null&&(u=f),o.baseState=u,o.firstBaseUpdate=l,o.lastBaseUpdate=c,t=o.shared.interleaved,t!==null){o=t;do a|=o.lane,o=o.next;while(o!==t)}else i===null&&(o.shared.lanes=0);es|=a,e.lanes=a,e.memoizedState=f}}function b1(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(ye(191,o));o.call(r)}}}var b2=new xb.Component().refs;function Gv(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Xt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var $d={isMounted:function(e){return(e=e._reactInternals)?is(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=sr(),o=ta(e),i=ui(r,o);i.payload=t,n!=null&&(i.callback=n),t=Zi(e,i,o),t!==null&&(fo(t,e,o,r),xf(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=sr(),o=ta(e),i=ui(r,o);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Zi(e,i,o),t!==null&&(fo(t,e,o,r),xf(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=sr(),r=ta(e),o=ui(n,r);o.tag=2,t!=null&&(o.callback=t),t=Zi(e,o,r),t!==null&&(fo(t,e,r,n),xf(t,e,r))}};function E1(e,t,n,r,o,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,a):t.prototype&&t.prototype.isPureReactComponent?!Nl(n,r)||!Nl(o,i):!0}function E2(e,t,n){var r=!1,o=ua,i=t.contextType;return typeof i=="object"&&i!==null?i=Qr(i):(o=br(t)?Qa:Jn.current,r=t.contextTypes,i=(r=r!=null)?iu(e,o):ua),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=$d,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function C1(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&$d.enqueueReplaceState(t,t.state,null)}function qv(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs=b2,Rg(e);var i=t.contextType;typeof i=="object"&&i!==null?o.context=Qr(i):(i=br(t)?Qa:Jn.current,o.context=iu(e,i)),o.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Gv(e,t,i,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&$d.enqueueReplaceState(o,o.state,null),qf(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function $u(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ye(309));var r=n.stateNode}if(!r)throw Error(ye(147,e));var o=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var s=o.refs;s===b2&&(s=o.refs={}),a===null?delete s[i]:s[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(ye(284));if(!n._owner)throw Error(ye(290,e))}return e}function $c(e,t){throw e=Object.prototype.toString.call(t),Error(ye(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function S1(e){var t=e._init;return t(e._payload)}function C2(e){function t(y,b){if(e){var E=y.deletions;E===null?(y.deletions=[b],y.flags|=16):E.push(b)}}function n(y,b){if(!e)return null;for(;b!==null;)t(y,b),b=b.sibling;return null}function r(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function o(y,b){return y=na(y,b),y.index=0,y.sibling=null,y}function i(y,b,E){return y.index=E,e?(E=y.alternate,E!==null?(E=E.index,E<b?(y.flags|=2,b):E):(y.flags|=2,b)):(y.flags|=1048576,b)}function a(y){return e&&y.alternate===null&&(y.flags|=2),y}function s(y,b,E,S){return b===null||b.tag!==6?(b=mp(E,y.mode,S),b.return=y,b):(b=o(b,E),b.return=y,b)}function u(y,b,E,S){var R=E.type;return R===Ns?c(y,b,E.props.children,S,E.key):b!==null&&(b.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Mi&&S1(R)===b.type)?(S=o(b,E.props),S.ref=$u(y,b,E),S.return=y,S):(S=_f(E.type,E.key,E.props,null,y.mode,S),S.ref=$u(y,b,E),S.return=y,S)}function l(y,b,E,S){return b===null||b.tag!==4||b.stateNode.containerInfo!==E.containerInfo||b.stateNode.implementation!==E.implementation?(b=gp(E,y.mode,S),b.return=y,b):(b=o(b,E.children||[]),b.return=y,b)}function c(y,b,E,S,R){return b===null||b.tag!==7?(b=Va(E,y.mode,S,R),b.return=y,b):(b=o(b,E),b.return=y,b)}function f(y,b,E){if(typeof b=="string"&&b!==""||typeof b=="number")return b=mp(""+b,y.mode,E),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ac:return E=_f(b.type,b.key,b.props,null,y.mode,E),E.ref=$u(y,null,b),E.return=y,E;case Ds:return b=gp(b,y.mode,E),b.return=y,b;case Mi:var S=b._init;return f(y,S(b._payload),E)}if(ol(b)||Bu(b))return b=Va(b,y.mode,E,null),b.return=y,b;$c(y,b)}return null}function d(y,b,E,S){var R=b!==null?b.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return R!==null?null:s(y,b,""+E,S);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Ac:return E.key===R?u(y,b,E,S):null;case Ds:return E.key===R?l(y,b,E,S):null;case Mi:return R=E._init,d(y,b,R(E._payload),S)}if(ol(E)||Bu(E))return R!==null?null:c(y,b,E,S,null);$c(y,E)}return null}function p(y,b,E,S,R){if(typeof S=="string"&&S!==""||typeof S=="number")return y=y.get(E)||null,s(b,y,""+S,R);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ac:return y=y.get(S.key===null?E:S.key)||null,u(b,y,S,R);case Ds:return y=y.get(S.key===null?E:S.key)||null,l(b,y,S,R);case Mi:var k=S._init;return p(y,b,E,k(S._payload),R)}if(ol(S)||Bu(S))return y=y.get(E)||null,c(b,y,S,R,null);$c(b,S)}return null}function v(y,b,E,S){for(var R=null,k=null,m=b,P=b=0,D=null;m!==null&&P<E.length;P++){m.index>P?(D=m,m=null):D=m.sibling;var N=d(y,m,E[P],S);if(N===null){m===null&&(m=D);break}e&&m&&N.alternate===null&&t(y,m),b=i(N,b,P),k===null?R=N:k.sibling=N,k=N,m=D}if(P===E.length)return n(y,m),Ht&&Ta(y,P),R;if(m===null){for(;P<E.length;P++)m=f(y,E[P],S),m!==null&&(b=i(m,b,P),k===null?R=m:k.sibling=m,k=m);return Ht&&Ta(y,P),R}for(m=r(y,m);P<E.length;P++)D=p(m,y,P,E[P],S),D!==null&&(e&&D.alternate!==null&&m.delete(D.key===null?P:D.key),b=i(D,b,P),k===null?R=D:k.sibling=D,k=D);return e&&m.forEach(function(B){return t(y,B)}),Ht&&Ta(y,P),R}function x(y,b,E,S){var R=Bu(E);if(typeof R!="function")throw Error(ye(150));if(E=R.call(E),E==null)throw Error(ye(151));for(var k=R=null,m=b,P=b=0,D=null,N=E.next();m!==null&&!N.done;P++,N=E.next()){m.index>P?(D=m,m=null):D=m.sibling;var B=d(y,m,N.value,S);if(B===null){m===null&&(m=D);break}e&&m&&B.alternate===null&&t(y,m),b=i(B,b,P),k===null?R=B:k.sibling=B,k=B,m=D}if(N.done)return n(y,m),Ht&&Ta(y,P),R;if(m===null){for(;!N.done;P++,N=E.next())N=f(y,N.value,S),N!==null&&(b=i(N,b,P),k===null?R=N:k.sibling=N,k=N);return Ht&&Ta(y,P),R}for(m=r(y,m);!N.done;P++,N=E.next())N=p(m,y,P,N.value,S),N!==null&&(e&&N.alternate!==null&&m.delete(N.key===null?P:N.key),b=i(N,b,P),k===null?R=N:k.sibling=N,k=N);return e&&m.forEach(function(z){return t(y,z)}),Ht&&Ta(y,P),R}function w(y,b,E,S){if(typeof E=="object"&&E!==null&&E.type===Ns&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Ac:e:{for(var R=E.key,k=b;k!==null;){if(k.key===R){if(R=E.type,R===Ns){if(k.tag===7){n(y,k.sibling),b=o(k,E.props.children),b.return=y,y=b;break e}}else if(k.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Mi&&S1(R)===k.type){n(y,k.sibling),b=o(k,E.props),b.ref=$u(y,k,E),b.return=y,y=b;break e}n(y,k);break}else t(y,k);k=k.sibling}E.type===Ns?(b=Va(E.props.children,y.mode,S,E.key),b.return=y,y=b):(S=_f(E.type,E.key,E.props,null,y.mode,S),S.ref=$u(y,b,E),S.return=y,y=S)}return a(y);case Ds:e:{for(k=E.key;b!==null;){if(b.key===k)if(b.tag===4&&b.stateNode.containerInfo===E.containerInfo&&b.stateNode.implementation===E.implementation){n(y,b.sibling),b=o(b,E.children||[]),b.return=y,y=b;break e}else{n(y,b);break}else t(y,b);b=b.sibling}b=gp(E,y.mode,S),b.return=y,y=b}return a(y);case Mi:return k=E._init,w(y,b,k(E._payload),S)}if(ol(E))return v(y,b,E,S);if(Bu(E))return x(y,b,E,S);$c(y,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,b!==null&&b.tag===6?(n(y,b.sibling),b=o(b,E),b.return=y,y=b):(n(y,b),b=mp(E,y.mode,S),b.return=y,y=b),a(y)):n(y,b)}return w}var su=C2(!0),S2=C2(!1),rc={},Wo=fa(rc),Ol=fa(rc),Ml=fa(rc);function Ba(e){if(e===rc)throw Error(ye(174));return e}function Tg(e,t){switch(Mt(Ml,t),Mt(Ol,e),Mt(Wo,rc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:_v(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=_v(t,e)}zt(Wo),Mt(Wo,t)}function uu(){zt(Wo),zt(Ol),zt(Ml)}function _2(e){Ba(Ml.current);var t=Ba(Wo.current),n=_v(t,e.type);t!==n&&(Mt(Ol,e),Mt(Wo,n))}function Ig(e){Ol.current===e&&(zt(Wo),zt(Ol))}var Vt=fa(0);function Kf(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var cp=[];function Dg(){for(var e=0;e<cp.length;e++)cp[e]._workInProgressVersionPrimary=null;cp.length=0}var wf=gi.ReactCurrentDispatcher,fp=gi.ReactCurrentBatchConfig,Za=0,Kt=null,xn=null,In=null,Xf=!1,hl=!1,Ll=0,cI=0;function Hn(){throw Error(ye(321))}function Ng(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!po(e[n],t[n]))return!1;return!0}function Ag(e,t,n,r,o,i){if(Za=i,Kt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,wf.current=e===null||e.memoizedState===null?pI:vI,e=n(r,o),hl){i=0;do{if(hl=!1,Ll=0,25<=i)throw Error(ye(301));i+=1,In=xn=null,t.updateQueue=null,wf.current=mI,e=n(r,o)}while(hl)}if(wf.current=Yf,t=xn!==null&&xn.next!==null,Za=0,In=xn=Kt=null,Xf=!1,t)throw Error(ye(300));return e}function Pg(){var e=Ll!==0;return Ll=0,e}function Ro(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return In===null?Kt.memoizedState=In=e:In=In.next=e,In}function Jr(){if(xn===null){var e=Kt.alternate;e=e!==null?e.memoizedState:null}else e=xn.next;var t=In===null?Kt.memoizedState:In.next;if(t!==null)In=t,xn=e;else{if(e===null)throw Error(ye(310));xn=e,e={memoizedState:xn.memoizedState,baseState:xn.baseState,baseQueue:xn.baseQueue,queue:xn.queue,next:null},In===null?Kt.memoizedState=In=e:In=In.next=e}return In}function Bl(e,t){return typeof t=="function"?t(e):t}function dp(e){var t=Jr(),n=t.queue;if(n===null)throw Error(ye(311));n.lastRenderedReducer=e;var r=xn,o=r.baseQueue,i=n.pending;if(i!==null){if(o!==null){var a=o.next;o.next=i.next,i.next=a}r.baseQueue=o=i,n.pending=null}if(o!==null){i=o.next,r=r.baseState;var s=a=null,u=null,l=i;do{var c=l.lane;if((Za&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(s=u=f,a=r):u=u.next=f,Kt.lanes|=c,es|=c}l=l.next}while(l!==null&&l!==i);u===null?a=r:u.next=s,po(r,t.memoizedState)||(xr=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do i=o.lane,Kt.lanes|=i,es|=i,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function hp(e){var t=Jr(),n=t.queue;if(n===null)throw Error(ye(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,i=t.memoizedState;if(o!==null){n.pending=null;var a=o=o.next;do i=e(i,a.action),a=a.next;while(a!==o);po(i,t.memoizedState)||(xr=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function k2(){}function R2(e,t){var n=Kt,r=Jr(),o=t(),i=!po(r.memoizedState,o);if(i&&(r.memoizedState=o,xr=!0),r=r.queue,Fg(D2.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||In!==null&&In.memoizedState.tag&1){if(n.flags|=2048,jl(9,I2.bind(null,n,r,o,t),void 0,null),Dn===null)throw Error(ye(349));Za&30||T2(n,t,o)}return o}function T2(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Kt.updateQueue,t===null?(t={lastEffect:null,stores:null},Kt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function I2(e,t,n,r){t.value=n,t.getSnapshot=r,N2(t)&&A2(e)}function D2(e,t,n){return n(function(){N2(t)&&A2(e)})}function N2(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!po(e,n)}catch{return!0}}function A2(e){var t=hi(e,1);t!==null&&fo(t,e,1,-1)}function _1(e){var t=Ro();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bl,lastRenderedState:e},t.queue=e,e=e.dispatch=hI.bind(null,Kt,e),[t.memoizedState,e]}function jl(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Kt.updateQueue,t===null?(t={lastEffect:null,stores:null},Kt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function P2(){return Jr().memoizedState}function bf(e,t,n,r){var o=Ro();Kt.flags|=e,o.memoizedState=jl(1|t,n,void 0,r===void 0?null:r)}function Hd(e,t,n,r){var o=Jr();r=r===void 0?null:r;var i=void 0;if(xn!==null){var a=xn.memoizedState;if(i=a.destroy,r!==null&&Ng(r,a.deps)){o.memoizedState=jl(t,n,i,r);return}}Kt.flags|=e,o.memoizedState=jl(1|t,n,i,r)}function k1(e,t){return bf(8390656,8,e,t)}function Fg(e,t){return Hd(2048,8,e,t)}function F2(e,t){return Hd(4,2,e,t)}function O2(e,t){return Hd(4,4,e,t)}function M2(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function L2(e,t,n){return n=n!=null?n.concat([e]):null,Hd(4,4,M2.bind(null,t,e),n)}function Og(){}function B2(e,t){var n=Jr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ng(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function j2(e,t){var n=Jr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ng(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function W2(e,t,n){return Za&21?(po(n,t)||(n=$b(),Kt.lanes|=n,es|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,xr=!0),e.memoizedState=n)}function fI(e,t){var n=Nt;Nt=n!==0&&4>n?n:4,e(!0);var r=fp.transition;fp.transition={};try{e(!1),t()}finally{Nt=n,fp.transition=r}}function z2(){return Jr().memoizedState}function dI(e,t,n){var r=ta(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},U2(e))$2(t,n);else if(n=x2(e,t,n,r),n!==null){var o=sr();fo(n,e,r,o),H2(n,t,r)}}function hI(e,t,n){var r=ta(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(U2(e))$2(t,o);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,s=i(a,n);if(o.hasEagerState=!0,o.eagerState=s,po(s,a)){var u=t.interleaved;u===null?(o.next=o,kg(t)):(o.next=u.next,u.next=o),t.interleaved=o;return}}catch{}finally{}n=x2(e,t,o,r),n!==null&&(o=sr(),fo(n,e,r,o),H2(n,t,r))}}function U2(e){var t=e.alternate;return e===Kt||t!==null&&t===Kt}function $2(e,t){hl=Xf=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function H2(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,dg(e,n)}}var Yf={readContext:Qr,useCallback:Hn,useContext:Hn,useEffect:Hn,useImperativeHandle:Hn,useInsertionEffect:Hn,useLayoutEffect:Hn,useMemo:Hn,useReducer:Hn,useRef:Hn,useState:Hn,useDebugValue:Hn,useDeferredValue:Hn,useTransition:Hn,useMutableSource:Hn,useSyncExternalStore:Hn,useId:Hn,unstable_isNewReconciler:!1},pI={readContext:Qr,useCallback:function(e,t){return Ro().memoizedState=[e,t===void 0?null:t],e},useContext:Qr,useEffect:k1,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,bf(4194308,4,M2.bind(null,t,e),n)},useLayoutEffect:function(e,t){return bf(4194308,4,e,t)},useInsertionEffect:function(e,t){return bf(4,2,e,t)},useMemo:function(e,t){var n=Ro();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ro();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=dI.bind(null,Kt,e),[r.memoizedState,e]},useRef:function(e){var t=Ro();return e={current:e},t.memoizedState=e},useState:_1,useDebugValue:Og,useDeferredValue:function(e){return Ro().memoizedState=e},useTransition:function(){var e=_1(!1),t=e[0];return e=fI.bind(null,e[1]),Ro().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Kt,o=Ro();if(Ht){if(n===void 0)throw Error(ye(407));n=n()}else{if(n=t(),Dn===null)throw Error(ye(349));Za&30||T2(r,t,n)}o.memoizedState=n;var i={value:n,getSnapshot:t};return o.queue=i,k1(D2.bind(null,r,i,e),[e]),r.flags|=2048,jl(9,I2.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Ro(),t=Dn.identifierPrefix;if(Ht){var n=si,r=ai;n=(r&~(1<<32-co(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ll++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=cI++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},vI={readContext:Qr,useCallback:B2,useContext:Qr,useEffect:Fg,useImperativeHandle:L2,useInsertionEffect:F2,useLayoutEffect:O2,useMemo:j2,useReducer:dp,useRef:P2,useState:function(){return dp(Bl)},useDebugValue:Og,useDeferredValue:function(e){var t=Jr();return W2(t,xn.memoizedState,e)},useTransition:function(){var e=dp(Bl)[0],t=Jr().memoizedState;return[e,t]},useMutableSource:k2,useSyncExternalStore:R2,useId:z2,unstable_isNewReconciler:!1},mI={readContext:Qr,useCallback:B2,useContext:Qr,useEffect:Fg,useImperativeHandle:L2,useInsertionEffect:F2,useLayoutEffect:O2,useMemo:j2,useReducer:hp,useRef:P2,useState:function(){return hp(Bl)},useDebugValue:Og,useDeferredValue:function(e){var t=Jr();return xn===null?t.memoizedState=e:W2(t,xn.memoizedState,e)},useTransition:function(){var e=hp(Bl)[0],t=Jr().memoizedState;return[e,t]},useMutableSource:k2,useSyncExternalStore:R2,useId:z2,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do n+=HR(r),r=r.return;while(r);var o=n}catch(i){o=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:o,digest:null}}function pp(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Kv(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var gI=typeof WeakMap=="function"?WeakMap:Map;function V2(e,t,n){n=ui(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Jf||(Jf=!0,om=r),Kv(e,t)},n}function G2(e,t,n){n=ui(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){Kv(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Kv(e,t),typeof r!="function"&&(ea===null?ea=new Set([this]):ea.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function R1(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new gI;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=NI.bind(null,e,t,n),t.then(e,e))}function T1(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function I1(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=ui(-1,1),t.tag=2,Zi(n,t,1))),n.lanes|=1),e)}var yI=gi.ReactCurrentOwner,xr=!1;function ir(e,t,n,r){t.child=e===null?S2(t,null,n,r):su(t,e.child,n,r)}function D1(e,t,n,r,o){n=n.render;var i=t.ref;return Ks(t,o),r=Ag(e,t,n,r,i,o),n=Pg(),e!==null&&!xr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,pi(e,t,o)):(Ht&&n&&wg(t),t.flags|=1,ir(e,t,r,o),t.child)}function N1(e,t,n,r,o){if(e===null){var i=n.type;return typeof i=="function"&&!$g(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,q2(e,t,i,r,o)):(e=_f(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&o)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Nl,n(a,r)&&e.ref===t.ref)return pi(e,t,o)}return t.flags|=1,e=na(i,r),e.ref=t.ref,e.return=t,t.child=e}function q2(e,t,n,r,o){if(e!==null){var i=e.memoizedProps;if(Nl(i,r)&&e.ref===t.ref)if(xr=!1,t.pendingProps=r=i,(e.lanes&o)!==0)e.flags&131072&&(xr=!0);else return t.lanes=e.lanes,pi(e,t,o)}return Xv(e,t,n,r,o)}function K2(e,t,n){var r=t.pendingProps,o=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Mt(zs,kr),kr|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Mt(zs,kr),kr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Mt(zs,kr),kr|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,Mt(zs,kr),kr|=r;return ir(e,t,o,n),t.child}function X2(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Xv(e,t,n,r,o){var i=br(n)?Qa:Jn.current;return i=iu(t,i),Ks(t,o),n=Ag(e,t,n,r,i,o),r=Pg(),e!==null&&!xr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,pi(e,t,o)):(Ht&&r&&wg(t),t.flags|=1,ir(e,t,n,o),t.child)}function A1(e,t,n,r,o){if(br(n)){var i=!0;Uf(t)}else i=!1;if(Ks(t,o),t.stateNode===null)Ef(e,t),E2(t,n,r),qv(t,n,r,o),r=!0;else if(e===null){var a=t.stateNode,s=t.memoizedProps;a.props=s;var u=a.context,l=n.contextType;typeof l=="object"&&l!==null?l=Qr(l):(l=br(n)?Qa:Jn.current,l=iu(t,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==r||u!==l)&&C1(t,a,r,l),Li=!1;var d=t.memoizedState;a.state=d,qf(t,r,a,o),u=t.memoizedState,s!==r||d!==u||wr.current||Li?(typeof c=="function"&&(Gv(t,n,c,r),u=t.memoizedState),(s=Li||E1(t,n,s,r,d,u,l))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=l,r=s):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,w2(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:oo(t.type,s),a.props=l,f=t.pendingProps,d=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=Qr(u):(u=br(n)?Qa:Jn.current,u=iu(t,u));var p=n.getDerivedStateFromProps;(c=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==f||d!==u)&&C1(t,a,r,u),Li=!1,d=t.memoizedState,a.state=d,qf(t,r,a,o);var v=t.memoizedState;s!==f||d!==v||wr.current||Li?(typeof p=="function"&&(Gv(t,n,p,r),v=t.memoizedState),(l=Li||E1(t,n,l,r,d,v,u)||!1)?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,v,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,v,u)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),a.props=r,a.state=v,a.context=u,r=l):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Yv(e,t,n,r,i,o)}function Yv(e,t,n,r,o,i){X2(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return o&&g1(t,n,!1),pi(e,t,i);r=t.stateNode,yI.current=t;var s=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=su(t,e.child,null,i),t.child=su(t,null,s,i)):ir(e,t,s,i),t.memoizedState=r.state,o&&g1(t,n,!0),t.child}function Y2(e){var t=e.stateNode;t.pendingContext?m1(e,t.pendingContext,t.pendingContext!==t.context):t.context&&m1(e,t.context,!1),Tg(e,t.containerInfo)}function P1(e,t,n,r,o){return au(),Eg(o),t.flags|=256,ir(e,t,n,r),t.child}var Qv={dehydrated:null,treeContext:null,retryLane:0};function Jv(e){return{baseLanes:e,cachePool:null,transitions:null}}function Q2(e,t,n){var r=t.pendingProps,o=Vt.current,i=!1,a=(t.flags&128)!==0,s;if((s=a)||(s=e!==null&&e.memoizedState===null?!1:(o&2)!==0),s?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),Mt(Vt,o&1),e===null)return Hv(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,i?(r=t.mode,i=t.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=qd(a,r,0,null),e=Va(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Jv(n),t.memoizedState=Qv,e):Mg(t,a));if(o=e.memoizedState,o!==null&&(s=o.dehydrated,s!==null))return xI(e,t,a,r,s,o,n);if(i){i=r.fallback,a=t.mode,o=e.child,s=o.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=na(o,u),r.subtreeFlags=o.subtreeFlags&14680064),s!==null?i=na(s,i):(i=Va(i,a,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,a=e.child.memoizedState,a=a===null?Jv(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~n,t.memoizedState=Qv,r}return i=e.child,e=i.sibling,r=na(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Mg(e,t){return t=qd({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Hc(e,t,n,r){return r!==null&&Eg(r),su(t,e.child,null,n),e=Mg(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function xI(e,t,n,r,o,i,a){if(n)return t.flags&256?(t.flags&=-257,r=pp(Error(ye(422))),Hc(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,o=t.mode,r=qd({mode:"visible",children:r.children},o,0,null),i=Va(i,o,a,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&su(t,e.child,null,a),t.child.memoizedState=Jv(a),t.memoizedState=Qv,i);if(!(t.mode&1))return Hc(e,t,a,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var s=r.dgst;return r=s,i=Error(ye(419)),r=pp(i,r,void 0),Hc(e,t,a,r)}if(s=(a&e.childLanes)!==0,xr||s){if(r=Dn,r!==null){switch(a&-a){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|a)?0:o,o!==0&&o!==i.retryLane&&(i.retryLane=o,hi(e,o),fo(r,e,o,-1))}return Ug(),r=pp(Error(ye(421))),Hc(e,t,a,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=AI.bind(null,e),o._reactRetry=t,null):(e=i.treeContext,Ir=Ji(o.nextSibling),Fr=t,Ht=!0,so=null,e!==null&&($r[Hr++]=ai,$r[Hr++]=si,$r[Hr++]=Ja,ai=e.id,si=e.overflow,Ja=t),t=Mg(t,r.children),t.flags|=4096,t)}function F1(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Vv(e.return,t,n)}function vp(e,t,n,r,o){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function J2(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;if(ir(e,t,r.children,n),r=Vt.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&F1(e,n,t);else if(e.tag===19)F1(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Mt(Vt,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&Kf(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),vp(t,!1,o,n,i);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Kf(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}vp(t,!0,n,null,i);break;case"together":vp(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ef(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function pi(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),es|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ye(153));if(t.child!==null){for(e=t.child,n=na(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=na(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function wI(e,t,n){switch(t.tag){case 3:Y2(t),au();break;case 5:_2(t);break;case 1:br(t.type)&&Uf(t);break;case 4:Tg(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;Mt(Vf,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Mt(Vt,Vt.current&1),t.flags|=128,null):n&t.child.childLanes?Q2(e,t,n):(Mt(Vt,Vt.current&1),e=pi(e,t,n),e!==null?e.sibling:null);Mt(Vt,Vt.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return J2(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Mt(Vt,Vt.current),r)break;return null;case 22:case 23:return t.lanes=0,K2(e,t,n)}return pi(e,t,n)}var Z2,Zv,eE,tE;Z2=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Zv=function(){};eE=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Ba(Wo.current);var i=null;switch(n){case"input":o=bv(e,o),r=bv(e,r),i=[];break;case"select":o=Xt({},o,{value:void 0}),r=Xt({},r,{value:void 0}),i=[];break;case"textarea":o=Sv(e,o),r=Sv(e,r),i=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Wf)}kv(n,r);var a;n=null;for(l in o)if(!r.hasOwnProperty(l)&&o.hasOwnProperty(l)&&o[l]!=null)if(l==="style"){var s=o[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Sl.hasOwnProperty(l)?i||(i=[]):(i=i||[]).push(l,null));for(l in r){var u=r[l];if(s=o!=null?o[l]:void 0,r.hasOwnProperty(l)&&u!==s&&(u!=null||s!=null))if(l==="style")if(s){for(a in s)!s.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&s[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(i||(i=[]),i.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,s=s?s.__html:void 0,u!=null&&s!==u&&(i=i||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(Sl.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&jt("scroll",e),i||s===u||(i=[])):(i=i||[]).push(l,u))}n&&(i=i||[]).push("style",n);var l=i;(t.updateQueue=l)&&(t.flags|=4)}};tE=function(e,t,n,r){n!==r&&(t.flags|=4)};function Hu(e,t){if(!Ht)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Vn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function bI(e,t,n){var r=t.pendingProps;switch(bg(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vn(t),null;case 1:return br(t.type)&&zf(),Vn(t),null;case 3:return r=t.stateNode,uu(),zt(wr),zt(Jn),Dg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Uc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,so!==null&&(sm(so),so=null))),Zv(e,t),Vn(t),null;case 5:Ig(t);var o=Ba(Ml.current);if(n=t.type,e!==null&&t.stateNode!=null)eE(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ye(166));return Vn(t),null}if(e=Ba(Wo.current),Uc(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Ao]=t,r[Fl]=i,e=(t.mode&1)!==0,n){case"dialog":jt("cancel",r),jt("close",r);break;case"iframe":case"object":case"embed":jt("load",r);break;case"video":case"audio":for(o=0;o<al.length;o++)jt(al[o],r);break;case"source":jt("error",r);break;case"img":case"image":case"link":jt("error",r),jt("load",r);break;case"details":jt("toggle",r);break;case"input":$0(r,i),jt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},jt("invalid",r);break;case"textarea":V0(r,i),jt("invalid",r)}kv(n,i),o=null;for(var a in i)if(i.hasOwnProperty(a)){var s=i[a];a==="children"?typeof s=="string"?r.textContent!==s&&(i.suppressHydrationWarning!==!0&&zc(r.textContent,s,e),o=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(i.suppressHydrationWarning!==!0&&zc(r.textContent,s,e),o=["children",""+s]):Sl.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&jt("scroll",r)}switch(n){case"input":Pc(r),H0(r,i,!0);break;case"textarea":Pc(r),G0(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Wf)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Tb(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Ao]=t,e[Fl]=r,Z2(e,t,!1,!1),t.stateNode=e;e:{switch(a=Rv(n,r),n){case"dialog":jt("cancel",e),jt("close",e),o=r;break;case"iframe":case"object":case"embed":jt("load",e),o=r;break;case"video":case"audio":for(o=0;o<al.length;o++)jt(al[o],e);o=r;break;case"source":jt("error",e),o=r;break;case"img":case"image":case"link":jt("error",e),jt("load",e),o=r;break;case"details":jt("toggle",e),o=r;break;case"input":$0(e,r),o=bv(e,r),jt("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=Xt({},r,{value:void 0}),jt("invalid",e);break;case"textarea":V0(e,r),o=Sv(e,r),jt("invalid",e);break;default:o=r}kv(n,o),s=o;for(i in s)if(s.hasOwnProperty(i)){var u=s[i];i==="style"?Nb(e,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Ib(e,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&_l(e,u):typeof u=="number"&&_l(e,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Sl.hasOwnProperty(i)?u!=null&&i==="onScroll"&&jt("scroll",e):u!=null&&ag(e,i,u,a))}switch(n){case"input":Pc(e),H0(e,r,!1);break;case"textarea":Pc(e),G0(e);break;case"option":r.value!=null&&e.setAttribute("value",""+sa(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Hs(e,!!r.multiple,i,!1):r.defaultValue!=null&&Hs(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Wf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Vn(t),null;case 6:if(e&&t.stateNode!=null)tE(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ye(166));if(n=Ba(Ml.current),Ba(Wo.current),Uc(t)){if(r=t.stateNode,n=t.memoizedProps,r[Ao]=t,(i=r.nodeValue!==n)&&(e=Fr,e!==null))switch(e.tag){case 3:zc(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&zc(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ao]=t,t.stateNode=r}return Vn(t),null;case 13:if(zt(Vt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ht&&Ir!==null&&t.mode&1&&!(t.flags&128))y2(),au(),t.flags|=98560,i=!1;else if(i=Uc(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(ye(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ye(317));i[Ao]=t}else au(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Vn(t),i=!1}else so!==null&&(sm(so),so=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Vt.current&1?wn===0&&(wn=3):Ug())),t.updateQueue!==null&&(t.flags|=4),Vn(t),null);case 4:return uu(),Zv(e,t),e===null&&Al(t.stateNode.containerInfo),Vn(t),null;case 10:return _g(t.type._context),Vn(t),null;case 17:return br(t.type)&&zf(),Vn(t),null;case 19:if(zt(Vt),i=t.memoizedState,i===null)return Vn(t),null;if(r=(t.flags&128)!==0,a=i.rendering,a===null)if(r)Hu(i,!1);else{if(wn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Kf(e),a!==null){for(t.flags|=128,Hu(i,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Mt(Vt,Vt.current&1|2),t.child}e=e.sibling}i.tail!==null&&cn()>cu&&(t.flags|=128,r=!0,Hu(i,!1),t.lanes=4194304)}else{if(!r)if(e=Kf(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Hu(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Ht)return Vn(t),null}else 2*cn()-i.renderingStartTime>cu&&n!==1073741824&&(t.flags|=128,r=!0,Hu(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(n=i.last,n!==null?n.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=cn(),t.sibling=null,n=Vt.current,Mt(Vt,r?n&1|2:n&1),t):(Vn(t),null);case 22:case 23:return zg(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?kr&1073741824&&(Vn(t),t.subtreeFlags&6&&(t.flags|=8192)):Vn(t),null;case 24:return null;case 25:return null}throw Error(ye(156,t.tag))}function EI(e,t){switch(bg(t),t.tag){case 1:return br(t.type)&&zf(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return uu(),zt(wr),zt(Jn),Dg(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ig(t),null;case 13:if(zt(Vt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ye(340));au()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return zt(Vt),null;case 4:return uu(),null;case 10:return _g(t.type._context),null;case 22:case 23:return zg(),null;case 24:return null;default:return null}}var Vc=!1,qn=!1,CI=typeof WeakSet=="function"?WeakSet:Set,Te=null;function Ws(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){tn(e,t,r)}else n.current=null}function em(e,t,n){try{n()}catch(r){tn(e,t,r)}}var O1=!1;function SI(e,t){if(Lv=Lf,e=i2(),xg(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,s=-1,u=-1,l=0,c=0,f=e,d=null;t:for(;;){for(var p;f!==n||o!==0&&f.nodeType!==3||(s=a+o),f!==i||r!==0&&f.nodeType!==3||(u=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(p=f.firstChild)!==null;)d=f,f=p;for(;;){if(f===e)break t;if(d===n&&++l===o&&(s=a),d===i&&++c===r&&(u=a),(p=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=p}n=s===-1||u===-1?null:{start:s,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Bv={focusedElem:e,selectionRange:n},Lf=!1,Te=t;Te!==null;)if(t=Te,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Te=e;else for(;Te!==null;){t=Te;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var x=v.memoizedProps,w=v.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?x:oo(t.type,x),w);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var E=t.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ye(163))}}catch(S){tn(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,Te=e;break}Te=t.return}return v=O1,O1=!1,v}function pl(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var i=o.destroy;o.destroy=void 0,i!==void 0&&em(t,n,i)}o=o.next}while(o!==r)}}function Vd(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function tm(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function nE(e){var t=e.alternate;t!==null&&(e.alternate=null,nE(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ao],delete t[Fl],delete t[zv],delete t[aI],delete t[sI])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function rE(e){return e.tag===5||e.tag===3||e.tag===4}function M1(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||rE(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function nm(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Wf));else if(r!==4&&(e=e.child,e!==null))for(nm(e,t,n),e=e.sibling;e!==null;)nm(e,t,n),e=e.sibling}function rm(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(rm(e,t,n),e=e.sibling;e!==null;)rm(e,t,n),e=e.sibling}var Ln=null,io=!1;function Ni(e,t,n){for(n=n.child;n!==null;)oE(e,t,n),n=n.sibling}function oE(e,t,n){if(jo&&typeof jo.onCommitFiberUnmount=="function")try{jo.onCommitFiberUnmount(Ld,n)}catch{}switch(n.tag){case 5:qn||Ws(n,t);case 6:var r=Ln,o=io;Ln=null,Ni(e,t,n),Ln=r,io=o,Ln!==null&&(io?(e=Ln,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ln.removeChild(n.stateNode));break;case 18:Ln!==null&&(io?(e=Ln,n=n.stateNode,e.nodeType===8?up(e.parentNode,n):e.nodeType===1&&up(e,n),Il(e)):up(Ln,n.stateNode));break;case 4:r=Ln,o=io,Ln=n.stateNode.containerInfo,io=!0,Ni(e,t,n),Ln=r,io=o;break;case 0:case 11:case 14:case 15:if(!qn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var i=o,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&em(n,t,a),o=o.next}while(o!==r)}Ni(e,t,n);break;case 1:if(!qn&&(Ws(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){tn(n,t,s)}Ni(e,t,n);break;case 21:Ni(e,t,n);break;case 22:n.mode&1?(qn=(r=qn)||n.memoizedState!==null,Ni(e,t,n),qn=r):Ni(e,t,n);break;default:Ni(e,t,n)}}function L1(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new CI),t.forEach(function(r){var o=PI.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function ro(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var i=e,a=t,s=a;e:for(;s!==null;){switch(s.tag){case 5:Ln=s.stateNode,io=!1;break e;case 3:Ln=s.stateNode.containerInfo,io=!0;break e;case 4:Ln=s.stateNode.containerInfo,io=!0;break e}s=s.return}if(Ln===null)throw Error(ye(160));oE(i,a,o),Ln=null,io=!1;var u=o.alternate;u!==null&&(u.return=null),o.return=null}catch(l){tn(o,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)iE(t,e),t=t.sibling}function iE(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ro(t,e),So(e),r&4){try{pl(3,e,e.return),Vd(3,e)}catch(x){tn(e,e.return,x)}try{pl(5,e,e.return)}catch(x){tn(e,e.return,x)}}break;case 1:ro(t,e),So(e),r&512&&n!==null&&Ws(n,n.return);break;case 5:if(ro(t,e),So(e),r&512&&n!==null&&Ws(n,n.return),e.flags&32){var o=e.stateNode;try{_l(o,"")}catch(x){tn(e,e.return,x)}}if(r&4&&(o=e.stateNode,o!=null)){var i=e.memoizedProps,a=n!==null?n.memoizedProps:i,s=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{s==="input"&&i.type==="radio"&&i.name!=null&&kb(o,i),Rv(s,a);var l=Rv(s,i);for(a=0;a<u.length;a+=2){var c=u[a],f=u[a+1];c==="style"?Nb(o,f):c==="dangerouslySetInnerHTML"?Ib(o,f):c==="children"?_l(o,f):ag(o,c,f,l)}switch(s){case"input":Ev(o,i);break;case"textarea":Rb(o,i);break;case"select":var d=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?Hs(o,!!i.multiple,p,!1):d!==!!i.multiple&&(i.defaultValue!=null?Hs(o,!!i.multiple,i.defaultValue,!0):Hs(o,!!i.multiple,i.multiple?[]:"",!1))}o[Fl]=i}catch(x){tn(e,e.return,x)}}break;case 6:if(ro(t,e),So(e),r&4){if(e.stateNode===null)throw Error(ye(162));o=e.stateNode,i=e.memoizedProps;try{o.nodeValue=i}catch(x){tn(e,e.return,x)}}break;case 3:if(ro(t,e),So(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Il(t.containerInfo)}catch(x){tn(e,e.return,x)}break;case 4:ro(t,e),So(e);break;case 13:ro(t,e),So(e),o=e.child,o.flags&8192&&(i=o.memoizedState!==null,o.stateNode.isHidden=i,!i||o.alternate!==null&&o.alternate.memoizedState!==null||(jg=cn())),r&4&&L1(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(qn=(l=qn)||c,ro(t,e),qn=l):ro(t,e),So(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!c&&e.mode&1)for(Te=e,c=e.child;c!==null;){for(f=Te=c;Te!==null;){switch(d=Te,p=d.child,d.tag){case 0:case 11:case 14:case 15:pl(4,d,d.return);break;case 1:Ws(d,d.return);var v=d.stateNode;if(typeof v.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(x){tn(r,n,x)}}break;case 5:Ws(d,d.return);break;case 22:if(d.memoizedState!==null){j1(f);continue}}p!==null?(p.return=d,Te=p):j1(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{o=f.stateNode,l?(i=o.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(s=f.stateNode,u=f.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,s.style.display=Db("display",a))}catch(x){tn(e,e.return,x)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(x){tn(e,e.return,x)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ro(t,e),So(e),r&4&&L1(e);break;case 21:break;default:ro(t,e),So(e)}}function So(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(rE(n)){var r=n;break e}n=n.return}throw Error(ye(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(_l(o,""),r.flags&=-33);var i=M1(e);rm(e,i,o);break;case 3:case 4:var a=r.stateNode.containerInfo,s=M1(e);nm(e,s,a);break;default:throw Error(ye(161))}}catch(u){tn(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function _I(e,t,n){Te=e,aE(e)}function aE(e,t,n){for(var r=(e.mode&1)!==0;Te!==null;){var o=Te,i=o.child;if(o.tag===22&&r){var a=o.memoizedState!==null||Vc;if(!a){var s=o.alternate,u=s!==null&&s.memoizedState!==null||qn;s=Vc;var l=qn;if(Vc=a,(qn=u)&&!l)for(Te=o;Te!==null;)a=Te,u=a.child,a.tag===22&&a.memoizedState!==null?W1(o):u!==null?(u.return=a,Te=u):W1(o);for(;i!==null;)Te=i,aE(i),i=i.sibling;Te=o,Vc=s,qn=l}B1(e)}else o.subtreeFlags&8772&&i!==null?(i.return=o,Te=i):B1(e)}}function B1(e){for(;Te!==null;){var t=Te;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:qn||Vd(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!qn)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:oo(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&b1(t,i,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}b1(t,a,n)}break;case 5:var s=t.stateNode;if(n===null&&t.flags&4){n=s;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&Il(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ye(163))}qn||t.flags&512&&tm(t)}catch(d){tn(t,t.return,d)}}if(t===e){Te=null;break}if(n=t.sibling,n!==null){n.return=t.return,Te=n;break}Te=t.return}}function j1(e){for(;Te!==null;){var t=Te;if(t===e){Te=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Te=n;break}Te=t.return}}function W1(e){for(;Te!==null;){var t=Te;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Vd(4,t)}catch(u){tn(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(u){tn(t,o,u)}}var i=t.return;try{tm(t)}catch(u){tn(t,i,u)}break;case 5:var a=t.return;try{tm(t)}catch(u){tn(t,a,u)}}}catch(u){tn(t,t.return,u)}if(t===e){Te=null;break}var s=t.sibling;if(s!==null){s.return=t.return,Te=s;break}Te=t.return}}var kI=Math.ceil,Qf=gi.ReactCurrentDispatcher,Lg=gi.ReactCurrentOwner,Xr=gi.ReactCurrentBatchConfig,kt=0,Dn=null,dn=null,zn=0,kr=0,zs=fa(0),wn=0,Wl=null,es=0,Gd=0,Bg=0,vl=null,mr=null,jg=0,cu=1/0,ri=null,Jf=!1,om=null,ea=null,Gc=!1,Hi=null,Zf=0,ml=0,im=null,Cf=-1,Sf=0;function sr(){return kt&6?cn():Cf!==-1?Cf:Cf=cn()}function ta(e){return e.mode&1?kt&2&&zn!==0?zn&-zn:lI.transition!==null?(Sf===0&&(Sf=$b()),Sf):(e=Nt,e!==0||(e=window.event,e=e===void 0?16:Yb(e.type)),e):1}function fo(e,t,n,r){if(50<ml)throw ml=0,im=null,Error(ye(185));ec(e,n,r),(!(kt&2)||e!==Dn)&&(e===Dn&&(!(kt&2)&&(Gd|=n),wn===4&&zi(e,zn)),Er(e,r),n===1&&kt===0&&!(t.mode&1)&&(cu=cn()+500,Ud&&da()))}function Er(e,t){var n=e.callbackNode;lT(e,t);var r=Mf(e,e===Dn?zn:0);if(r===0)n!==null&&X0(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&X0(n),t===1)e.tag===0?uI(z1.bind(null,e)):v2(z1.bind(null,e)),oI(function(){!(kt&6)&&da()}),n=null;else{switch(Hb(r)){case 1:n=fg;break;case 4:n=zb;break;case 16:n=Of;break;case 536870912:n=Ub;break;default:n=Of}n=pE(n,sE.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sE(e,t){if(Cf=-1,Sf=0,kt&6)throw Error(ye(327));var n=e.callbackNode;if(Xs()&&e.callbackNode!==n)return null;var r=Mf(e,e===Dn?zn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=ed(e,r);else{t=r;var o=kt;kt|=2;var i=lE();(Dn!==e||zn!==t)&&(ri=null,cu=cn()+500,Ha(e,t));do try{II();break}catch(s){uE(e,s)}while(!0);Sg(),Qf.current=i,kt=o,dn!==null?t=0:(Dn=null,zn=0,t=wn)}if(t!==0){if(t===2&&(o=Av(e),o!==0&&(r=o,t=am(e,o))),t===1)throw n=Wl,Ha(e,0),zi(e,r),Er(e,cn()),n;if(t===6)zi(e,r);else{if(o=e.current.alternate,!(r&30)&&!RI(o)&&(t=ed(e,r),t===2&&(i=Av(e),i!==0&&(r=i,t=am(e,i))),t===1))throw n=Wl,Ha(e,0),zi(e,r),Er(e,cn()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(ye(345));case 2:Ia(e,mr,ri);break;case 3:if(zi(e,r),(r&130023424)===r&&(t=jg+500-cn(),10<t)){if(Mf(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){sr(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Wv(Ia.bind(null,e,mr,ri),t);break}Ia(e,mr,ri);break;case 4:if(zi(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var a=31-co(r);i=1<<a,a=t[a],a>o&&(o=a),r&=~i}if(r=o,r=cn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kI(r/1960))-r,10<r){e.timeoutHandle=Wv(Ia.bind(null,e,mr,ri),r);break}Ia(e,mr,ri);break;case 5:Ia(e,mr,ri);break;default:throw Error(ye(329))}}}return Er(e,cn()),e.callbackNode===n?sE.bind(null,e):null}function am(e,t){var n=vl;return e.current.memoizedState.isDehydrated&&(Ha(e,t).flags|=256),e=ed(e,t),e!==2&&(t=mr,mr=n,t!==null&&sm(t)),e}function sm(e){mr===null?mr=e:mr.push.apply(mr,e)}function RI(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!po(i(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function zi(e,t){for(t&=~Bg,t&=~Gd,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-co(t),r=1<<n;e[n]=-1,t&=~r}}function z1(e){if(kt&6)throw Error(ye(327));Xs();var t=Mf(e,0);if(!(t&1))return Er(e,cn()),null;var n=ed(e,t);if(e.tag!==0&&n===2){var r=Av(e);r!==0&&(t=r,n=am(e,r))}if(n===1)throw n=Wl,Ha(e,0),zi(e,t),Er(e,cn()),n;if(n===6)throw Error(ye(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ia(e,mr,ri),Er(e,cn()),null}function Wg(e,t){var n=kt;kt|=1;try{return e(t)}finally{kt=n,kt===0&&(cu=cn()+500,Ud&&da())}}function ts(e){Hi!==null&&Hi.tag===0&&!(kt&6)&&Xs();var t=kt;kt|=1;var n=Xr.transition,r=Nt;try{if(Xr.transition=null,Nt=1,e)return e()}finally{Nt=r,Xr.transition=n,kt=t,!(kt&6)&&da()}}function zg(){kr=zs.current,zt(zs)}function Ha(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,rI(n)),dn!==null)for(n=dn.return;n!==null;){var r=n;switch(bg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&zf();break;case 3:uu(),zt(wr),zt(Jn),Dg();break;case 5:Ig(r);break;case 4:uu();break;case 13:zt(Vt);break;case 19:zt(Vt);break;case 10:_g(r.type._context);break;case 22:case 23:zg()}n=n.return}if(Dn=e,dn=e=na(e.current,null),zn=kr=t,wn=0,Wl=null,Bg=Gd=es=0,mr=vl=null,La!==null){for(t=0;t<La.length;t++)if(n=La[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=o,r.next=a}n.pending=r}La=null}return e}function uE(e,t){do{var n=dn;try{if(Sg(),wf.current=Yf,Xf){for(var r=Kt.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Xf=!1}if(Za=0,In=xn=Kt=null,hl=!1,Ll=0,Lg.current=null,n===null||n.return===null){wn=1,Wl=t,dn=null;break}e:{var i=e,a=n.return,s=n,u=t;if(t=zn,s.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=s,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=T1(a);if(p!==null){p.flags&=-257,I1(p,a,s,i,t),p.mode&1&&R1(i,l,t),t=p,u=l;var v=t.updateQueue;if(v===null){var x=new Set;x.add(u),t.updateQueue=x}else v.add(u);break e}else{if(!(t&1)){R1(i,l,t),Ug();break e}u=Error(ye(426))}}else if(Ht&&s.mode&1){var w=T1(a);if(w!==null){!(w.flags&65536)&&(w.flags|=256),I1(w,a,s,i,t),Eg(lu(u,s));break e}}i=u=lu(u,s),wn!==4&&(wn=2),vl===null?vl=[i]:vl.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var y=V2(i,u,t);w1(i,y);break e;case 1:s=u;var b=i.type,E=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(ea===null||!ea.has(E)))){i.flags|=65536,t&=-t,i.lanes|=t;var S=G2(i,s,t);w1(i,S);break e}}i=i.return}while(i!==null)}fE(n)}catch(R){t=R,dn===n&&n!==null&&(dn=n=n.return);continue}break}while(!0)}function lE(){var e=Qf.current;return Qf.current=Yf,e===null?Yf:e}function Ug(){(wn===0||wn===3||wn===2)&&(wn=4),Dn===null||!(es&268435455)&&!(Gd&268435455)||zi(Dn,zn)}function ed(e,t){var n=kt;kt|=2;var r=lE();(Dn!==e||zn!==t)&&(ri=null,Ha(e,t));do try{TI();break}catch(o){uE(e,o)}while(!0);if(Sg(),kt=n,Qf.current=r,dn!==null)throw Error(ye(261));return Dn=null,zn=0,wn}function TI(){for(;dn!==null;)cE(dn)}function II(){for(;dn!==null&&!eT();)cE(dn)}function cE(e){var t=hE(e.alternate,e,kr);e.memoizedProps=e.pendingProps,t===null?fE(e):dn=t,Lg.current=null}function fE(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=EI(n,t),n!==null){n.flags&=32767,dn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{wn=6,dn=null;return}}else if(n=bI(n,t,kr),n!==null){dn=n;return}if(t=t.sibling,t!==null){dn=t;return}dn=t=e}while(t!==null);wn===0&&(wn=5)}function Ia(e,t,n){var r=Nt,o=Xr.transition;try{Xr.transition=null,Nt=1,DI(e,t,n,r)}finally{Xr.transition=o,Nt=r}return null}function DI(e,t,n,r){do Xs();while(Hi!==null);if(kt&6)throw Error(ye(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ye(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(cT(e,i),e===Dn&&(dn=Dn=null,zn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Gc||(Gc=!0,pE(Of,function(){return Xs(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Xr.transition,Xr.transition=null;var a=Nt;Nt=1;var s=kt;kt|=4,Lg.current=null,SI(e,n),iE(n,e),YT(Bv),Lf=!!Lv,Bv=Lv=null,e.current=n,_I(n),tT(),kt=s,Nt=a,Xr.transition=i}else e.current=n;if(Gc&&(Gc=!1,Hi=e,Zf=o),i=e.pendingLanes,i===0&&(ea=null),oT(n.stateNode),Er(e,cn()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Jf)throw Jf=!1,e=om,om=null,e;return Zf&1&&e.tag!==0&&Xs(),i=e.pendingLanes,i&1?e===im?ml++:(ml=0,im=e):ml=0,da(),null}function Xs(){if(Hi!==null){var e=Hb(Zf),t=Xr.transition,n=Nt;try{if(Xr.transition=null,Nt=16>e?16:e,Hi===null)var r=!1;else{if(e=Hi,Hi=null,Zf=0,kt&6)throw Error(ye(331));var o=kt;for(kt|=4,Te=e.current;Te!==null;){var i=Te,a=i.child;if(Te.flags&16){var s=i.deletions;if(s!==null){for(var u=0;u<s.length;u++){var l=s[u];for(Te=l;Te!==null;){var c=Te;switch(c.tag){case 0:case 11:case 15:pl(8,c,i)}var f=c.child;if(f!==null)f.return=c,Te=f;else for(;Te!==null;){c=Te;var d=c.sibling,p=c.return;if(nE(c),c===l){Te=null;break}if(d!==null){d.return=p,Te=d;break}Te=p}}}var v=i.alternate;if(v!==null){var x=v.child;if(x!==null){v.child=null;do{var w=x.sibling;x.sibling=null,x=w}while(x!==null)}}Te=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,Te=a;else e:for(;Te!==null;){if(i=Te,i.flags&2048)switch(i.tag){case 0:case 11:case 15:pl(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,Te=y;break e}Te=i.return}}var b=e.current;for(Te=b;Te!==null;){a=Te;var E=a.child;if(a.subtreeFlags&2064&&E!==null)E.return=a,Te=E;else e:for(a=b;Te!==null;){if(s=Te,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:Vd(9,s)}}catch(R){tn(s,s.return,R)}if(s===a){Te=null;break e}var S=s.sibling;if(S!==null){S.return=s.return,Te=S;break e}Te=s.return}}if(kt=o,da(),jo&&typeof jo.onPostCommitFiberRoot=="function")try{jo.onPostCommitFiberRoot(Ld,e)}catch{}r=!0}return r}finally{Nt=n,Xr.transition=t}}return!1}function U1(e,t,n){t=lu(n,t),t=V2(e,t,1),e=Zi(e,t,1),t=sr(),e!==null&&(ec(e,1,t),Er(e,t))}function tn(e,t,n){if(e.tag===3)U1(e,e,n);else for(;t!==null;){if(t.tag===3){U1(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ea===null||!ea.has(r))){e=lu(n,e),e=G2(t,e,1),t=Zi(t,e,1),e=sr(),t!==null&&(ec(t,1,e),Er(t,e));break}}t=t.return}}function NI(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=sr(),e.pingedLanes|=e.suspendedLanes&n,Dn===e&&(zn&n)===n&&(wn===4||wn===3&&(zn&130023424)===zn&&500>cn()-jg?Ha(e,0):Bg|=n),Er(e,t)}function dE(e,t){t===0&&(e.mode&1?(t=Mc,Mc<<=1,!(Mc&130023424)&&(Mc=4194304)):t=1);var n=sr();e=hi(e,t),e!==null&&(ec(e,t,n),Er(e,n))}function AI(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),dE(e,n)}function PI(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ye(314))}r!==null&&r.delete(t),dE(e,n)}var hE;hE=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||wr.current)xr=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return xr=!1,wI(e,t,n);xr=!!(e.flags&131072)}else xr=!1,Ht&&t.flags&1048576&&m2(t,Hf,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ef(e,t),e=t.pendingProps;var o=iu(t,Jn.current);Ks(t,n),o=Ag(null,t,r,e,o,n);var i=Pg();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,br(r)?(i=!0,Uf(t)):i=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Rg(t),o.updater=$d,t.stateNode=o,o._reactInternals=t,qv(t,r,e,n),t=Yv(null,t,r,!0,i,n)):(t.tag=0,Ht&&i&&wg(t),ir(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ef(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=OI(r),e=oo(r,e),o){case 0:t=Xv(null,t,r,e,n);break e;case 1:t=A1(null,t,r,e,n);break e;case 11:t=D1(null,t,r,e,n);break e;case 14:t=N1(null,t,r,oo(r.type,e),n);break e}throw Error(ye(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:oo(r,o),Xv(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:oo(r,o),A1(e,t,r,o,n);case 3:e:{if(Y2(t),e===null)throw Error(ye(387));r=t.pendingProps,i=t.memoizedState,o=i.element,w2(e,t),qf(t,r,null,n);var a=t.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){o=lu(Error(ye(423)),t),t=P1(e,t,r,n,o);break e}else if(r!==o){o=lu(Error(ye(424)),t),t=P1(e,t,r,n,o);break e}else for(Ir=Ji(t.stateNode.containerInfo.firstChild),Fr=t,Ht=!0,so=null,n=S2(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(au(),r===o){t=pi(e,t,n);break e}ir(e,t,r,n)}t=t.child}return t;case 5:return _2(t),e===null&&Hv(t),r=t.type,o=t.pendingProps,i=e!==null?e.memoizedProps:null,a=o.children,jv(r,o)?a=null:i!==null&&jv(r,i)&&(t.flags|=32),X2(e,t),ir(e,t,a,n),t.child;case 6:return e===null&&Hv(t),null;case 13:return Q2(e,t,n);case 4:return Tg(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=su(t,null,r,n):ir(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:oo(r,o),D1(e,t,r,o,n);case 7:return ir(e,t,t.pendingProps,n),t.child;case 8:return ir(e,t,t.pendingProps.children,n),t.child;case 12:return ir(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,i=t.memoizedProps,a=o.value,Mt(Vf,r._currentValue),r._currentValue=a,i!==null)if(po(i.value,a)){if(i.children===o.children&&!wr.current){t=pi(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var s=i.dependencies;if(s!==null){a=i.child;for(var u=s.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=ui(-1,n&-n),u.tag=2;var l=i.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Vv(i.return,n,t),s.lanes|=n;break}u=u.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(ye(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),Vv(a,n,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}ir(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Ks(t,n),o=Qr(o),r=r(o),t.flags|=1,ir(e,t,r,n),t.child;case 14:return r=t.type,o=oo(r,t.pendingProps),o=oo(r.type,o),N1(e,t,r,o,n);case 15:return q2(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:oo(r,o),Ef(e,t),t.tag=1,br(r)?(e=!0,Uf(t)):e=!1,Ks(t,n),E2(t,r,o),qv(t,r,o,n),Yv(null,t,r,!0,e,n);case 19:return J2(e,t,n);case 22:return K2(e,t,n)}throw Error(ye(156,t.tag))};function pE(e,t){return Wb(e,t)}function FI(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qr(e,t,n,r){return new FI(e,t,n,r)}function $g(e){return e=e.prototype,!(!e||!e.isReactComponent)}function OI(e){if(typeof e=="function")return $g(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ug)return 11;if(e===lg)return 14}return 2}function na(e,t){var n=e.alternate;return n===null?(n=qr(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function _f(e,t,n,r,o,i){var a=2;if(r=e,typeof e=="function")$g(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Ns:return Va(n.children,o,i,t);case sg:a=8,o|=8;break;case gv:return e=qr(12,n,t,o|2),e.elementType=gv,e.lanes=i,e;case yv:return e=qr(13,n,t,o),e.elementType=yv,e.lanes=i,e;case xv:return e=qr(19,n,t,o),e.elementType=xv,e.lanes=i,e;case Cb:return qd(n,o,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case bb:a=10;break e;case Eb:a=9;break e;case ug:a=11;break e;case lg:a=14;break e;case Mi:a=16,r=null;break e}throw Error(ye(130,e==null?e:typeof e,""))}return t=qr(a,n,t,o),t.elementType=e,t.type=r,t.lanes=i,t}function Va(e,t,n,r){return e=qr(7,e,r,t),e.lanes=n,e}function qd(e,t,n,r){return e=qr(22,e,r,t),e.elementType=Cb,e.lanes=n,e.stateNode={isHidden:!1},e}function mp(e,t,n){return e=qr(6,e,null,t),e.lanes=n,e}function gp(e,t,n){return t=qr(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function MI(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qh(0),this.expirationTimes=Qh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qh(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Hg(e,t,n,r,o,i,a,s,u){return e=new MI(e,t,n,s,u),t===1?(t=1,i===!0&&(t|=8)):t=0,i=qr(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rg(i),e}function LI(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ds,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function vE(e){if(!e)return ua;e=e._reactInternals;e:{if(is(e)!==e||e.tag!==1)throw Error(ye(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(br(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ye(171))}if(e.tag===1){var n=e.type;if(br(n))return p2(e,n,t)}return t}function mE(e,t,n,r,o,i,a,s,u){return e=Hg(n,r,!0,e,o,i,a,s,u),e.context=vE(null),n=e.current,r=sr(),o=ta(n),i=ui(r,o),i.callback=t??null,Zi(n,i,o),e.current.lanes=o,ec(e,o,r),Er(e,r),e}function Kd(e,t,n,r){var o=t.current,i=sr(),a=ta(o);return n=vE(n),t.context===null?t.context=n:t.pendingContext=n,t=ui(i,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Zi(o,t,a),e!==null&&(fo(e,o,a,i),xf(e,o,a)),a}function td(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function $1(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Vg(e,t){$1(e,t),(e=e.alternate)&&$1(e,t)}function BI(){return null}var gE=typeof reportError=="function"?reportError:function(e){console.error(e)};function Gg(e){this._internalRoot=e}Xd.prototype.render=Gg.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ye(409));Kd(e,t,null,null)};Xd.prototype.unmount=Gg.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ts(function(){Kd(null,e,null,null)}),t[di]=null}};function Xd(e){this._internalRoot=e}Xd.prototype.unstable_scheduleHydration=function(e){if(e){var t=qb();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Wi.length&&t!==0&&t<Wi[n].priority;n++);Wi.splice(n,0,e),n===0&&Xb(e)}};function qg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Yd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function H1(){}function jI(e,t,n,r,o){if(o){if(typeof r=="function"){var i=r;r=function(){var l=td(a);i.call(l)}}var a=mE(t,r,e,0,null,!1,!1,"",H1);return e._reactRootContainer=a,e[di]=a.current,Al(e.nodeType===8?e.parentNode:e),ts(),a}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var s=r;r=function(){var l=td(u);s.call(l)}}var u=Hg(e,0,!1,null,null,!1,!1,"",H1);return e._reactRootContainer=u,e[di]=u.current,Al(e.nodeType===8?e.parentNode:e),ts(function(){Kd(t,u,n,r)}),u}function Qd(e,t,n,r,o){var i=n._reactRootContainer;if(i){var a=i;if(typeof o=="function"){var s=o;o=function(){var u=td(a);s.call(u)}}Kd(t,a,e,o)}else a=jI(n,t,e,o,r);return td(a)}Vb=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=il(t.pendingLanes);n!==0&&(dg(t,n|1),Er(t,cn()),!(kt&6)&&(cu=cn()+500,da()))}break;case 13:ts(function(){var r=hi(e,1);if(r!==null){var o=sr();fo(r,e,1,o)}}),Vg(e,1)}};hg=function(e){if(e.tag===13){var t=hi(e,134217728);if(t!==null){var n=sr();fo(t,e,134217728,n)}Vg(e,134217728)}};Gb=function(e){if(e.tag===13){var t=ta(e),n=hi(e,t);if(n!==null){var r=sr();fo(n,e,t,r)}Vg(e,t)}};qb=function(){return Nt};Kb=function(e,t){var n=Nt;try{return Nt=e,t()}finally{Nt=n}};Iv=function(e,t,n){switch(t){case"input":if(Ev(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=zd(r);if(!o)throw Error(ye(90));_b(r),Ev(r,o)}}}break;case"textarea":Rb(e,n);break;case"select":t=n.value,t!=null&&Hs(e,!!n.multiple,t,!1)}};Fb=Wg;Ob=ts;var WI={usingClientEntryPoint:!1,Events:[nc,Os,zd,Ab,Pb,Wg]},Vu={findFiberByHostInstance:Ma,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},zI={bundleType:Vu.bundleType,version:Vu.version,rendererPackageName:Vu.rendererPackageName,rendererConfig:Vu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gi.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Bb(e),e===null?null:e.stateNode},findFiberByHostInstance:Vu.findFiberByHostInstance||BI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qc.isDisabled&&qc.supportsFiber)try{Ld=qc.inject(zI),jo=qc}catch{}}Br.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WI;Br.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qg(t))throw Error(ye(200));return LI(e,t,null,n)};Br.createRoot=function(e,t){if(!qg(e))throw Error(ye(299));var n=!1,r="",o=gE;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=Hg(e,1,!1,null,null,n,!1,r,o),e[di]=t.current,Al(e.nodeType===8?e.parentNode:e),new Gg(t)};Br.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ye(188)):(e=Object.keys(e).join(","),Error(ye(268,e)));return e=Bb(t),e=e===null?null:e.stateNode,e};Br.flushSync=function(e){return ts(e)};Br.hydrate=function(e,t,n){if(!Yd(t))throw Error(ye(200));return Qd(null,e,t,!0,n)};Br.hydrateRoot=function(e,t,n){if(!qg(e))throw Error(ye(405));var r=n!=null&&n.hydratedSources||null,o=!1,i="",a=gE;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=mE(t,null,e,1,n??null,o,!1,i,a),e[di]=t.current,Al(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new Xd(t)};Br.render=function(e,t,n){if(!Yd(t))throw Error(ye(200));return Qd(null,e,t,!1,n)};Br.unmountComponentAtNode=function(e){if(!Yd(e))throw Error(ye(40));return e._reactRootContainer?(ts(function(){Qd(null,null,e,!1,function(){e._reactRootContainer=null,e[di]=null})}),!0):!1};Br.unstable_batchedUpdates=Wg;Br.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Yd(n))throw Error(ye(200));if(e==null||e._reactInternals===void 0)throw Error(ye(38));return Qd(e,t,n,!1,r)};Br.version="18.2.0-next-9e3b772b8-20220608";function yE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yE)}catch(e){console.error(e)}}yE(),mb.exports=Br;var Kg=mb.exports;const ja=rs(Kg),UI=ib({__proto__:null,default:ja},[Kg]);var V1=Kg;vv.createRoot=V1.createRoot,vv.hydrateRoot=V1.hydrateRoot;/**
 * @remix-run/router v1.15.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nn(){return nn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nn.apply(this,arguments)}var ln;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ln||(ln={}));const G1="popstate";function $I(e){e===void 0&&(e={});function t(r,o){let{pathname:i,search:a,hash:s}=r.location;return zl("",{pathname:i,search:a,hash:s},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){return typeof o=="string"?o:oc(o)}return VI(t,n,null,e)}function yt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function fu(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function HI(){return Math.random().toString(36).substr(2,8)}function q1(e,t){return{usr:e.state,key:e.key,idx:t}}function zl(e,t,n,r){return n===void 0&&(n=null),nn({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?yi(t):t,{state:n,key:t&&t.key||r||HI()})}function oc(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function yi(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function VI(e,t,n,r){r===void 0&&(r={});let{window:o=document.defaultView,v5Compat:i=!1}=r,a=o.history,s=ln.Pop,u=null,l=c();l==null&&(l=0,a.replaceState(nn({},a.state,{idx:l}),""));function c(){return(a.state||{idx:null}).idx}function f(){s=ln.Pop;let w=c(),y=w==null?null:w-l;l=w,u&&u({action:s,location:x.location,delta:y})}function d(w,y){s=ln.Push;let b=zl(x.location,w,y);n&&n(b,w),l=c()+1;let E=q1(b,l),S=x.createHref(b);try{a.pushState(E,"",S)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;o.location.assign(S)}i&&u&&u({action:s,location:x.location,delta:1})}function p(w,y){s=ln.Replace;let b=zl(x.location,w,y);n&&n(b,w),l=c();let E=q1(b,l),S=x.createHref(b);a.replaceState(E,"",S),i&&u&&u({action:s,location:x.location,delta:0})}function v(w){let y=o.location.origin!=="null"?o.location.origin:o.location.href,b=typeof w=="string"?w:oc(w);return b=b.replace(/ $/,"%20"),yt(y,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,y)}let x={get action(){return s},get location(){return e(o,a)},listen(w){if(u)throw new Error("A history only accepts one active listener");return o.addEventListener(G1,f),u=w,()=>{o.removeEventListener(G1,f),u=null}},createHref(w){return t(o,w)},createURL:v,encodeLocation(w){let y=v(w);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:p,go(w){return a.go(w)}};return x}var en;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(en||(en={}));const GI=new Set(["lazy","caseSensitive","path","id","index","children"]);function qI(e){return e.index===!0}function um(e,t,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),e.map((o,i)=>{let a=[...n,i],s=typeof o.id=="string"?o.id:a.join("-");if(yt(o.index!==!0||!o.children,"Cannot specify children on an index route"),yt(!r[s],'Found a route id collision on id "'+s+`".  Route id's must be globally unique within Data Router usages`),qI(o)){let u=nn({},o,t(o),{id:s});return r[s]=u,u}else{let u=nn({},o,t(o),{id:s,children:void 0});return r[s]=u,o.children&&(u.children=um(o.children,t,a,r)),u}})}function Us(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?yi(t):t,o=ic(r.pathname||"/",n);if(o==null)return null;let i=xE(e);XI(i);let a=null;for(let s=0;a==null&&s<i.length;++s){let u=sD(o);a=oD(i[s],u)}return a}function KI(e,t){let{route:n,pathname:r,params:o}=e;return{id:n.id,pathname:r,params:o,data:t[n.id],handle:n.handle}}function xE(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let o=(i,a,s)=>{let u={relativePath:s===void 0?i.path||"":s,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};u.relativePath.startsWith("/")&&(yt(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=ra([r,u.relativePath]),c=n.concat(u);i.children&&i.children.length>0&&(yt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),xE(i.children,t,c,l)),!(i.path==null&&!i.index)&&t.push({path:l,score:nD(l,i.index),routesMeta:c})};return e.forEach((i,a)=>{var s;if(i.path===""||!((s=i.path)!=null&&s.includes("?")))o(i,a);else for(let u of wE(i.path))o(i,a,u)}),t}function wE(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,o=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return o?[i,""]:[i];let a=wE(r.join("/")),s=[];return s.push(...a.map(u=>u===""?i:[i,u].join("/"))),o&&s.push(...a),s.map(u=>e.startsWith("/")&&u===""?"/":u)}function XI(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:rD(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const YI=/^:[\w-]+$/,QI=3,JI=2,ZI=1,eD=10,tD=-2,K1=e=>e==="*";function nD(e,t){let n=e.split("/"),r=n.length;return n.some(K1)&&(r+=tD),t&&(r+=JI),n.filter(o=>!K1(o)).reduce((o,i)=>o+(YI.test(i)?QI:i===""?ZI:eD),r)}function rD(e,t){return e.length===t.length&&e.slice(0,-1).every((r,o)=>r===t[o])?e[e.length-1]-t[t.length-1]:0}function oD(e,t){let{routesMeta:n}=e,r={},o="/",i=[];for(let a=0;a<n.length;++a){let s=n[a],u=a===n.length-1,l=o==="/"?t:t.slice(o.length)||"/",c=iD({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);let f=s.route;i.push({params:r,pathname:ra([o,c.pathname]),pathnameBase:cD(ra([o,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(o=ra([o,c.pathnameBase]))}return i}function iD(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=aD(e.path,e.caseSensitive,e.end),o=t.match(n);if(!o)return null;let i=o[0],a=i.replace(/(.)\/+$/,"$1"),s=o.slice(1);return{params:r.reduce((l,c,f)=>{let{paramName:d,isOptional:p}=c;if(d==="*"){let x=s[f]||"";a=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const v=s[f];return p&&!v?l[d]=void 0:l[d]=(v||"").replace(/%2F/g,"/"),l},{}),pathname:i,pathnameBase:a,pattern:e}}function aD(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),fu(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,s,u)=>(r.push({paramName:s,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),r]}function sD(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return fu(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function ic(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function uD(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:o=""}=typeof e=="string"?yi(e):e;return{pathname:n?n.startsWith("/")?n:lD(n,t):t,search:fD(r),hash:dD(o)}}function lD(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function yp(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function bE(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function EE(e,t){let n=bE(e);return t?n.map((r,o)=>o===e.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function CE(e,t,n,r){r===void 0&&(r=!1);let o;typeof e=="string"?o=yi(e):(o=nn({},e),yt(!o.pathname||!o.pathname.includes("?"),yp("?","pathname","search",o)),yt(!o.pathname||!o.pathname.includes("#"),yp("#","pathname","hash",o)),yt(!o.search||!o.search.includes("#"),yp("#","search","hash",o)));let i=e===""||o.pathname==="",a=i?"/":o.pathname,s;if(a==null)s=n;else{let f=t.length-1;if(!r&&a.startsWith("..")){let d=a.split("/");for(;d[0]==="..";)d.shift(),f-=1;o.pathname=d.join("/")}s=f>=0?t[f]:"/"}let u=uD(o,s),l=a&&a!=="/"&&a.endsWith("/"),c=(i||a===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const ra=e=>e.join("/").replace(/\/\/+/g,"/"),cD=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),fD=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,dD=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;class Xg{constructor(t,n,r,o){o===void 0&&(o=!1),this.status=t,this.statusText=n||"",this.internal=o,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function SE(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const _E=["post","put","patch","delete"],hD=new Set(_E),pD=["get",..._E],vD=new Set(pD),mD=new Set([301,302,303,307,308]),gD=new Set([307,308]),xp={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},yD={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Gu={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},kE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xD=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),RE="remix-router-transitions";function wD(e){const t=e.window?e.window:typeof window<"u"?window:void 0,n=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u",r=!n;yt(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let o;if(e.mapRouteProperties)o=e.mapRouteProperties;else if(e.detectErrorBoundary){let Q=e.detectErrorBoundary;o=oe=>({hasErrorBoundary:Q(oe)})}else o=xD;let i={},a=um(e.routes,o,void 0,i),s,u=e.basename||"/",l=nn({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1},e.future),c=null,f=new Set,d=null,p=null,v=null,x=e.hydrationData!=null,w=Us(a,e.history.location,u),y=null;if(w==null){let Q=Ur(404,{pathname:e.history.location.pathname}),{matches:oe,route:le}=nx(a);w=oe,y={[le.id]:Q}}let b,E=w.some(Q=>Q.route.lazy),S=w.some(Q=>Q.route.loader);if(E)b=!1;else if(!S)b=!0;else if(l.v7_partialHydration){let Q=e.hydrationData?e.hydrationData.loaderData:null,oe=e.hydrationData?e.hydrationData.errors:null;b=w.every(le=>le.route.loader&&le.route.loader.hydrate!==!0&&(Q&&Q[le.route.id]!==void 0||oe&&oe[le.route.id]!==void 0))}else b=e.hydrationData!=null;let R,k={historyAction:e.history.action,location:e.history.location,matches:w,initialized:b,navigation:xp,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||y,fetchers:new Map,blockers:new Map},m=ln.Pop,P=!1,D,N=!1,B=new Map,z=null,V=!1,Z=!1,K=[],ne=[],J=new Map,$=0,Y=-1,ee=new Map,he=new Set,me=new Map,be=new Map,Se=new Set,Ae=new Map,Pe=new Map,$e=!1;function et(){if(c=e.history.listen(Q=>{let{action:oe,location:le,delta:xe}=Q;if($e){$e=!1;return}fu(Pe.size===0||xe!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Ne=Ec({currentLocation:k.location,nextLocation:le,historyAction:oe});if(Ne&&xe!=null){$e=!0,e.history.go(xe*-1),nr(Ne,{state:"blocked",location:le,proceed(){nr(Ne,{state:"proceeding",proceed:void 0,reset:void 0,location:le}),e.history.go(xe)},reset(){let ut=new Map(k.blockers);ut.set(Ne,Gu),ze({blockers:ut})}});return}return Oe(oe,le)}),n){ND(t,B);let Q=()=>AD(t,B);t.addEventListener("pagehide",Q),z=()=>t.removeEventListener("pagehide",Q)}return k.initialized||Oe(ln.Pop,k.location,{initialHydration:!0}),R}function Qe(){c&&c(),z&&z(),f.clear(),D&&D.abort(),k.fetchers.forEach((Q,oe)=>fn(oe)),k.blockers.forEach((Q,oe)=>dr(oe))}function it(Q){return f.add(Q),()=>f.delete(Q)}function ze(Q,oe){oe===void 0&&(oe={}),k=nn({},k,Q);let le=[],xe=[];l.v7_fetcherPersist&&k.fetchers.forEach((Ne,ut)=>{Ne.state==="idle"&&(Se.has(ut)?xe.push(ut):le.push(ut))}),[...f].forEach(Ne=>Ne(k,{deletedFetchers:xe,unstable_viewTransitionOpts:oe.viewTransitionOpts,unstable_flushSync:oe.flushSync===!0})),l.v7_fetcherPersist&&(le.forEach(Ne=>k.fetchers.delete(Ne)),xe.forEach(Ne=>fn(Ne)))}function Ke(Q,oe,le){var xe,Ne;let{flushSync:ut}=le===void 0?{}:le,Xe=k.actionData!=null&&k.navigation.formMethod!=null&&ao(k.navigation.formMethod)&&k.navigation.state==="loading"&&((xe=Q.state)==null?void 0:xe._isRedirect)!==!0,Ve;oe.actionData?Object.keys(oe.actionData).length>0?Ve=oe.actionData:Ve=null:Xe?Ve=k.actionData:Ve=null;let Me=oe.loaderData?tx(k.loaderData,oe.loaderData,oe.matches||[],oe.errors):k.loaderData,at=k.blockers;at.size>0&&(at=new Map(at),at.forEach((At,vn)=>at.set(vn,Gu)));let Qt=P===!0||k.navigation.formMethod!=null&&ao(k.navigation.formMethod)&&((Ne=Q.state)==null?void 0:Ne._isRedirect)!==!0;s&&(a=s,s=void 0),V||m===ln.Pop||(m===ln.Push?e.history.push(Q,Q.state):m===ln.Replace&&e.history.replace(Q,Q.state));let tt;if(m===ln.Pop){let At=B.get(k.location.pathname);At&&At.has(Q.pathname)?tt={currentLocation:k.location,nextLocation:Q}:B.has(Q.pathname)&&(tt={currentLocation:Q,nextLocation:k.location})}else if(N){let At=B.get(k.location.pathname);At?At.add(Q.pathname):(At=new Set([Q.pathname]),B.set(k.location.pathname,At)),tt={currentLocation:k.location,nextLocation:Q}}ze(nn({},oe,{actionData:Ve,loaderData:Me,historyAction:m,location:Q,initialized:!0,navigation:xp,revalidation:"idle",restoreScrollPosition:Yo(Q,oe.matches||k.matches),preventScrollReset:Qt,blockers:at}),{viewTransitionOpts:tt,flushSync:ut===!0}),m=ln.Pop,P=!1,N=!1,V=!1,Z=!1,K=[],ne=[]}async function qe(Q,oe){if(typeof Q=="number"){e.history.go(Q);return}let le=lm(k.location,k.matches,u,l.v7_prependBasename,Q,l.v7_relativeSplatPath,oe==null?void 0:oe.fromRouteId,oe==null?void 0:oe.relative),{path:xe,submission:Ne,error:ut}=X1(l.v7_normalizeFormMethod,!1,le,oe),Xe=k.location,Ve=zl(k.location,xe,oe&&oe.state);Ve=nn({},Ve,e.history.encodeLocation(Ve));let Me=oe&&oe.replace!=null?oe.replace:void 0,at=ln.Push;Me===!0?at=ln.Replace:Me===!1||Ne!=null&&ao(Ne.formMethod)&&Ne.formAction===k.location.pathname+k.location.search&&(at=ln.Replace);let Qt=oe&&"preventScrollReset"in oe?oe.preventScrollReset===!0:void 0,tt=(oe&&oe.unstable_flushSync)===!0,At=Ec({currentLocation:Xe,nextLocation:Ve,historyAction:at});if(At){nr(At,{state:"blocked",location:Ve,proceed(){nr(At,{state:"proceeding",proceed:void 0,reset:void 0,location:Ve}),qe(Q,oe)},reset(){let vn=new Map(k.blockers);vn.set(At,Gu),ze({blockers:vn})}});return}return await Oe(at,Ve,{submission:Ne,pendingError:ut,preventScrollReset:Qt,replace:oe&&oe.replace,enableViewTransition:oe&&oe.unstable_viewTransition,flushSync:tt})}function pt(){if(an(),ze({revalidation:"loading"}),k.navigation.state!=="submitting"){if(k.navigation.state==="idle"){Oe(k.historyAction,k.location,{startUninterruptedRevalidation:!0});return}Oe(m||k.historyAction,k.navigation.location,{overrideNavigation:k.navigation})}}async function Oe(Q,oe,le){D&&D.abort(),D=null,m=Q,V=(le&&le.startUninterruptedRevalidation)===!0,Th(k.location,k.matches),P=(le&&le.preventScrollReset)===!0,N=(le&&le.enableViewTransition)===!0;let xe=s||a,Ne=le&&le.overrideNavigation,ut=Us(xe,oe,u),Xe=(le&&le.flushSync)===!0;if(!ut){let vn=Ur(404,{pathname:oe.pathname}),{matches:rr,route:sn}=nx(xe);ki(),Ke(oe,{matches:rr,loaderData:{},errors:{[sn.id]:vn}},{flushSync:Xe});return}if(k.initialized&&!Z&&_D(k.location,oe)&&!(le&&le.submission&&ao(le.submission.formMethod))){Ke(oe,{matches:ut},{flushSync:Xe});return}D=new AbortController;let Ve=Ku(e.history,oe,D.signal,le&&le.submission),Me,at;if(le&&le.pendingError)at={[gl(ut).route.id]:le.pendingError};else if(le&&le.submission&&ao(le.submission.formMethod)){let vn=await vt(Ve,oe,le.submission,ut,{replace:le.replace,flushSync:Xe});if(vn.shortCircuited)return;Me=vn.pendingActionData,at=vn.pendingActionError,Ne=wp(oe,le.submission),Xe=!1,Ve=new Request(Ve.url,{signal:Ve.signal})}let{shortCircuited:Qt,loaderData:tt,errors:At}=await Ue(Ve,oe,ut,Ne,le&&le.submission,le&&le.fetcherSubmission,le&&le.replace,le&&le.initialHydration===!0,Xe,Me,at);Qt||(D=null,Ke(oe,nn({matches:ut},Me?{actionData:Me}:{},{loaderData:tt,errors:At})))}async function vt(Q,oe,le,xe,Ne){Ne===void 0&&(Ne={}),an();let ut=ID(oe,le);ze({navigation:ut},{flushSync:Ne.flushSync===!0});let Xe,Ve=fm(xe,oe);if(!Ve.route.action&&!Ve.route.lazy)Xe={type:en.error,error:Ur(405,{method:Q.method,pathname:oe.pathname,routeId:Ve.route.id})};else if(Xe=await qu("action",Q,Ve,xe,i,o,u,l.v7_relativeSplatPath),Q.signal.aborted)return{shortCircuited:!0};if(za(Xe)){let Me;return Ne&&Ne.replace!=null?Me=Ne.replace:Me=Xe.location===k.location.pathname+k.location.search,await pn(k,Xe,{submission:le,replace:Me}),{shortCircuited:!0}}if($s(Xe)){let Me=gl(xe,Ve.route.id);return(Ne&&Ne.replace)!==!0&&(m=ln.Push),{pendingActionData:{},pendingActionError:{[Me.route.id]:Xe.error}}}if(Wa(Xe))throw Ur(400,{type:"defer-action"});return{pendingActionData:{[Ve.route.id]:Xe.data}}}async function Ue(Q,oe,le,xe,Ne,ut,Xe,Ve,Me,at,Qt){let tt=xe||wp(oe,Ne),At=Ne||ut||ix(tt),vn=s||a,[rr,sn]=Y1(e.history,k,le,At,oe,l.v7_partialHydration&&Ve===!0,Z,K,ne,Se,me,he,vn,u,at,Qt);if(ki(St=>!(le&&le.some(wt=>wt.route.id===St))||rr&&rr.some(wt=>wt.route.id===St)),Y=++$,rr.length===0&&sn.length===0){let St=ya();return Ke(oe,nn({matches:le,loaderData:{},errors:Qt||null},at?{actionData:at}:{},St?{fetchers:new Map(k.fetchers)}:{}),{flushSync:Me}),{shortCircuited:!0}}if(!V&&(!l.v7_partialHydration||!Ve)){sn.forEach(wt=>{let Fn=k.fetchers.get(wt.key),Ea=Xu(void 0,Fn?Fn.data:void 0);k.fetchers.set(wt.key,Ea)});let St=at||k.actionData;ze(nn({navigation:tt},St?Object.keys(St).length===0?{actionData:null}:{actionData:St}:{},sn.length>0?{fetchers:new Map(k.fetchers)}:{}),{flushSync:Me})}sn.forEach(St=>{J.has(St.key)&&fr(St.key),St.controller&&J.set(St.key,St.controller)});let Ri=()=>sn.forEach(St=>fr(St.key));D&&D.signal.addEventListener("abort",Ri);let{results:Nu,loaderResults:Qo,fetcherResults:yo}=await Ut(k.matches,le,rr,sn,Q);if(Q.signal.aborted)return{shortCircuited:!0};D&&D.signal.removeEventListener("abort",Ri),sn.forEach(St=>J.delete(St.key));let hr=rx(Nu);if(hr){if(hr.idx>=rr.length){let St=sn[hr.idx-rr.length].key;he.add(St)}return await pn(k,hr.result,{replace:Xe}),{shortCircuited:!0}}let{loaderData:fs,errors:Jo}=ex(k,le,rr,Qo,Qt,sn,yo,Ae);Ae.forEach((St,wt)=>{St.subscribe(Fn=>{(Fn||St.done)&&Ae.delete(wt)})}),l.v7_partialHydration&&Ve&&k.errors&&Object.entries(k.errors).filter(St=>{let[wt]=St;return!rr.some(Fn=>Fn.route.id===wt)}).forEach(St=>{let[wt,Fn]=St;Jo=Object.assign(Jo||{},{[wt]:Fn})});let wa=ya(),eo=go(Y),ba=wa||eo||sn.length>0;return nn({loaderData:fs,errors:Jo},ba?{fetchers:new Map(k.fetchers)}:{})}function It(Q,oe,le,xe){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");J.has(Q)&&fr(Q);let Ne=(xe&&xe.unstable_flushSync)===!0,ut=s||a,Xe=lm(k.location,k.matches,u,l.v7_prependBasename,le,l.v7_relativeSplatPath,oe,xe==null?void 0:xe.relative),Ve=Us(ut,Xe,u);if(!Ve){Ce(Q,oe,Ur(404,{pathname:Xe}),{flushSync:Ne});return}let{path:Me,submission:at,error:Qt}=X1(l.v7_normalizeFormMethod,!0,Xe,xe);if(Qt){Ce(Q,oe,Qt,{flushSync:Ne});return}let tt=fm(Ve,Me);if(P=(xe&&xe.preventScrollReset)===!0,at&&ao(at.formMethod)){on(Q,oe,Me,tt,Ve,Ne,at);return}me.set(Q,{routeId:oe,path:Me}),cr(Q,oe,Me,tt,Ve,Ne,at)}async function on(Q,oe,le,xe,Ne,ut,Xe){if(an(),me.delete(Q),!xe.route.action&&!xe.route.lazy){let wt=Ur(405,{method:Xe.formMethod,pathname:le,routeId:oe});Ce(Q,oe,wt,{flushSync:ut});return}let Ve=k.fetchers.get(Q);$t(Q,DD(Xe,Ve),{flushSync:ut});let Me=new AbortController,at=Ku(e.history,le,Me.signal,Xe);J.set(Q,Me);let Qt=$,tt=await qu("action",at,xe,Ne,i,o,u,l.v7_relativeSplatPath);if(at.signal.aborted){J.get(Q)===Me&&J.delete(Q);return}if(l.v7_fetcherPersist&&Se.has(Q)){if(za(tt)||$s(tt)){$t(Q,Oi(void 0));return}}else{if(za(tt))if(J.delete(Q),Y>Qt){$t(Q,Oi(void 0));return}else return he.add(Q),$t(Q,Xu(Xe)),pn(k,tt,{fetcherSubmission:Xe});if($s(tt)){Ce(Q,oe,tt.error);return}}if(Wa(tt))throw Ur(400,{type:"defer-action"});let At=k.navigation.location||k.location,vn=Ku(e.history,At,Me.signal),rr=s||a,sn=k.navigation.state!=="idle"?Us(rr,k.navigation.location,u):k.matches;yt(sn,"Didn't find any matches after fetcher action");let Ri=++$;ee.set(Q,Ri);let Nu=Xu(Xe,tt.data);k.fetchers.set(Q,Nu);let[Qo,yo]=Y1(e.history,k,sn,Xe,At,!1,Z,K,ne,Se,me,he,rr,u,{[xe.route.id]:tt.data},void 0);yo.filter(wt=>wt.key!==Q).forEach(wt=>{let Fn=wt.key,Ea=k.fetchers.get(Fn),Sc=Xu(void 0,Ea?Ea.data:void 0);k.fetchers.set(Fn,Sc),J.has(Fn)&&fr(Fn),wt.controller&&J.set(Fn,wt.controller)}),ze({fetchers:new Map(k.fetchers)});let hr=()=>yo.forEach(wt=>fr(wt.key));Me.signal.addEventListener("abort",hr);let{results:fs,loaderResults:Jo,fetcherResults:wa}=await Ut(k.matches,sn,Qo,yo,vn);if(Me.signal.aborted)return;Me.signal.removeEventListener("abort",hr),ee.delete(Q),J.delete(Q),yo.forEach(wt=>J.delete(wt.key));let eo=rx(fs);if(eo){if(eo.idx>=Qo.length){let wt=yo[eo.idx-Qo.length].key;he.add(wt)}return pn(k,eo.result)}let{loaderData:ba,errors:St}=ex(k,k.matches,Qo,Jo,void 0,yo,wa,Ae);if(k.fetchers.has(Q)){let wt=Oi(tt.data);k.fetchers.set(Q,wt)}go(Ri),k.navigation.state==="loading"&&Ri>Y?(yt(m,"Expected pending action"),D&&D.abort(),Ke(k.navigation.location,{matches:sn,loaderData:ba,errors:St,fetchers:new Map(k.fetchers)})):(ze({errors:St,loaderData:tx(k.loaderData,ba,sn,St),fetchers:new Map(k.fetchers)}),Z=!1)}async function cr(Q,oe,le,xe,Ne,ut,Xe){let Ve=k.fetchers.get(Q);$t(Q,Xu(Xe,Ve?Ve.data:void 0),{flushSync:ut});let Me=new AbortController,at=Ku(e.history,le,Me.signal);J.set(Q,Me);let Qt=$,tt=await qu("loader",at,xe,Ne,i,o,u,l.v7_relativeSplatPath);if(Wa(tt)&&(tt=await DE(tt,at.signal,!0)||tt),J.get(Q)===Me&&J.delete(Q),!at.signal.aborted){if(Se.has(Q)){$t(Q,Oi(void 0));return}if(za(tt))if(Y>Qt){$t(Q,Oi(void 0));return}else{he.add(Q),await pn(k,tt);return}if($s(tt)){Ce(Q,oe,tt.error);return}yt(!Wa(tt),"Unhandled fetcher deferred data"),$t(Q,Oi(tt.data))}}async function pn(Q,oe,le){let{submission:xe,fetcherSubmission:Ne,replace:ut}=le===void 0?{}:le;oe.revalidate&&(Z=!0);let Xe=zl(Q.location,oe.location,{_isRedirect:!0});if(yt(Xe,"Expected a location on the redirect navigation"),n){let At=!1;if(oe.reloadDocument)At=!0;else if(kE.test(oe.location)){const vn=e.history.createURL(oe.location);At=vn.origin!==t.location.origin||ic(vn.pathname,u)==null}if(At){ut?t.location.replace(oe.location):t.location.assign(oe.location);return}}D=null;let Ve=ut===!0?ln.Replace:ln.Push,{formMethod:Me,formAction:at,formEncType:Qt}=Q.navigation;!xe&&!Ne&&Me&&at&&Qt&&(xe=ix(Q.navigation));let tt=xe||Ne;if(gD.has(oe.status)&&tt&&ao(tt.formMethod))await Oe(Ve,Xe,{submission:nn({},tt,{formAction:oe.location}),preventScrollReset:P});else{let At=wp(Xe,xe);await Oe(Ve,Xe,{overrideNavigation:At,fetcherSubmission:Ne,preventScrollReset:P})}}async function Ut(Q,oe,le,xe,Ne){let ut=await Promise.all([...le.map(Me=>qu("loader",Ne,Me,oe,i,o,u,l.v7_relativeSplatPath)),...xe.map(Me=>Me.matches&&Me.match&&Me.controller?qu("loader",Ku(e.history,Me.path,Me.controller.signal),Me.match,Me.matches,i,o,u,l.v7_relativeSplatPath):{type:en.error,error:Ur(404,{pathname:Me.path})})]),Xe=ut.slice(0,le.length),Ve=ut.slice(le.length);return await Promise.all([ox(Q,le,Xe,Xe.map(()=>Ne.signal),!1,k.loaderData),ox(Q,xe.map(Me=>Me.match),Ve,xe.map(Me=>Me.controller?Me.controller.signal:null),!0)]),{results:ut,loaderResults:Xe,fetcherResults:Ve}}function an(){Z=!0,K.push(...ki()),me.forEach((Q,oe)=>{J.has(oe)&&(ne.push(oe),fr(oe))})}function $t(Q,oe,le){le===void 0&&(le={}),k.fetchers.set(Q,oe),ze({fetchers:new Map(k.fetchers)},{flushSync:(le&&le.flushSync)===!0})}function Ce(Q,oe,le,xe){xe===void 0&&(xe={});let Ne=gl(k.matches,oe);fn(Q),ze({errors:{[Ne.route.id]:le},fetchers:new Map(k.fetchers)},{flushSync:(xe&&xe.flushSync)===!0})}function He(Q){return l.v7_fetcherPersist&&(be.set(Q,(be.get(Q)||0)+1),Se.has(Q)&&Se.delete(Q)),k.fetchers.get(Q)||yD}function fn(Q){let oe=k.fetchers.get(Q);J.has(Q)&&!(oe&&oe.state==="loading"&&ee.has(Q))&&fr(Q),me.delete(Q),ee.delete(Q),he.delete(Q),Se.delete(Q),k.fetchers.delete(Q)}function Pn(Q){if(l.v7_fetcherPersist){let oe=(be.get(Q)||0)-1;oe<=0?(be.delete(Q),Se.add(Q)):be.set(Q,oe)}else fn(Q);ze({fetchers:new Map(k.fetchers)})}function fr(Q){let oe=J.get(Q);yt(oe,"Expected fetch controller: "+Q),oe.abort(),J.delete(Q)}function ga(Q){for(let oe of Q){let le=He(oe),xe=Oi(le.data);k.fetchers.set(oe,xe)}}function ya(){let Q=[],oe=!1;for(let le of he){let xe=k.fetchers.get(le);yt(xe,"Expected fetcher: "+le),xe.state==="loading"&&(he.delete(le),Q.push(le),oe=!0)}return ga(Q),oe}function go(Q){let oe=[];for(let[le,xe]of ee)if(xe<Q){let Ne=k.fetchers.get(le);yt(Ne,"Expected fetcher: "+le),Ne.state==="loading"&&(fr(le),ee.delete(le),oe.push(le))}return ga(oe),oe.length>0}function tr(Q,oe){let le=k.blockers.get(Q)||Gu;return Pe.get(Q)!==oe&&Pe.set(Q,oe),le}function dr(Q){k.blockers.delete(Q),Pe.delete(Q)}function nr(Q,oe){let le=k.blockers.get(Q)||Gu;yt(le.state==="unblocked"&&oe.state==="blocked"||le.state==="blocked"&&oe.state==="blocked"||le.state==="blocked"&&oe.state==="proceeding"||le.state==="blocked"&&oe.state==="unblocked"||le.state==="proceeding"&&oe.state==="unblocked","Invalid blocker state transition: "+le.state+" -> "+oe.state);let xe=new Map(k.blockers);xe.set(Q,oe),ze({blockers:xe})}function Ec(Q){let{currentLocation:oe,nextLocation:le,historyAction:xe}=Q;if(Pe.size===0)return;Pe.size>1&&fu(!1,"A router only supports one blocker at a time");let Ne=Array.from(Pe.entries()),[ut,Xe]=Ne[Ne.length-1],Ve=k.blockers.get(ut);if(!(Ve&&Ve.state==="proceeding")&&Xe({currentLocation:oe,nextLocation:le,historyAction:xe}))return ut}function ki(Q){let oe=[];return Ae.forEach((le,xe)=>{(!Q||Q(xe))&&(le.cancel(),oe.push(xe),Ae.delete(xe))}),oe}function Cc(Q,oe,le){if(d=Q,v=oe,p=le||null,!x&&k.navigation===xp){x=!0;let xe=Yo(k.location,k.matches);xe!=null&&ze({restoreScrollPosition:xe})}return()=>{d=null,v=null,p=null}}function Du(Q,oe){return p&&p(Q,oe.map(xe=>KI(xe,k.loaderData)))||Q.key}function Th(Q,oe){if(d&&v){let le=Du(Q,oe);d[le]=v()}}function Yo(Q,oe){if(d){let le=Du(Q,oe),xe=d[le];if(typeof xe=="number")return xe}return null}function xa(Q){i={},s=um(Q,o,void 0,i)}return R={get basename(){return u},get future(){return l},get state(){return k},get routes(){return a},get window(){return t},initialize:et,subscribe:it,enableScrollRestoration:Cc,navigate:qe,fetch:It,revalidate:pt,createHref:Q=>e.history.createHref(Q),encodeLocation:Q=>e.history.encodeLocation(Q),getFetcher:He,deleteFetcher:Pn,dispose:Qe,getBlocker:tr,deleteBlocker:dr,_internalFetchControllers:J,_internalActiveDeferreds:Ae,_internalSetRoutes:xa},R}function bD(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function lm(e,t,n,r,o,i,a,s){let u,l;if(a){u=[];for(let f of t)if(u.push(f),f.route.id===a){l=f;break}}else u=t,l=t[t.length-1];let c=CE(o||".",EE(u,i),ic(e.pathname,n)||e.pathname,s==="path");return o==null&&(c.search=e.search,c.hash=e.hash),(o==null||o===""||o===".")&&l&&l.route.index&&!Yg(c.search)&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(c.pathname=c.pathname==="/"?n:ra([n,c.pathname])),oc(c)}function X1(e,t,n,r){if(!r||!bD(r))return{path:n};if(r.formMethod&&!TD(r.formMethod))return{path:n,error:Ur(405,{method:r.formMethod})};let o=()=>({path:n,error:Ur(400,{type:"invalid-body"})}),i=r.formMethod||"get",a=e?i.toUpperCase():i.toLowerCase(),s=IE(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!ao(a))return o();let d=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((p,v)=>{let[x,w]=v;return""+p+x+"="+w+`
`},""):String(r.body);return{path:n,submission:{formMethod:a,formAction:s,formEncType:r.formEncType,formData:void 0,json:void 0,text:d}}}else if(r.formEncType==="application/json"){if(!ao(a))return o();try{let d=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:a,formAction:s,formEncType:r.formEncType,formData:void 0,json:d,text:void 0}}}catch{return o()}}}yt(typeof FormData=="function","FormData is not available in this environment");let u,l;if(r.formData)u=cm(r.formData),l=r.formData;else if(r.body instanceof FormData)u=cm(r.body),l=r.body;else if(r.body instanceof URLSearchParams)u=r.body,l=Z1(u);else if(r.body==null)u=new URLSearchParams,l=new FormData;else try{u=new URLSearchParams(r.body),l=Z1(u)}catch{return o()}let c={formMethod:a,formAction:s,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:l,json:void 0,text:void 0};if(ao(c.formMethod))return{path:n,submission:c};let f=yi(n);return t&&f.search&&Yg(f.search)&&u.append("index",""),f.search="?"+u,{path:oc(f),submission:c}}function ED(e,t){let n=e;if(t){let r=e.findIndex(o=>o.route.id===t);r>=0&&(n=e.slice(0,r))}return n}function Y1(e,t,n,r,o,i,a,s,u,l,c,f,d,p,v,x){let w=x?Object.values(x)[0]:v?Object.values(v)[0]:void 0,y=e.createURL(t.location),b=e.createURL(o),E=x?Object.keys(x)[0]:void 0,R=ED(n,E).filter((m,P)=>{let{route:D}=m;if(D.lazy)return!0;if(D.loader==null)return!1;if(i)return D.loader.hydrate?!0:t.loaderData[D.id]===void 0&&(!t.errors||t.errors[D.id]===void 0);if(CD(t.loaderData,t.matches[P],m)||s.some(z=>z===m.route.id))return!0;let N=t.matches[P],B=m;return Q1(m,nn({currentUrl:y,currentParams:N.params,nextUrl:b,nextParams:B.params},r,{actionResult:w,defaultShouldRevalidate:a||y.pathname+y.search===b.pathname+b.search||y.search!==b.search||TE(N,B)}))}),k=[];return c.forEach((m,P)=>{if(i||!n.some(V=>V.route.id===m.routeId)||l.has(P))return;let D=Us(d,m.path,p);if(!D){k.push({key:P,routeId:m.routeId,path:m.path,matches:null,match:null,controller:null});return}let N=t.fetchers.get(P),B=fm(D,m.path),z=!1;f.has(P)?z=!1:u.includes(P)?z=!0:N&&N.state!=="idle"&&N.data===void 0?z=a:z=Q1(B,nn({currentUrl:y,currentParams:t.matches[t.matches.length-1].params,nextUrl:b,nextParams:n[n.length-1].params},r,{actionResult:w,defaultShouldRevalidate:a})),z&&k.push({key:P,routeId:m.routeId,path:m.path,matches:D,match:B,controller:new AbortController})}),[R,k]}function CD(e,t,n){let r=!t||n.route.id!==t.route.id,o=e[n.route.id]===void 0;return r||o}function TE(e,t){let n=e.route.path;return e.pathname!==t.pathname||n!=null&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function Q1(e,t){if(e.route.shouldRevalidate){let n=e.route.shouldRevalidate(t);if(typeof n=="boolean")return n}return t.defaultShouldRevalidate}async function J1(e,t,n){if(!e.lazy)return;let r=await e.lazy();if(!e.lazy)return;let o=n[e.id];yt(o,"No route found in manifest");let i={};for(let a in r){let u=o[a]!==void 0&&a!=="hasErrorBoundary";fu(!u,'Route "'+o.id+'" has a static property "'+a+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+a+'" will be ignored.')),!u&&!GI.has(a)&&(i[a]=r[a])}Object.assign(o,i),Object.assign(o,nn({},t(o),{lazy:void 0}))}async function qu(e,t,n,r,o,i,a,s,u){u===void 0&&(u={});let l,c,f,d=x=>{let w,y=new Promise((b,E)=>w=E);return f=()=>w(),t.signal.addEventListener("abort",f),Promise.race([x({request:t,params:n.params,context:u.requestContext}),y])};try{let x=n.route[e];if(n.route.lazy)if(x){let w,y=await Promise.all([d(x).catch(b=>{w=b}),J1(n.route,i,o)]);if(w)throw w;c=y[0]}else if(await J1(n.route,i,o),x=n.route[e],x)c=await d(x);else if(e==="action"){let w=new URL(t.url),y=w.pathname+w.search;throw Ur(405,{method:t.method,pathname:y,routeId:n.route.id})}else return{type:en.data,data:void 0};else if(x)c=await d(x);else{let w=new URL(t.url),y=w.pathname+w.search;throw Ur(404,{pathname:y})}yt(c!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(x){l=en.error,c=x}finally{f&&t.signal.removeEventListener("abort",f)}if(RD(c)){let x=c.status;if(mD.has(x)){let y=c.headers.get("Location");if(yt(y,"Redirects returned/thrown from loaders/actions must have a Location header"),!kE.test(y))y=lm(new URL(t.url),r.slice(0,r.indexOf(n)+1),a,!0,y,s);else if(!u.isStaticRequest){let b=new URL(t.url),E=y.startsWith("//")?new URL(b.protocol+y):new URL(y),S=ic(E.pathname,a)!=null;E.origin===b.origin&&S&&(y=E.pathname+E.search+E.hash)}if(u.isStaticRequest)throw c.headers.set("Location",y),c;return{type:en.redirect,status:x,location:y,revalidate:c.headers.get("X-Remix-Revalidate")!==null,reloadDocument:c.headers.get("X-Remix-Reload-Document")!==null}}if(u.isRouteRequest)throw{type:l===en.error?en.error:en.data,response:c};let w;try{let y=c.headers.get("Content-Type");y&&/\bapplication\/json\b/.test(y)?c.body==null?w=null:w=await c.json():w=await c.text()}catch(y){return{type:en.error,error:y}}return l===en.error?{type:l,error:new Xg(x,c.statusText,w),headers:c.headers}:{type:en.data,data:w,statusCode:c.status,headers:c.headers}}if(l===en.error)return{type:l,error:c};if(kD(c)){var p,v;return{type:en.deferred,deferredData:c,statusCode:(p=c.init)==null?void 0:p.status,headers:((v=c.init)==null?void 0:v.headers)&&new Headers(c.init.headers)}}return{type:en.data,data:c}}function Ku(e,t,n,r){let o=e.createURL(IE(t)).toString(),i={signal:n};if(r&&ao(r.formMethod)){let{formMethod:a,formEncType:s}=r;i.method=a.toUpperCase(),s==="application/json"?(i.headers=new Headers({"Content-Type":s}),i.body=JSON.stringify(r.json)):s==="text/plain"?i.body=r.text:s==="application/x-www-form-urlencoded"&&r.formData?i.body=cm(r.formData):i.body=r.formData}return new Request(o,i)}function cm(e){let t=new URLSearchParams;for(let[n,r]of e.entries())t.append(n,typeof r=="string"?r:r.name);return t}function Z1(e){let t=new FormData;for(let[n,r]of e.entries())t.append(n,r);return t}function SD(e,t,n,r,o){let i={},a=null,s,u=!1,l={};return n.forEach((c,f)=>{let d=t[f].route.id;if(yt(!za(c),"Cannot handle redirect results in processLoaderData"),$s(c)){let p=gl(e,d),v=c.error;r&&(v=Object.values(r)[0],r=void 0),a=a||{},a[p.route.id]==null&&(a[p.route.id]=v),i[d]=void 0,u||(u=!0,s=SE(c.error)?c.error.status:500),c.headers&&(l[d]=c.headers)}else Wa(c)?(o.set(d,c.deferredData),i[d]=c.deferredData.data):i[d]=c.data,c.statusCode!=null&&c.statusCode!==200&&!u&&(s=c.statusCode),c.headers&&(l[d]=c.headers)}),r&&(a=r,i[Object.keys(r)[0]]=void 0),{loaderData:i,errors:a,statusCode:s||200,loaderHeaders:l}}function ex(e,t,n,r,o,i,a,s){let{loaderData:u,errors:l}=SD(t,n,r,o,s);for(let c=0;c<i.length;c++){let{key:f,match:d,controller:p}=i[c];yt(a!==void 0&&a[c]!==void 0,"Did not find corresponding fetcher result");let v=a[c];if(!(p&&p.signal.aborted))if($s(v)){let x=gl(e.matches,d==null?void 0:d.route.id);l&&l[x.route.id]||(l=nn({},l,{[x.route.id]:v.error})),e.fetchers.delete(f)}else if(za(v))yt(!1,"Unhandled fetcher revalidation redirect");else if(Wa(v))yt(!1,"Unhandled fetcher deferred data");else{let x=Oi(v.data);e.fetchers.set(f,x)}}return{loaderData:u,errors:l}}function tx(e,t,n,r){let o=nn({},t);for(let i of n){let a=i.route.id;if(t.hasOwnProperty(a)?t[a]!==void 0&&(o[a]=t[a]):e[a]!==void 0&&i.route.loader&&(o[a]=e[a]),r&&r.hasOwnProperty(a))break}return o}function gl(e,t){return(t?e.slice(0,e.findIndex(r=>r.route.id===t)+1):[...e]).reverse().find(r=>r.route.hasErrorBoundary===!0)||e[0]}function nx(e){let t=e.length===1?e[0]:e.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function Ur(e,t){let{pathname:n,routeId:r,method:o,type:i}=t===void 0?{}:t,a="Unknown Server Error",s="Unknown @remix-run/router error";return e===400?(a="Bad Request",o&&n&&r?s="You made a "+o+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":i==="defer-action"?s="defer() is not supported in actions":i==="invalid-body"&&(s="Unable to encode submission body")):e===403?(a="Forbidden",s='Route "'+r+'" does not match URL "'+n+'"'):e===404?(a="Not Found",s='No route matches URL "'+n+'"'):e===405&&(a="Method Not Allowed",o&&n&&r?s="You made a "+o.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":o&&(s='Invalid request method "'+o.toUpperCase()+'"')),new Xg(e||500,a,new Error(s),!0)}function rx(e){for(let t=e.length-1;t>=0;t--){let n=e[t];if(za(n))return{result:n,idx:t}}}function IE(e){let t=typeof e=="string"?yi(e):e;return oc(nn({},t,{hash:""}))}function _D(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function Wa(e){return e.type===en.deferred}function $s(e){return e.type===en.error}function za(e){return(e&&e.type)===en.redirect}function kD(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function RD(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function TD(e){return vD.has(e.toLowerCase())}function ao(e){return hD.has(e.toLowerCase())}async function ox(e,t,n,r,o,i){for(let a=0;a<n.length;a++){let s=n[a],u=t[a];if(!u)continue;let l=e.find(f=>f.route.id===u.route.id),c=l!=null&&!TE(l,u)&&(i&&i[u.route.id])!==void 0;if(Wa(s)&&(o||c)){let f=r[a];yt(f,"Expected an AbortSignal for revalidating fetcher deferred result"),await DE(s,f,o).then(d=>{d&&(n[a]=d||n[a])})}}}async function DE(e,t,n){if(n===void 0&&(n=!1),!await e.deferredData.resolveData(t)){if(n)try{return{type:en.data,data:e.deferredData.unwrappedData}}catch(o){return{type:en.error,error:o}}return{type:en.data,data:e.deferredData.data}}}function Yg(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function fm(e,t){let n=typeof t=="string"?yi(t).search:t.search;if(e[e.length-1].route.index&&Yg(n||""))return e[e.length-1];let r=bE(e);return r[r.length-1]}function ix(e){let{formMethod:t,formAction:n,formEncType:r,text:o,formData:i,json:a}=e;if(!(!t||!n||!r)){if(o!=null)return{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:void 0,text:o};if(i!=null)return{formMethod:t,formAction:n,formEncType:r,formData:i,json:void 0,text:void 0};if(a!==void 0)return{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:a,text:void 0}}}function wp(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function ID(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function Xu(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function DD(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function Oi(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function ND(e,t){try{let n=e.sessionStorage.getItem(RE);if(n){let r=JSON.parse(n);for(let[o,i]of Object.entries(r||{}))i&&Array.isArray(i)&&t.set(o,new Set(i||[]))}}catch{}}function AD(e,t){if(t.size>0){let n={};for(let[r,o]of t)n[r]=[...o];try{e.sessionStorage.setItem(RE,JSON.stringify(n))}catch(r){fu(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.22.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ul(){return Ul=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ul.apply(this,arguments)}const Jd=W.createContext(null),NE=W.createContext(null),Zd=W.createContext(null),eh=W.createContext(null),Cu=W.createContext({outlet:null,matches:[],isDataRoute:!1}),AE=W.createContext(null);function th(){return W.useContext(eh)!=null}function PE(){return th()||yt(!1),W.useContext(eh).location}function FE(e){W.useContext(Zd).static||W.useLayoutEffect(e)}function PD(){let{isDataRoute:e}=W.useContext(Cu);return e?VD():FD()}function FD(){th()||yt(!1);let e=W.useContext(Jd),{basename:t,future:n,navigator:r}=W.useContext(Zd),{matches:o}=W.useContext(Cu),{pathname:i}=PE(),a=JSON.stringify(EE(o,n.v7_relativeSplatPath)),s=W.useRef(!1);return FE(()=>{s.current=!0}),W.useCallback(function(l,c){if(c===void 0&&(c={}),!s.current)return;if(typeof l=="number"){r.go(l);return}let f=CE(l,JSON.parse(a),i,c.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:ra([t,f.pathname])),(c.replace?r.replace:r.push)(f,c.state,c)},[t,r,a,i,e])}function OD(e,t,n,r){th()||yt(!1);let{navigator:o}=W.useContext(Zd),{matches:i}=W.useContext(Cu),a=i[i.length-1],s=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let l=PE(),c;if(t){var f;let w=typeof t=="string"?yi(t):t;u==="/"||(f=w.pathname)!=null&&f.startsWith(u)||yt(!1),c=w}else c=l;let d=c.pathname||"/",p=d;if(u!=="/"){let w=u.replace(/^\//,"").split("/");p="/"+d.replace(/^\//,"").split("/").slice(w.length).join("/")}let v=Us(e,{pathname:p}),x=WD(v&&v.map(w=>Object.assign({},w,{params:Object.assign({},s,w.params),pathname:ra([u,o.encodeLocation?o.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?u:ra([u,o.encodeLocation?o.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,n,r);return t&&x?W.createElement(eh.Provider,{value:{location:Ul({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:ln.Pop}},x):x}function MD(){let e=HD(),t=SE(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return W.createElement(W.Fragment,null,W.createElement("h2",null,"Unexpected Application Error!"),W.createElement("h3",{style:{fontStyle:"italic"}},t),n?W.createElement("pre",{style:o},n):null,null)}const LD=W.createElement(MD,null);class BD extends W.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?W.createElement(Cu.Provider,{value:this.props.routeContext},W.createElement(AE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function jD(e){let{routeContext:t,match:n,children:r}=e,o=W.useContext(Jd);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),W.createElement(Cu.Provider,{value:t},r)}function WD(e,t,n,r){var o;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var i;if((i=n)!=null&&i.errors)e=n.matches;else return null}let a=e,s=(o=n)==null?void 0:o.errors;if(s!=null){let c=a.findIndex(f=>f.route.id&&(s==null?void 0:s[f.route.id]));c>=0||yt(!1),a=a.slice(0,Math.min(a.length,c+1))}let u=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<a.length;c++){let f=a[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=c),f.route.id){let{loaderData:d,errors:p}=n,v=f.route.loader&&d[f.route.id]===void 0&&(!p||p[f.route.id]===void 0);if(f.route.lazy||v){u=!0,l>=0?a=a.slice(0,l+1):a=[a[0]];break}}}return a.reduceRight((c,f,d)=>{let p,v=!1,x=null,w=null;n&&(p=s&&f.route.id?s[f.route.id]:void 0,x=f.route.errorElement||LD,u&&(l<0&&d===0?(GD("route-fallback",!1),v=!0,w=null):l===d&&(v=!0,w=f.route.hydrateFallbackElement||null)));let y=t.concat(a.slice(0,d+1)),b=()=>{let E;return p?E=x:v?E=w:f.route.Component?E=W.createElement(f.route.Component,null):f.route.element?E=f.route.element:E=c,W.createElement(jD,{match:f,routeContext:{outlet:c,matches:y,isDataRoute:n!=null},children:E})};return n&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?W.createElement(BD,{location:n.location,revalidation:n.revalidation,component:x,error:p,children:b(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):b()},null)}var OE=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(OE||{}),nd=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(nd||{});function zD(e){let t=W.useContext(Jd);return t||yt(!1),t}function UD(e){let t=W.useContext(NE);return t||yt(!1),t}function $D(e){let t=W.useContext(Cu);return t||yt(!1),t}function ME(e){let t=$D(),n=t.matches[t.matches.length-1];return n.route.id||yt(!1),n.route.id}function HD(){var e;let t=W.useContext(AE),n=UD(nd.UseRouteError),r=ME(nd.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function VD(){let{router:e}=zD(OE.UseNavigateStable),t=ME(nd.UseNavigateStable),n=W.useRef(!1);return FE(()=>{n.current=!0}),W.useCallback(function(o,i){i===void 0&&(i={}),n.current&&(typeof o=="number"?e.navigate(o):e.navigate(o,Ul({fromRouteId:t},i)))},[e,t])}const ax={};function GD(e,t,n){!t&&!ax[e]&&(ax[e]=!0)}function qD(e){let{basename:t="/",children:n=null,location:r,navigationType:o=ln.Pop,navigator:i,static:a=!1,future:s}=e;th()&&yt(!1);let u=t.replace(/^\/*/,"/"),l=W.useMemo(()=>({basename:u,navigator:i,static:a,future:Ul({v7_relativeSplatPath:!1},s)}),[u,s,i,a]);typeof r=="string"&&(r=yi(r));let{pathname:c="/",search:f="",hash:d="",state:p=null,key:v="default"}=r,x=W.useMemo(()=>{let w=ic(c,u);return w==null?null:{location:{pathname:w,search:f,hash:d,state:p,key:v},navigationType:o}},[u,c,f,d,p,v,o]);return x==null?null:W.createElement(Zd.Provider,{value:l},W.createElement(eh.Provider,{children:n,value:x}))}new Promise(()=>{});function KD(e){let t={hasErrorBoundary:e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&Object.assign(t,{element:W.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:W.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:W.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}/**
 * React Router DOM v6.22.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rd(){return rd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rd.apply(this,arguments)}const XD="6";try{window.__reactRouterVersion=XD}catch{}function YD(e,t){return wD({basename:t==null?void 0:t.basename,future:rd({},t==null?void 0:t.future,{v7_prependBasename:!0}),history:$I({window:t==null?void 0:t.window}),hydrationData:(t==null?void 0:t.hydrationData)||QD(),routes:e,mapRouteProperties:KD,window:t==null?void 0:t.window}).initialize()}function QD(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=rd({},t,{errors:JD(t.errors)})),t}function JD(e){if(!e)return null;let t=Object.entries(e),n={};for(let[r,o]of t)if(o&&o.__type==="RouteErrorResponse")n[r]=new Xg(o.status,o.statusText,o.data,o.internal===!0);else if(o&&o.__type==="Error"){if(o.__subType){let i=window[o.__subType];if(typeof i=="function")try{let a=new i(o.message);a.stack="",n[r]=a}catch{}}if(n[r]==null){let i=new Error(o.message);i.stack="",n[r]=i}}else n[r]=o;return n}const ZD=W.createContext({isTransitioning:!1}),eN=W.createContext(new Map),tN="startTransition",sx=AR[tN],nN="flushSync",ux=UI[nN];function rN(e){sx?sx(e):e()}function Yu(e){ux?ux(e):e()}class oN{constructor(){this.status="pending",this.promise=new Promise((t,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",t(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}}function iN(e){let{fallbackElement:t,router:n,future:r}=e,[o,i]=W.useState(n.state),[a,s]=W.useState(),[u,l]=W.useState({isTransitioning:!1}),[c,f]=W.useState(),[d,p]=W.useState(),[v,x]=W.useState(),w=W.useRef(new Map),{v7_startTransition:y}=r||{},b=W.useCallback(m=>{y?rN(m):m()},[y]),E=W.useCallback((m,P)=>{let{deletedFetchers:D,unstable_flushSync:N,unstable_viewTransitionOpts:B}=P;D.forEach(V=>w.current.delete(V)),m.fetchers.forEach((V,Z)=>{V.data!==void 0&&w.current.set(Z,V.data)});let z=n.window==null||typeof n.window.document.startViewTransition!="function";if(!B||z){N?Yu(()=>i(m)):b(()=>i(m));return}if(N){Yu(()=>{d&&(c&&c.resolve(),d.skipTransition()),l({isTransitioning:!0,flushSync:!0,currentLocation:B.currentLocation,nextLocation:B.nextLocation})});let V=n.window.document.startViewTransition(()=>{Yu(()=>i(m))});V.finished.finally(()=>{Yu(()=>{f(void 0),p(void 0),s(void 0),l({isTransitioning:!1})})}),Yu(()=>p(V));return}d?(c&&c.resolve(),d.skipTransition(),x({state:m,currentLocation:B.currentLocation,nextLocation:B.nextLocation})):(s(m),l({isTransitioning:!0,flushSync:!1,currentLocation:B.currentLocation,nextLocation:B.nextLocation}))},[n.window,d,c,w,b]);W.useLayoutEffect(()=>n.subscribe(E),[n,E]),W.useEffect(()=>{u.isTransitioning&&!u.flushSync&&f(new oN)},[u]),W.useEffect(()=>{if(c&&a&&n.window){let m=a,P=c.promise,D=n.window.document.startViewTransition(async()=>{b(()=>i(m)),await P});D.finished.finally(()=>{f(void 0),p(void 0),s(void 0),l({isTransitioning:!1})}),p(D)}},[b,a,c,n.window]),W.useEffect(()=>{c&&a&&o.location.key===a.location.key&&c.resolve()},[c,d,o.location,a]),W.useEffect(()=>{!u.isTransitioning&&v&&(s(v.state),l({isTransitioning:!0,flushSync:!1,currentLocation:v.currentLocation,nextLocation:v.nextLocation}),x(void 0))},[u.isTransitioning,v]),W.useEffect(()=>{},[]);let S=W.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:m=>n.navigate(m),push:(m,P,D)=>n.navigate(m,{state:P,preventScrollReset:D==null?void 0:D.preventScrollReset}),replace:(m,P,D)=>n.navigate(m,{replace:!0,state:P,preventScrollReset:D==null?void 0:D.preventScrollReset})}),[n]),R=n.basename||"/",k=W.useMemo(()=>({router:n,navigator:S,static:!1,basename:R}),[n,S,R]);return W.createElement(W.Fragment,null,W.createElement(Jd.Provider,{value:k},W.createElement(NE.Provider,{value:o},W.createElement(eN.Provider,{value:w.current},W.createElement(ZD.Provider,{value:u},W.createElement(qD,{basename:R,location:o.location,navigationType:o.historyAction,navigator:S,future:{v7_relativeSplatPath:n.future.v7_relativeSplatPath}},o.initialized||n.future.v7_partialHydration?W.createElement(aN,{routes:n.routes,future:n.future,state:o}):t))))),null)}function aN(e){let{routes:t,future:n,state:r}=e;return OD(t,void 0,r,n)}var lx;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(lx||(lx={}));var cx;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(cx||(cx={}));var LE={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var i="",a=0;a<arguments.length;a++){var s=arguments[a];s&&(i=o(i,r(s)))}return i}function r(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return n.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var a="";for(var s in i)t.call(i,s)&&i[s]&&(a=o(a,s));return a}function o(i,a){return a?i?i+" "+a:i+a:i}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(LE);var sN=LE.exports;const Lt=rs(sN);function uN(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,i;for(i=0;i<r.length;i++)o=r[i],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}function dm(e,t){return dm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},dm(e,t)}function lN(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,dm(e,t)}const cN=["xxl","xl","lg","md","sm","xs"],fN="xs",nh=W.createContext({prefixes:{},breakpoints:cN,minBreakpoint:fN});function Cn(e,t){const{prefixes:n}=W.useContext(nh);return e||n[t]||t}function dN(){const{breakpoints:e}=W.useContext(nh);return e}function hN(){const{minBreakpoint:e}=W.useContext(nh);return e}function pN(){const{dir:e}=W.useContext(nh);return e==="rtl"}function rh(e){return e&&e.ownerDocument||document}function vN(e){var t=rh(e);return t&&t.defaultView||window}function mN(e,t){return vN(e).getComputedStyle(e,t)}var gN=/([A-Z])/g;function yN(e){return e.replace(gN,"-$1").toLowerCase()}var xN=/^ms-/;function Kc(e){return yN(e).replace(xN,"-ms-")}var wN=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function bN(e){return!!(e&&wN.test(e))}function Ga(e,t){var n="",r="";if(typeof t=="string")return e.style.getPropertyValue(Kc(t))||mN(e).getPropertyValue(Kc(t));Object.keys(t).forEach(function(o){var i=t[o];!i&&i!==0?e.style.removeProperty(Kc(o)):bN(o)?r+=o+"("+i+") ":n+=Kc(o)+": "+i+";"}),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n}var BE={exports:{}},EN="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",CN=EN,SN=CN;function jE(){}function WE(){}WE.resetWarningCache=jE;var _N=function(){function e(r,o,i,a,s,u){if(u!==SN){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:WE,resetWarningCache:jE};return n.PropTypes=n,n};BE.exports=_N();var kN=BE.exports;const li=rs(kN),fx={disabled:!1},zE=ar.createContext(null);var RN=function(t){return t.scrollTop},sl="unmounted",Da="exited",Bi="entering",Pa="entered",hm="exiting",xi=function(e){lN(t,e);function t(r,o){var i;i=e.call(this,r,o)||this;var a=o,s=a&&!a.isMounting?r.enter:r.appear,u;return i.appearStatus=null,r.in?s?(u=Da,i.appearStatus=Bi):u=Pa:r.unmountOnExit||r.mountOnEnter?u=sl:u=Da,i.state={status:u},i.nextCallback=null,i}t.getDerivedStateFromProps=function(o,i){var a=o.in;return a&&i.status===sl?{status:Da}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(o){var i=null;if(o!==this.props){var a=this.state.status;this.props.in?a!==Bi&&a!==Pa&&(i=Bi):(a===Bi||a===Pa)&&(i=hm)}this.updateStatus(!1,i)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var o=this.props.timeout,i,a,s;return i=a=s=o,o!=null&&typeof o!="number"&&(i=o.exit,a=o.enter,s=o.appear!==void 0?o.appear:a),{exit:i,enter:a,appear:s}},n.updateStatus=function(o,i){if(o===void 0&&(o=!1),i!==null)if(this.cancelNextCallback(),i===Bi){if(this.props.unmountOnExit||this.props.mountOnEnter){var a=this.props.nodeRef?this.props.nodeRef.current:ja.findDOMNode(this);a&&RN(a)}this.performEnter(o)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Da&&this.setState({status:sl})},n.performEnter=function(o){var i=this,a=this.props.enter,s=this.context?this.context.isMounting:o,u=this.props.nodeRef?[s]:[ja.findDOMNode(this),s],l=u[0],c=u[1],f=this.getTimeouts(),d=s?f.appear:f.enter;if(!o&&!a||fx.disabled){this.safeSetState({status:Pa},function(){i.props.onEntered(l)});return}this.props.onEnter(l,c),this.safeSetState({status:Bi},function(){i.props.onEntering(l,c),i.onTransitionEnd(d,function(){i.safeSetState({status:Pa},function(){i.props.onEntered(l,c)})})})},n.performExit=function(){var o=this,i=this.props.exit,a=this.getTimeouts(),s=this.props.nodeRef?void 0:ja.findDOMNode(this);if(!i||fx.disabled){this.safeSetState({status:Da},function(){o.props.onExited(s)});return}this.props.onExit(s),this.safeSetState({status:hm},function(){o.props.onExiting(s),o.onTransitionEnd(a.exit,function(){o.safeSetState({status:Da},function(){o.props.onExited(s)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(o,i){i=this.setNextCallback(i),this.setState(o,i)},n.setNextCallback=function(o){var i=this,a=!0;return this.nextCallback=function(s){a&&(a=!1,i.nextCallback=null,o(s))},this.nextCallback.cancel=function(){a=!1},this.nextCallback},n.onTransitionEnd=function(o,i){this.setNextCallback(i);var a=this.props.nodeRef?this.props.nodeRef.current:ja.findDOMNode(this),s=o==null&&!this.props.addEndListener;if(!a||s){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[a,this.nextCallback],l=u[0],c=u[1];this.props.addEndListener(l,c)}o!=null&&setTimeout(this.nextCallback,o)},n.render=function(){var o=this.state.status;if(o===sl)return null;var i=this.props,a=i.children;i.in,i.mountOnEnter,i.unmountOnExit,i.appear,i.enter,i.exit,i.timeout,i.addEndListener,i.onEnter,i.onEntering,i.onEntered,i.onExit,i.onExiting,i.onExited,i.nodeRef;var s=uN(i,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return ar.createElement(zE.Provider,{value:null},typeof a=="function"?a(o,s):ar.cloneElement(ar.Children.only(a),s))},t}(ar.Component);xi.contextType=zE;xi.propTypes={};function ms(){}xi.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:ms,onEntering:ms,onEntered:ms,onExit:ms,onExiting:ms,onExited:ms};xi.UNMOUNTED=sl;xi.EXITED=Da;xi.ENTERING=Bi;xi.ENTERED=Pa;xi.EXITING=hm;const TN=xi,Su=!!(typeof window<"u"&&window.document&&window.document.createElement);var pm=!1,vm=!1;try{var bp={get passive(){return pm=!0},get once(){return vm=pm=!0}};Su&&(window.addEventListener("test",bp,bp),window.removeEventListener("test",bp,!0))}catch{}function UE(e,t,n,r){if(r&&typeof r!="boolean"&&!vm){var o=r.once,i=r.capture,a=n;!vm&&o&&(a=n.__once||function s(u){this.removeEventListener(t,s,i),n.call(this,u)},n.__once=a),e.addEventListener(t,a,pm?r:i)}e.addEventListener(t,n,r)}function mm(e,t,n,r){var o=r&&typeof r!="boolean"?r.capture:r;e.removeEventListener(t,n,o),n.__once&&e.removeEventListener(t,n.__once,o)}function od(e,t,n,r){return UE(e,t,n,r),function(){mm(e,t,n,r)}}function IN(e,t,n,r){if(n===void 0&&(n=!1),r===void 0&&(r=!0),e){var o=document.createEvent("HTMLEvents");o.initEvent(t,n,r),e.dispatchEvent(o)}}function DN(e){var t=Ga(e,"transitionDuration")||"",n=t.indexOf("ms")===-1?1e3:1;return parseFloat(t)*n}function NN(e,t,n){n===void 0&&(n=5);var r=!1,o=setTimeout(function(){r||IN(e,"transitionend",!0)},t+n),i=od(e,"transitionend",function(){r=!0},{once:!0});return function(){clearTimeout(o),i()}}function $E(e,t,n,r){n==null&&(n=DN(e)||0);var o=NN(e,n,r),i=od(e,"transitionend",t);return function(){o(),i()}}function dx(e,t){const n=Ga(e,t)||"",r=n.indexOf("ms")===-1?1e3:1;return parseFloat(n)*r}function AN(e,t){const n=dx(e,"transitionDuration"),r=dx(e,"transitionDelay"),o=$E(e,i=>{i.target===e&&(o(),t(i))},n+r)}function PN(e){e.offsetHeight}const hx=e=>!e||typeof e=="function"?e:t=>{e.current=t};function FN(e,t){const n=hx(e),r=hx(t);return o=>{n&&n(o),r&&r(o)}}function ac(e,t){return W.useMemo(()=>FN(e,t),[e,t])}function ON(e){return e&&"setState"in e?ja.findDOMNode(e):e??null}const MN=ar.forwardRef(({onEnter:e,onEntering:t,onEntered:n,onExit:r,onExiting:o,onExited:i,addEndListener:a,children:s,childRef:u,...l},c)=>{const f=W.useRef(null),d=ac(f,u),p=k=>{d(ON(k))},v=k=>m=>{k&&f.current&&k(f.current,m)},x=W.useCallback(v(e),[e]),w=W.useCallback(v(t),[t]),y=W.useCallback(v(n),[n]),b=W.useCallback(v(r),[r]),E=W.useCallback(v(o),[o]),S=W.useCallback(v(i),[i]),R=W.useCallback(v(a),[a]);return F.jsx(TN,{ref:c,...l,onEnter:x,onEntered:y,onEntering:w,onExit:b,onExited:S,onExiting:E,addEndListener:R,nodeRef:f,children:typeof s=="function"?(k,m)=>s(k,{...m,ref:p}):ar.cloneElement(s,{ref:p})})}),LN=MN;function BN(e){const t=W.useRef(e);return W.useEffect(()=>{t.current=e},[e]),t}function Po(e){const t=BN(e);return W.useCallback(function(...n){return t.current&&t.current(...n)},[t])}const jN=e=>W.forwardRef((t,n)=>F.jsx("div",{...t,ref:n,className:Lt(t.className,e)}));function WN(){return W.useState(null)}function zN(){const e=W.useRef(!0),t=W.useRef(()=>e.current);return W.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}function UN(e){const t=W.useRef(null);return W.useEffect(()=>{t.current=e}),t.current}const $N=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",HN=typeof document<"u",px=HN||$N?W.useLayoutEffect:W.useEffect,VN=["as","disabled"];function GN(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,i;for(i=0;i<r.length;i++)o=r[i],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}function qN(e){return!e||e.trim()==="#"}function HE({tagName:e,disabled:t,href:n,target:r,rel:o,role:i,onClick:a,tabIndex:s=0,type:u}){e||(n!=null||r!=null||o!=null?e="a":e="button");const l={tagName:e};if(e==="button")return[{type:u||"button",disabled:t},l];const c=d=>{if((t||e==="a"&&qN(n))&&d.preventDefault(),t){d.stopPropagation();return}a==null||a(d)},f=d=>{d.key===" "&&(d.preventDefault(),c(d))};return e==="a"&&(n||(n="#"),t&&(n=void 0)),[{role:i??"button",disabled:void 0,tabIndex:t?void 0:s,href:n,target:e==="a"?r:void 0,"aria-disabled":t||void 0,rel:e==="a"?o:void 0,onClick:c,onKeyDown:f},l]}const KN=W.forwardRef((e,t)=>{let{as:n,disabled:r}=e,o=GN(e,VN);const[i,{tagName:a}]=HE(Object.assign({tagName:n,disabled:r},o));return F.jsx(a,Object.assign({},o,i,{ref:t}))});KN.displayName="Button";const XN={[Bi]:"show",[Pa]:"show"},VE=W.forwardRef(({className:e,children:t,transitionClasses:n={},onEnter:r,...o},i)=>{const a={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...o},s=W.useCallback((u,l)=>{PN(u),r==null||r(u,l)},[r]);return F.jsx(LN,{ref:i,addEndListener:AN,...a,onEnter:s,childRef:t.ref,children:(u,l)=>W.cloneElement(t,{...l,className:Lt("fade",e,t.props.className,XN[u],n[u])})})});VE.displayName="Fade";const GE=VE,YN={"aria-label":li.string,onClick:li.func,variant:li.oneOf(["white"])},Qg=W.forwardRef(({className:e,variant:t,"aria-label":n="Close",...r},o)=>F.jsx("button",{ref:o,type:"button",className:Lt("btn-close",t&&`btn-close-${t}`,e),"aria-label":n,...r}));Qg.displayName="CloseButton";Qg.propTypes=YN;const QN=Qg,qE=W.forwardRef(({as:e,bsPrefix:t,variant:n="primary",size:r,active:o=!1,disabled:i=!1,className:a,...s},u)=>{const l=Cn(t,"btn"),[c,{tagName:f}]=HE({tagName:e,disabled:i,...s}),d=f;return F.jsx(d,{...c,...s,ref:u,disabled:i,className:Lt(a,l,o&&"active",n&&`${l}-${n}`,r&&`${l}-${r}`,s.href&&i&&"disabled")})});qE.displayName="Button";const Ui=qE;function JN(e){const t=W.useRef(e);return t.current=e,t}function KE(e){const t=JN(e);W.useEffect(()=>()=>t.current(),[])}function ZN(e,t){return W.Children.toArray(e).some(n=>W.isValidElement(n)&&n.type===t)}function eA({as:e,bsPrefix:t,className:n,...r}){t=Cn(t,"col");const o=dN(),i=hN(),a=[],s=[];return o.forEach(u=>{const l=r[u];delete r[u];let c,f,d;typeof l=="object"&&l!=null?{span:c,offset:f,order:d}=l:c=l;const p=u!==i?`-${u}`:"";c&&a.push(c===!0?`${t}${p}`:`${t}${p}-${c}`),d!=null&&s.push(`order${p}-${d}`),f!=null&&s.push(`offset${p}-${f}`)}),[{...r,className:Lt(n,...a,...s)},{as:e,bsPrefix:t,spans:a}]}const XE=W.forwardRef((e,t)=>{const[{className:n,...r},{as:o="div",bsPrefix:i,spans:a}]=eA(e);return F.jsx(o,{...r,ref:t,className:Lt(n,!a.length&&i)})});XE.displayName="Col";const tA=XE;var nA=Function.prototype.bind.call(Function.prototype.call,[].slice);function gs(e,t){return nA(e.querySelectorAll(t))}function vx(e,t){if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return e===t||!!(e.compareDocumentPosition(t)&16)}const rA="data-rr-ui-";function oA(e){return`${rA}${e}`}const YE=W.createContext(Su?window:void 0);YE.Provider;function Jg(){return W.useContext(YE)}const iA={type:li.string,tooltip:li.bool,as:li.elementType},Zg=W.forwardRef(({as:e="div",className:t,type:n="valid",tooltip:r=!1,...o},i)=>F.jsx(e,{...o,ref:i,className:Lt(t,`${n}-${r?"tooltip":"feedback"}`)}));Zg.displayName="Feedback";Zg.propTypes=iA;const QE=Zg,aA=W.createContext({}),vi=aA,JE=W.forwardRef(({id:e,bsPrefix:t,className:n,type:r="checkbox",isValid:o=!1,isInvalid:i=!1,as:a="input",...s},u)=>{const{controlId:l}=W.useContext(vi);return t=Cn(t,"form-check-input"),F.jsx(a,{...s,ref:u,type:r,id:e||l,className:Lt(n,t,o&&"is-valid",i&&"is-invalid")})});JE.displayName="FormCheckInput";const ZE=JE,eC=W.forwardRef(({bsPrefix:e,className:t,htmlFor:n,...r},o)=>{const{controlId:i}=W.useContext(vi);return e=Cn(e,"form-check-label"),F.jsx("label",{...r,ref:o,htmlFor:n||i,className:Lt(t,e)})});eC.displayName="FormCheckLabel";const gm=eC,tC=W.forwardRef(({id:e,bsPrefix:t,bsSwitchPrefix:n,inline:r=!1,reverse:o=!1,disabled:i=!1,isValid:a=!1,isInvalid:s=!1,feedbackTooltip:u=!1,feedback:l,feedbackType:c,className:f,style:d,title:p="",type:v="checkbox",label:x,children:w,as:y="input",...b},E)=>{t=Cn(t,"form-check"),n=Cn(n,"form-switch");const{controlId:S}=W.useContext(vi),R=W.useMemo(()=>({controlId:e||S}),[S,e]),k=!w&&x!=null&&x!==!1||ZN(w,gm),m=F.jsx(ZE,{...b,type:v==="switch"?"checkbox":v,ref:E,isValid:a,isInvalid:s,disabled:i,as:y});return F.jsx(vi.Provider,{value:R,children:F.jsx("div",{style:d,className:Lt(f,k&&t,r&&`${t}-inline`,o&&`${t}-reverse`,v==="switch"&&n),children:w||F.jsxs(F.Fragment,{children:[m,k&&F.jsx(gm,{title:p,children:x}),l&&F.jsx(QE,{type:c,tooltip:u,children:l})]})})})});tC.displayName="FormCheck";const id=Object.assign(tC,{Input:ZE,Label:gm}),nC=W.forwardRef(({bsPrefix:e,type:t,size:n,htmlSize:r,id:o,className:i,isValid:a=!1,isInvalid:s=!1,plaintext:u,readOnly:l,as:c="input",...f},d)=>{const{controlId:p}=W.useContext(vi);return e=Cn(e,"form-control"),F.jsx(c,{...f,type:t,size:r,ref:d,readOnly:l,id:o||p,className:Lt(i,u?`${e}-plaintext`:e,n&&`${e}-${n}`,t==="color"&&`${e}-color`,a&&"is-valid",s&&"is-invalid")})});nC.displayName="FormControl";const sA=Object.assign(nC,{Feedback:QE}),rC=W.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},o)=>(t=Cn(t,"form-floating"),F.jsx(n,{ref:o,className:Lt(e,t),...r})));rC.displayName="FormFloating";const uA=rC,oC=W.forwardRef(({controlId:e,as:t="div",...n},r)=>{const o=W.useMemo(()=>({controlId:e}),[e]);return F.jsx(vi.Provider,{value:o,children:F.jsx(t,{...n,ref:r})})});oC.displayName="FormGroup";const iC=oC,aC=W.forwardRef(({as:e="label",bsPrefix:t,column:n=!1,visuallyHidden:r=!1,className:o,htmlFor:i,...a},s)=>{const{controlId:u}=W.useContext(vi);t=Cn(t,"form-label");let l="col-form-label";typeof n=="string"&&(l=`${l} ${l}-${n}`);const c=Lt(o,t,r&&"visually-hidden",n&&l);return i=i||u,n?F.jsx(tA,{ref:s,as:"label",className:c,htmlFor:i,...a}):F.jsx(e,{ref:s,className:c,htmlFor:i,...a})});aC.displayName="FormLabel";const lA=aC,sC=W.forwardRef(({bsPrefix:e,className:t,id:n,...r},o)=>{const{controlId:i}=W.useContext(vi);return e=Cn(e,"form-range"),F.jsx("input",{...r,type:"range",ref:o,className:Lt(t,e),id:n||i})});sC.displayName="FormRange";const cA=sC,uC=W.forwardRef(({bsPrefix:e,size:t,htmlSize:n,className:r,isValid:o=!1,isInvalid:i=!1,id:a,...s},u)=>{const{controlId:l}=W.useContext(vi);return e=Cn(e,"form-select"),F.jsx("select",{...s,size:n,ref:u,className:Lt(r,e,t&&`${e}-${t}`,o&&"is-valid",i&&"is-invalid"),id:a||l})});uC.displayName="FormSelect";const fA=uC,lC=W.forwardRef(({bsPrefix:e,className:t,as:n="small",muted:r,...o},i)=>(e=Cn(e,"form-text"),F.jsx(n,{...o,ref:i,className:Lt(t,e,r&&"text-muted")})));lC.displayName="FormText";const dA=lC,cC=W.forwardRef((e,t)=>F.jsx(id,{...e,ref:t,type:"switch"}));cC.displayName="Switch";const hA=Object.assign(cC,{Input:id.Input,Label:id.Label}),fC=W.forwardRef(({bsPrefix:e,className:t,children:n,controlId:r,label:o,...i},a)=>(e=Cn(e,"form-floating"),F.jsxs(iC,{ref:a,className:Lt(t,e),controlId:r,...i,children:[n,F.jsx("label",{htmlFor:r,children:o})]})));fC.displayName="FloatingLabel";const pA=fC,vA={_ref:li.any,validated:li.bool,as:li.elementType},ey=W.forwardRef(({className:e,validated:t,as:n="form",...r},o)=>F.jsx(n,{...r,ref:o,className:Lt(e,t&&"was-validated")}));ey.displayName="Form";ey.propTypes=vA;const Mn=Object.assign(ey,{Group:iC,Control:sA,Floating:uA,Check:id,Switch:hA,Label:lA,Text:dA,Range:cA,Select:fA,FloatingLabel:pA});var Xc;function mx(e){if((!Xc&&Xc!==0||e)&&Su){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),Xc=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return Xc}function Ep(e){e===void 0&&(e=rh());try{var t=e.activeElement;return!t||!t.nodeName?null:t}catch{return e.body}}function mA(e=document){const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}const gx=oA("modal-open");class gA{constructor({ownerDocument:t,handleContainerOverflow:n=!0,isRTL:r=!1}={}){this.handleContainerOverflow=n,this.isRTL=r,this.modals=[],this.ownerDocument=t}getScrollbarWidth(){return mA(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(t){}removeModalAttributes(t){}setContainerStyle(t){const n={overflow:"hidden"},r=this.isRTL?"paddingLeft":"paddingRight",o=this.getElement();t.style={overflow:o.style.overflow,[r]:o.style[r]},t.scrollBarWidth&&(n[r]=`${parseInt(Ga(o,r)||"0",10)+t.scrollBarWidth}px`),o.setAttribute(gx,""),Ga(o,n)}reset(){[...this.modals].forEach(t=>this.remove(t))}removeContainerStyle(t){const n=this.getElement();n.removeAttribute(gx),Object.assign(n.style,t.style)}add(t){let n=this.modals.indexOf(t);return n!==-1||(n=this.modals.length,this.modals.push(t),this.setModalAttributes(t),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(t){const n=this.modals.indexOf(t);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(t))}isTopModal(t){return!!this.modals.length&&this.modals[this.modals.length-1]===t}}const ty=gA,Cp=(e,t)=>Su?e==null?(t||rh()).body:(typeof e=="function"&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;function yA(e,t){const n=Jg(),[r,o]=W.useState(()=>Cp(e,n==null?void 0:n.document));if(!r){const i=Cp(e);i&&o(i)}return W.useEffect(()=>{t&&r&&t(r)},[t,r]),W.useEffect(()=>{const i=Cp(e);i!==r&&o(i)},[e,r]),r}function xA({children:e,in:t,onExited:n,mountOnEnter:r,unmountOnExit:o}){const i=W.useRef(null),a=W.useRef(t),s=Po(n);W.useEffect(()=>{t?a.current=!0:s(i.current)},[t,s]);const u=ac(i,e.ref),l=W.cloneElement(e,{ref:u});return t?l:o||!a.current&&r?null:l}const wA=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function bA(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,i;for(i=0;i<r.length;i++)o=r[i],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}function EA(e){let{onEnter:t,onEntering:n,onEntered:r,onExit:o,onExiting:i,onExited:a,addEndListener:s,children:u}=e,l=bA(e,wA);const c=W.useRef(null),f=ac(c,typeof u=="function"?null:u.ref),d=S=>R=>{S&&c.current&&S(c.current,R)},p=W.useCallback(d(t),[t]),v=W.useCallback(d(n),[n]),x=W.useCallback(d(r),[r]),w=W.useCallback(d(o),[o]),y=W.useCallback(d(i),[i]),b=W.useCallback(d(a),[a]),E=W.useCallback(d(s),[s]);return Object.assign({},l,{nodeRef:c},t&&{onEnter:p},n&&{onEntering:v},r&&{onEntered:x},o&&{onExit:w},i&&{onExiting:y},a&&{onExited:b},s&&{addEndListener:E},{children:typeof u=="function"?(S,R)=>u(S,Object.assign({},R,{ref:f})):W.cloneElement(u,{ref:f})})}const CA=["component"];function SA(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,i;for(i=0;i<r.length;i++)o=r[i],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}const _A=W.forwardRef((e,t)=>{let{component:n}=e,r=SA(e,CA);const o=EA(r);return F.jsx(n,Object.assign({ref:t},o))}),kA=_A;function RA({in:e,onTransition:t}){const n=W.useRef(null),r=W.useRef(!0),o=Po(t);return px(()=>{if(!n.current)return;let i=!1;return o({in:e,element:n.current,initial:r.current,isStale:()=>i}),()=>{i=!0}},[e,o]),px(()=>(r.current=!1,()=>{r.current=!0}),[]),n}function TA({children:e,in:t,onExited:n,onEntered:r,transition:o}){const[i,a]=W.useState(!t);t&&i&&a(!1);const s=RA({in:!!t,onTransition:l=>{const c=()=>{l.isStale()||(l.in?r==null||r(l.element,l.initial):(a(!0),n==null||n(l.element)))};Promise.resolve(o(l)).then(c,f=>{throw l.in||a(!0),f})}}),u=ac(s,e.ref);return i&&!t?null:W.cloneElement(e,{ref:u})}function yx(e,t,n){return e?F.jsx(kA,Object.assign({},n,{component:e})):t?F.jsx(TA,Object.assign({},n,{transition:t})):F.jsx(xA,Object.assign({},n))}function IA(e){return e.code==="Escape"||e.keyCode===27}const DA=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function NA(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,i;for(i=0;i<r.length;i++)o=r[i],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}let Sp;function AA(e){return Sp||(Sp=new ty({ownerDocument:e==null?void 0:e.document})),Sp}function PA(e){const t=Jg(),n=e||AA(t),r=W.useRef({dialog:null,backdrop:null});return Object.assign(r.current,{add:()=>n.add(r.current),remove:()=>n.remove(r.current),isTopModal:()=>n.isTopModal(r.current),setDialogRef:W.useCallback(o=>{r.current.dialog=o},[]),setBackdropRef:W.useCallback(o=>{r.current.backdrop=o},[])})}const dC=W.forwardRef((e,t)=>{let{show:n=!1,role:r="dialog",className:o,style:i,children:a,backdrop:s=!0,keyboard:u=!0,onBackdropClick:l,onEscapeKeyDown:c,transition:f,runTransition:d,backdropTransition:p,runBackdropTransition:v,autoFocus:x=!0,enforceFocus:w=!0,restoreFocus:y=!0,restoreFocusOptions:b,renderDialog:E,renderBackdrop:S=Oe=>F.jsx("div",Object.assign({},Oe)),manager:R,container:k,onShow:m,onHide:P=()=>{},onExit:D,onExited:N,onExiting:B,onEnter:z,onEntering:V,onEntered:Z}=e,K=NA(e,DA);const ne=Jg(),J=yA(k),$=PA(R),Y=zN(),ee=UN(n),[he,me]=W.useState(!n),be=W.useRef(null);W.useImperativeHandle(t,()=>$,[$]),Su&&!ee&&n&&(be.current=Ep(ne==null?void 0:ne.document)),n&&he&&me(!1);const Se=Po(()=>{if($.add(),it.current=od(document,"keydown",et),Qe.current=od(document,"focus",()=>setTimeout(Pe),!0),m&&m(),x){var Oe,vt;const Ue=Ep((Oe=(vt=$.dialog)==null?void 0:vt.ownerDocument)!=null?Oe:ne==null?void 0:ne.document);$.dialog&&Ue&&!vx($.dialog,Ue)&&(be.current=Ue,$.dialog.focus())}}),Ae=Po(()=>{if($.remove(),it.current==null||it.current(),Qe.current==null||Qe.current(),y){var Oe;(Oe=be.current)==null||Oe.focus==null||Oe.focus(b),be.current=null}});W.useEffect(()=>{!n||!J||Se()},[n,J,Se]),W.useEffect(()=>{he&&Ae()},[he,Ae]),KE(()=>{Ae()});const Pe=Po(()=>{if(!w||!Y()||!$.isTopModal())return;const Oe=Ep(ne==null?void 0:ne.document);$.dialog&&Oe&&!vx($.dialog,Oe)&&$.dialog.focus()}),$e=Po(Oe=>{Oe.target===Oe.currentTarget&&(l==null||l(Oe),s===!0&&P())}),et=Po(Oe=>{u&&IA(Oe)&&$.isTopModal()&&(c==null||c(Oe),Oe.defaultPrevented||P())}),Qe=W.useRef(),it=W.useRef(),ze=(...Oe)=>{me(!0),N==null||N(...Oe)};if(!J)return null;const Ke=Object.assign({role:r,ref:$.setDialogRef,"aria-modal":r==="dialog"?!0:void 0},K,{style:i,className:o,tabIndex:-1});let qe=E?E(Ke):F.jsx("div",Object.assign({},Ke,{children:W.cloneElement(a,{role:"document"})}));qe=yx(f,d,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:D,onExiting:B,onExited:ze,onEnter:z,onEntering:V,onEntered:Z,children:qe});let pt=null;return s&&(pt=S({ref:$.setBackdropRef,onClick:$e}),pt=yx(p,v,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:pt})),F.jsx(F.Fragment,{children:ja.createPortal(F.jsxs(F.Fragment,{children:[pt,qe]}),J)})});dC.displayName="Modal";const FA=Object.assign(dC,{Manager:ty});function OA(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function MA(e,t){e.classList?e.classList.add(t):OA(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function xx(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function LA(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=xx(e.className,t):e.setAttribute("class",xx(e.className&&e.className.baseVal||"",t))}const ys={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class BA extends ty{adjustAndStore(t,n,r){const o=n.style[t];n.dataset[t]=o,Ga(n,{[t]:`${parseFloat(Ga(n,t))+r}px`})}restore(t,n){const r=n.dataset[t];r!==void 0&&(delete n.dataset[t],Ga(n,{[t]:r}))}setContainerStyle(t){super.setContainerStyle(t);const n=this.getElement();if(MA(n,"modal-open"),!t.scrollBarWidth)return;const r=this.isRTL?"paddingLeft":"paddingRight",o=this.isRTL?"marginLeft":"marginRight";gs(n,ys.FIXED_CONTENT).forEach(i=>this.adjustAndStore(r,i,t.scrollBarWidth)),gs(n,ys.STICKY_CONTENT).forEach(i=>this.adjustAndStore(o,i,-t.scrollBarWidth)),gs(n,ys.NAVBAR_TOGGLER).forEach(i=>this.adjustAndStore(o,i,t.scrollBarWidth))}removeContainerStyle(t){super.removeContainerStyle(t);const n=this.getElement();LA(n,"modal-open");const r=this.isRTL?"paddingLeft":"paddingRight",o=this.isRTL?"marginLeft":"marginRight";gs(n,ys.FIXED_CONTENT).forEach(i=>this.restore(r,i)),gs(n,ys.STICKY_CONTENT).forEach(i=>this.restore(o,i)),gs(n,ys.NAVBAR_TOGGLER).forEach(i=>this.restore(o,i))}}let _p;function jA(e){return _p||(_p=new BA(e)),_p}const hC=W.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},o)=>(t=Cn(t,"modal-body"),F.jsx(n,{ref:o,className:Lt(e,t),...r})));hC.displayName="ModalBody";const WA=hC,zA=W.createContext({onHide(){}}),pC=zA,vC=W.forwardRef(({bsPrefix:e,className:t,contentClassName:n,centered:r,size:o,fullscreen:i,children:a,scrollable:s,...u},l)=>{e=Cn(e,"modal");const c=`${e}-dialog`,f=typeof i=="string"?`${e}-fullscreen-${i}`:`${e}-fullscreen`;return F.jsx("div",{...u,ref:l,className:Lt(c,t,o&&`${e}-${o}`,r&&`${c}-centered`,s&&`${c}-scrollable`,i&&f),children:F.jsx("div",{className:Lt(`${e}-content`,n),children:a})})});vC.displayName="ModalDialog";const mC=vC,gC=W.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},o)=>(t=Cn(t,"modal-footer"),F.jsx(n,{ref:o,className:Lt(e,t),...r})));gC.displayName="ModalFooter";const UA=gC,$A=W.forwardRef(({closeLabel:e="Close",closeVariant:t,closeButton:n=!1,onHide:r,children:o,...i},a)=>{const s=W.useContext(pC),u=Po(()=>{s==null||s.onHide(),r==null||r()});return F.jsxs("div",{ref:a,...i,children:[o,n&&F.jsx(QN,{"aria-label":e,variant:t,onClick:u})]})}),HA=$A,yC=W.forwardRef(({bsPrefix:e,className:t,closeLabel:n="Close",closeButton:r=!1,...o},i)=>(e=Cn(e,"modal-header"),F.jsx(HA,{ref:i,...o,className:Lt(t,e),closeLabel:n,closeButton:r})));yC.displayName="ModalHeader";const VA=yC,GA=jN("h4"),xC=W.forwardRef(({className:e,bsPrefix:t,as:n=GA,...r},o)=>(t=Cn(t,"modal-title"),F.jsx(n,{ref:o,className:Lt(e,t),...r})));xC.displayName="ModalTitle";const qA=xC;function KA(e){return F.jsx(GE,{...e,timeout:null})}function XA(e){return F.jsx(GE,{...e,timeout:null})}const wC=W.forwardRef(({bsPrefix:e,className:t,style:n,dialogClassName:r,contentClassName:o,children:i,dialogAs:a=mC,"data-bs-theme":s,"aria-labelledby":u,"aria-describedby":l,"aria-label":c,show:f=!1,animation:d=!0,backdrop:p=!0,keyboard:v=!0,onEscapeKeyDown:x,onShow:w,onHide:y,container:b,autoFocus:E=!0,enforceFocus:S=!0,restoreFocus:R=!0,restoreFocusOptions:k,onEntered:m,onExit:P,onExiting:D,onEnter:N,onEntering:B,onExited:z,backdropClassName:V,manager:Z,...K},ne)=>{const[J,$]=W.useState({}),[Y,ee]=W.useState(!1),he=W.useRef(!1),me=W.useRef(!1),be=W.useRef(null),[Se,Ae]=WN(),Pe=ac(ne,Ae),$e=Po(y),et=pN();e=Cn(e,"modal");const Qe=W.useMemo(()=>({onHide:$e}),[$e]);function it(){return Z||jA({isRTL:et})}function ze(He){if(!Su)return;const fn=it().getScrollbarWidth()>0,Pn=He.scrollHeight>rh(He).documentElement.clientHeight;$({paddingRight:fn&&!Pn?mx():void 0,paddingLeft:!fn&&Pn?mx():void 0})}const Ke=Po(()=>{Se&&ze(Se.dialog)});KE(()=>{mm(window,"resize",Ke),be.current==null||be.current()});const qe=()=>{he.current=!0},pt=He=>{he.current&&Se&&He.target===Se.dialog&&(me.current=!0),he.current=!1},Oe=()=>{ee(!0),be.current=$E(Se.dialog,()=>{ee(!1)})},vt=He=>{He.target===He.currentTarget&&Oe()},Ue=He=>{if(p==="static"){vt(He);return}if(me.current||He.target!==He.currentTarget){me.current=!1;return}y==null||y()},It=He=>{v?x==null||x(He):(He.preventDefault(),p==="static"&&Oe())},on=(He,fn)=>{He&&ze(He),N==null||N(He,fn)},cr=He=>{be.current==null||be.current(),P==null||P(He)},pn=(He,fn)=>{B==null||B(He,fn),UE(window,"resize",Ke)},Ut=He=>{He&&(He.style.display=""),z==null||z(He),mm(window,"resize",Ke)},an=W.useCallback(He=>F.jsx("div",{...He,className:Lt(`${e}-backdrop`,V,!d&&"show")}),[d,V,e]),$t={...n,...J};$t.display="block";const Ce=He=>F.jsx("div",{role:"dialog",...He,style:$t,className:Lt(t,e,Y&&`${e}-static`,!d&&"show"),onClick:p?Ue:void 0,onMouseUp:pt,"data-bs-theme":s,"aria-label":c,"aria-labelledby":u,"aria-describedby":l,children:F.jsx(a,{...K,onMouseDown:qe,className:r,contentClassName:o,children:i})});return F.jsx(pC.Provider,{value:Qe,children:F.jsx(FA,{show:f,ref:Pe,backdrop:p,container:b,keyboard:!0,autoFocus:E,enforceFocus:S,restoreFocus:R,restoreFocusOptions:k,onEscapeKeyDown:It,onShow:w,onHide:y,onEnter:on,onEntering:pn,onEntered:m,onExit:cr,onExiting:D,onExited:Ut,manager:it(),transition:d?KA:void 0,backdropTransition:d?XA:void 0,renderBackdrop:an,renderDialog:Ce})})});wC.displayName="Modal";const Fo=Object.assign(wC,{Body:WA,Header:VA,Title:qA,Footer:UA,Dialog:mC,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),bC="data:image/svg+xml,%3c?xml%20version='1.0'%20?%3e%3csvg%20id='Layer_1'%20style='enable-background:new%200%200%2030%2030;'%20version='1.1'%20viewBox='0%200%2030%2030'%20xml:space='preserve'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cpath%20d='%20M12.062,20c0.688,0.5,1.688,1,2.938,1s2.25-0.5,2.938-1'%20style='fill:none;stroke:%2311a9ec;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;'/%3e%3cline%20style='fill:none;stroke:%2311a9ec;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;'%20x1='20'%20x2='20'%20y1='12'%20y2='14'%3e%3canimate%20attributeName='y1'%20values='12;12.5;12;12'%20keyTimes='0;0.15;0.3;1'%20dur='2s'%20repeatCount='indefinite'/%3e%3canimate%20attributeName='y2'%20values='14;13.5;14;14'%20keyTimes='0;0.15;0.3;1'%20dur='2s'%20repeatCount='indefinite'/%3e%3c/line%3e%3cline%20style='fill:none;stroke:%2311a9ec;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;'%20x1='10'%20x2='10'%20y1='12'%20y2='14'%3e%3canimate%20attributeName='y1'%20values='12;12.5;12;12'%20keyTimes='0;0.15;0.3;1'%20dur='2s'%20repeatCount='indefinite'/%3e%3canimate%20attributeName='y2'%20values='14;13.5;14;14'%20keyTimes='0;0.15;0.3;1'%20dur='2s'%20repeatCount='indefinite'/%3e%3c/line%3e%3cpath%20d='M15,12%20v4c0,0.552-0.448,1-1,1'%20style='fill:none;stroke:%2311a9ec;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;'/%3e%3cg%3e%3cpath%20d='M26,9%20V6c0-1.105-0.895-2-2-2h-3'%20style='fill:none;stroke:%2311a9ec;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;'/%3e%3cpath%20d='M9,4%20H6C4.895,4,4,4.895,4,6v3'%20style='fill:none;stroke:%2311a9ec;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;'/%3e%3cpath%20d='%20M21,26h3c1.105,0,2-0.895,2-2v-3'%20style='fill:none;stroke:%2311a9ec;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;'/%3e%3cpath%20d='M4,21%20v3c0,1.105,0.895,2,2,2h3'%20style='fill:none;stroke:%2311a9ec;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;'/%3e%3c/g%3e%3c/svg%3e";function sc({zIndex:e=9999,position:t="fixed"}){return F.jsxs(F.Fragment,{children:[F.jsx("style",{jsx:!0,children:`
                    .container-loading{
                        width:100%;
                        height:100%;
                        display:flex;
                        justify-content:center;
                        align-items:center;
                        position:var(--position);
                        z-index:var(--zIndex);
                        background-color:none;
                        opacity:0.5;
                        bottom:0px;
                        right:0px;
                    }

                    .icon-container{
                        display:flex;
                        border-radius:50%;
                        background-color:white;
                        align-items:center;
                        justify-content:center;
                        -webkit-box-shadow: 0 0 32px 7.5px #11a9ec;
                        -moz-box-shadow: 0 0 32px 7.5px #11a9ec;
                        box-shadow: 0 0 32px 7.5px #11a9ec;
                    }

                    .icon{
                        color:white;
                        position:absolute;
                    }

                    // .spinner {
                    //     width: 17.6px;
                    //     height: 17.6px;
                    //     border-radius: 17.6px;
                    //     box-shadow: 68px 0px 0 0 rgba(71,75,255,0.2), 55.2px 40px 0 0 rgba(71,75,255,0.4), 27.72px 64.6px 0 0 rgba(71,75,255,0.6), -21.08px 64.6px 0 0 rgba(71,75,255,0.8), -55.2px 40px 0 0 #474bff;
                    //     animation: spinner-b87k6z 1s infinite linear;
                    // }

                    // @keyframes spinner-b87k6z {
                    //     to {
                    //         transform: rotate(360deg);
                    //     }
                    // }

                    .spinner{
                        width: 150px;
                        height: 150px;
                        border: 5px solid;
                        border-color: #11a9ec transparent #11a9ec transparent;
                        border-radius: 50%;
                        animation: spinner 2s linear infinite;
                    }

                    @keyframes spinner{
                        to{
                            transform: rotate(360deg);
                        }
                    }
                `}),F.jsx("div",{className:"container-loading",style:{"--position":t,"--zIndex":e},children:F.jsxs("div",{className:"icon-container",children:[F.jsx("img",{className:"icon",src:bC,style:{width:"5%",height:"auto"},alt:"faceidicon"}),F.jsx("div",{className:"spinner"})]})})]})}const YA=[{name:"home",icon:"home"},{name:"register",icon:"person_add"},{name:"recognition",icon:"filter_center_focus"}];function oh({currentPage:e="home"}){const[t,n]=W.useState(!1);let r=PD();return F.jsxs(F.Fragment,{children:[F.jsx("style",{jsx:!0,children:`
                    * {
                        box-sizing: border-box;
                    }

                    button {
                        background: transparent;
                        border: 0;
                        padding: 0;
                        cursor: pointer;
                    }

                    .sidebar {
                        position: absolute;
                        overflow: hidden;
                        top: 0;
                        left: 0;
                        width: 60px;
                        height: 100%;
                        background: #515889;
                        transition: width 0.4s;
                        z-index: 999;
                    }

                    .sidebar.open {
                        width: 260px;
                    }

                    .sidebar-inner {
                        position: absolute;
                        top: 0;
                        left: 0;
                        width: 260px;
                    }

                    .sidebar-header {
                        display: flex;
                        align-items: center;
                        height: 72px;
                        background: rgb(0 0 0 / 15%);
                    }

                    .sidebar-burger {
                        width: 60px;
                        height: 72px;
                        display: grid;
                        place-items: center;
                        color: #f9f9f9;
                        cursor: pointer;
                    }

                    .sidebar-logo {
                        height: 35px;
                    }

                    .logo-text {
                        color: white;
                        margin-left: 8px;
                        margin-bottom: 0px;
                        font-size: 25px;
                        font-weight: bold;
                    }

                    .sidebar-menu {
                        display: grid;
                        padding: 10px;
                        gap: 10px;
                    }

                    .sidebar-button {
                        display: flex;
                        gap: 16px;
                        align-items: center;
                        height: 56px;
                        width: 100%;
                        font-family: "Poppins";
                        font-size: 17px;
                        text-transform: capitalize;
                        line-height: 1;
                        padding: 0 10px;
                        border-radius: 8px;
                        color: #f9f9f9;
                        opacity: 0.8;
                        cursor: pointer;
                    }

                    .sidebar-button:hover {
                        background: rgb(0 0 0 / 30%);
                        opacity: 1;
                    }

                    .sidebar-button:hover > span {
                        opacity: 1;
                    }

                    .sidebar-logo,
                    .logo-text,
                    .sidebar-button p {
                        opacity: 0;
                        transition: 0.3s;
                    }

                    .sidebar.open :is(.sidebar-button p, .sidebar-logo, .logo-text) {
                        opacity: 1;
                    }

                    .sidebar-button > img {
                        width: 24px;
                        height: 24px;
                    }

                    .sidebar-button > span {
                        opacity: 0.5;
                    }
                `}),F.jsx("nav",{className:`sidebar ${t?"open":""}`,onMouseOver:()=>n(!0),onMouseLeave:()=>n(!1),children:F.jsxs("div",{className:"sidebar-inner",children:[F.jsxs("header",{className:"sidebar-header",children:[F.jsx("div",{className:"sidebar-burger",onClick:()=>n(!t),children:F.jsx("span",{className:"material-symbols-outlined",children:t?"close":"menu"})}),F.jsx("img",{src:bC,className:"sidebar-logo"}),F.jsx("h2",{className:"logo-text",children:"Face ID"})]}),F.jsx("nav",{className:"sidebar-menu",children:YA.map(o=>F.jsxs("div",{type:"button",className:"sidebar-button",style:{backgroundColor:o.name==e?"#292c45":"none"},onClick:()=>r("/"+o.name),children:[F.jsx("span",{className:"material-symbols-outlined",children:o.icon}),F.jsx("p",{style:{marginTop:0,marginBottom:0},children:o.name})]},o.name))})]})})]})}const EC="/assets/illustation1--XPjbYf0.png";function CC(e,t){return function(){return e.apply(t,arguments)}}const{toString:QA}=Object.prototype,{getPrototypeOf:ny}=Object,ih=(e=>t=>{const n=QA.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Go=e=>(e=e.toLowerCase(),t=>ih(t)===e),ah=e=>t=>typeof t===e,{isArray:_u}=Array,$l=ah("undefined");function JA(e){return e!==null&&!$l(e)&&e.constructor!==null&&!$l(e.constructor)&&Yr(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const SC=Go("ArrayBuffer");function ZA(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&SC(e.buffer),t}const eP=ah("string"),Yr=ah("function"),_C=ah("number"),sh=e=>e!==null&&typeof e=="object",tP=e=>e===!0||e===!1,kf=e=>{if(ih(e)!=="object")return!1;const t=ny(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},nP=Go("Date"),rP=Go("File"),oP=Go("Blob"),iP=Go("FileList"),aP=e=>sh(e)&&Yr(e.pipe),sP=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Yr(e.append)&&((t=ih(e))==="formdata"||t==="object"&&Yr(e.toString)&&e.toString()==="[object FormData]"))},uP=Go("URLSearchParams"),lP=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function uc(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,o;if(typeof e!="object"&&(e=[e]),_u(e))for(r=0,o=e.length;r<o;r++)t.call(null,e[r],r,e);else{const i=n?Object.getOwnPropertyNames(e):Object.keys(e),a=i.length;let s;for(r=0;r<a;r++)s=i[r],t.call(null,e[s],s,e)}}function kC(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,o;for(;r-- >0;)if(o=n[r],t===o.toLowerCase())return o;return null}const RC=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,TC=e=>!$l(e)&&e!==RC;function ym(){const{caseless:e}=TC(this)&&this||{},t={},n=(r,o)=>{const i=e&&kC(t,o)||o;kf(t[i])&&kf(r)?t[i]=ym(t[i],r):kf(r)?t[i]=ym({},r):_u(r)?t[i]=r.slice():t[i]=r};for(let r=0,o=arguments.length;r<o;r++)arguments[r]&&uc(arguments[r],n);return t}const cP=(e,t,n,{allOwnKeys:r}={})=>(uc(t,(o,i)=>{n&&Yr(o)?e[i]=CC(o,n):e[i]=o},{allOwnKeys:r}),e),fP=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),dP=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},hP=(e,t,n,r)=>{let o,i,a;const s={};if(t=t||{},e==null)return t;do{for(o=Object.getOwnPropertyNames(e),i=o.length;i-- >0;)a=o[i],(!r||r(a,e,t))&&!s[a]&&(t[a]=e[a],s[a]=!0);e=n!==!1&&ny(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},pP=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},vP=e=>{if(!e)return null;if(_u(e))return e;let t=e.length;if(!_C(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},mP=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&ny(Uint8Array)),gP=(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let o;for(;(o=r.next())&&!o.done;){const i=o.value;t.call(e,i[0],i[1])}},yP=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},xP=Go("HTMLFormElement"),wP=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,o){return r.toUpperCase()+o}),wx=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),bP=Go("RegExp"),IC=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};uc(n,(o,i)=>{let a;(a=t(o,i,e))!==!1&&(r[i]=a||o)}),Object.defineProperties(e,r)},EP=e=>{IC(e,(t,n)=>{if(Yr(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(Yr(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},CP=(e,t)=>{const n={},r=o=>{o.forEach(i=>{n[i]=!0})};return _u(e)?r(e):r(String(e).split(t)),n},SP=()=>{},_P=(e,t)=>(e=+e,Number.isFinite(e)?e:t),kp="abcdefghijklmnopqrstuvwxyz",bx="0123456789",DC={DIGIT:bx,ALPHA:kp,ALPHA_DIGIT:kp+kp.toUpperCase()+bx},kP=(e=16,t=DC.ALPHA_DIGIT)=>{let n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n};function RP(e){return!!(e&&Yr(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const TP=e=>{const t=new Array(10),n=(r,o)=>{if(sh(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[o]=r;const i=_u(r)?[]:{};return uc(r,(a,s)=>{const u=n(a,o+1);!$l(u)&&(i[s]=u)}),t[o]=void 0,i}}return r};return n(e,0)},IP=Go("AsyncFunction"),DP=e=>e&&(sh(e)||Yr(e))&&Yr(e.then)&&Yr(e.catch),pe={isArray:_u,isArrayBuffer:SC,isBuffer:JA,isFormData:sP,isArrayBufferView:ZA,isString:eP,isNumber:_C,isBoolean:tP,isObject:sh,isPlainObject:kf,isUndefined:$l,isDate:nP,isFile:rP,isBlob:oP,isRegExp:bP,isFunction:Yr,isStream:aP,isURLSearchParams:uP,isTypedArray:mP,isFileList:iP,forEach:uc,merge:ym,extend:cP,trim:lP,stripBOM:fP,inherits:dP,toFlatObject:hP,kindOf:ih,kindOfTest:Go,endsWith:pP,toArray:vP,forEachEntry:gP,matchAll:yP,isHTMLForm:xP,hasOwnProperty:wx,hasOwnProp:wx,reduceDescriptors:IC,freezeMethods:EP,toObjectSet:CP,toCamelCase:wP,noop:SP,toFiniteNumber:_P,findKey:kC,global:RC,isContextDefined:TC,ALPHABET:DC,generateString:kP,isSpecCompliantForm:RP,toJSONObject:TP,isAsyncFn:IP,isThenable:DP};function Et(e,t,n,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),o&&(this.response=o)}pe.inherits(Et,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:pe.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const NC=Et.prototype,AC={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{AC[e]={value:e}});Object.defineProperties(Et,AC);Object.defineProperty(NC,"isAxiosError",{value:!0});Et.from=(e,t,n,r,o,i)=>{const a=Object.create(NC);return pe.toFlatObject(e,a,function(u){return u!==Error.prototype},s=>s!=="isAxiosError"),Et.call(a,e.message,t,n,r,o),a.cause=e,a.name=e.name,i&&Object.assign(a,i),a};const NP=null;function xm(e){return pe.isPlainObject(e)||pe.isArray(e)}function PC(e){return pe.endsWith(e,"[]")?e.slice(0,-2):e}function Ex(e,t,n){return e?e.concat(t).map(function(o,i){return o=PC(o),!n&&i?"["+o+"]":o}).join(n?".":""):t}function AP(e){return pe.isArray(e)&&!e.some(xm)}const PP=pe.toFlatObject(pe,{},null,function(t){return/^is[A-Z]/.test(t)});function uh(e,t,n){if(!pe.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=pe.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(x,w){return!pe.isUndefined(w[x])});const r=n.metaTokens,o=n.visitor||c,i=n.dots,a=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&pe.isSpecCompliantForm(t);if(!pe.isFunction(o))throw new TypeError("visitor must be a function");function l(v){if(v===null)return"";if(pe.isDate(v))return v.toISOString();if(!u&&pe.isBlob(v))throw new Et("Blob is not supported. Use a Buffer instead.");return pe.isArrayBuffer(v)||pe.isTypedArray(v)?u&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function c(v,x,w){let y=v;if(v&&!w&&typeof v=="object"){if(pe.endsWith(x,"{}"))x=r?x:x.slice(0,-2),v=JSON.stringify(v);else if(pe.isArray(v)&&AP(v)||(pe.isFileList(v)||pe.endsWith(x,"[]"))&&(y=pe.toArray(v)))return x=PC(x),y.forEach(function(E,S){!(pe.isUndefined(E)||E===null)&&t.append(a===!0?Ex([x],S,i):a===null?x:x+"[]",l(E))}),!1}return xm(v)?!0:(t.append(Ex(w,x,i),l(v)),!1)}const f=[],d=Object.assign(PP,{defaultVisitor:c,convertValue:l,isVisitable:xm});function p(v,x){if(!pe.isUndefined(v)){if(f.indexOf(v)!==-1)throw Error("Circular reference detected in "+x.join("."));f.push(v),pe.forEach(v,function(y,b){(!(pe.isUndefined(y)||y===null)&&o.call(t,y,pe.isString(b)?b.trim():b,x,d))===!0&&p(y,x?x.concat(b):[b])}),f.pop()}}if(!pe.isObject(e))throw new TypeError("data must be an object");return p(e),t}function Cx(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function ry(e,t){this._pairs=[],e&&uh(e,this,t)}const FC=ry.prototype;FC.append=function(t,n){this._pairs.push([t,n])};FC.toString=function(t){const n=t?function(r){return t.call(this,r,Cx)}:Cx;return this._pairs.map(function(o){return n(o[0])+"="+n(o[1])},"").join("&")};function FP(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function OC(e,t,n){if(!t)return e;const r=n&&n.encode||FP,o=n&&n.serialize;let i;if(o?i=o(t,n):i=pe.isURLSearchParams(t)?t.toString():new ry(t,n).toString(r),i){const a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class Sx{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){pe.forEach(this.handlers,function(r){r!==null&&t(r)})}}const MC={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},OP=typeof URLSearchParams<"u"?URLSearchParams:ry,MP=typeof FormData<"u"?FormData:null,LP=typeof Blob<"u"?Blob:null,BP={isBrowser:!0,classes:{URLSearchParams:OP,FormData:MP,Blob:LP},protocols:["http","https","file","blob","url","data"]},LC=typeof window<"u"&&typeof document<"u",jP=(e=>LC&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),WP=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",zP=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:LC,hasStandardBrowserEnv:jP,hasStandardBrowserWebWorkerEnv:WP},Symbol.toStringTag,{value:"Module"})),Lo={...zP,...BP};function UP(e,t){return uh(e,new Lo.classes.URLSearchParams,Object.assign({visitor:function(n,r,o,i){return Lo.isNode&&pe.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}function $P(e){return pe.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function HP(e){const t={},n=Object.keys(e);let r;const o=n.length;let i;for(r=0;r<o;r++)i=n[r],t[i]=e[i];return t}function BC(e){function t(n,r,o,i){let a=n[i++];if(a==="__proto__")return!0;const s=Number.isFinite(+a),u=i>=n.length;return a=!a&&pe.isArray(o)?o.length:a,u?(pe.hasOwnProp(o,a)?o[a]=[o[a],r]:o[a]=r,!s):((!o[a]||!pe.isObject(o[a]))&&(o[a]=[]),t(n,r,o[a],i)&&pe.isArray(o[a])&&(o[a]=HP(o[a])),!s)}if(pe.isFormData(e)&&pe.isFunction(e.entries)){const n={};return pe.forEachEntry(e,(r,o)=>{t($P(r),o,n,0)}),n}return null}function VP(e,t,n){if(pe.isString(e))try{return(t||JSON.parse)(e),pe.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const oy={transitional:MC,adapter:["xhr","http"],transformRequest:[function(t,n){const r=n.getContentType()||"",o=r.indexOf("application/json")>-1,i=pe.isObject(t);if(i&&pe.isHTMLForm(t)&&(t=new FormData(t)),pe.isFormData(t))return o?JSON.stringify(BC(t)):t;if(pe.isArrayBuffer(t)||pe.isBuffer(t)||pe.isStream(t)||pe.isFile(t)||pe.isBlob(t))return t;if(pe.isArrayBufferView(t))return t.buffer;if(pe.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let s;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return UP(t,this.formSerializer).toString();if((s=pe.isFileList(t))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return uh(s?{"files[]":t}:t,u&&new u,this.formSerializer)}}return i||o?(n.setContentType("application/json",!1),VP(t)):t}],transformResponse:[function(t){const n=this.transitional||oy.transitional,r=n&&n.forcedJSONParsing,o=this.responseType==="json";if(t&&pe.isString(t)&&(r&&!this.responseType||o)){const a=!(n&&n.silentJSONParsing)&&o;try{return JSON.parse(t)}catch(s){if(a)throw s.name==="SyntaxError"?Et.from(s,Et.ERR_BAD_RESPONSE,this,null,this.response):s}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Lo.classes.FormData,Blob:Lo.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};pe.forEach(["delete","get","head","post","put","patch"],e=>{oy.headers[e]={}});const iy=oy,GP=pe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),qP=e=>{const t={};let n,r,o;return e&&e.split(`
`).forEach(function(a){o=a.indexOf(":"),n=a.substring(0,o).trim().toLowerCase(),r=a.substring(o+1).trim(),!(!n||t[n]&&GP[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},_x=Symbol("internals");function Qu(e){return e&&String(e).trim().toLowerCase()}function Rf(e){return e===!1||e==null?e:pe.isArray(e)?e.map(Rf):String(e)}function KP(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const XP=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Rp(e,t,n,r,o){if(pe.isFunction(r))return r.call(this,t,n);if(o&&(t=n),!!pe.isString(t)){if(pe.isString(r))return t.indexOf(r)!==-1;if(pe.isRegExp(r))return r.test(t)}}function YP(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function QP(e,t){const n=pe.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(o,i,a){return this[r].call(this,t,o,i,a)},configurable:!0})})}class lh{constructor(t){t&&this.set(t)}set(t,n,r){const o=this;function i(s,u,l){const c=Qu(u);if(!c)throw new Error("header name must be a non-empty string");const f=pe.findKey(o,c);(!f||o[f]===void 0||l===!0||l===void 0&&o[f]!==!1)&&(o[f||u]=Rf(s))}const a=(s,u)=>pe.forEach(s,(l,c)=>i(l,c,u));return pe.isPlainObject(t)||t instanceof this.constructor?a(t,n):pe.isString(t)&&(t=t.trim())&&!XP(t)?a(qP(t),n):t!=null&&i(n,t,r),this}get(t,n){if(t=Qu(t),t){const r=pe.findKey(this,t);if(r){const o=this[r];if(!n)return o;if(n===!0)return KP(o);if(pe.isFunction(n))return n.call(this,o,r);if(pe.isRegExp(n))return n.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Qu(t),t){const r=pe.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||Rp(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let o=!1;function i(a){if(a=Qu(a),a){const s=pe.findKey(r,a);s&&(!n||Rp(r,r[s],s,n))&&(delete r[s],o=!0)}}return pe.isArray(t)?t.forEach(i):i(t),o}clear(t){const n=Object.keys(this);let r=n.length,o=!1;for(;r--;){const i=n[r];(!t||Rp(this,this[i],i,t,!0))&&(delete this[i],o=!0)}return o}normalize(t){const n=this,r={};return pe.forEach(this,(o,i)=>{const a=pe.findKey(r,i);if(a){n[a]=Rf(o),delete n[i];return}const s=t?YP(i):String(i).trim();s!==i&&delete n[i],n[s]=Rf(o),r[s]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return pe.forEach(this,(r,o)=>{r!=null&&r!==!1&&(n[o]=t&&pe.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(o=>r.set(o)),r}static accessor(t){const r=(this[_x]=this[_x]={accessors:{}}).accessors,o=this.prototype;function i(a){const s=Qu(a);r[s]||(QP(o,a),r[s]=!0)}return pe.isArray(t)?t.forEach(i):i(t),this}}lh.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);pe.reduceDescriptors(lh.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});pe.freezeMethods(lh);const ci=lh;function Tp(e,t){const n=this||iy,r=t||n,o=ci.from(r.headers);let i=r.data;return pe.forEach(e,function(s){i=s.call(n,i,o.normalize(),t?t.status:void 0)}),o.normalize(),i}function jC(e){return!!(e&&e.__CANCEL__)}function lc(e,t,n){Et.call(this,e??"canceled",Et.ERR_CANCELED,t,n),this.name="CanceledError"}pe.inherits(lc,Et,{__CANCEL__:!0});function JP(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new Et("Request failed with status code "+n.status,[Et.ERR_BAD_REQUEST,Et.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const ZP=Lo.hasStandardBrowserEnv?{write(e,t,n,r,o,i){const a=[e+"="+encodeURIComponent(t)];pe.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),pe.isString(r)&&a.push("path="+r),pe.isString(o)&&a.push("domain="+o),i===!0&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function e3(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function t3(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function WC(e,t){return e&&!e3(t)?t3(e,t):t}const n3=Lo.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function o(i){let a=i;return t&&(n.setAttribute("href",a),a=n.href),n.setAttribute("href",a),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=o(window.location.href),function(a){const s=pe.isString(a)?o(a):a;return s.protocol===r.protocol&&s.host===r.host}}():function(){return function(){return!0}}();function r3(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function o3(e,t){e=e||10;const n=new Array(e),r=new Array(e);let o=0,i=0,a;return t=t!==void 0?t:1e3,function(u){const l=Date.now(),c=r[i];a||(a=l),n[o]=u,r[o]=l;let f=i,d=0;for(;f!==o;)d+=n[f++],f=f%e;if(o=(o+1)%e,o===i&&(i=(i+1)%e),l-a<t)return;const p=c&&l-c;return p?Math.round(d*1e3/p):void 0}}function kx(e,t){let n=0;const r=o3(50,250);return o=>{const i=o.loaded,a=o.lengthComputable?o.total:void 0,s=i-n,u=r(s),l=i<=a;n=i;const c={loaded:i,total:a,progress:a?i/a:void 0,bytes:s,rate:u||void 0,estimated:u&&a&&l?(a-i)/u:void 0,event:o};c[t?"download":"upload"]=!0,e(c)}}const i3=typeof XMLHttpRequest<"u",a3=i3&&function(e){return new Promise(function(n,r){let o=e.data;const i=ci.from(e.headers).normalize();let{responseType:a,withXSRFToken:s}=e,u;function l(){e.cancelToken&&e.cancelToken.unsubscribe(u),e.signal&&e.signal.removeEventListener("abort",u)}let c;if(pe.isFormData(o)){if(Lo.hasStandardBrowserEnv||Lo.hasStandardBrowserWebWorkerEnv)i.setContentType(!1);else if((c=i.getContentType())!==!1){const[x,...w]=c?c.split(";").map(y=>y.trim()).filter(Boolean):[];i.setContentType([x||"multipart/form-data",...w].join("; "))}}let f=new XMLHttpRequest;if(e.auth){const x=e.auth.username||"",w=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.set("Authorization","Basic "+btoa(x+":"+w))}const d=WC(e.baseURL,e.url);f.open(e.method.toUpperCase(),OC(d,e.params,e.paramsSerializer),!0),f.timeout=e.timeout;function p(){if(!f)return;const x=ci.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders()),y={data:!a||a==="text"||a==="json"?f.responseText:f.response,status:f.status,statusText:f.statusText,headers:x,config:e,request:f};JP(function(E){n(E),l()},function(E){r(E),l()},y),f=null}if("onloadend"in f?f.onloadend=p:f.onreadystatechange=function(){!f||f.readyState!==4||f.status===0&&!(f.responseURL&&f.responseURL.indexOf("file:")===0)||setTimeout(p)},f.onabort=function(){f&&(r(new Et("Request aborted",Et.ECONNABORTED,e,f)),f=null)},f.onerror=function(){r(new Et("Network Error",Et.ERR_NETWORK,e,f)),f=null},f.ontimeout=function(){let w=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const y=e.transitional||MC;e.timeoutErrorMessage&&(w=e.timeoutErrorMessage),r(new Et(w,y.clarifyTimeoutError?Et.ETIMEDOUT:Et.ECONNABORTED,e,f)),f=null},Lo.hasStandardBrowserEnv&&(s&&pe.isFunction(s)&&(s=s(e)),s||s!==!1&&n3(d))){const x=e.xsrfHeaderName&&e.xsrfCookieName&&ZP.read(e.xsrfCookieName);x&&i.set(e.xsrfHeaderName,x)}o===void 0&&i.setContentType(null),"setRequestHeader"in f&&pe.forEach(i.toJSON(),function(w,y){f.setRequestHeader(y,w)}),pe.isUndefined(e.withCredentials)||(f.withCredentials=!!e.withCredentials),a&&a!=="json"&&(f.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&f.addEventListener("progress",kx(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&f.upload&&f.upload.addEventListener("progress",kx(e.onUploadProgress)),(e.cancelToken||e.signal)&&(u=x=>{f&&(r(!x||x.type?new lc(null,e,f):x),f.abort(),f=null)},e.cancelToken&&e.cancelToken.subscribe(u),e.signal&&(e.signal.aborted?u():e.signal.addEventListener("abort",u)));const v=r3(d);if(v&&Lo.protocols.indexOf(v)===-1){r(new Et("Unsupported protocol "+v+":",Et.ERR_BAD_REQUEST,e));return}f.send(o||null)})},wm={http:NP,xhr:a3};pe.forEach(wm,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Rx=e=>`- ${e}`,s3=e=>pe.isFunction(e)||e===null||e===!1,zC={getAdapter:e=>{e=pe.isArray(e)?e:[e];const{length:t}=e;let n,r;const o={};for(let i=0;i<t;i++){n=e[i];let a;if(r=n,!s3(n)&&(r=wm[(a=String(n)).toLowerCase()],r===void 0))throw new Et(`Unknown adapter '${a}'`);if(r)break;o[a||"#"+i]=r}if(!r){const i=Object.entries(o).map(([s,u])=>`adapter ${s} `+(u===!1?"is not supported by the environment":"is not available in the build"));let a=t?i.length>1?`since :
`+i.map(Rx).join(`
`):" "+Rx(i[0]):"as no adapter specified";throw new Et("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return r},adapters:wm};function Ip(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new lc(null,e)}function Tx(e){return Ip(e),e.headers=ci.from(e.headers),e.data=Tp.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),zC.getAdapter(e.adapter||iy.adapter)(e).then(function(r){return Ip(e),r.data=Tp.call(e,e.transformResponse,r),r.headers=ci.from(r.headers),r},function(r){return jC(r)||(Ip(e),r&&r.response&&(r.response.data=Tp.call(e,e.transformResponse,r.response),r.response.headers=ci.from(r.response.headers))),Promise.reject(r)})}const Ix=e=>e instanceof ci?e.toJSON():e;function du(e,t){t=t||{};const n={};function r(l,c,f){return pe.isPlainObject(l)&&pe.isPlainObject(c)?pe.merge.call({caseless:f},l,c):pe.isPlainObject(c)?pe.merge({},c):pe.isArray(c)?c.slice():c}function o(l,c,f){if(pe.isUndefined(c)){if(!pe.isUndefined(l))return r(void 0,l,f)}else return r(l,c,f)}function i(l,c){if(!pe.isUndefined(c))return r(void 0,c)}function a(l,c){if(pe.isUndefined(c)){if(!pe.isUndefined(l))return r(void 0,l)}else return r(void 0,c)}function s(l,c,f){if(f in t)return r(l,c);if(f in e)return r(void 0,l)}const u={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(l,c)=>o(Ix(l),Ix(c),!0)};return pe.forEach(Object.keys(Object.assign({},e,t)),function(c){const f=u[c]||o,d=f(e[c],t[c],c);pe.isUndefined(d)&&f!==s||(n[c]=d)}),n}const UC="1.6.7",ay={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{ay[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const Dx={};ay.transitional=function(t,n,r){function o(i,a){return"[Axios v"+UC+"] Transitional option '"+i+"'"+a+(r?". "+r:"")}return(i,a,s)=>{if(t===!1)throw new Et(o(a," has been removed"+(n?" in "+n:"")),Et.ERR_DEPRECATED);return n&&!Dx[a]&&(Dx[a]=!0,console.warn(o(a," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(i,a,s):!0}};function u3(e,t,n){if(typeof e!="object")throw new Et("options must be an object",Et.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let o=r.length;for(;o-- >0;){const i=r[o],a=t[i];if(a){const s=e[i],u=s===void 0||a(s,i,e);if(u!==!0)throw new Et("option "+i+" must be "+u,Et.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Et("Unknown option "+i,Et.ERR_BAD_OPTION)}}const bm={assertOptions:u3,validators:ay},Ai=bm.validators;class ad{constructor(t){this.defaults=t,this.interceptors={request:new Sx,response:new Sx}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let o;Error.captureStackTrace?Error.captureStackTrace(o={}):o=new Error;const i=o.stack?o.stack.replace(/^.+\n/,""):"";r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=du(this.defaults,n);const{transitional:r,paramsSerializer:o,headers:i}=n;r!==void 0&&bm.assertOptions(r,{silentJSONParsing:Ai.transitional(Ai.boolean),forcedJSONParsing:Ai.transitional(Ai.boolean),clarifyTimeoutError:Ai.transitional(Ai.boolean)},!1),o!=null&&(pe.isFunction(o)?n.paramsSerializer={serialize:o}:bm.assertOptions(o,{encode:Ai.function,serialize:Ai.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=i&&pe.merge(i.common,i[n.method]);i&&pe.forEach(["delete","get","head","post","put","patch","common"],v=>{delete i[v]}),n.headers=ci.concat(a,i);const s=[];let u=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(n)===!1||(u=u&&x.synchronous,s.unshift(x.fulfilled,x.rejected))});const l=[];this.interceptors.response.forEach(function(x){l.push(x.fulfilled,x.rejected)});let c,f=0,d;if(!u){const v=[Tx.bind(this),void 0];for(v.unshift.apply(v,s),v.push.apply(v,l),d=v.length,c=Promise.resolve(n);f<d;)c=c.then(v[f++],v[f++]);return c}d=s.length;let p=n;for(f=0;f<d;){const v=s[f++],x=s[f++];try{p=v(p)}catch(w){x.call(this,w);break}}try{c=Tx.call(this,p)}catch(v){return Promise.reject(v)}for(f=0,d=l.length;f<d;)c=c.then(l[f++],l[f++]);return c}getUri(t){t=du(this.defaults,t);const n=WC(t.baseURL,t.url);return OC(n,t.params,t.paramsSerializer)}}pe.forEach(["delete","get","head","options"],function(t){ad.prototype[t]=function(n,r){return this.request(du(r||{},{method:t,url:n,data:(r||{}).data}))}});pe.forEach(["post","put","patch"],function(t){function n(r){return function(i,a,s){return this.request(du(s||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:a}))}}ad.prototype[t]=n(),ad.prototype[t+"Form"]=n(!0)});const Tf=ad;class sy{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(o=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](o);r._listeners=null}),this.promise.then=o=>{let i;const a=new Promise(s=>{r.subscribe(s),i=s}).then(o);return a.cancel=function(){r.unsubscribe(i)},a},t(function(i,a,s){r.reason||(r.reason=new lc(i,a,s),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new sy(function(o){t=o}),cancel:t}}}const l3=sy;function c3(e){return function(n){return e.apply(null,n)}}function f3(e){return pe.isObject(e)&&e.isAxiosError===!0}const Em={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Em).forEach(([e,t])=>{Em[t]=e});const d3=Em;function $C(e){const t=new Tf(e),n=CC(Tf.prototype.request,t);return pe.extend(n,Tf.prototype,t,{allOwnKeys:!0}),pe.extend(n,t,null,{allOwnKeys:!0}),n.create=function(o){return $C(du(e,o))},n}const Pt=$C(iy);Pt.Axios=Tf;Pt.CanceledError=lc;Pt.CancelToken=l3;Pt.isCancel=jC;Pt.VERSION=UC;Pt.toFormData=uh;Pt.AxiosError=Et;Pt.Cancel=Pt.CanceledError;Pt.all=function(t){return Promise.all(t)};Pt.spread=c3;Pt.isAxiosError=f3;Pt.mergeConfig=du;Pt.AxiosHeaders=ci;Pt.formToJSON=e=>BC(pe.isHTMLForm(e)?new FormData(e):e);Pt.getAdapter=zC.getAdapter;Pt.HttpStatusCode=d3;Pt.default=Pt;function Nx(){W.useState(""),W.useState("");const[e,t]=W.useState(!1),[n,r]=W.useState(!1),[o,i]=W.useState(!1);if(W.useEffect(()=>{t(!0)},[]),e)return F.jsxs(F.Fragment,{children:[F.jsx("style",{children:`
                        .box {
                            width: 50%;
                            height: 100%;
                            position: relative;
                            display: flex;
                            justify-content: center;
                            flex-direction: column;
                            padding-left: 2%;

                        .title {
                            width: 100%;
                            position: relative;
                            display: flex;
                            align-items: center;
                            height: 50px;

                            .block {
                                width: 0%;
                                height: inherit;
                                background: #ad99fb;
                                position: absolute;
                                animation: mainBlock 2s cubic-bezier(.74, .06, .4, .92) forwards;
                                display: flex;
                            }

                            h1 {
                                font-family: 'Poppins';
                                color: #fff;
                                -webkit-animation: mainFadeIn 2s forwards;
                                -o-animation: mainFadeIn 2s forwards;
                                animation: mainFadeIn 2s forwards;
                                animation-delay: 1.6s;
                                opacity: 0;
                                display: flex;
                                align-items: baseline;
                                position: relative;

                                span {
                                    width:0px;
                                    height: 0px;
                                    -webkit-border-radius: 50%;
                                    -moz-border-radius: 50%;
                                    border-radius: 50%;

                                    background: #ad99fb;
                                    -webkit-animation: load 0.6s cubic-bezier(.74, .06, .4, .92) forwards;
                                    animation: popIn 0.8s cubic-bezier(.74, .06, .4, .92) forwards;
                                    animation-delay: 2s;
                                    margin-left: 5px;
                                    margin-top: -10px;
                                    position: absolute;
                                    bottom: 13px;
                                    right: -12px;

                                }
                            }
                        }

                        .role {
                            position: relative;
                            display: flex;
                            align-items: center;
                            height: 30px;

                            .block {
                                width: 0%;
                                height: inherit;
                                background: #ad99fb;
                                position: absolute;
                                animation: secBlock 2s cubic-bezier(.74, .06, .4, .92) forwards;
                                animation-delay: 2s;
                                display: flex;
                            }

                            p {
                                animation: secFadeIn 2s forwards;
                                animation-delay: 3.2s;
                                opacity: 0;
                                    font-weight: 400;
                                font-family: 'Lato';
                                color: #ffffff;
                                font-size: 12px;
                                text-transform: uppercase;
                                letter-spacing: 5px;
                            }
                        }
                        }

                        .illustration {
                            opacity: 0;
                            animation: thirdFadeIn 2s forwards;
                            animation-delay: 4.2s;
                        }

                        .learn-more {
                            h2 {
                                font-size: 1.5rem;
                            }

                            p {
                                font-size: 0.8rem;
                            }

                            ol {
                                font-size: 0.8rem;
                            }

                            dl {
                                font-size: 0.8rem;
                            }

                            ul {
                                font-size: 0.8rem;
                            }
                        }


                        .material-symbols-outlined {
                            font-size: 25px;
                        }

                        .btn-1 {
                            background: #0F0F6D;
                            color: #ffffff;
                            font-family: 'Poppins';
                            font-weight: bold;
                            cursor: pointer;
                            font-size: 1em;
                            padding: 1.5rem;
                            border: 0;
                            transition: all 0.5s;
                            border-radius: 10px;
                            width: auto;
                            position: relative;
                            user-select: none;
                            animation: thirdFadeIn 2s forwards;
                            animation-delay: 4.2s;
                            opacity: 0;

                            span {
                                position: absolute;
                                left: 75%;
                                top: 31%;
                                right: 5%;
                                bottom: 0;
                                opacity: 0;
                            }

                            &:hover {
                                background: #2b2bff;
                                transition: all 0.5s;
                                border-radius: 10px;
                                box-shadow: 0px 6px 15px #0000ff61;
                                padding: 1.5rem 3.5rem 1.5rem 1.5rem;

                                span {
                                    opacity: 1;
                                    transition: all 0.5s;
                                }
                            }


                        }

                        @keyframes mainBlock {
                            0% {
                                width: 0%;
                                left: 0;

                            }
                            50% {
                                width: 100%;
                                left: 0;

                            }
                            100% {
                                width: 0;
                                left: 100%;
                            }
                        }

                        @keyframes secBlock {
                            0% {
                                width: 0%;
                                left: 0;

                            }
                            50% {
                                width: 100%;
                                left: 0;

                            }
                            100% {
                                width: 0;
                                left: 100%;
                            }
                        }

                        @keyframes mainFadeIn {
                            0% {
                                opacity: 0;
                            }
                            100% {
                                opacity: 1;
                            }
                        }


                        @keyframes popIn {
                            0% {
                                width: 0px;
                                height: 0px;
                                border: 0px solid #ddd;
                                opacity: 0;
                            }
                            50% {
                                width: 10px;
                                height: 10px;
                                opacity: 1;
                                bottom: 45px;
                            }
                                65% {
                                width: 7px;
                                height: 7px;
                                bottom: 0px;
                                width: 15px
                                }
                                80% {
                                width: 10px;
                                height: 10px;
                                bottom: 20px
                                }
                            100% {
                                width: 7px;
                                height: 7px;
                                border: 0px solid #222;
                                bottom: 13px;

                            }
                        }

                        @keyframes secFadeIn {
                            0% {
                                opacity: 0;
                            }
                            100% {
                                opacity: 0.8;
                            }
                        }

                        @keyframes thirdFadeIn {
                            0% {
                                opacity: 0;
                            }
                            100% {
                                opacity: 0.8;
                            }
                        }
                    `}),F.jsxs(Fo,{show:o,onHide:()=>{i(!1)},size:"lg","aria-labelledby":"example-modal-sizes-title-lg",children:[F.jsx(Fo.Header,{closeButton:!0,children:F.jsx(Fo.Title,{children:"Learn More"})}),F.jsx(Fo.Body,{style:{height:"75vh",overflow:"auto"},children:F.jsxs("div",{className:"learn-more",style:{width:"100%",height:"100%",padding:10,display:"flex",flexDirection:"column",gap:10,textAlign:"justify",fontFamily:"Poppins"},children:[F.jsxs("section",{id:"tech-explanation",children:[F.jsx("h2",{children:"About System"}),F.jsx("p",{children:"This system is used for user registration and customer identification through facial recognition. The system is designed to improve customer management and streamline business operations in high-frequency commercial environments such as restaurants and supermarkets. Furthermore, the project strives to bridge the gap between academic research and practical implementation of facial recognition technology in different fields."})]}),F.jsxs("section",{id:"user-guide",children:[F.jsx("h2",{children:"User Guide"}),F.jsxs("ol",{style:{paddingLeft:"1rem"},children:[F.jsxs("li",{children:[F.jsx("strong",{children:"Registration and Setup:"})," First, users need to register an account and upload ",F.jsx("strong",{children:"3"})," clear facial photo to the database."]}),F.jsxs("li",{children:[F.jsx("strong",{children:"Performing Facial Scan:"})," Users can log in with a facial scan by using a compatible device. Ensure you are in a well-lit environment and face the camera directly."]}),F.jsxs("li",{children:[F.jsx("strong",{children:"Results and Feedback:"})," The system analyzes facial features in real time and compares them with your template, completing verification within a few seconds. If the return is true, the login is considered successful."]})]})]}),F.jsxs("section",{id:"privacy-policy",children:[F.jsx("h2",{children:"Privacy and Security Policy"}),F.jsx("p",{children:"We value user privacy and data security. All facial data is encrypted and stored on highly protected servers. We promise not to sell your data to third parties or use it for unauthorized purposes."})]}),F.jsxs("section",{id:"faq",children:[F.jsx("h2",{children:"Frequently Asked Questions (FAQ)"}),F.jsxs("dl",{children:[F.jsx("dt",{children:"How accurate is facial recognition technology?"}),F.jsx("dd",{children:"Our system uses advanced algorithms with an accuracy higher than 75%, effectively resisting photo or video spoofing attacks."}),F.jsx("dt",{children:"Can I delete my facial data?"}),F.jsx("dd",{children:"Users can completely delete their facial recognition data."}),F.jsx("dt",{children:"Is facial recognition technology effective in low light?"}),F.jsx("dd",{children:"Our technology is designed to account for various lighting conditions, but for optimal results, we recommend using it in natural light or well-lit settings."})]})]}),F.jsxs("section",{id:"contact-support",children:[F.jsx("h2",{children:"Contact and Support"}),F.jsx("p",{children:"Need help? Contact us with the email below:"}),F.jsxs("ul",{children:[F.jsxs("li",{children:[F.jsx("strong",{children:"Chong Yew Soon:"})," tp064768@mail.apu.edu.my"]}),F.jsxs("li",{children:[F.jsx("strong",{children:"How Yan Han:"})," tp0643658@mail.apu.edu.my"]})]})]})]})}),F.jsx(Fo.Footer,{children:F.jsx(Ui,{variant:"secondary",onClick:()=>{i(!1)},children:"Close"})})]}),F.jsxs("div",{className:"frs-container",children:[n&&F.jsx(sc,{zIndex:2}),F.jsx(oh,{currentPage:"home"}),F.jsxs("div",{className:"frs-second-container",children:[F.jsxs("div",{className:"box",children:[F.jsxs("div",{className:"title",children:[F.jsx("span",{className:"block"}),F.jsxs("h1",{style:{fontSize:window.innerWidth<1700?"30px":"45px",fontWeight:"bold"},children:["Face Recognition Authentication",F.jsx("span",{})]})]}),F.jsxs("div",{className:"role",style:{width:window.innerWidth<1700?"75%":"60%"},children:[F.jsx("div",{className:"block"}),F.jsx("p",{children:"In Customer Relationship Management"})]}),F.jsx("div",{style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",marginTop:"5%"},onClick:()=>i(!0),children:F.jsxs("div",{className:"btn-1",children:["Learn More",F.jsx("span",{className:"material-symbols-outlined",children:"book"})]})})]}),F.jsx("div",{style:{width:"50%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:F.jsx("img",{className:"illustration",src:EC,style:{userSelect:"none",maxWidth:"100%"}})})]}),F.jsxs("ul",{className:"frs-circles",children:[F.jsx("li",{}),F.jsx("li",{}),F.jsx("li",{}),F.jsx("li",{}),F.jsx("li",{}),F.jsx("li",{}),F.jsx("li",{}),F.jsx("li",{}),F.jsx("li",{}),F.jsx("li",{})]})]})]})}function h3(){const[e,t]=W.useState(""),[n,r]=W.useState(""),[o,i]=W.useState(!1),[a,s]=W.useState(!0),u="http://127.0.0.1:8000/RecognitionApp",l=()=>{r(window.location.hostname),Pt.post(`${u}/secondFunction`).then(c=>{t(c.data.message)}).catch(c=>{console.log(c)})};if(W.useEffect(()=>{l(),i(!0)},[]),o)return F.jsxs(F.Fragment,{children:[F.jsx("style",{jsx:!0,children:""}),a&&F.jsx(sc,{zIndex:2}),F.jsxs("div",{className:"frs-container",children:[F.jsx(oh,{}),F.jsxs("div",{className:"frs-second-container",children:[F.jsx("div",{style:{width:"50%",height:"100%"},children:"test"}),F.jsx("div",{style:{width:"50%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:F.jsx("img",{src:EC})})]}),F.jsxs("ul",{className:"frs-circles",children:[F.jsx("li",{}),F.jsx("li",{}),F.jsx("li",{}),F.jsx("li",{}),F.jsx("li",{}),F.jsx("li",{}),F.jsx("li",{}),F.jsx("li",{}),F.jsx("li",{}),F.jsx("li",{})]})]})]})}function p3(){const[e,t]=W.useState(""),[n,r]=W.useState(""),[o,i]=W.useState(!1),[a,s]=W.useState(!0),u="http://127.0.0.1:8000/RecognitionApp",l=()=>{r(window.location.hostname),Pt.post(`${u}/secondFunction`).then(c=>{t(c.data.message)}).catch(c=>{console.log(c)})};if(W.useEffect(()=>{l(),i(!0)},[]),o)return F.jsxs(F.Fragment,{children:[F.jsx("style",{jsx:!0,children:""}),a&&F.jsx(sc,{}),F.jsxs("div",{style:{backgroundColor:"#fff",width:"100vw",height:"100vh",color:"black"},children:[F.jsx("h1",{style:{marginTop:"0"},children:"Testing Page"}),F.jsx("p",{children:e})]})]})}var HC={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Ax=ar.createContext&&ar.createContext(HC),v3=["attr","size","title"];function m3(e,t){if(e==null)return{};var n=g3(e,t),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function g3(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,i;for(i=0;i<r.length;i++)o=r[i],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}function sd(){return sd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sd.apply(this,arguments)}function Px(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function ud(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Px(Object(n),!0).forEach(function(r){y3(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Px(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function y3(e,t,n){return t=x3(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x3(e){var t=w3(e,"string");return typeof t=="symbol"?t:String(t)}function w3(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function VC(e){return e&&e.map((t,n)=>ar.createElement(t.tag,ud({key:n},t.attr),VC(t.child)))}function ch(e){return t=>ar.createElement(b3,sd({attr:ud({},e.attr)},t),VC(e.child))}function b3(e){var t=n=>{var{attr:r,size:o,title:i}=e,a=m3(e,v3),s=o||n.size||"1em",u;return n.className&&(u=n.className),e.className&&(u=(u?u+" ":"")+e.className),ar.createElement("svg",sd({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,a,{className:u,style:ud(ud({color:e.color||n.color},n.style),e.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),i&&ar.createElement("title",null,i),e.children)};return Ax!==void 0?ar.createElement(Ax.Consumer,null,n=>t(n)):t(HC)}function E3(e){return ch({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 4V1h2v3h3v2H5v3H3V6H0V4h3zm3 6V7h3V4h7l1.83 2H21c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H5c-1.1 0-2-.9-2-2V10h3zm7 9c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-3.2-5c0 1.77 1.43 3.2 3.2 3.2s3.2-1.43 3.2-3.2-1.43-3.2-3.2-3.2-3.2 1.43-3.2 3.2z"},child:[]}]})(e)}function Fx(e){return ch({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3.2"},child:[]},{tag:"path",attr:{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"},child:[]}]})(e)}function C3(e){return ch({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"circle",attr:{cx:"12",cy:"14",r:"3.2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"14",r:"5",fill:"none"},child:[]},{tag:"path",attr:{d:"M16 3.33c2.58 0 4.67 2.09 4.67 4.67H22c0-3.31-2.69-6-6-6v1.33M16 6c1.11 0 2 .89 2 2h1.33c0-1.84-1.49-3.33-3.33-3.33V6"},child:[]},{tag:"path",attr:{fill:"none",d:"M24 0H0v24h24V0z"},child:[]},{tag:"path",attr:{d:"M17 9c0-1.11-.89-2-2-2V4H9L7.17 6H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V9h-5zm-5 10c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"},child:[]}]})(e)}function S3(e){return ch({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M288 256c52.79 0 99.43-49.71 104-110.82 2.27-30.7-7.36-59.33-27.12-80.6C345.33 43.57 318 32 288 32c-30.24 0-57.59 11.5-77 32.38-19.63 21.11-29.2 49.8-27 80.78C188.49 206.28 235.12 256 288 256zm207.38 183.76c-8.44-46.82-34.79-86.15-76.19-113.75C382.42 301.5 335.83 288 288 288s-94.42 13.5-131.19 38c-41.4 27.6-67.75 66.93-76.19 113.75-1.93 10.73.69 21.34 7.19 29.11A30.94 30.94 0 0 0 112 480h352a30.94 30.94 0 0 0 24.21-11.13c6.48-7.77 9.1-18.38 7.17-29.11zM144 216H32a16 16 0 0 0 0 32h112a16 16 0 0 0 0-32z"},child:[]}]})(e)}var _3=Error,k3=EvalError,R3=RangeError,T3=ReferenceError,GC=SyntaxError,cc=TypeError,I3=URIError,D3=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},n=Symbol("test"),r=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var o=42;t[n]=o;for(n in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var i=Object.getOwnPropertySymbols(t);if(i.length!==1||i[0]!==n||!Object.prototype.propertyIsEnumerable.call(t,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(t,n);if(a.value!==o||a.enumerable!==!0)return!1}return!0},Ox=typeof Symbol<"u"&&Symbol,N3=D3,A3=function(){return typeof Ox!="function"||typeof Symbol!="function"||typeof Ox("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:N3()},Dp={__proto__:null,foo:{}},P3=Object,F3=function(){return{__proto__:Dp}.foo===Dp.foo&&!(Dp instanceof P3)},O3="Function.prototype.bind called on incompatible ",M3=Object.prototype.toString,L3=Math.max,B3="[object Function]",Mx=function(t,n){for(var r=[],o=0;o<t.length;o+=1)r[o]=t[o];for(var i=0;i<n.length;i+=1)r[i+t.length]=n[i];return r},j3=function(t,n){for(var r=[],o=n||0,i=0;o<t.length;o+=1,i+=1)r[i]=t[o];return r},W3=function(e,t){for(var n="",r=0;r<e.length;r+=1)n+=e[r],r+1<e.length&&(n+=t);return n},z3=function(t){var n=this;if(typeof n!="function"||M3.apply(n)!==B3)throw new TypeError(O3+n);for(var r=j3(arguments,1),o,i=function(){if(this instanceof o){var c=n.apply(this,Mx(r,arguments));return Object(c)===c?c:this}return n.apply(t,Mx(r,arguments))},a=L3(0,n.length-r.length),s=[],u=0;u<a;u++)s[u]="$"+u;if(o=Function("binder","return function ("+W3(s,",")+"){ return binder.apply(this,arguments); }")(i),n.prototype){var l=function(){};l.prototype=n.prototype,o.prototype=new l,l.prototype=null}return o},U3=z3,uy=Function.prototype.bind||U3,$3=Function.prototype.call,H3=Object.prototype.hasOwnProperty,V3=uy,G3=V3.call($3,H3),gt,q3=_3,K3=k3,X3=R3,Y3=T3,hu=GC,Ys=cc,Q3=I3,qC=Function,Np=function(e){try{return qC('"use strict"; return ('+e+").constructor;")()}catch{}},qa=Object.getOwnPropertyDescriptor;if(qa)try{qa({},"")}catch{qa=null}var Ap=function(){throw new Ys},J3=qa?function(){try{return arguments.callee,Ap}catch{try{return qa(arguments,"callee").get}catch{return Ap}}}():Ap,xs=A3(),Z3=F3(),Tn=Object.getPrototypeOf||(Z3?function(e){return e.__proto__}:null),_s={},eF=typeof Uint8Array>"u"||!Tn?gt:Tn(Uint8Array),Ka={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?gt:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?gt:ArrayBuffer,"%ArrayIteratorPrototype%":xs&&Tn?Tn([][Symbol.iterator]()):gt,"%AsyncFromSyncIteratorPrototype%":gt,"%AsyncFunction%":_s,"%AsyncGenerator%":_s,"%AsyncGeneratorFunction%":_s,"%AsyncIteratorPrototype%":_s,"%Atomics%":typeof Atomics>"u"?gt:Atomics,"%BigInt%":typeof BigInt>"u"?gt:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?gt:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?gt:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?gt:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":q3,"%eval%":eval,"%EvalError%":K3,"%Float32Array%":typeof Float32Array>"u"?gt:Float32Array,"%Float64Array%":typeof Float64Array>"u"?gt:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?gt:FinalizationRegistry,"%Function%":qC,"%GeneratorFunction%":_s,"%Int8Array%":typeof Int8Array>"u"?gt:Int8Array,"%Int16Array%":typeof Int16Array>"u"?gt:Int16Array,"%Int32Array%":typeof Int32Array>"u"?gt:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":xs&&Tn?Tn(Tn([][Symbol.iterator]())):gt,"%JSON%":typeof JSON=="object"?JSON:gt,"%Map%":typeof Map>"u"?gt:Map,"%MapIteratorPrototype%":typeof Map>"u"||!xs||!Tn?gt:Tn(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?gt:Promise,"%Proxy%":typeof Proxy>"u"?gt:Proxy,"%RangeError%":X3,"%ReferenceError%":Y3,"%Reflect%":typeof Reflect>"u"?gt:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?gt:Set,"%SetIteratorPrototype%":typeof Set>"u"||!xs||!Tn?gt:Tn(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?gt:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":xs&&Tn?Tn(""[Symbol.iterator]()):gt,"%Symbol%":xs?Symbol:gt,"%SyntaxError%":hu,"%ThrowTypeError%":J3,"%TypedArray%":eF,"%TypeError%":Ys,"%Uint8Array%":typeof Uint8Array>"u"?gt:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?gt:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?gt:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?gt:Uint32Array,"%URIError%":Q3,"%WeakMap%":typeof WeakMap>"u"?gt:WeakMap,"%WeakRef%":typeof WeakRef>"u"?gt:WeakRef,"%WeakSet%":typeof WeakSet>"u"?gt:WeakSet};if(Tn)try{null.error}catch(e){var tF=Tn(Tn(e));Ka["%Error.prototype%"]=tF}var nF=function e(t){var n;if(t==="%AsyncFunction%")n=Np("async function () {}");else if(t==="%GeneratorFunction%")n=Np("function* () {}");else if(t==="%AsyncGeneratorFunction%")n=Np("async function* () {}");else if(t==="%AsyncGenerator%"){var r=e("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if(t==="%AsyncIteratorPrototype%"){var o=e("%AsyncGenerator%");o&&Tn&&(n=Tn(o.prototype))}return Ka[t]=n,n},Lx={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},fc=uy,ld=G3,rF=fc.call(Function.call,Array.prototype.concat),oF=fc.call(Function.apply,Array.prototype.splice),Bx=fc.call(Function.call,String.prototype.replace),cd=fc.call(Function.call,String.prototype.slice),iF=fc.call(Function.call,RegExp.prototype.exec),aF=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,sF=/\\(\\)?/g,uF=function(t){var n=cd(t,0,1),r=cd(t,-1);if(n==="%"&&r!=="%")throw new hu("invalid intrinsic syntax, expected closing `%`");if(r==="%"&&n!=="%")throw new hu("invalid intrinsic syntax, expected opening `%`");var o=[];return Bx(t,aF,function(i,a,s,u){o[o.length]=s?Bx(u,sF,"$1"):a||i}),o},lF=function(t,n){var r=t,o;if(ld(Lx,r)&&(o=Lx[r],r="%"+o[0]+"%"),ld(Ka,r)){var i=Ka[r];if(i===_s&&(i=nF(r)),typeof i>"u"&&!n)throw new Ys("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:o,name:r,value:i}}throw new hu("intrinsic "+t+" does not exist!")},ku=function(t,n){if(typeof t!="string"||t.length===0)throw new Ys("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof n!="boolean")throw new Ys('"allowMissing" argument must be a boolean');if(iF(/^%?[^%]*%?$/,t)===null)throw new hu("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=uF(t),o=r.length>0?r[0]:"",i=lF("%"+o+"%",n),a=i.name,s=i.value,u=!1,l=i.alias;l&&(o=l[0],oF(r,rF([0,1],l)));for(var c=1,f=!0;c<r.length;c+=1){var d=r[c],p=cd(d,0,1),v=cd(d,-1);if((p==='"'||p==="'"||p==="`"||v==='"'||v==="'"||v==="`")&&p!==v)throw new hu("property names with quotes must have matching quotes");if((d==="constructor"||!f)&&(u=!0),o+="."+d,a="%"+o+"%",ld(Ka,a))s=Ka[a];else if(s!=null){if(!(d in s)){if(!n)throw new Ys("base intrinsic for "+t+" exists, but the property is not available.");return}if(qa&&c+1>=r.length){var x=qa(s,d);f=!!x,f&&"get"in x&&!("originalValue"in x.get)?s=x.get:s=s[d]}else f=ld(s,d),s=s[d];f&&!u&&(Ka[a]=s)}}return s},KC={exports:{}},Pp,jx;function ly(){if(jx)return Pp;jx=1;var e=ku,t=e("%Object.defineProperty%",!0)||!1;if(t)try{t({},"a",{value:1})}catch{t=!1}return Pp=t,Pp}var cF=ku,If=cF("%Object.getOwnPropertyDescriptor%",!0);if(If)try{If([],"length")}catch{If=null}var XC=If,Wx=ly(),fF=GC,ws=cc,zx=XC,dF=function(t,n,r){if(!t||typeof t!="object"&&typeof t!="function")throw new ws("`obj` must be an object or a function`");if(typeof n!="string"&&typeof n!="symbol")throw new ws("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new ws("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new ws("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new ws("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new ws("`loose`, if provided, must be a boolean");var o=arguments.length>3?arguments[3]:null,i=arguments.length>4?arguments[4]:null,a=arguments.length>5?arguments[5]:null,s=arguments.length>6?arguments[6]:!1,u=!!zx&&zx(t,n);if(Wx)Wx(t,n,{configurable:a===null&&u?u.configurable:!a,enumerable:o===null&&u?u.enumerable:!o,value:r,writable:i===null&&u?u.writable:!i});else if(s||!o&&!i&&!a)t[n]=r;else throw new fF("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Cm=ly(),YC=function(){return!!Cm};YC.hasArrayLengthDefineBug=function(){if(!Cm)return null;try{return Cm([],"length",{value:1}).length!==1}catch{return!0}};var hF=YC,pF=ku,Ux=dF,vF=hF(),$x=XC,Hx=cc,mF=pF("%Math.floor%"),gF=function(t,n){if(typeof t!="function")throw new Hx("`fn` is not a function");if(typeof n!="number"||n<0||n>4294967295||mF(n)!==n)throw new Hx("`length` must be a positive 32-bit integer");var r=arguments.length>2&&!!arguments[2],o=!0,i=!0;if("length"in t&&$x){var a=$x(t,"length");a&&!a.configurable&&(o=!1),a&&!a.writable&&(i=!1)}return(o||i||!r)&&(vF?Ux(t,"length",n,!0,!0):Ux(t,"length",n)),t};(function(e){var t=uy,n=ku,r=gF,o=cc,i=n("%Function.prototype.apply%"),a=n("%Function.prototype.call%"),s=n("%Reflect.apply%",!0)||t.call(a,i),u=ly(),l=n("%Math.max%");e.exports=function(d){if(typeof d!="function")throw new o("a function is required");var p=s(t,a,arguments);return r(p,1+l(0,d.length-(arguments.length-1)),!0)};var c=function(){return s(t,i,arguments)};u?u(e.exports,"apply",{value:c}):e.exports.apply=c})(KC);var yF=KC.exports,QC=ku,JC=yF,xF=JC(QC("String.prototype.indexOf")),wF=function(t,n){var r=QC(t,!!n);return typeof r=="function"&&xF(t,".prototype.")>-1?JC(r):r};const bF={},EF=Object.freeze(Object.defineProperty({__proto__:null,default:bF},Symbol.toStringTag,{value:"Module"})),CF=mR(EF);var cy=typeof Map=="function"&&Map.prototype,Fp=Object.getOwnPropertyDescriptor&&cy?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,fd=cy&&Fp&&typeof Fp.get=="function"?Fp.get:null,Vx=cy&&Map.prototype.forEach,fy=typeof Set=="function"&&Set.prototype,Op=Object.getOwnPropertyDescriptor&&fy?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,dd=fy&&Op&&typeof Op.get=="function"?Op.get:null,Gx=fy&&Set.prototype.forEach,SF=typeof WeakMap=="function"&&WeakMap.prototype,yl=SF?WeakMap.prototype.has:null,_F=typeof WeakSet=="function"&&WeakSet.prototype,xl=_F?WeakSet.prototype.has:null,kF=typeof WeakRef=="function"&&WeakRef.prototype,qx=kF?WeakRef.prototype.deref:null,RF=Boolean.prototype.valueOf,TF=Object.prototype.toString,IF=Function.prototype.toString,DF=String.prototype.match,dy=String.prototype.slice,Vi=String.prototype.replace,NF=String.prototype.toUpperCase,Kx=String.prototype.toLowerCase,ZC=RegExp.prototype.test,Xx=Array.prototype.concat,Do=Array.prototype.join,AF=Array.prototype.slice,Yx=Math.floor,Sm=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Mp=Object.getOwnPropertySymbols,_m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,pu=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Zn=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===pu||!0)?Symbol.toStringTag:null,eS=Object.prototype.propertyIsEnumerable,Qx=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function Jx(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||ZC.call(/e/,t))return t;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof e=="number"){var r=e<0?-Yx(-e):Yx(e);if(r!==e){var o=String(r),i=dy.call(t,o.length+1);return Vi.call(o,n,"$&_")+"."+Vi.call(Vi.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Vi.call(t,n,"$&_")}var km=CF,Zx=km.custom,ew=nS(Zx)?Zx:null,PF=function e(t,n,r,o){var i=n||{};if(ji(i,"quoteStyle")&&i.quoteStyle!=="single"&&i.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(ji(i,"maxStringLength")&&(typeof i.maxStringLength=="number"?i.maxStringLength<0&&i.maxStringLength!==1/0:i.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=ji(i,"customInspect")?i.customInspect:!0;if(typeof a!="boolean"&&a!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(ji(i,"indent")&&i.indent!==null&&i.indent!=="	"&&!(parseInt(i.indent,10)===i.indent&&i.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(ji(i,"numericSeparator")&&typeof i.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var s=i.numericSeparator;if(typeof t>"u")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return oS(t,i);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var u=String(t);return s?Jx(t,u):u}if(typeof t=="bigint"){var l=String(t)+"n";return s?Jx(t,l):l}var c=typeof i.depth>"u"?5:i.depth;if(typeof r>"u"&&(r=0),r>=c&&c>0&&typeof t=="object")return Rm(t)?"[Array]":"[Object]";var f=QF(i,r);if(typeof o>"u")o=[];else if(rS(o,t)>=0)return"[Circular]";function d(V,Z,K){if(Z&&(o=AF.call(o),o.push(Z)),K){var ne={depth:i.depth};return ji(i,"quoteStyle")&&(ne.quoteStyle=i.quoteStyle),e(V,ne,r+1,o)}return e(V,i,r+1,o)}if(typeof t=="function"&&!tw(t)){var p=UF(t),v=Yc(t,d);return"[Function"+(p?": "+p:" (anonymous)")+"]"+(v.length>0?" { "+Do.call(v,", ")+" }":"")}if(nS(t)){var x=pu?Vi.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):_m.call(t);return typeof t=="object"&&!pu?Ju(x):x}if(KF(t)){for(var w="<"+Kx.call(String(t.nodeName)),y=t.attributes||[],b=0;b<y.length;b++)w+=" "+y[b].name+"="+tS(FF(y[b].value),"double",i);return w+=">",t.childNodes&&t.childNodes.length&&(w+="..."),w+="</"+Kx.call(String(t.nodeName))+">",w}if(Rm(t)){if(t.length===0)return"[]";var E=Yc(t,d);return f&&!YF(E)?"["+Tm(E,f)+"]":"[ "+Do.call(E,", ")+" ]"}if(MF(t)){var S=Yc(t,d);return!("cause"in Error.prototype)&&"cause"in t&&!eS.call(t,"cause")?"{ ["+String(t)+"] "+Do.call(Xx.call("[cause]: "+d(t.cause),S),", ")+" }":S.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+Do.call(S,", ")+" }"}if(typeof t=="object"&&a){if(ew&&typeof t[ew]=="function"&&km)return km(t,{depth:c-r});if(a!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if($F(t)){var R=[];return Vx&&Vx.call(t,function(V,Z){R.push(d(Z,t,!0)+" => "+d(V,t))}),nw("Map",fd.call(t),R,f)}if(GF(t)){var k=[];return Gx&&Gx.call(t,function(V){k.push(d(V,t))}),nw("Set",dd.call(t),k,f)}if(HF(t))return Lp("WeakMap");if(qF(t))return Lp("WeakSet");if(VF(t))return Lp("WeakRef");if(BF(t))return Ju(d(Number(t)));if(WF(t))return Ju(d(Sm.call(t)));if(jF(t))return Ju(RF.call(t));if(LF(t))return Ju(d(String(t)));if(typeof window<"u"&&t===window)return"{ [object Window] }";if(t===Zm)return"{ [object globalThis] }";if(!OF(t)&&!tw(t)){var m=Yc(t,d),P=Qx?Qx(t)===Object.prototype:t instanceof Object||t.constructor===Object,D=t instanceof Object?"":"null prototype",N=!P&&Zn&&Object(t)===t&&Zn in t?dy.call(ha(t),8,-1):D?"Object":"",B=P||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",z=B+(N||D?"["+Do.call(Xx.call([],N||[],D||[]),": ")+"] ":"");return m.length===0?z+"{}":f?z+"{"+Tm(m,f)+"}":z+"{ "+Do.call(m,", ")+" }"}return String(t)};function tS(e,t,n){var r=(n.quoteStyle||t)==="double"?'"':"'";return r+e+r}function FF(e){return Vi.call(String(e),/"/g,"&quot;")}function Rm(e){return ha(e)==="[object Array]"&&(!Zn||!(typeof e=="object"&&Zn in e))}function OF(e){return ha(e)==="[object Date]"&&(!Zn||!(typeof e=="object"&&Zn in e))}function tw(e){return ha(e)==="[object RegExp]"&&(!Zn||!(typeof e=="object"&&Zn in e))}function MF(e){return ha(e)==="[object Error]"&&(!Zn||!(typeof e=="object"&&Zn in e))}function LF(e){return ha(e)==="[object String]"&&(!Zn||!(typeof e=="object"&&Zn in e))}function BF(e){return ha(e)==="[object Number]"&&(!Zn||!(typeof e=="object"&&Zn in e))}function jF(e){return ha(e)==="[object Boolean]"&&(!Zn||!(typeof e=="object"&&Zn in e))}function nS(e){if(pu)return e&&typeof e=="object"&&e instanceof Symbol;if(typeof e=="symbol")return!0;if(!e||typeof e!="object"||!_m)return!1;try{return _m.call(e),!0}catch{}return!1}function WF(e){if(!e||typeof e!="object"||!Sm)return!1;try{return Sm.call(e),!0}catch{}return!1}var zF=Object.prototype.hasOwnProperty||function(e){return e in this};function ji(e,t){return zF.call(e,t)}function ha(e){return TF.call(e)}function UF(e){if(e.name)return e.name;var t=DF.call(IF.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}function rS(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function $F(e){if(!fd||!e||typeof e!="object")return!1;try{fd.call(e);try{dd.call(e)}catch{return!0}return e instanceof Map}catch{}return!1}function HF(e){if(!yl||!e||typeof e!="object")return!1;try{yl.call(e,yl);try{xl.call(e,xl)}catch{return!0}return e instanceof WeakMap}catch{}return!1}function VF(e){if(!qx||!e||typeof e!="object")return!1;try{return qx.call(e),!0}catch{}return!1}function GF(e){if(!dd||!e||typeof e!="object")return!1;try{dd.call(e);try{fd.call(e)}catch{return!0}return e instanceof Set}catch{}return!1}function qF(e){if(!xl||!e||typeof e!="object")return!1;try{xl.call(e,xl);try{yl.call(e,yl)}catch{return!0}return e instanceof WeakSet}catch{}return!1}function KF(e){return!e||typeof e!="object"?!1:typeof HTMLElement<"u"&&e instanceof HTMLElement?!0:typeof e.nodeName=="string"&&typeof e.getAttribute=="function"}function oS(e,t){if(e.length>t.maxStringLength){var n=e.length-t.maxStringLength,r="... "+n+" more character"+(n>1?"s":"");return oS(dy.call(e,0,t.maxStringLength),t)+r}var o=Vi.call(Vi.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,XF);return tS(o,"single",t)}function XF(e){var t=e.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return n?"\\"+n:"\\x"+(t<16?"0":"")+NF.call(t.toString(16))}function Ju(e){return"Object("+e+")"}function Lp(e){return e+" { ? }"}function nw(e,t,n,r){var o=r?Tm(n,r):Do.call(n,", ");return e+" ("+t+") {"+o+"}"}function YF(e){for(var t=0;t<e.length;t++)if(rS(e[t],`
`)>=0)return!1;return!0}function QF(e,t){var n;if(e.indent==="	")n="	";else if(typeof e.indent=="number"&&e.indent>0)n=Do.call(Array(e.indent+1)," ");else return null;return{base:n,prev:Do.call(Array(t+1),n)}}function Tm(e,t){if(e.length===0)return"";var n=`
`+t.prev+t.base;return n+Do.call(e,","+n)+`
`+t.prev}function Yc(e,t){var n=Rm(e),r=[];if(n){r.length=e.length;for(var o=0;o<e.length;o++)r[o]=ji(e,o)?t(e[o],e):""}var i=typeof Mp=="function"?Mp(e):[],a;if(pu){a={};for(var s=0;s<i.length;s++)a["$"+i[s]]=i[s]}for(var u in e)ji(e,u)&&(n&&String(Number(u))===u&&u<e.length||pu&&a["$"+u]instanceof Symbol||(ZC.call(/[^\w$]/,u)?r.push(t(u,e)+": "+t(e[u],e)):r.push(u+": "+t(e[u],e))));if(typeof Mp=="function")for(var l=0;l<i.length;l++)eS.call(e,i[l])&&r.push("["+t(i[l])+"]: "+t(e[i[l]],e));return r}var iS=ku,Ru=wF,JF=PF,ZF=cc,Qc=iS("%WeakMap%",!0),Jc=iS("%Map%",!0),eO=Ru("WeakMap.prototype.get",!0),tO=Ru("WeakMap.prototype.set",!0),nO=Ru("WeakMap.prototype.has",!0),rO=Ru("Map.prototype.get",!0),oO=Ru("Map.prototype.set",!0),iO=Ru("Map.prototype.has",!0),hy=function(e,t){for(var n=e,r;(r=n.next)!==null;n=r)if(r.key===t)return n.next=r.next,r.next=e.next,e.next=r,r},aO=function(e,t){var n=hy(e,t);return n&&n.value},sO=function(e,t,n){var r=hy(e,t);r?r.value=n:e.next={key:t,next:e.next,value:n}},uO=function(e,t){return!!hy(e,t)},lO=function(){var t,n,r,o={assert:function(i){if(!o.has(i))throw new ZF("Side channel does not contain "+JF(i))},get:function(i){if(Qc&&i&&(typeof i=="object"||typeof i=="function")){if(t)return eO(t,i)}else if(Jc){if(n)return rO(n,i)}else if(r)return aO(r,i)},has:function(i){if(Qc&&i&&(typeof i=="object"||typeof i=="function")){if(t)return nO(t,i)}else if(Jc){if(n)return iO(n,i)}else if(r)return uO(r,i);return!1},set:function(i,a){Qc&&i&&(typeof i=="object"||typeof i=="function")?(t||(t=new Qc),tO(t,i,a)):Jc?(n||(n=new Jc),oO(n,i,a)):(r||(r={key:{},next:null}),sO(r,i,a))}};return o},cO=String.prototype.replace,fO=/%20/g,Bp={RFC1738:"RFC1738",RFC3986:"RFC3986"},py={default:Bp.RFC3986,formatters:{RFC1738:function(e){return cO.call(e,fO,"+")},RFC3986:function(e){return String(e)}},RFC1738:Bp.RFC1738,RFC3986:Bp.RFC3986},dO=py,jp=Object.prototype.hasOwnProperty,Fa=Array.isArray,_o=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),hO=function(t){for(;t.length>1;){var n=t.pop(),r=n.obj[n.prop];if(Fa(r)){for(var o=[],i=0;i<r.length;++i)typeof r[i]<"u"&&o.push(r[i]);n.obj[n.prop]=o}}},aS=function(t,n){for(var r=n&&n.plainObjects?Object.create(null):{},o=0;o<t.length;++o)typeof t[o]<"u"&&(r[o]=t[o]);return r},pO=function e(t,n,r){if(!n)return t;if(typeof n!="object"){if(Fa(t))t.push(n);else if(t&&typeof t=="object")(r&&(r.plainObjects||r.allowPrototypes)||!jp.call(Object.prototype,n))&&(t[n]=!0);else return[t,n];return t}if(!t||typeof t!="object")return[t].concat(n);var o=t;return Fa(t)&&!Fa(n)&&(o=aS(t,r)),Fa(t)&&Fa(n)?(n.forEach(function(i,a){if(jp.call(t,a)){var s=t[a];s&&typeof s=="object"&&i&&typeof i=="object"?t[a]=e(s,i,r):t.push(i)}else t[a]=i}),t):Object.keys(n).reduce(function(i,a){var s=n[a];return jp.call(i,a)?i[a]=e(i[a],s,r):i[a]=s,i},o)},vO=function(t,n){return Object.keys(n).reduce(function(r,o){return r[o]=n[o],r},t)},mO=function(e,t,n){var r=e.replace(/\+/g," ");if(n==="iso-8859-1")return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch{return r}},gO=function(t,n,r,o,i){if(t.length===0)return t;var a=t;if(typeof t=="symbol"?a=Symbol.prototype.toString.call(t):typeof t!="string"&&(a=String(t)),r==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(c){return"%26%23"+parseInt(c.slice(2),16)+"%3B"});for(var s="",u=0;u<a.length;++u){var l=a.charCodeAt(u);if(l===45||l===46||l===95||l===126||l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||i===dO.RFC1738&&(l===40||l===41)){s+=a.charAt(u);continue}if(l<128){s=s+_o[l];continue}if(l<2048){s=s+(_o[192|l>>6]+_o[128|l&63]);continue}if(l<55296||l>=57344){s=s+(_o[224|l>>12]+_o[128|l>>6&63]+_o[128|l&63]);continue}u+=1,l=65536+((l&1023)<<10|a.charCodeAt(u)&1023),s+=_o[240|l>>18]+_o[128|l>>12&63]+_o[128|l>>6&63]+_o[128|l&63]}return s},yO=function(t){for(var n=[{obj:{o:t},prop:"o"}],r=[],o=0;o<n.length;++o)for(var i=n[o],a=i.obj[i.prop],s=Object.keys(a),u=0;u<s.length;++u){var l=s[u],c=a[l];typeof c=="object"&&c!==null&&r.indexOf(c)===-1&&(n.push({obj:a,prop:l}),r.push(c))}return hO(n),t},xO=function(t){return Object.prototype.toString.call(t)==="[object RegExp]"},wO=function(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},bO=function(t,n){return[].concat(t,n)},EO=function(t,n){if(Fa(t)){for(var r=[],o=0;o<t.length;o+=1)r.push(n(t[o]));return r}return n(t)},sS={arrayToObject:aS,assign:vO,combine:bO,compact:yO,decode:mO,encode:gO,isBuffer:wO,isRegExp:xO,maybeMap:EO,merge:pO},uS=lO,Df=sS,wl=py,CO=Object.prototype.hasOwnProperty,lS={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,n){return t+"["+n+"]"},repeat:function(t){return t}},Io=Array.isArray,SO=Array.prototype.push,cS=function(e,t){SO.apply(e,Io(t)?t:[t])},_O=Date.prototype.toISOString,rw=wl.default,gn={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:Df.encode,encodeValuesOnly:!1,format:rw,formatter:wl.formatters[rw],indices:!1,serializeDate:function(t){return _O.call(t)},skipNulls:!1,strictNullHandling:!1},kO=function(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"},Wp={},RO=function e(t,n,r,o,i,a,s,u,l,c,f,d,p,v,x,w,y,b){for(var E=t,S=b,R=0,k=!1;(S=S.get(Wp))!==void 0&&!k;){var m=S.get(t);if(R+=1,typeof m<"u"){if(m===R)throw new RangeError("Cyclic object value");k=!0}typeof S.get(Wp)>"u"&&(R=0)}if(typeof c=="function"?E=c(n,E):E instanceof Date?E=p(E):r==="comma"&&Io(E)&&(E=Df.maybeMap(E,function(ee){return ee instanceof Date?p(ee):ee})),E===null){if(a)return l&&!w?l(n,gn.encoder,y,"key",v):n;E=""}if(kO(E)||Df.isBuffer(E)){if(l){var P=w?n:l(n,gn.encoder,y,"key",v);return[x(P)+"="+x(l(E,gn.encoder,y,"value",v))]}return[x(n)+"="+x(String(E))]}var D=[];if(typeof E>"u")return D;var N;if(r==="comma"&&Io(E))w&&l&&(E=Df.maybeMap(E,l)),N=[{value:E.length>0?E.join(",")||null:void 0}];else if(Io(c))N=c;else{var B=Object.keys(E);N=f?B.sort(f):B}var z=u?n.replace(/\./g,"%2E"):n,V=o&&Io(E)&&E.length===1?z+"[]":z;if(i&&Io(E)&&E.length===0)return V+"[]";for(var Z=0;Z<N.length;++Z){var K=N[Z],ne=typeof K=="object"&&typeof K.value<"u"?K.value:E[K];if(!(s&&ne===null)){var J=d&&u?K.replace(/\./g,"%2E"):K,$=Io(E)?typeof r=="function"?r(V,J):V:V+(d?"."+J:"["+J+"]");b.set(t,R);var Y=uS();Y.set(Wp,b),cS(D,e(ne,$,r,o,i,a,s,u,r==="comma"&&w&&Io(E)?null:l,c,f,d,p,v,x,w,y,Y))}}return D},TO=function(t){if(!t)return gn;if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");var n=t.charset||gn.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=wl.default;if(typeof t.format<"u"){if(!CO.call(wl.formatters,t.format))throw new TypeError("Unknown format option provided.");r=t.format}var o=wl.formatters[r],i=gn.filter;(typeof t.filter=="function"||Io(t.filter))&&(i=t.filter);var a;if(t.arrayFormat in lS?a=t.arrayFormat:"indices"in t?a=t.indices?"indices":"repeat":a=gn.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var s=typeof t.allowDots>"u"?t.encodeDotInKeys===!0?!0:gn.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:gn.addQueryPrefix,allowDots:s,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:gn.allowEmptyArrays,arrayFormat:a,charset:n,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:gn.charsetSentinel,commaRoundTrip:t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?gn.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:gn.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:gn.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:gn.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:gn.encodeValuesOnly,filter:i,format:r,formatter:o,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:gn.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:gn.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:gn.strictNullHandling}},IO=function(e,t){var n=e,r=TO(t),o,i;typeof r.filter=="function"?(i=r.filter,n=i("",n)):Io(r.filter)&&(i=r.filter,o=i);var a=[];if(typeof n!="object"||n===null)return"";var s=lS[r.arrayFormat],u=s==="comma"&&r.commaRoundTrip;o||(o=Object.keys(n)),r.sort&&o.sort(r.sort);for(var l=uS(),c=0;c<o.length;++c){var f=o[c];r.skipNulls&&n[f]===null||cS(a,RO(n[f],f,s,u,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,l))}var d=a.join(r.delimiter),p=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),d.length>0?p+d:""},vu=sS,Im=Object.prototype.hasOwnProperty,DO=Array.isArray,un={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!0,decoder:vu.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},NO=function(e){return e.replace(/&#(\d+);/g,function(t,n){return String.fromCharCode(parseInt(n,10))})},fS=function(e,t){return e&&typeof e=="string"&&t.comma&&e.indexOf(",")>-1?e.split(","):e},AO="utf8=%26%2310003%3B",PO="utf8=%E2%9C%93",FO=function(t,n){var r={__proto__:null},o=n.ignoreQueryPrefix?t.replace(/^\?/,""):t,i=n.parameterLimit===1/0?void 0:n.parameterLimit,a=o.split(n.delimiter,i),s=-1,u,l=n.charset;if(n.charsetSentinel)for(u=0;u<a.length;++u)a[u].indexOf("utf8=")===0&&(a[u]===PO?l="utf-8":a[u]===AO&&(l="iso-8859-1"),s=u,u=a.length);for(u=0;u<a.length;++u)if(u!==s){var c=a[u],f=c.indexOf("]="),d=f===-1?c.indexOf("="):f+1,p,v;d===-1?(p=n.decoder(c,un.decoder,l,"key"),v=n.strictNullHandling?null:""):(p=n.decoder(c.slice(0,d),un.decoder,l,"key"),v=vu.maybeMap(fS(c.slice(d+1),n),function(w){return n.decoder(w,un.decoder,l,"value")})),v&&n.interpretNumericEntities&&l==="iso-8859-1"&&(v=NO(v)),c.indexOf("[]=")>-1&&(v=DO(v)?[v]:v);var x=Im.call(r,p);x&&n.duplicates==="combine"?r[p]=vu.combine(r[p],v):(!x||n.duplicates==="last")&&(r[p]=v)}return r},OO=function(e,t,n,r){for(var o=r?t:fS(t,n),i=e.length-1;i>=0;--i){var a,s=e[i];if(s==="[]"&&n.parseArrays)a=n.allowEmptyArrays&&o===""?[]:[].concat(o);else{a=n.plainObjects?Object.create(null):{};var u=s.charAt(0)==="["&&s.charAt(s.length-1)==="]"?s.slice(1,-1):s,l=n.decodeDotInKeys?u.replace(/%2E/g,"."):u,c=parseInt(l,10);!n.parseArrays&&l===""?a={0:o}:!isNaN(c)&&s!==l&&String(c)===l&&c>=0&&n.parseArrays&&c<=n.arrayLimit?(a=[],a[c]=o):l!=="__proto__"&&(a[l]=o)}o=a}return o},MO=function(t,n,r,o){if(t){var i=r.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,a=/(\[[^[\]]*])/,s=/(\[[^[\]]*])/g,u=r.depth>0&&a.exec(i),l=u?i.slice(0,u.index):i,c=[];if(l){if(!r.plainObjects&&Im.call(Object.prototype,l)&&!r.allowPrototypes)return;c.push(l)}for(var f=0;r.depth>0&&(u=s.exec(i))!==null&&f<r.depth;){if(f+=1,!r.plainObjects&&Im.call(Object.prototype,u[1].slice(1,-1))&&!r.allowPrototypes)return;c.push(u[1])}return u&&c.push("["+i.slice(u.index)+"]"),OO(c,n,r,o)}},LO=function(t){if(!t)return un;if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.decodeDotInKeys<"u"&&typeof t.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(t.decoder!==null&&typeof t.decoder<"u"&&typeof t.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=typeof t.charset>"u"?un.charset:t.charset,r=typeof t.duplicates>"u"?un.duplicates:t.duplicates;if(r!=="combine"&&r!=="first"&&r!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var o=typeof t.allowDots>"u"?t.decodeDotInKeys===!0?!0:un.allowDots:!!t.allowDots;return{allowDots:o,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:un.allowEmptyArrays,allowPrototypes:typeof t.allowPrototypes=="boolean"?t.allowPrototypes:un.allowPrototypes,allowSparse:typeof t.allowSparse=="boolean"?t.allowSparse:un.allowSparse,arrayLimit:typeof t.arrayLimit=="number"?t.arrayLimit:un.arrayLimit,charset:n,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:un.charsetSentinel,comma:typeof t.comma=="boolean"?t.comma:un.comma,decodeDotInKeys:typeof t.decodeDotInKeys=="boolean"?t.decodeDotInKeys:un.decodeDotInKeys,decoder:typeof t.decoder=="function"?t.decoder:un.decoder,delimiter:typeof t.delimiter=="string"||vu.isRegExp(t.delimiter)?t.delimiter:un.delimiter,depth:typeof t.depth=="number"||t.depth===!1?+t.depth:un.depth,duplicates:r,ignoreQueryPrefix:t.ignoreQueryPrefix===!0,interpretNumericEntities:typeof t.interpretNumericEntities=="boolean"?t.interpretNumericEntities:un.interpretNumericEntities,parameterLimit:typeof t.parameterLimit=="number"?t.parameterLimit:un.parameterLimit,parseArrays:t.parseArrays!==!1,plainObjects:typeof t.plainObjects=="boolean"?t.plainObjects:un.plainObjects,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:un.strictNullHandling}},BO=function(e,t){var n=LO(t);if(e===""||e===null||typeof e>"u")return n.plainObjects?Object.create(null):{};for(var r=typeof e=="string"?FO(e,n):e,o=n.plainObjects?Object.create(null):{},i=Object.keys(r),a=0;a<i.length;++a){var s=i[a],u=MO(s,r[s],n,typeof e=="string");o=vu.merge(o,u,n)}return n.allowSparse===!0?o:vu.compact(o)},jO=IO,WO=BO,zO=py,UO={formats:zO,parse:WO,stringify:jO};const dS=rs(UO);var hS={exports:{}},zp={exports:{}};/*!
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */var ow;function $O(){return ow||(ow=1,function(e){(function(t,n){e.exports=t.document?n(t,!0):function(r){if(!r.document)throw new Error("jQuery requires a window with a document");return n(r)}})(typeof window<"u"?window:Zm,function(t,n){var r=[],o=Object.getPrototypeOf,i=r.slice,a=r.flat?function(h){return r.flat.call(h)}:function(h){return r.concat.apply([],h)},s=r.push,u=r.indexOf,l={},c=l.toString,f=l.hasOwnProperty,d=f.toString,p=d.call(Object),v={},x=function(g){return typeof g=="function"&&typeof g.nodeType!="number"&&typeof g.item!="function"},w=function(g){return g!=null&&g===g.window},y=t.document,b={type:!0,src:!0,nonce:!0,noModule:!0};function E(h,g,C){C=C||y;var _,T,I=C.createElement("script");if(I.text=h,g)for(_ in b)T=g[_]||g.getAttribute&&g.getAttribute(_),T&&I.setAttribute(_,T);C.head.appendChild(I).parentNode.removeChild(I)}function S(h){return h==null?h+"":typeof h=="object"||typeof h=="function"?l[c.call(h)]||"object":typeof h}var R="3.7.1",k=/HTML$/i,m=function(h,g){return new m.fn.init(h,g)};m.fn=m.prototype={jquery:R,constructor:m,length:0,toArray:function(){return i.call(this)},get:function(h){return h==null?i.call(this):h<0?this[h+this.length]:this[h]},pushStack:function(h){var g=m.merge(this.constructor(),h);return g.prevObject=this,g},each:function(h){return m.each(this,h)},map:function(h){return this.pushStack(m.map(this,function(g,C){return h.call(g,C,g)}))},slice:function(){return this.pushStack(i.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(m.grep(this,function(h,g){return(g+1)%2}))},odd:function(){return this.pushStack(m.grep(this,function(h,g){return g%2}))},eq:function(h){var g=this.length,C=+h+(h<0?g:0);return this.pushStack(C>=0&&C<g?[this[C]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:r.sort,splice:r.splice},m.extend=m.fn.extend=function(){var h,g,C,_,T,I,A=arguments[0]||{},U=1,j=arguments.length,X=!1;for(typeof A=="boolean"&&(X=A,A=arguments[U]||{},U++),typeof A!="object"&&!x(A)&&(A={}),U===j&&(A=this,U--);U<j;U++)if((h=arguments[U])!=null)for(g in h)_=h[g],!(g==="__proto__"||A===_)&&(X&&_&&(m.isPlainObject(_)||(T=Array.isArray(_)))?(C=A[g],T&&!Array.isArray(C)?I=[]:!T&&!m.isPlainObject(C)?I={}:I=C,T=!1,A[g]=m.extend(X,I,_)):_!==void 0&&(A[g]=_));return A},m.extend({expando:"jQuery"+(R+Math.random()).replace(/\D/g,""),isReady:!0,error:function(h){throw new Error(h)},noop:function(){},isPlainObject:function(h){var g,C;return!h||c.call(h)!=="[object Object]"?!1:(g=o(h),g?(C=f.call(g,"constructor")&&g.constructor,typeof C=="function"&&d.call(C)===p):!0)},isEmptyObject:function(h){var g;for(g in h)return!1;return!0},globalEval:function(h,g,C){E(h,{nonce:g&&g.nonce},C)},each:function(h,g){var C,_=0;if(P(h))for(C=h.length;_<C&&g.call(h[_],_,h[_])!==!1;_++);else for(_ in h)if(g.call(h[_],_,h[_])===!1)break;return h},text:function(h){var g,C="",_=0,T=h.nodeType;if(!T)for(;g=h[_++];)C+=m.text(g);return T===1||T===11?h.textContent:T===9?h.documentElement.textContent:T===3||T===4?h.nodeValue:C},makeArray:function(h,g){var C=g||[];return h!=null&&(P(Object(h))?m.merge(C,typeof h=="string"?[h]:h):s.call(C,h)),C},inArray:function(h,g,C){return g==null?-1:u.call(g,h,C)},isXMLDoc:function(h){var g=h&&h.namespaceURI,C=h&&(h.ownerDocument||h).documentElement;return!k.test(g||C&&C.nodeName||"HTML")},merge:function(h,g){for(var C=+g.length,_=0,T=h.length;_<C;_++)h[T++]=g[_];return h.length=T,h},grep:function(h,g,C){for(var _,T=[],I=0,A=h.length,U=!C;I<A;I++)_=!g(h[I],I),_!==U&&T.push(h[I]);return T},map:function(h,g,C){var _,T,I=0,A=[];if(P(h))for(_=h.length;I<_;I++)T=g(h[I],I,C),T!=null&&A.push(T);else for(I in h)T=g(h[I],I,C),T!=null&&A.push(T);return a(A)},guid:1,support:v}),typeof Symbol=="function"&&(m.fn[Symbol.iterator]=r[Symbol.iterator]),m.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(h,g){l["[object "+g+"]"]=g.toLowerCase()});function P(h){var g=!!h&&"length"in h&&h.length,C=S(h);return x(h)||w(h)?!1:C==="array"||g===0||typeof g=="number"&&g>0&&g-1 in h}function D(h,g){return h.nodeName&&h.nodeName.toLowerCase()===g.toLowerCase()}var N=r.pop,B=r.sort,z=r.splice,V="[\\x20\\t\\r\\n\\f]",Z=new RegExp("^"+V+"+|((?:^|[^\\\\])(?:\\\\.)*)"+V+"+$","g");m.contains=function(h,g){var C=g&&g.parentNode;return h===C||!!(C&&C.nodeType===1&&(h.contains?h.contains(C):h.compareDocumentPosition&&h.compareDocumentPosition(C)&16))};var K=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function ne(h,g){return g?h==="\0"?"�":h.slice(0,-1)+"\\"+h.charCodeAt(h.length-1).toString(16)+" ":"\\"+h}m.escapeSelector=function(h){return(h+"").replace(K,ne)};var J=y,$=s;(function(){var h,g,C,_,T,I=$,A,U,j,X,ue,de=m.expando,re=0,ge=0,Ze=Rc(),bt=Rc(),lt=Rc(),On=Rc(),mn=function(L,G){return L===G&&(T=!0),0},xo="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",wo="(?:\\\\[\\da-fA-F]{1,6}"+V+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",mt="\\["+V+"*("+wo+")(?:"+V+"*([*^$|!~]?=)"+V+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+wo+"))|)"+V+"*\\]",_a=":("+wo+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+mt+")*)|.*)\\)|)",_t=new RegExp(V+"+","g"),Jt=new RegExp("^"+V+"*,"+V+"*"),Ou=new RegExp("^"+V+"*([>+~]|"+V+")"+V+"*"),jh=new RegExp(V+"|>"),bo=new RegExp(_a),Mu=new RegExp("^"+wo+"$"),Eo={ID:new RegExp("^#("+wo+")"),CLASS:new RegExp("^\\.("+wo+")"),TAG:new RegExp("^("+wo+"|[*])"),ATTR:new RegExp("^"+mt),PSEUDO:new RegExp("^"+_a),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+V+"*(even|odd|(([+-]|)(\\d*)n|)"+V+"*(?:([+-]|)"+V+"*(\\d+)|))"+V+"*\\)|)","i"),bool:new RegExp("^(?:"+xo+")$","i"),needsContext:new RegExp("^"+V+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+V+"*((?:-\\d)?\\d*)"+V+"*\\)|)(?=[^-]|$)","i")},Ti=/^(?:input|select|textarea|button)$/i,Ii=/^h\d$/i,Wr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Wh=/[+~]/,Zo=new RegExp("\\\\[\\da-fA-F]{1,6}"+V+"?|\\\\([^\\r\\n\\f])","g"),ei=function(L,G){var te="0x"+L.slice(1)-65536;return G||(te<0?String.fromCharCode(te+65536):String.fromCharCode(te>>10|55296,te&1023|56320))},uR=function(){Di()},lR=Ic(function(L){return L.disabled===!0&&D(L,"fieldset")},{dir:"parentNode",next:"legend"});function cR(){try{return A.activeElement}catch{}}try{I.apply(r=i.call(J.childNodes),J.childNodes),r[J.childNodes.length].nodeType}catch{I={apply:function(G,te){$.apply(G,i.call(te))},call:function(G){$.apply(G,i.call(arguments,1))}}}function Dt(L,G,te,ae){var fe,we,_e,Le,ke,ft,Ye,nt=G&&G.ownerDocument,dt=G?G.nodeType:9;if(te=te||[],typeof L!="string"||!L||dt!==1&&dt!==9&&dt!==11)return te;if(!ae&&(Di(G),G=G||A,j)){if(dt!==11&&(ke=Wr.exec(L)))if(fe=ke[1]){if(dt===9)if(_e=G.getElementById(fe)){if(_e.id===fe)return I.call(te,_e),te}else return te;else if(nt&&(_e=nt.getElementById(fe))&&Dt.contains(G,_e)&&_e.id===fe)return I.call(te,_e),te}else{if(ke[2])return I.apply(te,G.getElementsByTagName(L)),te;if((fe=ke[3])&&G.getElementsByClassName)return I.apply(te,G.getElementsByClassName(fe)),te}if(!On[L+" "]&&(!X||!X.test(L))){if(Ye=L,nt=G,dt===1&&(jh.test(L)||Ou.test(L))){for(nt=Wh.test(L)&&zh(G.parentNode)||G,(nt!=G||!v.scope)&&((Le=G.getAttribute("id"))?Le=m.escapeSelector(Le):G.setAttribute("id",Le=de)),ft=Lu(L),we=ft.length;we--;)ft[we]=(Le?"#"+Le:":scope")+" "+Tc(ft[we]);Ye=ft.join(",")}try{return I.apply(te,nt.querySelectorAll(Ye)),te}catch{On(L,!0)}finally{Le===de&&G.removeAttribute("id")}}}return M0(L.replace(Z,"$1"),G,te,ae)}function Rc(){var L=[];function G(te,ae){return L.push(te+" ")>g.cacheLength&&delete G[L.shift()],G[te+" "]=ae}return G}function no(L){return L[de]=!0,L}function hs(L){var G=A.createElement("fieldset");try{return!!L(G)}catch{return!1}finally{G.parentNode&&G.parentNode.removeChild(G),G=null}}function fR(L){return function(G){return D(G,"input")&&G.type===L}}function dR(L){return function(G){return(D(G,"input")||D(G,"button"))&&G.type===L}}function F0(L){return function(G){return"form"in G?G.parentNode&&G.disabled===!1?"label"in G?"label"in G.parentNode?G.parentNode.disabled===L:G.disabled===L:G.isDisabled===L||G.isDisabled!==!L&&lR(G)===L:G.disabled===L:"label"in G?G.disabled===L:!1}}function ka(L){return no(function(G){return G=+G,no(function(te,ae){for(var fe,we=L([],te.length,G),_e=we.length;_e--;)te[fe=we[_e]]&&(te[fe]=!(ae[fe]=te[fe]))})})}function zh(L){return L&&typeof L.getElementsByTagName<"u"&&L}function Di(L){var G,te=L?L.ownerDocument||L:J;return te==A||te.nodeType!==9||!te.documentElement||(A=te,U=A.documentElement,j=!m.isXMLDoc(A),ue=U.matches||U.webkitMatchesSelector||U.msMatchesSelector,U.msMatchesSelector&&J!=A&&(G=A.defaultView)&&G.top!==G&&G.addEventListener("unload",uR),v.getById=hs(function(ae){return U.appendChild(ae).id=m.expando,!A.getElementsByName||!A.getElementsByName(m.expando).length}),v.disconnectedMatch=hs(function(ae){return ue.call(ae,"*")}),v.scope=hs(function(){return A.querySelectorAll(":scope")}),v.cssHas=hs(function(){try{return A.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),v.getById?(g.filter.ID=function(ae){var fe=ae.replace(Zo,ei);return function(we){return we.getAttribute("id")===fe}},g.find.ID=function(ae,fe){if(typeof fe.getElementById<"u"&&j){var we=fe.getElementById(ae);return we?[we]:[]}}):(g.filter.ID=function(ae){var fe=ae.replace(Zo,ei);return function(we){var _e=typeof we.getAttributeNode<"u"&&we.getAttributeNode("id");return _e&&_e.value===fe}},g.find.ID=function(ae,fe){if(typeof fe.getElementById<"u"&&j){var we,_e,Le,ke=fe.getElementById(ae);if(ke){if(we=ke.getAttributeNode("id"),we&&we.value===ae)return[ke];for(Le=fe.getElementsByName(ae),_e=0;ke=Le[_e++];)if(we=ke.getAttributeNode("id"),we&&we.value===ae)return[ke]}return[]}}),g.find.TAG=function(ae,fe){return typeof fe.getElementsByTagName<"u"?fe.getElementsByTagName(ae):fe.querySelectorAll(ae)},g.find.CLASS=function(ae,fe){if(typeof fe.getElementsByClassName<"u"&&j)return fe.getElementsByClassName(ae)},X=[],hs(function(ae){var fe;U.appendChild(ae).innerHTML="<a id='"+de+"' href='' disabled='disabled'></a><select id='"+de+"-\r\\' disabled='disabled'><option selected=''></option></select>",ae.querySelectorAll("[selected]").length||X.push("\\["+V+"*(?:value|"+xo+")"),ae.querySelectorAll("[id~="+de+"-]").length||X.push("~="),ae.querySelectorAll("a#"+de+"+*").length||X.push(".#.+[+~]"),ae.querySelectorAll(":checked").length||X.push(":checked"),fe=A.createElement("input"),fe.setAttribute("type","hidden"),ae.appendChild(fe).setAttribute("name","D"),U.appendChild(ae).disabled=!0,ae.querySelectorAll(":disabled").length!==2&&X.push(":enabled",":disabled"),fe=A.createElement("input"),fe.setAttribute("name",""),ae.appendChild(fe),ae.querySelectorAll("[name='']").length||X.push("\\["+V+"*name"+V+"*="+V+`*(?:''|"")`)}),v.cssHas||X.push(":has"),X=X.length&&new RegExp(X.join("|")),mn=function(ae,fe){if(ae===fe)return T=!0,0;var we=!ae.compareDocumentPosition-!fe.compareDocumentPosition;return we||(we=(ae.ownerDocument||ae)==(fe.ownerDocument||fe)?ae.compareDocumentPosition(fe):1,we&1||!v.sortDetached&&fe.compareDocumentPosition(ae)===we?ae===A||ae.ownerDocument==J&&Dt.contains(J,ae)?-1:fe===A||fe.ownerDocument==J&&Dt.contains(J,fe)?1:_?u.call(_,ae)-u.call(_,fe):0:we&4?-1:1)}),A}Dt.matches=function(L,G){return Dt(L,null,null,G)},Dt.matchesSelector=function(L,G){if(Di(L),j&&!On[G+" "]&&(!X||!X.test(G)))try{var te=ue.call(L,G);if(te||v.disconnectedMatch||L.document&&L.document.nodeType!==11)return te}catch{On(G,!0)}return Dt(G,A,null,[L]).length>0},Dt.contains=function(L,G){return(L.ownerDocument||L)!=A&&Di(L),m.contains(L,G)},Dt.attr=function(L,G){(L.ownerDocument||L)!=A&&Di(L);var te=g.attrHandle[G.toLowerCase()],ae=te&&f.call(g.attrHandle,G.toLowerCase())?te(L,G,!j):void 0;return ae!==void 0?ae:L.getAttribute(G)},Dt.error=function(L){throw new Error("Syntax error, unrecognized expression: "+L)},m.uniqueSort=function(L){var G,te=[],ae=0,fe=0;if(T=!v.sortStable,_=!v.sortStable&&i.call(L,0),B.call(L,mn),T){for(;G=L[fe++];)G===L[fe]&&(ae=te.push(fe));for(;ae--;)z.call(L,te[ae],1)}return _=null,L},m.fn.uniqueSort=function(){return this.pushStack(m.uniqueSort(i.apply(this)))},g=m.expr={cacheLength:50,createPseudo:no,match:Eo,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(L){return L[1]=L[1].replace(Zo,ei),L[3]=(L[3]||L[4]||L[5]||"").replace(Zo,ei),L[2]==="~="&&(L[3]=" "+L[3]+" "),L.slice(0,4)},CHILD:function(L){return L[1]=L[1].toLowerCase(),L[1].slice(0,3)==="nth"?(L[3]||Dt.error(L[0]),L[4]=+(L[4]?L[5]+(L[6]||1):2*(L[3]==="even"||L[3]==="odd")),L[5]=+(L[7]+L[8]||L[3]==="odd")):L[3]&&Dt.error(L[0]),L},PSEUDO:function(L){var G,te=!L[6]&&L[2];return Eo.CHILD.test(L[0])?null:(L[3]?L[2]=L[4]||L[5]||"":te&&bo.test(te)&&(G=Lu(te,!0))&&(G=te.indexOf(")",te.length-G)-te.length)&&(L[0]=L[0].slice(0,G),L[2]=te.slice(0,G)),L.slice(0,3))}},filter:{TAG:function(L){var G=L.replace(Zo,ei).toLowerCase();return L==="*"?function(){return!0}:function(te){return D(te,G)}},CLASS:function(L){var G=Ze[L+" "];return G||(G=new RegExp("(^|"+V+")"+L+"("+V+"|$)"))&&Ze(L,function(te){return G.test(typeof te.className=="string"&&te.className||typeof te.getAttribute<"u"&&te.getAttribute("class")||"")})},ATTR:function(L,G,te){return function(ae){var fe=Dt.attr(ae,L);return fe==null?G==="!=":G?(fe+="",G==="="?fe===te:G==="!="?fe!==te:G==="^="?te&&fe.indexOf(te)===0:G==="*="?te&&fe.indexOf(te)>-1:G==="$="?te&&fe.slice(-te.length)===te:G==="~="?(" "+fe.replace(_t," ")+" ").indexOf(te)>-1:G==="|="?fe===te||fe.slice(0,te.length+1)===te+"-":!1):!0}},CHILD:function(L,G,te,ae,fe){var we=L.slice(0,3)!=="nth",_e=L.slice(-4)!=="last",Le=G==="of-type";return ae===1&&fe===0?function(ke){return!!ke.parentNode}:function(ke,ft,Ye){var nt,dt,Ge,Ft,vr,$n=we!==_e?"nextSibling":"previousSibling",zr=ke.parentNode,Co=Le&&ke.nodeName.toLowerCase(),ps=!Ye&&!Le,or=!1;if(zr){if(we){for(;$n;){for(Ge=ke;Ge=Ge[$n];)if(Le?D(Ge,Co):Ge.nodeType===1)return!1;vr=$n=L==="only"&&!vr&&"nextSibling"}return!0}if(vr=[_e?zr.firstChild:zr.lastChild],_e&&ps){for(dt=zr[de]||(zr[de]={}),nt=dt[L]||[],Ft=nt[0]===re&&nt[1],or=Ft&&nt[2],Ge=Ft&&zr.childNodes[Ft];Ge=++Ft&&Ge&&Ge[$n]||(or=Ft=0)||vr.pop();)if(Ge.nodeType===1&&++or&&Ge===ke){dt[L]=[re,Ft,or];break}}else if(ps&&(dt=ke[de]||(ke[de]={}),nt=dt[L]||[],Ft=nt[0]===re&&nt[1],or=Ft),or===!1)for(;(Ge=++Ft&&Ge&&Ge[$n]||(or=Ft=0)||vr.pop())&&!((Le?D(Ge,Co):Ge.nodeType===1)&&++or&&(ps&&(dt=Ge[de]||(Ge[de]={}),dt[L]=[re,or]),Ge===ke)););return or-=fe,or===ae||or%ae===0&&or/ae>=0}}},PSEUDO:function(L,G){var te,ae=g.pseudos[L]||g.setFilters[L.toLowerCase()]||Dt.error("unsupported pseudo: "+L);return ae[de]?ae(G):ae.length>1?(te=[L,L,"",G],g.setFilters.hasOwnProperty(L.toLowerCase())?no(function(fe,we){for(var _e,Le=ae(fe,G),ke=Le.length;ke--;)_e=u.call(fe,Le[ke]),fe[_e]=!(we[_e]=Le[ke])}):function(fe){return ae(fe,0,te)}):ae}},pseudos:{not:no(function(L){var G=[],te=[],ae=Vh(L.replace(Z,"$1"));return ae[de]?no(function(fe,we,_e,Le){for(var ke,ft=ae(fe,null,Le,[]),Ye=fe.length;Ye--;)(ke=ft[Ye])&&(fe[Ye]=!(we[Ye]=ke))}):function(fe,we,_e){return G[0]=fe,ae(G,null,_e,te),G[0]=null,!te.pop()}}),has:no(function(L){return function(G){return Dt(L,G).length>0}}),contains:no(function(L){return L=L.replace(Zo,ei),function(G){return(G.textContent||m.text(G)).indexOf(L)>-1}}),lang:no(function(L){return Mu.test(L||"")||Dt.error("unsupported lang: "+L),L=L.replace(Zo,ei).toLowerCase(),function(G){var te;do if(te=j?G.lang:G.getAttribute("xml:lang")||G.getAttribute("lang"))return te=te.toLowerCase(),te===L||te.indexOf(L+"-")===0;while((G=G.parentNode)&&G.nodeType===1);return!1}}),target:function(L){var G=t.location&&t.location.hash;return G&&G.slice(1)===L.id},root:function(L){return L===U},focus:function(L){return L===cR()&&A.hasFocus()&&!!(L.type||L.href||~L.tabIndex)},enabled:F0(!1),disabled:F0(!0),checked:function(L){return D(L,"input")&&!!L.checked||D(L,"option")&&!!L.selected},selected:function(L){return L.parentNode&&L.parentNode.selectedIndex,L.selected===!0},empty:function(L){for(L=L.firstChild;L;L=L.nextSibling)if(L.nodeType<6)return!1;return!0},parent:function(L){return!g.pseudos.empty(L)},header:function(L){return Ii.test(L.nodeName)},input:function(L){return Ti.test(L.nodeName)},button:function(L){return D(L,"input")&&L.type==="button"||D(L,"button")},text:function(L){var G;return D(L,"input")&&L.type==="text"&&((G=L.getAttribute("type"))==null||G.toLowerCase()==="text")},first:ka(function(){return[0]}),last:ka(function(L,G){return[G-1]}),eq:ka(function(L,G,te){return[te<0?te+G:te]}),even:ka(function(L,G){for(var te=0;te<G;te+=2)L.push(te);return L}),odd:ka(function(L,G){for(var te=1;te<G;te+=2)L.push(te);return L}),lt:ka(function(L,G,te){var ae;for(te<0?ae=te+G:te>G?ae=G:ae=te;--ae>=0;)L.push(ae);return L}),gt:ka(function(L,G,te){for(var ae=te<0?te+G:te;++ae<G;)L.push(ae);return L})}},g.pseudos.nth=g.pseudos.eq;for(h in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})g.pseudos[h]=fR(h);for(h in{submit:!0,reset:!0})g.pseudos[h]=dR(h);function O0(){}O0.prototype=g.filters=g.pseudos,g.setFilters=new O0;function Lu(L,G){var te,ae,fe,we,_e,Le,ke,ft=bt[L+" "];if(ft)return G?0:ft.slice(0);for(_e=L,Le=[],ke=g.preFilter;_e;){(!te||(ae=Jt.exec(_e)))&&(ae&&(_e=_e.slice(ae[0].length)||_e),Le.push(fe=[])),te=!1,(ae=Ou.exec(_e))&&(te=ae.shift(),fe.push({value:te,type:ae[0].replace(Z," ")}),_e=_e.slice(te.length));for(we in g.filter)(ae=Eo[we].exec(_e))&&(!ke[we]||(ae=ke[we](ae)))&&(te=ae.shift(),fe.push({value:te,type:we,matches:ae}),_e=_e.slice(te.length));if(!te)break}return G?_e.length:_e?Dt.error(L):bt(L,Le).slice(0)}function Tc(L){for(var G=0,te=L.length,ae="";G<te;G++)ae+=L[G].value;return ae}function Ic(L,G,te){var ae=G.dir,fe=G.next,we=fe||ae,_e=te&&we==="parentNode",Le=ge++;return G.first?function(ke,ft,Ye){for(;ke=ke[ae];)if(ke.nodeType===1||_e)return L(ke,ft,Ye);return!1}:function(ke,ft,Ye){var nt,dt,Ge=[re,Le];if(Ye){for(;ke=ke[ae];)if((ke.nodeType===1||_e)&&L(ke,ft,Ye))return!0}else for(;ke=ke[ae];)if(ke.nodeType===1||_e)if(dt=ke[de]||(ke[de]={}),fe&&D(ke,fe))ke=ke[ae]||ke;else{if((nt=dt[we])&&nt[0]===re&&nt[1]===Le)return Ge[2]=nt[2];if(dt[we]=Ge,Ge[2]=L(ke,ft,Ye))return!0}return!1}}function Uh(L){return L.length>1?function(G,te,ae){for(var fe=L.length;fe--;)if(!L[fe](G,te,ae))return!1;return!0}:L[0]}function hR(L,G,te){for(var ae=0,fe=G.length;ae<fe;ae++)Dt(L,G[ae],te);return te}function Dc(L,G,te,ae,fe){for(var we,_e=[],Le=0,ke=L.length,ft=G!=null;Le<ke;Le++)(we=L[Le])&&(!te||te(we,ae,fe))&&(_e.push(we),ft&&G.push(Le));return _e}function $h(L,G,te,ae,fe,we){return ae&&!ae[de]&&(ae=$h(ae)),fe&&!fe[de]&&(fe=$h(fe,we)),no(function(_e,Le,ke,ft){var Ye,nt,dt,Ge,Ft=[],vr=[],$n=Le.length,zr=_e||hR(G||"*",ke.nodeType?[ke]:ke,[]),Co=L&&(_e||!G)?Dc(zr,Ft,L,ke,ft):zr;if(te?(Ge=fe||(_e?L:$n||ae)?[]:Le,te(Co,Ge,ke,ft)):Ge=Co,ae)for(Ye=Dc(Ge,vr),ae(Ye,[],ke,ft),nt=Ye.length;nt--;)(dt=Ye[nt])&&(Ge[vr[nt]]=!(Co[vr[nt]]=dt));if(_e){if(fe||L){if(fe){for(Ye=[],nt=Ge.length;nt--;)(dt=Ge[nt])&&Ye.push(Co[nt]=dt);fe(null,Ge=[],Ye,ft)}for(nt=Ge.length;nt--;)(dt=Ge[nt])&&(Ye=fe?u.call(_e,dt):Ft[nt])>-1&&(_e[Ye]=!(Le[Ye]=dt))}}else Ge=Dc(Ge===Le?Ge.splice($n,Ge.length):Ge),fe?fe(null,Le,Ge,ft):I.apply(Le,Ge)})}function Hh(L){for(var G,te,ae,fe=L.length,we=g.relative[L[0].type],_e=we||g.relative[" "],Le=we?1:0,ke=Ic(function(nt){return nt===G},_e,!0),ft=Ic(function(nt){return u.call(G,nt)>-1},_e,!0),Ye=[function(nt,dt,Ge){var Ft=!we&&(Ge||dt!=C)||((G=dt).nodeType?ke(nt,dt,Ge):ft(nt,dt,Ge));return G=null,Ft}];Le<fe;Le++)if(te=g.relative[L[Le].type])Ye=[Ic(Uh(Ye),te)];else{if(te=g.filter[L[Le].type].apply(null,L[Le].matches),te[de]){for(ae=++Le;ae<fe&&!g.relative[L[ae].type];ae++);return $h(Le>1&&Uh(Ye),Le>1&&Tc(L.slice(0,Le-1).concat({value:L[Le-2].type===" "?"*":""})).replace(Z,"$1"),te,Le<ae&&Hh(L.slice(Le,ae)),ae<fe&&Hh(L=L.slice(ae)),ae<fe&&Tc(L))}Ye.push(te)}return Uh(Ye)}function pR(L,G){var te=G.length>0,ae=L.length>0,fe=function(we,_e,Le,ke,ft){var Ye,nt,dt,Ge=0,Ft="0",vr=we&&[],$n=[],zr=C,Co=we||ae&&g.find.TAG("*",ft),ps=re+=zr==null?1:Math.random()||.1,or=Co.length;for(ft&&(C=_e==A||_e||ft);Ft!==or&&(Ye=Co[Ft])!=null;Ft++){if(ae&&Ye){for(nt=0,!_e&&Ye.ownerDocument!=A&&(Di(Ye),Le=!j);dt=L[nt++];)if(dt(Ye,_e||A,Le)){I.call(ke,Ye);break}ft&&(re=ps)}te&&((Ye=!dt&&Ye)&&Ge--,we&&vr.push(Ye))}if(Ge+=Ft,te&&Ft!==Ge){for(nt=0;dt=G[nt++];)dt(vr,$n,_e,Le);if(we){if(Ge>0)for(;Ft--;)vr[Ft]||$n[Ft]||($n[Ft]=N.call(ke));$n=Dc($n)}I.apply(ke,$n),ft&&!we&&$n.length>0&&Ge+G.length>1&&m.uniqueSort(ke)}return ft&&(re=ps,C=zr),vr};return te?no(fe):fe}function Vh(L,G){var te,ae=[],fe=[],we=lt[L+" "];if(!we){for(G||(G=Lu(L)),te=G.length;te--;)we=Hh(G[te]),we[de]?ae.push(we):fe.push(we);we=lt(L,pR(fe,ae)),we.selector=L}return we}function M0(L,G,te,ae){var fe,we,_e,Le,ke,ft=typeof L=="function"&&L,Ye=!ae&&Lu(L=ft.selector||L);if(te=te||[],Ye.length===1){if(we=Ye[0]=Ye[0].slice(0),we.length>2&&(_e=we[0]).type==="ID"&&G.nodeType===9&&j&&g.relative[we[1].type]){if(G=(g.find.ID(_e.matches[0].replace(Zo,ei),G)||[])[0],G)ft&&(G=G.parentNode);else return te;L=L.slice(we.shift().value.length)}for(fe=Eo.needsContext.test(L)?0:we.length;fe--&&(_e=we[fe],!g.relative[Le=_e.type]);)if((ke=g.find[Le])&&(ae=ke(_e.matches[0].replace(Zo,ei),Wh.test(we[0].type)&&zh(G.parentNode)||G))){if(we.splice(fe,1),L=ae.length&&Tc(we),!L)return I.apply(te,ae),te;break}}return(ft||Vh(L,Ye))(ae,G,!j,te,!G||Wh.test(L)&&zh(G.parentNode)||G),te}v.sortStable=de.split("").sort(mn).join("")===de,Di(),v.sortDetached=hs(function(L){return L.compareDocumentPosition(A.createElement("fieldset"))&1}),m.find=Dt,m.expr[":"]=m.expr.pseudos,m.unique=m.uniqueSort,Dt.compile=Vh,Dt.select=M0,Dt.setDocument=Di,Dt.tokenize=Lu,Dt.escape=m.escapeSelector,Dt.getText=m.text,Dt.isXML=m.isXMLDoc,Dt.selectors=m.expr,Dt.support=m.support,Dt.uniqueSort=m.uniqueSort})();var Y=function(h,g,C){for(var _=[],T=C!==void 0;(h=h[g])&&h.nodeType!==9;)if(h.nodeType===1){if(T&&m(h).is(C))break;_.push(h)}return _},ee=function(h,g){for(var C=[];h;h=h.nextSibling)h.nodeType===1&&h!==g&&C.push(h);return C},he=m.expr.match.needsContext,me=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function be(h,g,C){return x(g)?m.grep(h,function(_,T){return!!g.call(_,T,_)!==C}):g.nodeType?m.grep(h,function(_){return _===g!==C}):typeof g!="string"?m.grep(h,function(_){return u.call(g,_)>-1!==C}):m.filter(g,h,C)}m.filter=function(h,g,C){var _=g[0];return C&&(h=":not("+h+")"),g.length===1&&_.nodeType===1?m.find.matchesSelector(_,h)?[_]:[]:m.find.matches(h,m.grep(g,function(T){return T.nodeType===1}))},m.fn.extend({find:function(h){var g,C,_=this.length,T=this;if(typeof h!="string")return this.pushStack(m(h).filter(function(){for(g=0;g<_;g++)if(m.contains(T[g],this))return!0}));for(C=this.pushStack([]),g=0;g<_;g++)m.find(h,T[g],C);return _>1?m.uniqueSort(C):C},filter:function(h){return this.pushStack(be(this,h||[],!1))},not:function(h){return this.pushStack(be(this,h||[],!0))},is:function(h){return!!be(this,typeof h=="string"&&he.test(h)?m(h):h||[],!1).length}});var Se,Ae=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Pe=m.fn.init=function(h,g,C){var _,T;if(!h)return this;if(C=C||Se,typeof h=="string")if(h[0]==="<"&&h[h.length-1]===">"&&h.length>=3?_=[null,h,null]:_=Ae.exec(h),_&&(_[1]||!g))if(_[1]){if(g=g instanceof m?g[0]:g,m.merge(this,m.parseHTML(_[1],g&&g.nodeType?g.ownerDocument||g:y,!0)),me.test(_[1])&&m.isPlainObject(g))for(_ in g)x(this[_])?this[_](g[_]):this.attr(_,g[_]);return this}else return T=y.getElementById(_[2]),T&&(this[0]=T,this.length=1),this;else return!g||g.jquery?(g||C).find(h):this.constructor(g).find(h);else{if(h.nodeType)return this[0]=h,this.length=1,this;if(x(h))return C.ready!==void 0?C.ready(h):h(m)}return m.makeArray(h,this)};Pe.prototype=m.fn,Se=m(y);var $e=/^(?:parents|prev(?:Until|All))/,et={children:!0,contents:!0,next:!0,prev:!0};m.fn.extend({has:function(h){var g=m(h,this),C=g.length;return this.filter(function(){for(var _=0;_<C;_++)if(m.contains(this,g[_]))return!0})},closest:function(h,g){var C,_=0,T=this.length,I=[],A=typeof h!="string"&&m(h);if(!he.test(h)){for(;_<T;_++)for(C=this[_];C&&C!==g;C=C.parentNode)if(C.nodeType<11&&(A?A.index(C)>-1:C.nodeType===1&&m.find.matchesSelector(C,h))){I.push(C);break}}return this.pushStack(I.length>1?m.uniqueSort(I):I)},index:function(h){return h?typeof h=="string"?u.call(m(h),this[0]):u.call(this,h.jquery?h[0]:h):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(h,g){return this.pushStack(m.uniqueSort(m.merge(this.get(),m(h,g))))},addBack:function(h){return this.add(h==null?this.prevObject:this.prevObject.filter(h))}});function Qe(h,g){for(;(h=h[g])&&h.nodeType!==1;);return h}m.each({parent:function(h){var g=h.parentNode;return g&&g.nodeType!==11?g:null},parents:function(h){return Y(h,"parentNode")},parentsUntil:function(h,g,C){return Y(h,"parentNode",C)},next:function(h){return Qe(h,"nextSibling")},prev:function(h){return Qe(h,"previousSibling")},nextAll:function(h){return Y(h,"nextSibling")},prevAll:function(h){return Y(h,"previousSibling")},nextUntil:function(h,g,C){return Y(h,"nextSibling",C)},prevUntil:function(h,g,C){return Y(h,"previousSibling",C)},siblings:function(h){return ee((h.parentNode||{}).firstChild,h)},children:function(h){return ee(h.firstChild)},contents:function(h){return h.contentDocument!=null&&o(h.contentDocument)?h.contentDocument:(D(h,"template")&&(h=h.content||h),m.merge([],h.childNodes))}},function(h,g){m.fn[h]=function(C,_){var T=m.map(this,g,C);return h.slice(-5)!=="Until"&&(_=C),_&&typeof _=="string"&&(T=m.filter(_,T)),this.length>1&&(et[h]||m.uniqueSort(T),$e.test(h)&&T.reverse()),this.pushStack(T)}});var it=/[^\x20\t\r\n\f]+/g;function ze(h){var g={};return m.each(h.match(it)||[],function(C,_){g[_]=!0}),g}m.Callbacks=function(h){h=typeof h=="string"?ze(h):m.extend({},h);var g,C,_,T,I=[],A=[],U=-1,j=function(){for(T=T||h.once,_=g=!0;A.length;U=-1)for(C=A.shift();++U<I.length;)I[U].apply(C[0],C[1])===!1&&h.stopOnFalse&&(U=I.length,C=!1);h.memory||(C=!1),g=!1,T&&(C?I=[]:I="")},X={add:function(){return I&&(C&&!g&&(U=I.length-1,A.push(C)),function ue(de){m.each(de,function(re,ge){x(ge)?(!h.unique||!X.has(ge))&&I.push(ge):ge&&ge.length&&S(ge)!=="string"&&ue(ge)})}(arguments),C&&!g&&j()),this},remove:function(){return m.each(arguments,function(ue,de){for(var re;(re=m.inArray(de,I,re))>-1;)I.splice(re,1),re<=U&&U--}),this},has:function(ue){return ue?m.inArray(ue,I)>-1:I.length>0},empty:function(){return I&&(I=[]),this},disable:function(){return T=A=[],I=C="",this},disabled:function(){return!I},lock:function(){return T=A=[],!C&&!g&&(I=C=""),this},locked:function(){return!!T},fireWith:function(ue,de){return T||(de=de||[],de=[ue,de.slice?de.slice():de],A.push(de),g||j()),this},fire:function(){return X.fireWith(this,arguments),this},fired:function(){return!!_}};return X};function Ke(h){return h}function qe(h){throw h}function pt(h,g,C,_){var T;try{h&&x(T=h.promise)?T.call(h).done(g).fail(C):h&&x(T=h.then)?T.call(h,g,C):g.apply(void 0,[h].slice(_))}catch(I){C.apply(void 0,[I])}}m.extend({Deferred:function(h){var g=[["notify","progress",m.Callbacks("memory"),m.Callbacks("memory"),2],["resolve","done",m.Callbacks("once memory"),m.Callbacks("once memory"),0,"resolved"],["reject","fail",m.Callbacks("once memory"),m.Callbacks("once memory"),1,"rejected"]],C="pending",_={state:function(){return C},always:function(){return T.done(arguments).fail(arguments),this},catch:function(I){return _.then(null,I)},pipe:function(){var I=arguments;return m.Deferred(function(A){m.each(g,function(U,j){var X=x(I[j[4]])&&I[j[4]];T[j[1]](function(){var ue=X&&X.apply(this,arguments);ue&&x(ue.promise)?ue.promise().progress(A.notify).done(A.resolve).fail(A.reject):A[j[0]+"With"](this,X?[ue]:arguments)})}),I=null}).promise()},then:function(I,A,U){var j=0;function X(ue,de,re,ge){return function(){var Ze=this,bt=arguments,lt=function(){var mn,xo;if(!(ue<j)){if(mn=re.apply(Ze,bt),mn===de.promise())throw new TypeError("Thenable self-resolution");xo=mn&&(typeof mn=="object"||typeof mn=="function")&&mn.then,x(xo)?ge?xo.call(mn,X(j,de,Ke,ge),X(j,de,qe,ge)):(j++,xo.call(mn,X(j,de,Ke,ge),X(j,de,qe,ge),X(j,de,Ke,de.notifyWith))):(re!==Ke&&(Ze=void 0,bt=[mn]),(ge||de.resolveWith)(Ze,bt))}},On=ge?lt:function(){try{lt()}catch(mn){m.Deferred.exceptionHook&&m.Deferred.exceptionHook(mn,On.error),ue+1>=j&&(re!==qe&&(Ze=void 0,bt=[mn]),de.rejectWith(Ze,bt))}};ue?On():(m.Deferred.getErrorHook?On.error=m.Deferred.getErrorHook():m.Deferred.getStackHook&&(On.error=m.Deferred.getStackHook()),t.setTimeout(On))}}return m.Deferred(function(ue){g[0][3].add(X(0,ue,x(U)?U:Ke,ue.notifyWith)),g[1][3].add(X(0,ue,x(I)?I:Ke)),g[2][3].add(X(0,ue,x(A)?A:qe))}).promise()},promise:function(I){return I!=null?m.extend(I,_):_}},T={};return m.each(g,function(I,A){var U=A[2],j=A[5];_[A[1]]=U.add,j&&U.add(function(){C=j},g[3-I][2].disable,g[3-I][3].disable,g[0][2].lock,g[0][3].lock),U.add(A[3].fire),T[A[0]]=function(){return T[A[0]+"With"](this===T?void 0:this,arguments),this},T[A[0]+"With"]=U.fireWith}),_.promise(T),h&&h.call(T,T),T},when:function(h){var g=arguments.length,C=g,_=Array(C),T=i.call(arguments),I=m.Deferred(),A=function(U){return function(j){_[U]=this,T[U]=arguments.length>1?i.call(arguments):j,--g||I.resolveWith(_,T)}};if(g<=1&&(pt(h,I.done(A(C)).resolve,I.reject,!g),I.state()==="pending"||x(T[C]&&T[C].then)))return I.then();for(;C--;)pt(T[C],A(C),I.reject);return I.promise()}});var Oe=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;m.Deferred.exceptionHook=function(h,g){t.console&&t.console.warn&&h&&Oe.test(h.name)&&t.console.warn("jQuery.Deferred exception: "+h.message,h.stack,g)},m.readyException=function(h){t.setTimeout(function(){throw h})};var vt=m.Deferred();m.fn.ready=function(h){return vt.then(h).catch(function(g){m.readyException(g)}),this},m.extend({isReady:!1,readyWait:1,ready:function(h){(h===!0?--m.readyWait:m.isReady)||(m.isReady=!0,!(h!==!0&&--m.readyWait>0)&&vt.resolveWith(y,[m]))}}),m.ready.then=vt.then;function Ue(){y.removeEventListener("DOMContentLoaded",Ue),t.removeEventListener("load",Ue),m.ready()}y.readyState==="complete"||y.readyState!=="loading"&&!y.documentElement.doScroll?t.setTimeout(m.ready):(y.addEventListener("DOMContentLoaded",Ue),t.addEventListener("load",Ue));var It=function(h,g,C,_,T,I,A){var U=0,j=h.length,X=C==null;if(S(C)==="object"){T=!0;for(U in C)It(h,g,U,C[U],!0,I,A)}else if(_!==void 0&&(T=!0,x(_)||(A=!0),X&&(A?(g.call(h,_),g=null):(X=g,g=function(ue,de,re){return X.call(m(ue),re)})),g))for(;U<j;U++)g(h[U],C,A?_:_.call(h[U],U,g(h[U],C)));return T?h:X?g.call(h):j?g(h[0],C):I},on=/^-ms-/,cr=/-([a-z])/g;function pn(h,g){return g.toUpperCase()}function Ut(h){return h.replace(on,"ms-").replace(cr,pn)}var an=function(h){return h.nodeType===1||h.nodeType===9||!+h.nodeType};function $t(){this.expando=m.expando+$t.uid++}$t.uid=1,$t.prototype={cache:function(h){var g=h[this.expando];return g||(g={},an(h)&&(h.nodeType?h[this.expando]=g:Object.defineProperty(h,this.expando,{value:g,configurable:!0}))),g},set:function(h,g,C){var _,T=this.cache(h);if(typeof g=="string")T[Ut(g)]=C;else for(_ in g)T[Ut(_)]=g[_];return T},get:function(h,g){return g===void 0?this.cache(h):h[this.expando]&&h[this.expando][Ut(g)]},access:function(h,g,C){return g===void 0||g&&typeof g=="string"&&C===void 0?this.get(h,g):(this.set(h,g,C),C!==void 0?C:g)},remove:function(h,g){var C,_=h[this.expando];if(_!==void 0){if(g!==void 0)for(Array.isArray(g)?g=g.map(Ut):(g=Ut(g),g=g in _?[g]:g.match(it)||[]),C=g.length;C--;)delete _[g[C]];(g===void 0||m.isEmptyObject(_))&&(h.nodeType?h[this.expando]=void 0:delete h[this.expando])}},hasData:function(h){var g=h[this.expando];return g!==void 0&&!m.isEmptyObject(g)}};var Ce=new $t,He=new $t,fn=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Pn=/[A-Z]/g;function fr(h){return h==="true"?!0:h==="false"?!1:h==="null"?null:h===+h+""?+h:fn.test(h)?JSON.parse(h):h}function ga(h,g,C){var _;if(C===void 0&&h.nodeType===1)if(_="data-"+g.replace(Pn,"-$&").toLowerCase(),C=h.getAttribute(_),typeof C=="string"){try{C=fr(C)}catch{}He.set(h,g,C)}else C=void 0;return C}m.extend({hasData:function(h){return He.hasData(h)||Ce.hasData(h)},data:function(h,g,C){return He.access(h,g,C)},removeData:function(h,g){He.remove(h,g)},_data:function(h,g,C){return Ce.access(h,g,C)},_removeData:function(h,g){Ce.remove(h,g)}}),m.fn.extend({data:function(h,g){var C,_,T,I=this[0],A=I&&I.attributes;if(h===void 0){if(this.length&&(T=He.get(I),I.nodeType===1&&!Ce.get(I,"hasDataAttrs"))){for(C=A.length;C--;)A[C]&&(_=A[C].name,_.indexOf("data-")===0&&(_=Ut(_.slice(5)),ga(I,_,T[_])));Ce.set(I,"hasDataAttrs",!0)}return T}return typeof h=="object"?this.each(function(){He.set(this,h)}):It(this,function(U){var j;if(I&&U===void 0)return j=He.get(I,h),j!==void 0||(j=ga(I,h),j!==void 0)?j:void 0;this.each(function(){He.set(this,h,U)})},null,g,arguments.length>1,null,!0)},removeData:function(h){return this.each(function(){He.remove(this,h)})}}),m.extend({queue:function(h,g,C){var _;if(h)return g=(g||"fx")+"queue",_=Ce.get(h,g),C&&(!_||Array.isArray(C)?_=Ce.access(h,g,m.makeArray(C)):_.push(C)),_||[]},dequeue:function(h,g){g=g||"fx";var C=m.queue(h,g),_=C.length,T=C.shift(),I=m._queueHooks(h,g),A=function(){m.dequeue(h,g)};T==="inprogress"&&(T=C.shift(),_--),T&&(g==="fx"&&C.unshift("inprogress"),delete I.stop,T.call(h,A,I)),!_&&I&&I.empty.fire()},_queueHooks:function(h,g){var C=g+"queueHooks";return Ce.get(h,C)||Ce.access(h,C,{empty:m.Callbacks("once memory").add(function(){Ce.remove(h,[g+"queue",C])})})}}),m.fn.extend({queue:function(h,g){var C=2;return typeof h!="string"&&(g=h,h="fx",C--),arguments.length<C?m.queue(this[0],h):g===void 0?this:this.each(function(){var _=m.queue(this,h,g);m._queueHooks(this,h),h==="fx"&&_[0]!=="inprogress"&&m.dequeue(this,h)})},dequeue:function(h){return this.each(function(){m.dequeue(this,h)})},clearQueue:function(h){return this.queue(h||"fx",[])},promise:function(h,g){var C,_=1,T=m.Deferred(),I=this,A=this.length,U=function(){--_||T.resolveWith(I,[I])};for(typeof h!="string"&&(g=h,h=void 0),h=h||"fx";A--;)C=Ce.get(I[A],h+"queueHooks"),C&&C.empty&&(_++,C.empty.add(U));return U(),T.promise(g)}});var ya=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,go=new RegExp("^(?:([+-])=|)("+ya+")([a-z%]*)$","i"),tr=["Top","Right","Bottom","Left"],dr=y.documentElement,nr=function(h){return m.contains(h.ownerDocument,h)},Ec={composed:!0};dr.getRootNode&&(nr=function(h){return m.contains(h.ownerDocument,h)||h.getRootNode(Ec)===h.ownerDocument});var ki=function(h,g){return h=g||h,h.style.display==="none"||h.style.display===""&&nr(h)&&m.css(h,"display")==="none"};function Cc(h,g,C,_){var T,I,A=20,U=_?function(){return _.cur()}:function(){return m.css(h,g,"")},j=U(),X=C&&C[3]||(m.cssNumber[g]?"":"px"),ue=h.nodeType&&(m.cssNumber[g]||X!=="px"&&+j)&&go.exec(m.css(h,g));if(ue&&ue[3]!==X){for(j=j/2,X=X||ue[3],ue=+j||1;A--;)m.style(h,g,ue+X),(1-I)*(1-(I=U()/j||.5))<=0&&(A=0),ue=ue/I;ue=ue*2,m.style(h,g,ue+X),C=C||[]}return C&&(ue=+ue||+j||0,T=C[1]?ue+(C[1]+1)*C[2]:+C[2],_&&(_.unit=X,_.start=ue,_.end=T)),T}var Du={};function Th(h){var g,C=h.ownerDocument,_=h.nodeName,T=Du[_];return T||(g=C.body.appendChild(C.createElement(_)),T=m.css(g,"display"),g.parentNode.removeChild(g),T==="none"&&(T="block"),Du[_]=T,T)}function Yo(h,g){for(var C,_,T=[],I=0,A=h.length;I<A;I++)_=h[I],_.style&&(C=_.style.display,g?(C==="none"&&(T[I]=Ce.get(_,"display")||null,T[I]||(_.style.display="")),_.style.display===""&&ki(_)&&(T[I]=Th(_))):C!=="none"&&(T[I]="none",Ce.set(_,"display",C)));for(I=0;I<A;I++)T[I]!=null&&(h[I].style.display=T[I]);return h}m.fn.extend({show:function(){return Yo(this,!0)},hide:function(){return Yo(this)},toggle:function(h){return typeof h=="boolean"?h?this.show():this.hide():this.each(function(){ki(this)?m(this).show():m(this).hide()})}});var xa=/^(?:checkbox|radio)$/i,Q=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,oe=/^$|^module$|\/(?:java|ecma)script/i;(function(){var h=y.createDocumentFragment(),g=h.appendChild(y.createElement("div")),C=y.createElement("input");C.setAttribute("type","radio"),C.setAttribute("checked","checked"),C.setAttribute("name","t"),g.appendChild(C),v.checkClone=g.cloneNode(!0).cloneNode(!0).lastChild.checked,g.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!g.cloneNode(!0).lastChild.defaultValue,g.innerHTML="<option></option>",v.option=!!g.lastChild})();var le={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};le.tbody=le.tfoot=le.colgroup=le.caption=le.thead,le.th=le.td,v.option||(le.optgroup=le.option=[1,"<select multiple='multiple'>","</select>"]);function xe(h,g){var C;return typeof h.getElementsByTagName<"u"?C=h.getElementsByTagName(g||"*"):typeof h.querySelectorAll<"u"?C=h.querySelectorAll(g||"*"):C=[],g===void 0||g&&D(h,g)?m.merge([h],C):C}function Ne(h,g){for(var C=0,_=h.length;C<_;C++)Ce.set(h[C],"globalEval",!g||Ce.get(g[C],"globalEval"))}var ut=/<|&#?\w+;/;function Xe(h,g,C,_,T){for(var I,A,U,j,X,ue,de=g.createDocumentFragment(),re=[],ge=0,Ze=h.length;ge<Ze;ge++)if(I=h[ge],I||I===0)if(S(I)==="object")m.merge(re,I.nodeType?[I]:I);else if(!ut.test(I))re.push(g.createTextNode(I));else{for(A=A||de.appendChild(g.createElement("div")),U=(Q.exec(I)||["",""])[1].toLowerCase(),j=le[U]||le._default,A.innerHTML=j[1]+m.htmlPrefilter(I)+j[2],ue=j[0];ue--;)A=A.lastChild;m.merge(re,A.childNodes),A=de.firstChild,A.textContent=""}for(de.textContent="",ge=0;I=re[ge++];){if(_&&m.inArray(I,_)>-1){T&&T.push(I);continue}if(X=nr(I),A=xe(de.appendChild(I),"script"),X&&Ne(A),C)for(ue=0;I=A[ue++];)oe.test(I.type||"")&&C.push(I)}return de}var Ve=/^([^.]*)(?:\.(.+)|)/;function Me(){return!0}function at(){return!1}function Qt(h,g,C,_,T,I){var A,U;if(typeof g=="object"){typeof C!="string"&&(_=_||C,C=void 0);for(U in g)Qt(h,U,C,_,g[U],I);return h}if(_==null&&T==null?(T=C,_=C=void 0):T==null&&(typeof C=="string"?(T=_,_=void 0):(T=_,_=C,C=void 0)),T===!1)T=at;else if(!T)return h;return I===1&&(A=T,T=function(j){return m().off(j),A.apply(this,arguments)},T.guid=A.guid||(A.guid=m.guid++)),h.each(function(){m.event.add(this,g,T,_,C)})}m.event={global:{},add:function(h,g,C,_,T){var I,A,U,j,X,ue,de,re,ge,Ze,bt,lt=Ce.get(h);if(an(h))for(C.handler&&(I=C,C=I.handler,T=I.selector),T&&m.find.matchesSelector(dr,T),C.guid||(C.guid=m.guid++),(j=lt.events)||(j=lt.events=Object.create(null)),(A=lt.handle)||(A=lt.handle=function(On){return typeof m<"u"&&m.event.triggered!==On.type?m.event.dispatch.apply(h,arguments):void 0}),g=(g||"").match(it)||[""],X=g.length;X--;)U=Ve.exec(g[X])||[],ge=bt=U[1],Ze=(U[2]||"").split(".").sort(),ge&&(de=m.event.special[ge]||{},ge=(T?de.delegateType:de.bindType)||ge,de=m.event.special[ge]||{},ue=m.extend({type:ge,origType:bt,data:_,handler:C,guid:C.guid,selector:T,needsContext:T&&m.expr.match.needsContext.test(T),namespace:Ze.join(".")},I),(re=j[ge])||(re=j[ge]=[],re.delegateCount=0,(!de.setup||de.setup.call(h,_,Ze,A)===!1)&&h.addEventListener&&h.addEventListener(ge,A)),de.add&&(de.add.call(h,ue),ue.handler.guid||(ue.handler.guid=C.guid)),T?re.splice(re.delegateCount++,0,ue):re.push(ue),m.event.global[ge]=!0)},remove:function(h,g,C,_,T){var I,A,U,j,X,ue,de,re,ge,Ze,bt,lt=Ce.hasData(h)&&Ce.get(h);if(!(!lt||!(j=lt.events))){for(g=(g||"").match(it)||[""],X=g.length;X--;){if(U=Ve.exec(g[X])||[],ge=bt=U[1],Ze=(U[2]||"").split(".").sort(),!ge){for(ge in j)m.event.remove(h,ge+g[X],C,_,!0);continue}for(de=m.event.special[ge]||{},ge=(_?de.delegateType:de.bindType)||ge,re=j[ge]||[],U=U[2]&&new RegExp("(^|\\.)"+Ze.join("\\.(?:.*\\.|)")+"(\\.|$)"),A=I=re.length;I--;)ue=re[I],(T||bt===ue.origType)&&(!C||C.guid===ue.guid)&&(!U||U.test(ue.namespace))&&(!_||_===ue.selector||_==="**"&&ue.selector)&&(re.splice(I,1),ue.selector&&re.delegateCount--,de.remove&&de.remove.call(h,ue));A&&!re.length&&((!de.teardown||de.teardown.call(h,Ze,lt.handle)===!1)&&m.removeEvent(h,ge,lt.handle),delete j[ge])}m.isEmptyObject(j)&&Ce.remove(h,"handle events")}},dispatch:function(h){var g,C,_,T,I,A,U=new Array(arguments.length),j=m.event.fix(h),X=(Ce.get(this,"events")||Object.create(null))[j.type]||[],ue=m.event.special[j.type]||{};for(U[0]=j,g=1;g<arguments.length;g++)U[g]=arguments[g];if(j.delegateTarget=this,!(ue.preDispatch&&ue.preDispatch.call(this,j)===!1)){for(A=m.event.handlers.call(this,j,X),g=0;(T=A[g++])&&!j.isPropagationStopped();)for(j.currentTarget=T.elem,C=0;(I=T.handlers[C++])&&!j.isImmediatePropagationStopped();)(!j.rnamespace||I.namespace===!1||j.rnamespace.test(I.namespace))&&(j.handleObj=I,j.data=I.data,_=((m.event.special[I.origType]||{}).handle||I.handler).apply(T.elem,U),_!==void 0&&(j.result=_)===!1&&(j.preventDefault(),j.stopPropagation()));return ue.postDispatch&&ue.postDispatch.call(this,j),j.result}},handlers:function(h,g){var C,_,T,I,A,U=[],j=g.delegateCount,X=h.target;if(j&&X.nodeType&&!(h.type==="click"&&h.button>=1)){for(;X!==this;X=X.parentNode||this)if(X.nodeType===1&&!(h.type==="click"&&X.disabled===!0)){for(I=[],A={},C=0;C<j;C++)_=g[C],T=_.selector+" ",A[T]===void 0&&(A[T]=_.needsContext?m(T,this).index(X)>-1:m.find(T,this,null,[X]).length),A[T]&&I.push(_);I.length&&U.push({elem:X,handlers:I})}}return X=this,j<g.length&&U.push({elem:X,handlers:g.slice(j)}),U},addProp:function(h,g){Object.defineProperty(m.Event.prototype,h,{enumerable:!0,configurable:!0,get:x(g)?function(){if(this.originalEvent)return g(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[h]},set:function(C){Object.defineProperty(this,h,{enumerable:!0,configurable:!0,writable:!0,value:C})}})},fix:function(h){return h[m.expando]?h:new m.Event(h)},special:{load:{noBubble:!0},click:{setup:function(h){var g=this||h;return xa.test(g.type)&&g.click&&D(g,"input")&&tt(g,"click",!0),!1},trigger:function(h){var g=this||h;return xa.test(g.type)&&g.click&&D(g,"input")&&tt(g,"click"),!0},_default:function(h){var g=h.target;return xa.test(g.type)&&g.click&&D(g,"input")&&Ce.get(g,"click")||D(g,"a")}},beforeunload:{postDispatch:function(h){h.result!==void 0&&h.originalEvent&&(h.originalEvent.returnValue=h.result)}}}};function tt(h,g,C){if(!C){Ce.get(h,g)===void 0&&m.event.add(h,g,Me);return}Ce.set(h,g,!1),m.event.add(h,g,{namespace:!1,handler:function(_){var T,I=Ce.get(this,g);if(_.isTrigger&1&&this[g]){if(I)(m.event.special[g]||{}).delegateType&&_.stopPropagation();else if(I=i.call(arguments),Ce.set(this,g,I),this[g](),T=Ce.get(this,g),Ce.set(this,g,!1),I!==T)return _.stopImmediatePropagation(),_.preventDefault(),T}else I&&(Ce.set(this,g,m.event.trigger(I[0],I.slice(1),this)),_.stopPropagation(),_.isImmediatePropagationStopped=Me)}})}m.removeEvent=function(h,g,C){h.removeEventListener&&h.removeEventListener(g,C)},m.Event=function(h,g){if(!(this instanceof m.Event))return new m.Event(h,g);h&&h.type?(this.originalEvent=h,this.type=h.type,this.isDefaultPrevented=h.defaultPrevented||h.defaultPrevented===void 0&&h.returnValue===!1?Me:at,this.target=h.target&&h.target.nodeType===3?h.target.parentNode:h.target,this.currentTarget=h.currentTarget,this.relatedTarget=h.relatedTarget):this.type=h,g&&m.extend(this,g),this.timeStamp=h&&h.timeStamp||Date.now(),this[m.expando]=!0},m.Event.prototype={constructor:m.Event,isDefaultPrevented:at,isPropagationStopped:at,isImmediatePropagationStopped:at,isSimulated:!1,preventDefault:function(){var h=this.originalEvent;this.isDefaultPrevented=Me,h&&!this.isSimulated&&h.preventDefault()},stopPropagation:function(){var h=this.originalEvent;this.isPropagationStopped=Me,h&&!this.isSimulated&&h.stopPropagation()},stopImmediatePropagation:function(){var h=this.originalEvent;this.isImmediatePropagationStopped=Me,h&&!this.isSimulated&&h.stopImmediatePropagation(),this.stopPropagation()}},m.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},m.event.addProp),m.each({focus:"focusin",blur:"focusout"},function(h,g){function C(_){if(y.documentMode){var T=Ce.get(this,"handle"),I=m.event.fix(_);I.type=_.type==="focusin"?"focus":"blur",I.isSimulated=!0,T(_),I.target===I.currentTarget&&T(I)}else m.event.simulate(g,_.target,m.event.fix(_))}m.event.special[h]={setup:function(){var _;if(tt(this,h,!0),y.documentMode)_=Ce.get(this,g),_||this.addEventListener(g,C),Ce.set(this,g,(_||0)+1);else return!1},trigger:function(){return tt(this,h),!0},teardown:function(){var _;if(y.documentMode)_=Ce.get(this,g)-1,_?Ce.set(this,g,_):(this.removeEventListener(g,C),Ce.remove(this,g));else return!1},_default:function(_){return Ce.get(_.target,h)},delegateType:g},m.event.special[g]={setup:function(){var _=this.ownerDocument||this.document||this,T=y.documentMode?this:_,I=Ce.get(T,g);I||(y.documentMode?this.addEventListener(g,C):_.addEventListener(h,C,!0)),Ce.set(T,g,(I||0)+1)},teardown:function(){var _=this.ownerDocument||this.document||this,T=y.documentMode?this:_,I=Ce.get(T,g)-1;I?Ce.set(T,g,I):(y.documentMode?this.removeEventListener(g,C):_.removeEventListener(h,C,!0),Ce.remove(T,g))}}}),m.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(h,g){m.event.special[h]={delegateType:g,bindType:g,handle:function(C){var _,T=this,I=C.relatedTarget,A=C.handleObj;return(!I||I!==T&&!m.contains(T,I))&&(C.type=A.origType,_=A.handler.apply(this,arguments),C.type=g),_}}}),m.fn.extend({on:function(h,g,C,_){return Qt(this,h,g,C,_)},one:function(h,g,C,_){return Qt(this,h,g,C,_,1)},off:function(h,g,C){var _,T;if(h&&h.preventDefault&&h.handleObj)return _=h.handleObj,m(h.delegateTarget).off(_.namespace?_.origType+"."+_.namespace:_.origType,_.selector,_.handler),this;if(typeof h=="object"){for(T in h)this.off(T,g,h[T]);return this}return(g===!1||typeof g=="function")&&(C=g,g=void 0),C===!1&&(C=at),this.each(function(){m.event.remove(this,h,C,g)})}});var At=/<script|<style|<link/i,vn=/checked\s*(?:[^=]|=\s*.checked.)/i,rr=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function sn(h,g){return D(h,"table")&&D(g.nodeType!==11?g:g.firstChild,"tr")&&m(h).children("tbody")[0]||h}function Ri(h){return h.type=(h.getAttribute("type")!==null)+"/"+h.type,h}function Nu(h){return(h.type||"").slice(0,5)==="true/"?h.type=h.type.slice(5):h.removeAttribute("type"),h}function Qo(h,g){var C,_,T,I,A,U,j;if(g.nodeType===1){if(Ce.hasData(h)&&(I=Ce.get(h),j=I.events,j)){Ce.remove(g,"handle events");for(T in j)for(C=0,_=j[T].length;C<_;C++)m.event.add(g,T,j[T][C])}He.hasData(h)&&(A=He.access(h),U=m.extend({},A),He.set(g,U))}}function yo(h,g){var C=g.nodeName.toLowerCase();C==="input"&&xa.test(h.type)?g.checked=h.checked:(C==="input"||C==="textarea")&&(g.defaultValue=h.defaultValue)}function hr(h,g,C,_){g=a(g);var T,I,A,U,j,X,ue=0,de=h.length,re=de-1,ge=g[0],Ze=x(ge);if(Ze||de>1&&typeof ge=="string"&&!v.checkClone&&vn.test(ge))return h.each(function(bt){var lt=h.eq(bt);Ze&&(g[0]=ge.call(this,bt,lt.html())),hr(lt,g,C,_)});if(de&&(T=Xe(g,h[0].ownerDocument,!1,h,_),I=T.firstChild,T.childNodes.length===1&&(T=I),I||_)){for(A=m.map(xe(T,"script"),Ri),U=A.length;ue<de;ue++)j=T,ue!==re&&(j=m.clone(j,!0,!0),U&&m.merge(A,xe(j,"script"))),C.call(h[ue],j,ue);if(U)for(X=A[A.length-1].ownerDocument,m.map(A,Nu),ue=0;ue<U;ue++)j=A[ue],oe.test(j.type||"")&&!Ce.access(j,"globalEval")&&m.contains(X,j)&&(j.src&&(j.type||"").toLowerCase()!=="module"?m._evalUrl&&!j.noModule&&m._evalUrl(j.src,{nonce:j.nonce||j.getAttribute("nonce")},X):E(j.textContent.replace(rr,""),j,X))}return h}function fs(h,g,C){for(var _,T=g?m.filter(g,h):h,I=0;(_=T[I])!=null;I++)!C&&_.nodeType===1&&m.cleanData(xe(_)),_.parentNode&&(C&&nr(_)&&Ne(xe(_,"script")),_.parentNode.removeChild(_));return h}m.extend({htmlPrefilter:function(h){return h},clone:function(h,g,C){var _,T,I,A,U=h.cloneNode(!0),j=nr(h);if(!v.noCloneChecked&&(h.nodeType===1||h.nodeType===11)&&!m.isXMLDoc(h))for(A=xe(U),I=xe(h),_=0,T=I.length;_<T;_++)yo(I[_],A[_]);if(g)if(C)for(I=I||xe(h),A=A||xe(U),_=0,T=I.length;_<T;_++)Qo(I[_],A[_]);else Qo(h,U);return A=xe(U,"script"),A.length>0&&Ne(A,!j&&xe(h,"script")),U},cleanData:function(h){for(var g,C,_,T=m.event.special,I=0;(C=h[I])!==void 0;I++)if(an(C)){if(g=C[Ce.expando]){if(g.events)for(_ in g.events)T[_]?m.event.remove(C,_):m.removeEvent(C,_,g.handle);C[Ce.expando]=void 0}C[He.expando]&&(C[He.expando]=void 0)}}}),m.fn.extend({detach:function(h){return fs(this,h,!0)},remove:function(h){return fs(this,h)},text:function(h){return It(this,function(g){return g===void 0?m.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=g)})},null,h,arguments.length)},append:function(){return hr(this,arguments,function(h){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var g=sn(this,h);g.appendChild(h)}})},prepend:function(){return hr(this,arguments,function(h){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var g=sn(this,h);g.insertBefore(h,g.firstChild)}})},before:function(){return hr(this,arguments,function(h){this.parentNode&&this.parentNode.insertBefore(h,this)})},after:function(){return hr(this,arguments,function(h){this.parentNode&&this.parentNode.insertBefore(h,this.nextSibling)})},empty:function(){for(var h,g=0;(h=this[g])!=null;g++)h.nodeType===1&&(m.cleanData(xe(h,!1)),h.textContent="");return this},clone:function(h,g){return h=h??!1,g=g??h,this.map(function(){return m.clone(this,h,g)})},html:function(h){return It(this,function(g){var C=this[0]||{},_=0,T=this.length;if(g===void 0&&C.nodeType===1)return C.innerHTML;if(typeof g=="string"&&!At.test(g)&&!le[(Q.exec(g)||["",""])[1].toLowerCase()]){g=m.htmlPrefilter(g);try{for(;_<T;_++)C=this[_]||{},C.nodeType===1&&(m.cleanData(xe(C,!1)),C.innerHTML=g);C=0}catch{}}C&&this.empty().append(g)},null,h,arguments.length)},replaceWith:function(){var h=[];return hr(this,arguments,function(g){var C=this.parentNode;m.inArray(this,h)<0&&(m.cleanData(xe(this)),C&&C.replaceChild(g,this))},h)}}),m.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(h,g){m.fn[h]=function(C){for(var _,T=[],I=m(C),A=I.length-1,U=0;U<=A;U++)_=U===A?this:this.clone(!0),m(I[U])[g](_),s.apply(T,_.get());return this.pushStack(T)}});var Jo=new RegExp("^("+ya+")(?!px)[a-z%]+$","i"),wa=/^--/,eo=function(h){var g=h.ownerDocument.defaultView;return(!g||!g.opener)&&(g=t),g.getComputedStyle(h)},ba=function(h,g,C){var _,T,I={};for(T in g)I[T]=h.style[T],h.style[T]=g[T];_=C.call(h);for(T in g)h.style[T]=I[T];return _},St=new RegExp(tr.join("|"),"i");(function(){function h(){if(X){j.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",X.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",dr.appendChild(j).appendChild(X);var ue=t.getComputedStyle(X);C=ue.top!=="1%",U=g(ue.marginLeft)===12,X.style.right="60%",I=g(ue.right)===36,_=g(ue.width)===36,X.style.position="absolute",T=g(X.offsetWidth/3)===12,dr.removeChild(j),X=null}}function g(ue){return Math.round(parseFloat(ue))}var C,_,T,I,A,U,j=y.createElement("div"),X=y.createElement("div");X.style&&(X.style.backgroundClip="content-box",X.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle=X.style.backgroundClip==="content-box",m.extend(v,{boxSizingReliable:function(){return h(),_},pixelBoxStyles:function(){return h(),I},pixelPosition:function(){return h(),C},reliableMarginLeft:function(){return h(),U},scrollboxSize:function(){return h(),T},reliableTrDimensions:function(){var ue,de,re,ge;return A==null&&(ue=y.createElement("table"),de=y.createElement("tr"),re=y.createElement("div"),ue.style.cssText="position:absolute;left:-11111px;border-collapse:separate",de.style.cssText="box-sizing:content-box;border:1px solid",de.style.height="1px",re.style.height="9px",re.style.display="block",dr.appendChild(ue).appendChild(de).appendChild(re),ge=t.getComputedStyle(de),A=parseInt(ge.height,10)+parseInt(ge.borderTopWidth,10)+parseInt(ge.borderBottomWidth,10)===de.offsetHeight,dr.removeChild(ue)),A}}))})();function wt(h,g,C){var _,T,I,A,U=wa.test(g),j=h.style;return C=C||eo(h),C&&(A=C.getPropertyValue(g)||C[g],U&&A&&(A=A.replace(Z,"$1")||void 0),A===""&&!nr(h)&&(A=m.style(h,g)),!v.pixelBoxStyles()&&Jo.test(A)&&St.test(g)&&(_=j.width,T=j.minWidth,I=j.maxWidth,j.minWidth=j.maxWidth=j.width=A,A=C.width,j.width=_,j.minWidth=T,j.maxWidth=I)),A!==void 0?A+"":A}function Fn(h,g){return{get:function(){if(h()){delete this.get;return}return(this.get=g).apply(this,arguments)}}}var Ea=["Webkit","Moz","ms"],Sc=y.createElement("div").style,y0={};function Mk(h){for(var g=h[0].toUpperCase()+h.slice(1),C=Ea.length;C--;)if(h=Ea[C]+g,h in Sc)return h}function Ih(h){var g=m.cssProps[h]||y0[h];return g||(h in Sc?h:y0[h]=Mk(h)||h)}var Lk=/^(none|table(?!-c[ea]).+)/,Bk={position:"absolute",visibility:"hidden",display:"block"},x0={letterSpacing:"0",fontWeight:"400"};function w0(h,g,C){var _=go.exec(g);return _?Math.max(0,_[2]-(C||0))+(_[3]||"px"):g}function Dh(h,g,C,_,T,I){var A=g==="width"?1:0,U=0,j=0,X=0;if(C===(_?"border":"content"))return 0;for(;A<4;A+=2)C==="margin"&&(X+=m.css(h,C+tr[A],!0,T)),_?(C==="content"&&(j-=m.css(h,"padding"+tr[A],!0,T)),C!=="margin"&&(j-=m.css(h,"border"+tr[A]+"Width",!0,T))):(j+=m.css(h,"padding"+tr[A],!0,T),C!=="padding"?j+=m.css(h,"border"+tr[A]+"Width",!0,T):U+=m.css(h,"border"+tr[A]+"Width",!0,T));return!_&&I>=0&&(j+=Math.max(0,Math.ceil(h["offset"+g[0].toUpperCase()+g.slice(1)]-I-j-U-.5))||0),j+X}function b0(h,g,C){var _=eo(h),T=!v.boxSizingReliable()||C,I=T&&m.css(h,"boxSizing",!1,_)==="border-box",A=I,U=wt(h,g,_),j="offset"+g[0].toUpperCase()+g.slice(1);if(Jo.test(U)){if(!C)return U;U="auto"}return(!v.boxSizingReliable()&&I||!v.reliableTrDimensions()&&D(h,"tr")||U==="auto"||!parseFloat(U)&&m.css(h,"display",!1,_)==="inline")&&h.getClientRects().length&&(I=m.css(h,"boxSizing",!1,_)==="border-box",A=j in h,A&&(U=h[j])),U=parseFloat(U)||0,U+Dh(h,g,C||(I?"border":"content"),A,_,U)+"px"}m.extend({cssHooks:{opacity:{get:function(h,g){if(g){var C=wt(h,"opacity");return C===""?"1":C}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(h,g,C,_){if(!(!h||h.nodeType===3||h.nodeType===8||!h.style)){var T,I,A,U=Ut(g),j=wa.test(g),X=h.style;if(j||(g=Ih(U)),A=m.cssHooks[g]||m.cssHooks[U],C!==void 0){if(I=typeof C,I==="string"&&(T=go.exec(C))&&T[1]&&(C=Cc(h,g,T),I="number"),C==null||C!==C)return;I==="number"&&!j&&(C+=T&&T[3]||(m.cssNumber[U]?"":"px")),!v.clearCloneStyle&&C===""&&g.indexOf("background")===0&&(X[g]="inherit"),(!A||!("set"in A)||(C=A.set(h,C,_))!==void 0)&&(j?X.setProperty(g,C):X[g]=C)}else return A&&"get"in A&&(T=A.get(h,!1,_))!==void 0?T:X[g]}},css:function(h,g,C,_){var T,I,A,U=Ut(g),j=wa.test(g);return j||(g=Ih(U)),A=m.cssHooks[g]||m.cssHooks[U],A&&"get"in A&&(T=A.get(h,!0,C)),T===void 0&&(T=wt(h,g,_)),T==="normal"&&g in x0&&(T=x0[g]),C===""||C?(I=parseFloat(T),C===!0||isFinite(I)?I||0:T):T}}),m.each(["height","width"],function(h,g){m.cssHooks[g]={get:function(C,_,T){if(_)return Lk.test(m.css(C,"display"))&&(!C.getClientRects().length||!C.getBoundingClientRect().width)?ba(C,Bk,function(){return b0(C,g,T)}):b0(C,g,T)},set:function(C,_,T){var I,A=eo(C),U=!v.scrollboxSize()&&A.position==="absolute",j=U||T,X=j&&m.css(C,"boxSizing",!1,A)==="border-box",ue=T?Dh(C,g,T,X,A):0;return X&&U&&(ue-=Math.ceil(C["offset"+g[0].toUpperCase()+g.slice(1)]-parseFloat(A[g])-Dh(C,g,"border",!1,A)-.5)),ue&&(I=go.exec(_))&&(I[3]||"px")!=="px"&&(C.style[g]=_,_=m.css(C,g)),w0(C,_,ue)}}}),m.cssHooks.marginLeft=Fn(v.reliableMarginLeft,function(h,g){if(g)return(parseFloat(wt(h,"marginLeft"))||h.getBoundingClientRect().left-ba(h,{marginLeft:0},function(){return h.getBoundingClientRect().left}))+"px"}),m.each({margin:"",padding:"",border:"Width"},function(h,g){m.cssHooks[h+g]={expand:function(C){for(var _=0,T={},I=typeof C=="string"?C.split(" "):[C];_<4;_++)T[h+tr[_]+g]=I[_]||I[_-2]||I[0];return T}},h!=="margin"&&(m.cssHooks[h+g].set=w0)}),m.fn.extend({css:function(h,g){return It(this,function(C,_,T){var I,A,U={},j=0;if(Array.isArray(_)){for(I=eo(C),A=_.length;j<A;j++)U[_[j]]=m.css(C,_[j],!1,I);return U}return T!==void 0?m.style(C,_,T):m.css(C,_)},h,g,arguments.length>1)}});function pr(h,g,C,_,T){return new pr.prototype.init(h,g,C,_,T)}m.Tween=pr,pr.prototype={constructor:pr,init:function(h,g,C,_,T,I){this.elem=h,this.prop=C,this.easing=T||m.easing._default,this.options=g,this.start=this.now=this.cur(),this.end=_,this.unit=I||(m.cssNumber[C]?"":"px")},cur:function(){var h=pr.propHooks[this.prop];return h&&h.get?h.get(this):pr.propHooks._default.get(this)},run:function(h){var g,C=pr.propHooks[this.prop];return this.options.duration?this.pos=g=m.easing[this.easing](h,this.options.duration*h,0,1,this.options.duration):this.pos=g=h,this.now=(this.end-this.start)*g+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),C&&C.set?C.set(this):pr.propHooks._default.set(this),this}},pr.prototype.init.prototype=pr.prototype,pr.propHooks={_default:{get:function(h){var g;return h.elem.nodeType!==1||h.elem[h.prop]!=null&&h.elem.style[h.prop]==null?h.elem[h.prop]:(g=m.css(h.elem,h.prop,""),!g||g==="auto"?0:g)},set:function(h){m.fx.step[h.prop]?m.fx.step[h.prop](h):h.elem.nodeType===1&&(m.cssHooks[h.prop]||h.elem.style[Ih(h.prop)]!=null)?m.style(h.elem,h.prop,h.now+h.unit):h.elem[h.prop]=h.now}}},pr.propHooks.scrollTop=pr.propHooks.scrollLeft={set:function(h){h.elem.nodeType&&h.elem.parentNode&&(h.elem[h.prop]=h.now)}},m.easing={linear:function(h){return h},swing:function(h){return .5-Math.cos(h*Math.PI)/2},_default:"swing"},m.fx=pr.prototype.init,m.fx.step={};var ds,_c,jk=/^(?:toggle|show|hide)$/,Wk=/queueHooks$/;function Nh(){_c&&(y.hidden===!1&&t.requestAnimationFrame?t.requestAnimationFrame(Nh):t.setTimeout(Nh,m.fx.interval),m.fx.tick())}function E0(){return t.setTimeout(function(){ds=void 0}),ds=Date.now()}function kc(h,g){var C,_=0,T={height:h};for(g=g?1:0;_<4;_+=2-g)C=tr[_],T["margin"+C]=T["padding"+C]=h;return g&&(T.opacity=T.width=h),T}function C0(h,g,C){for(var _,T=(to.tweeners[g]||[]).concat(to.tweeners["*"]),I=0,A=T.length;I<A;I++)if(_=T[I].call(C,g,h))return _}function zk(h,g,C){var _,T,I,A,U,j,X,ue,de="width"in g||"height"in g,re=this,ge={},Ze=h.style,bt=h.nodeType&&ki(h),lt=Ce.get(h,"fxshow");C.queue||(A=m._queueHooks(h,"fx"),A.unqueued==null&&(A.unqueued=0,U=A.empty.fire,A.empty.fire=function(){A.unqueued||U()}),A.unqueued++,re.always(function(){re.always(function(){A.unqueued--,m.queue(h,"fx").length||A.empty.fire()})}));for(_ in g)if(T=g[_],jk.test(T)){if(delete g[_],I=I||T==="toggle",T===(bt?"hide":"show"))if(T==="show"&&lt&&lt[_]!==void 0)bt=!0;else continue;ge[_]=lt&&lt[_]||m.style(h,_)}if(j=!m.isEmptyObject(g),!(!j&&m.isEmptyObject(ge))){de&&h.nodeType===1&&(C.overflow=[Ze.overflow,Ze.overflowX,Ze.overflowY],X=lt&&lt.display,X==null&&(X=Ce.get(h,"display")),ue=m.css(h,"display"),ue==="none"&&(X?ue=X:(Yo([h],!0),X=h.style.display||X,ue=m.css(h,"display"),Yo([h]))),(ue==="inline"||ue==="inline-block"&&X!=null)&&m.css(h,"float")==="none"&&(j||(re.done(function(){Ze.display=X}),X==null&&(ue=Ze.display,X=ue==="none"?"":ue)),Ze.display="inline-block")),C.overflow&&(Ze.overflow="hidden",re.always(function(){Ze.overflow=C.overflow[0],Ze.overflowX=C.overflow[1],Ze.overflowY=C.overflow[2]})),j=!1;for(_ in ge)j||(lt?"hidden"in lt&&(bt=lt.hidden):lt=Ce.access(h,"fxshow",{display:X}),I&&(lt.hidden=!bt),bt&&Yo([h],!0),re.done(function(){bt||Yo([h]),Ce.remove(h,"fxshow");for(_ in ge)m.style(h,_,ge[_])})),j=C0(bt?lt[_]:0,_,re),_ in lt||(lt[_]=j.start,bt&&(j.end=j.start,j.start=0))}}function Uk(h,g){var C,_,T,I,A;for(C in h)if(_=Ut(C),T=g[_],I=h[C],Array.isArray(I)&&(T=I[1],I=h[C]=I[0]),C!==_&&(h[_]=I,delete h[C]),A=m.cssHooks[_],A&&"expand"in A){I=A.expand(I),delete h[_];for(C in I)C in h||(h[C]=I[C],g[C]=T)}else g[_]=T}function to(h,g,C){var _,T,I=0,A=to.prefilters.length,U=m.Deferred().always(function(){delete j.elem}),j=function(){if(T)return!1;for(var de=ds||E0(),re=Math.max(0,X.startTime+X.duration-de),ge=re/X.duration||0,Ze=1-ge,bt=0,lt=X.tweens.length;bt<lt;bt++)X.tweens[bt].run(Ze);return U.notifyWith(h,[X,Ze,re]),Ze<1&&lt?re:(lt||U.notifyWith(h,[X,1,0]),U.resolveWith(h,[X]),!1)},X=U.promise({elem:h,props:m.extend({},g),opts:m.extend(!0,{specialEasing:{},easing:m.easing._default},C),originalProperties:g,originalOptions:C,startTime:ds||E0(),duration:C.duration,tweens:[],createTween:function(de,re){var ge=m.Tween(h,X.opts,de,re,X.opts.specialEasing[de]||X.opts.easing);return X.tweens.push(ge),ge},stop:function(de){var re=0,ge=de?X.tweens.length:0;if(T)return this;for(T=!0;re<ge;re++)X.tweens[re].run(1);return de?(U.notifyWith(h,[X,1,0]),U.resolveWith(h,[X,de])):U.rejectWith(h,[X,de]),this}}),ue=X.props;for(Uk(ue,X.opts.specialEasing);I<A;I++)if(_=to.prefilters[I].call(X,h,ue,X.opts),_)return x(_.stop)&&(m._queueHooks(X.elem,X.opts.queue).stop=_.stop.bind(_)),_;return m.map(ue,C0,X),x(X.opts.start)&&X.opts.start.call(h,X),X.progress(X.opts.progress).done(X.opts.done,X.opts.complete).fail(X.opts.fail).always(X.opts.always),m.fx.timer(m.extend(j,{elem:h,anim:X,queue:X.opts.queue})),X}m.Animation=m.extend(to,{tweeners:{"*":[function(h,g){var C=this.createTween(h,g);return Cc(C.elem,h,go.exec(g),C),C}]},tweener:function(h,g){x(h)?(g=h,h=["*"]):h=h.match(it);for(var C,_=0,T=h.length;_<T;_++)C=h[_],to.tweeners[C]=to.tweeners[C]||[],to.tweeners[C].unshift(g)},prefilters:[zk],prefilter:function(h,g){g?to.prefilters.unshift(h):to.prefilters.push(h)}}),m.speed=function(h,g,C){var _=h&&typeof h=="object"?m.extend({},h):{complete:C||!C&&g||x(h)&&h,duration:h,easing:C&&g||g&&!x(g)&&g};return m.fx.off?_.duration=0:typeof _.duration!="number"&&(_.duration in m.fx.speeds?_.duration=m.fx.speeds[_.duration]:_.duration=m.fx.speeds._default),(_.queue==null||_.queue===!0)&&(_.queue="fx"),_.old=_.complete,_.complete=function(){x(_.old)&&_.old.call(this),_.queue&&m.dequeue(this,_.queue)},_},m.fn.extend({fadeTo:function(h,g,C,_){return this.filter(ki).css("opacity",0).show().end().animate({opacity:g},h,C,_)},animate:function(h,g,C,_){var T=m.isEmptyObject(h),I=m.speed(g,C,_),A=function(){var U=to(this,m.extend({},h),I);(T||Ce.get(this,"finish"))&&U.stop(!0)};return A.finish=A,T||I.queue===!1?this.each(A):this.queue(I.queue,A)},stop:function(h,g,C){var _=function(T){var I=T.stop;delete T.stop,I(C)};return typeof h!="string"&&(C=g,g=h,h=void 0),g&&this.queue(h||"fx",[]),this.each(function(){var T=!0,I=h!=null&&h+"queueHooks",A=m.timers,U=Ce.get(this);if(I)U[I]&&U[I].stop&&_(U[I]);else for(I in U)U[I]&&U[I].stop&&Wk.test(I)&&_(U[I]);for(I=A.length;I--;)A[I].elem===this&&(h==null||A[I].queue===h)&&(A[I].anim.stop(C),T=!1,A.splice(I,1));(T||!C)&&m.dequeue(this,h)})},finish:function(h){return h!==!1&&(h=h||"fx"),this.each(function(){var g,C=Ce.get(this),_=C[h+"queue"],T=C[h+"queueHooks"],I=m.timers,A=_?_.length:0;for(C.finish=!0,m.queue(this,h,[]),T&&T.stop&&T.stop.call(this,!0),g=I.length;g--;)I[g].elem===this&&I[g].queue===h&&(I[g].anim.stop(!0),I.splice(g,1));for(g=0;g<A;g++)_[g]&&_[g].finish&&_[g].finish.call(this);delete C.finish})}}),m.each(["toggle","show","hide"],function(h,g){var C=m.fn[g];m.fn[g]=function(_,T,I){return _==null||typeof _=="boolean"?C.apply(this,arguments):this.animate(kc(g,!0),_,T,I)}}),m.each({slideDown:kc("show"),slideUp:kc("hide"),slideToggle:kc("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(h,g){m.fn[h]=function(C,_,T){return this.animate(g,C,_,T)}}),m.timers=[],m.fx.tick=function(){var h,g=0,C=m.timers;for(ds=Date.now();g<C.length;g++)h=C[g],!h()&&C[g]===h&&C.splice(g--,1);C.length||m.fx.stop(),ds=void 0},m.fx.timer=function(h){m.timers.push(h),m.fx.start()},m.fx.interval=13,m.fx.start=function(){_c||(_c=!0,Nh())},m.fx.stop=function(){_c=null},m.fx.speeds={slow:600,fast:200,_default:400},m.fn.delay=function(h,g){return h=m.fx&&m.fx.speeds[h]||h,g=g||"fx",this.queue(g,function(C,_){var T=t.setTimeout(C,h);_.stop=function(){t.clearTimeout(T)}})},function(){var h=y.createElement("input"),g=y.createElement("select"),C=g.appendChild(y.createElement("option"));h.type="checkbox",v.checkOn=h.value!=="",v.optSelected=C.selected,h=y.createElement("input"),h.value="t",h.type="radio",v.radioValue=h.value==="t"}();var S0,Au=m.expr.attrHandle;m.fn.extend({attr:function(h,g){return It(this,m.attr,h,g,arguments.length>1)},removeAttr:function(h){return this.each(function(){m.removeAttr(this,h)})}}),m.extend({attr:function(h,g,C){var _,T,I=h.nodeType;if(!(I===3||I===8||I===2)){if(typeof h.getAttribute>"u")return m.prop(h,g,C);if((I!==1||!m.isXMLDoc(h))&&(T=m.attrHooks[g.toLowerCase()]||(m.expr.match.bool.test(g)?S0:void 0)),C!==void 0){if(C===null){m.removeAttr(h,g);return}return T&&"set"in T&&(_=T.set(h,C,g))!==void 0?_:(h.setAttribute(g,C+""),C)}return T&&"get"in T&&(_=T.get(h,g))!==null?_:(_=m.find.attr(h,g),_??void 0)}},attrHooks:{type:{set:function(h,g){if(!v.radioValue&&g==="radio"&&D(h,"input")){var C=h.value;return h.setAttribute("type",g),C&&(h.value=C),g}}}},removeAttr:function(h,g){var C,_=0,T=g&&g.match(it);if(T&&h.nodeType===1)for(;C=T[_++];)h.removeAttribute(C)}}),S0={set:function(h,g,C){return g===!1?m.removeAttr(h,C):h.setAttribute(C,C),C}},m.each(m.expr.match.bool.source.match(/\w+/g),function(h,g){var C=Au[g]||m.find.attr;Au[g]=function(_,T,I){var A,U,j=T.toLowerCase();return I||(U=Au[j],Au[j]=A,A=C(_,T,I)!=null?j:null,Au[j]=U),A}});var $k=/^(?:input|select|textarea|button)$/i,Hk=/^(?:a|area)$/i;m.fn.extend({prop:function(h,g){return It(this,m.prop,h,g,arguments.length>1)},removeProp:function(h){return this.each(function(){delete this[m.propFix[h]||h]})}}),m.extend({prop:function(h,g,C){var _,T,I=h.nodeType;if(!(I===3||I===8||I===2))return(I!==1||!m.isXMLDoc(h))&&(g=m.propFix[g]||g,T=m.propHooks[g]),C!==void 0?T&&"set"in T&&(_=T.set(h,C,g))!==void 0?_:h[g]=C:T&&"get"in T&&(_=T.get(h,g))!==null?_:h[g]},propHooks:{tabIndex:{get:function(h){var g=m.find.attr(h,"tabindex");return g?parseInt(g,10):$k.test(h.nodeName)||Hk.test(h.nodeName)&&h.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(m.propHooks.selected={get:function(h){var g=h.parentNode;return g&&g.parentNode&&g.parentNode.selectedIndex,null},set:function(h){var g=h.parentNode;g&&(g.selectedIndex,g.parentNode&&g.parentNode.selectedIndex)}}),m.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){m.propFix[this.toLowerCase()]=this});function Ca(h){var g=h.match(it)||[];return g.join(" ")}function Sa(h){return h.getAttribute&&h.getAttribute("class")||""}function Ah(h){return Array.isArray(h)?h:typeof h=="string"?h.match(it)||[]:[]}m.fn.extend({addClass:function(h){var g,C,_,T,I,A;return x(h)?this.each(function(U){m(this).addClass(h.call(this,U,Sa(this)))}):(g=Ah(h),g.length?this.each(function(){if(_=Sa(this),C=this.nodeType===1&&" "+Ca(_)+" ",C){for(I=0;I<g.length;I++)T=g[I],C.indexOf(" "+T+" ")<0&&(C+=T+" ");A=Ca(C),_!==A&&this.setAttribute("class",A)}}):this)},removeClass:function(h){var g,C,_,T,I,A;return x(h)?this.each(function(U){m(this).removeClass(h.call(this,U,Sa(this)))}):arguments.length?(g=Ah(h),g.length?this.each(function(){if(_=Sa(this),C=this.nodeType===1&&" "+Ca(_)+" ",C){for(I=0;I<g.length;I++)for(T=g[I];C.indexOf(" "+T+" ")>-1;)C=C.replace(" "+T+" "," ");A=Ca(C),_!==A&&this.setAttribute("class",A)}}):this):this.attr("class","")},toggleClass:function(h,g){var C,_,T,I,A=typeof h,U=A==="string"||Array.isArray(h);return x(h)?this.each(function(j){m(this).toggleClass(h.call(this,j,Sa(this),g),g)}):typeof g=="boolean"&&U?g?this.addClass(h):this.removeClass(h):(C=Ah(h),this.each(function(){if(U)for(I=m(this),T=0;T<C.length;T++)_=C[T],I.hasClass(_)?I.removeClass(_):I.addClass(_);else(h===void 0||A==="boolean")&&(_=Sa(this),_&&Ce.set(this,"__className__",_),this.setAttribute&&this.setAttribute("class",_||h===!1?"":Ce.get(this,"__className__")||""))}))},hasClass:function(h){var g,C,_=0;for(g=" "+h+" ";C=this[_++];)if(C.nodeType===1&&(" "+Ca(Sa(C))+" ").indexOf(g)>-1)return!0;return!1}});var Vk=/\r/g;m.fn.extend({val:function(h){var g,C,_,T=this[0];return arguments.length?(_=x(h),this.each(function(I){var A;this.nodeType===1&&(_?A=h.call(this,I,m(this).val()):A=h,A==null?A="":typeof A=="number"?A+="":Array.isArray(A)&&(A=m.map(A,function(U){return U==null?"":U+""})),g=m.valHooks[this.type]||m.valHooks[this.nodeName.toLowerCase()],(!g||!("set"in g)||g.set(this,A,"value")===void 0)&&(this.value=A))})):T?(g=m.valHooks[T.type]||m.valHooks[T.nodeName.toLowerCase()],g&&"get"in g&&(C=g.get(T,"value"))!==void 0?C:(C=T.value,typeof C=="string"?C.replace(Vk,""):C??"")):void 0}}),m.extend({valHooks:{option:{get:function(h){var g=m.find.attr(h,"value");return g??Ca(m.text(h))}},select:{get:function(h){var g,C,_,T=h.options,I=h.selectedIndex,A=h.type==="select-one",U=A?null:[],j=A?I+1:T.length;for(I<0?_=j:_=A?I:0;_<j;_++)if(C=T[_],(C.selected||_===I)&&!C.disabled&&(!C.parentNode.disabled||!D(C.parentNode,"optgroup"))){if(g=m(C).val(),A)return g;U.push(g)}return U},set:function(h,g){for(var C,_,T=h.options,I=m.makeArray(g),A=T.length;A--;)_=T[A],(_.selected=m.inArray(m.valHooks.option.get(_),I)>-1)&&(C=!0);return C||(h.selectedIndex=-1),I}}}}),m.each(["radio","checkbox"],function(){m.valHooks[this]={set:function(h,g){if(Array.isArray(g))return h.checked=m.inArray(m(h).val(),g)>-1}},v.checkOn||(m.valHooks[this].get=function(h){return h.getAttribute("value")===null?"on":h.value})});var Pu=t.location,_0={guid:Date.now()},Ph=/\?/;m.parseXML=function(h){var g,C;if(!h||typeof h!="string")return null;try{g=new t.DOMParser().parseFromString(h,"text/xml")}catch{}return C=g&&g.getElementsByTagName("parsererror")[0],(!g||C)&&m.error("Invalid XML: "+(C?m.map(C.childNodes,function(_){return _.textContent}).join(`
`):h)),g};var k0=/^(?:focusinfocus|focusoutblur)$/,R0=function(h){h.stopPropagation()};m.extend(m.event,{trigger:function(h,g,C,_){var T,I,A,U,j,X,ue,de,re=[C||y],ge=f.call(h,"type")?h.type:h,Ze=f.call(h,"namespace")?h.namespace.split("."):[];if(I=de=A=C=C||y,!(C.nodeType===3||C.nodeType===8)&&!k0.test(ge+m.event.triggered)&&(ge.indexOf(".")>-1&&(Ze=ge.split("."),ge=Ze.shift(),Ze.sort()),j=ge.indexOf(":")<0&&"on"+ge,h=h[m.expando]?h:new m.Event(ge,typeof h=="object"&&h),h.isTrigger=_?2:3,h.namespace=Ze.join("."),h.rnamespace=h.namespace?new RegExp("(^|\\.)"+Ze.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,h.result=void 0,h.target||(h.target=C),g=g==null?[h]:m.makeArray(g,[h]),ue=m.event.special[ge]||{},!(!_&&ue.trigger&&ue.trigger.apply(C,g)===!1))){if(!_&&!ue.noBubble&&!w(C)){for(U=ue.delegateType||ge,k0.test(U+ge)||(I=I.parentNode);I;I=I.parentNode)re.push(I),A=I;A===(C.ownerDocument||y)&&re.push(A.defaultView||A.parentWindow||t)}for(T=0;(I=re[T++])&&!h.isPropagationStopped();)de=I,h.type=T>1?U:ue.bindType||ge,X=(Ce.get(I,"events")||Object.create(null))[h.type]&&Ce.get(I,"handle"),X&&X.apply(I,g),X=j&&I[j],X&&X.apply&&an(I)&&(h.result=X.apply(I,g),h.result===!1&&h.preventDefault());return h.type=ge,!_&&!h.isDefaultPrevented()&&(!ue._default||ue._default.apply(re.pop(),g)===!1)&&an(C)&&j&&x(C[ge])&&!w(C)&&(A=C[j],A&&(C[j]=null),m.event.triggered=ge,h.isPropagationStopped()&&de.addEventListener(ge,R0),C[ge](),h.isPropagationStopped()&&de.removeEventListener(ge,R0),m.event.triggered=void 0,A&&(C[j]=A)),h.result}},simulate:function(h,g,C){var _=m.extend(new m.Event,C,{type:h,isSimulated:!0});m.event.trigger(_,null,g)}}),m.fn.extend({trigger:function(h,g){return this.each(function(){m.event.trigger(h,g,this)})},triggerHandler:function(h,g){var C=this[0];if(C)return m.event.trigger(h,g,C,!0)}});var Gk=/\[\]$/,T0=/\r?\n/g,qk=/^(?:submit|button|image|reset|file)$/i,Kk=/^(?:input|select|textarea|keygen)/i;function Fh(h,g,C,_){var T;if(Array.isArray(g))m.each(g,function(I,A){C||Gk.test(h)?_(h,A):Fh(h+"["+(typeof A=="object"&&A!=null?I:"")+"]",A,C,_)});else if(!C&&S(g)==="object")for(T in g)Fh(h+"["+T+"]",g[T],C,_);else _(h,g)}m.param=function(h,g){var C,_=[],T=function(I,A){var U=x(A)?A():A;_[_.length]=encodeURIComponent(I)+"="+encodeURIComponent(U??"")};if(h==null)return"";if(Array.isArray(h)||h.jquery&&!m.isPlainObject(h))m.each(h,function(){T(this.name,this.value)});else for(C in h)Fh(C,h[C],g,T);return _.join("&")},m.fn.extend({serialize:function(){return m.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var h=m.prop(this,"elements");return h?m.makeArray(h):this}).filter(function(){var h=this.type;return this.name&&!m(this).is(":disabled")&&Kk.test(this.nodeName)&&!qk.test(h)&&(this.checked||!xa.test(h))}).map(function(h,g){var C=m(this).val();return C==null?null:Array.isArray(C)?m.map(C,function(_){return{name:g.name,value:_.replace(T0,`\r
`)}}):{name:g.name,value:C.replace(T0,`\r
`)}}).get()}});var Xk=/%20/g,Yk=/#.*$/,Qk=/([?&])_=[^&]*/,Jk=/^(.*?):[ \t]*([^\r\n]*)$/mg,Zk=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,eR=/^(?:GET|HEAD)$/,tR=/^\/\//,I0={},Oh={},D0="*/".concat("*"),Mh=y.createElement("a");Mh.href=Pu.href;function N0(h){return function(g,C){typeof g!="string"&&(C=g,g="*");var _,T=0,I=g.toLowerCase().match(it)||[];if(x(C))for(;_=I[T++];)_[0]==="+"?(_=_.slice(1)||"*",(h[_]=h[_]||[]).unshift(C)):(h[_]=h[_]||[]).push(C)}}function A0(h,g,C,_){var T={},I=h===Oh;function A(U){var j;return T[U]=!0,m.each(h[U]||[],function(X,ue){var de=ue(g,C,_);if(typeof de=="string"&&!I&&!T[de])return g.dataTypes.unshift(de),A(de),!1;if(I)return!(j=de)}),j}return A(g.dataTypes[0])||!T["*"]&&A("*")}function Lh(h,g){var C,_,T=m.ajaxSettings.flatOptions||{};for(C in g)g[C]!==void 0&&((T[C]?h:_||(_={}))[C]=g[C]);return _&&m.extend(!0,h,_),h}function nR(h,g,C){for(var _,T,I,A,U=h.contents,j=h.dataTypes;j[0]==="*";)j.shift(),_===void 0&&(_=h.mimeType||g.getResponseHeader("Content-Type"));if(_){for(T in U)if(U[T]&&U[T].test(_)){j.unshift(T);break}}if(j[0]in C)I=j[0];else{for(T in C){if(!j[0]||h.converters[T+" "+j[0]]){I=T;break}A||(A=T)}I=I||A}if(I)return I!==j[0]&&j.unshift(I),C[I]}function rR(h,g,C,_){var T,I,A,U,j,X={},ue=h.dataTypes.slice();if(ue[1])for(A in h.converters)X[A.toLowerCase()]=h.converters[A];for(I=ue.shift();I;)if(h.responseFields[I]&&(C[h.responseFields[I]]=g),!j&&_&&h.dataFilter&&(g=h.dataFilter(g,h.dataType)),j=I,I=ue.shift(),I){if(I==="*")I=j;else if(j!=="*"&&j!==I){if(A=X[j+" "+I]||X["* "+I],!A){for(T in X)if(U=T.split(" "),U[1]===I&&(A=X[j+" "+U[0]]||X["* "+U[0]],A)){A===!0?A=X[T]:X[T]!==!0&&(I=U[0],ue.unshift(U[1]));break}}if(A!==!0)if(A&&h.throws)g=A(g);else try{g=A(g)}catch(de){return{state:"parsererror",error:A?de:"No conversion from "+j+" to "+I}}}}return{state:"success",data:g}}m.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Pu.href,type:"GET",isLocal:Zk.test(Pu.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":D0,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":m.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(h,g){return g?Lh(Lh(h,m.ajaxSettings),g):Lh(m.ajaxSettings,h)},ajaxPrefilter:N0(I0),ajaxTransport:N0(Oh),ajax:function(h,g){typeof h=="object"&&(g=h,h=void 0),g=g||{};var C,_,T,I,A,U,j,X,ue,de,re=m.ajaxSetup({},g),ge=re.context||re,Ze=re.context&&(ge.nodeType||ge.jquery)?m(ge):m.event,bt=m.Deferred(),lt=m.Callbacks("once memory"),On=re.statusCode||{},mn={},xo={},wo="canceled",mt={readyState:0,getResponseHeader:function(_t){var Jt;if(j){if(!I)for(I={};Jt=Jk.exec(T);)I[Jt[1].toLowerCase()+" "]=(I[Jt[1].toLowerCase()+" "]||[]).concat(Jt[2]);Jt=I[_t.toLowerCase()+" "]}return Jt==null?null:Jt.join(", ")},getAllResponseHeaders:function(){return j?T:null},setRequestHeader:function(_t,Jt){return j==null&&(_t=xo[_t.toLowerCase()]=xo[_t.toLowerCase()]||_t,mn[_t]=Jt),this},overrideMimeType:function(_t){return j==null&&(re.mimeType=_t),this},statusCode:function(_t){var Jt;if(_t)if(j)mt.always(_t[mt.status]);else for(Jt in _t)On[Jt]=[On[Jt],_t[Jt]];return this},abort:function(_t){var Jt=_t||wo;return C&&C.abort(Jt),_a(0,Jt),this}};if(bt.promise(mt),re.url=((h||re.url||Pu.href)+"").replace(tR,Pu.protocol+"//"),re.type=g.method||g.type||re.method||re.type,re.dataTypes=(re.dataType||"*").toLowerCase().match(it)||[""],re.crossDomain==null){U=y.createElement("a");try{U.href=re.url,U.href=U.href,re.crossDomain=Mh.protocol+"//"+Mh.host!=U.protocol+"//"+U.host}catch{re.crossDomain=!0}}if(re.data&&re.processData&&typeof re.data!="string"&&(re.data=m.param(re.data,re.traditional)),A0(I0,re,g,mt),j)return mt;X=m.event&&re.global,X&&m.active++===0&&m.event.trigger("ajaxStart"),re.type=re.type.toUpperCase(),re.hasContent=!eR.test(re.type),_=re.url.replace(Yk,""),re.hasContent?re.data&&re.processData&&(re.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(re.data=re.data.replace(Xk,"+")):(de=re.url.slice(_.length),re.data&&(re.processData||typeof re.data=="string")&&(_+=(Ph.test(_)?"&":"?")+re.data,delete re.data),re.cache===!1&&(_=_.replace(Qk,"$1"),de=(Ph.test(_)?"&":"?")+"_="+_0.guid+++de),re.url=_+de),re.ifModified&&(m.lastModified[_]&&mt.setRequestHeader("If-Modified-Since",m.lastModified[_]),m.etag[_]&&mt.setRequestHeader("If-None-Match",m.etag[_])),(re.data&&re.hasContent&&re.contentType!==!1||g.contentType)&&mt.setRequestHeader("Content-Type",re.contentType),mt.setRequestHeader("Accept",re.dataTypes[0]&&re.accepts[re.dataTypes[0]]?re.accepts[re.dataTypes[0]]+(re.dataTypes[0]!=="*"?", "+D0+"; q=0.01":""):re.accepts["*"]);for(ue in re.headers)mt.setRequestHeader(ue,re.headers[ue]);if(re.beforeSend&&(re.beforeSend.call(ge,mt,re)===!1||j))return mt.abort();if(wo="abort",lt.add(re.complete),mt.done(re.success),mt.fail(re.error),C=A0(Oh,re,g,mt),!C)_a(-1,"No Transport");else{if(mt.readyState=1,X&&Ze.trigger("ajaxSend",[mt,re]),j)return mt;re.async&&re.timeout>0&&(A=t.setTimeout(function(){mt.abort("timeout")},re.timeout));try{j=!1,C.send(mn,_a)}catch(_t){if(j)throw _t;_a(-1,_t)}}function _a(_t,Jt,Ou,jh){var bo,Mu,Eo,Ti,Ii,Wr=Jt;j||(j=!0,A&&t.clearTimeout(A),C=void 0,T=jh||"",mt.readyState=_t>0?4:0,bo=_t>=200&&_t<300||_t===304,Ou&&(Ti=nR(re,mt,Ou)),!bo&&m.inArray("script",re.dataTypes)>-1&&m.inArray("json",re.dataTypes)<0&&(re.converters["text script"]=function(){}),Ti=rR(re,Ti,mt,bo),bo?(re.ifModified&&(Ii=mt.getResponseHeader("Last-Modified"),Ii&&(m.lastModified[_]=Ii),Ii=mt.getResponseHeader("etag"),Ii&&(m.etag[_]=Ii)),_t===204||re.type==="HEAD"?Wr="nocontent":_t===304?Wr="notmodified":(Wr=Ti.state,Mu=Ti.data,Eo=Ti.error,bo=!Eo)):(Eo=Wr,(_t||!Wr)&&(Wr="error",_t<0&&(_t=0))),mt.status=_t,mt.statusText=(Jt||Wr)+"",bo?bt.resolveWith(ge,[Mu,Wr,mt]):bt.rejectWith(ge,[mt,Wr,Eo]),mt.statusCode(On),On=void 0,X&&Ze.trigger(bo?"ajaxSuccess":"ajaxError",[mt,re,bo?Mu:Eo]),lt.fireWith(ge,[mt,Wr]),X&&(Ze.trigger("ajaxComplete",[mt,re]),--m.active||m.event.trigger("ajaxStop")))}return mt},getJSON:function(h,g,C){return m.get(h,g,C,"json")},getScript:function(h,g){return m.get(h,void 0,g,"script")}}),m.each(["get","post"],function(h,g){m[g]=function(C,_,T,I){return x(_)&&(I=I||T,T=_,_=void 0),m.ajax(m.extend({url:C,type:g,dataType:I,data:_,success:T},m.isPlainObject(C)&&C))}}),m.ajaxPrefilter(function(h){var g;for(g in h.headers)g.toLowerCase()==="content-type"&&(h.contentType=h.headers[g]||"")}),m._evalUrl=function(h,g,C){return m.ajax({url:h,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(_){m.globalEval(_,g,C)}})},m.fn.extend({wrapAll:function(h){var g;return this[0]&&(x(h)&&(h=h.call(this[0])),g=m(h,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&g.insertBefore(this[0]),g.map(function(){for(var C=this;C.firstElementChild;)C=C.firstElementChild;return C}).append(this)),this},wrapInner:function(h){return x(h)?this.each(function(g){m(this).wrapInner(h.call(this,g))}):this.each(function(){var g=m(this),C=g.contents();C.length?C.wrapAll(h):g.append(h)})},wrap:function(h){var g=x(h);return this.each(function(C){m(this).wrapAll(g?h.call(this,C):h)})},unwrap:function(h){return this.parent(h).not("body").each(function(){m(this).replaceWith(this.childNodes)}),this}}),m.expr.pseudos.hidden=function(h){return!m.expr.pseudos.visible(h)},m.expr.pseudos.visible=function(h){return!!(h.offsetWidth||h.offsetHeight||h.getClientRects().length)},m.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch{}};var oR={0:200,1223:204},Fu=m.ajaxSettings.xhr();v.cors=!!Fu&&"withCredentials"in Fu,v.ajax=Fu=!!Fu,m.ajaxTransport(function(h){var g,C;if(v.cors||Fu&&!h.crossDomain)return{send:function(_,T){var I,A=h.xhr();if(A.open(h.type,h.url,h.async,h.username,h.password),h.xhrFields)for(I in h.xhrFields)A[I]=h.xhrFields[I];h.mimeType&&A.overrideMimeType&&A.overrideMimeType(h.mimeType),!h.crossDomain&&!_["X-Requested-With"]&&(_["X-Requested-With"]="XMLHttpRequest");for(I in _)A.setRequestHeader(I,_[I]);g=function(U){return function(){g&&(g=C=A.onload=A.onerror=A.onabort=A.ontimeout=A.onreadystatechange=null,U==="abort"?A.abort():U==="error"?typeof A.status!="number"?T(0,"error"):T(A.status,A.statusText):T(oR[A.status]||A.status,A.statusText,(A.responseType||"text")!=="text"||typeof A.responseText!="string"?{binary:A.response}:{text:A.responseText},A.getAllResponseHeaders()))}},A.onload=g(),C=A.onerror=A.ontimeout=g("error"),A.onabort!==void 0?A.onabort=C:A.onreadystatechange=function(){A.readyState===4&&t.setTimeout(function(){g&&C()})},g=g("abort");try{A.send(h.hasContent&&h.data||null)}catch(U){if(g)throw U}},abort:function(){g&&g()}}}),m.ajaxPrefilter(function(h){h.crossDomain&&(h.contents.script=!1)}),m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(h){return m.globalEval(h),h}}}),m.ajaxPrefilter("script",function(h){h.cache===void 0&&(h.cache=!1),h.crossDomain&&(h.type="GET")}),m.ajaxTransport("script",function(h){if(h.crossDomain||h.scriptAttrs){var g,C;return{send:function(_,T){g=m("<script>").attr(h.scriptAttrs||{}).prop({charset:h.scriptCharset,src:h.url}).on("load error",C=function(I){g.remove(),C=null,I&&T(I.type==="error"?404:200,I.type)}),y.head.appendChild(g[0])},abort:function(){C&&C()}}}});var P0=[],Bh=/(=)\?(?=&|$)|\?\?/;m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var h=P0.pop()||m.expando+"_"+_0.guid++;return this[h]=!0,h}}),m.ajaxPrefilter("json jsonp",function(h,g,C){var _,T,I,A=h.jsonp!==!1&&(Bh.test(h.url)?"url":typeof h.data=="string"&&(h.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Bh.test(h.data)&&"data");if(A||h.dataTypes[0]==="jsonp")return _=h.jsonpCallback=x(h.jsonpCallback)?h.jsonpCallback():h.jsonpCallback,A?h[A]=h[A].replace(Bh,"$1"+_):h.jsonp!==!1&&(h.url+=(Ph.test(h.url)?"&":"?")+h.jsonp+"="+_),h.converters["script json"]=function(){return I||m.error(_+" was not called"),I[0]},h.dataTypes[0]="json",T=t[_],t[_]=function(){I=arguments},C.always(function(){T===void 0?m(t).removeProp(_):t[_]=T,h[_]&&(h.jsonpCallback=g.jsonpCallback,P0.push(_)),I&&x(T)&&T(I[0]),I=T=void 0}),"script"}),v.createHTMLDocument=function(){var h=y.implementation.createHTMLDocument("").body;return h.innerHTML="<form></form><form></form>",h.childNodes.length===2}(),m.parseHTML=function(h,g,C){if(typeof h!="string")return[];typeof g=="boolean"&&(C=g,g=!1);var _,T,I;return g||(v.createHTMLDocument?(g=y.implementation.createHTMLDocument(""),_=g.createElement("base"),_.href=y.location.href,g.head.appendChild(_)):g=y),T=me.exec(h),I=!C&&[],T?[g.createElement(T[1])]:(T=Xe([h],g,I),I&&I.length&&m(I).remove(),m.merge([],T.childNodes))},m.fn.load=function(h,g,C){var _,T,I,A=this,U=h.indexOf(" ");return U>-1&&(_=Ca(h.slice(U)),h=h.slice(0,U)),x(g)?(C=g,g=void 0):g&&typeof g=="object"&&(T="POST"),A.length>0&&m.ajax({url:h,type:T||"GET",dataType:"html",data:g}).done(function(j){I=arguments,A.html(_?m("<div>").append(m.parseHTML(j)).find(_):j)}).always(C&&function(j,X){A.each(function(){C.apply(this,I||[j.responseText,X,j])})}),this},m.expr.pseudos.animated=function(h){return m.grep(m.timers,function(g){return h===g.elem}).length},m.offset={setOffset:function(h,g,C){var _,T,I,A,U,j,X,ue=m.css(h,"position"),de=m(h),re={};ue==="static"&&(h.style.position="relative"),U=de.offset(),I=m.css(h,"top"),j=m.css(h,"left"),X=(ue==="absolute"||ue==="fixed")&&(I+j).indexOf("auto")>-1,X?(_=de.position(),A=_.top,T=_.left):(A=parseFloat(I)||0,T=parseFloat(j)||0),x(g)&&(g=g.call(h,C,m.extend({},U))),g.top!=null&&(re.top=g.top-U.top+A),g.left!=null&&(re.left=g.left-U.left+T),"using"in g?g.using.call(h,re):de.css(re)}},m.fn.extend({offset:function(h){if(arguments.length)return h===void 0?this:this.each(function(T){m.offset.setOffset(this,h,T)});var g,C,_=this[0];if(_)return _.getClientRects().length?(g=_.getBoundingClientRect(),C=_.ownerDocument.defaultView,{top:g.top+C.pageYOffset,left:g.left+C.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var h,g,C,_=this[0],T={top:0,left:0};if(m.css(_,"position")==="fixed")g=_.getBoundingClientRect();else{for(g=this.offset(),C=_.ownerDocument,h=_.offsetParent||C.documentElement;h&&(h===C.body||h===C.documentElement)&&m.css(h,"position")==="static";)h=h.parentNode;h&&h!==_&&h.nodeType===1&&(T=m(h).offset(),T.top+=m.css(h,"borderTopWidth",!0),T.left+=m.css(h,"borderLeftWidth",!0))}return{top:g.top-T.top-m.css(_,"marginTop",!0),left:g.left-T.left-m.css(_,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var h=this.offsetParent;h&&m.css(h,"position")==="static";)h=h.offsetParent;return h||dr})}}),m.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(h,g){var C=g==="pageYOffset";m.fn[h]=function(_){return It(this,function(T,I,A){var U;if(w(T)?U=T:T.nodeType===9&&(U=T.defaultView),A===void 0)return U?U[g]:T[I];U?U.scrollTo(C?U.pageXOffset:A,C?A:U.pageYOffset):T[I]=A},h,_,arguments.length)}}),m.each(["top","left"],function(h,g){m.cssHooks[g]=Fn(v.pixelPosition,function(C,_){if(_)return _=wt(C,g),Jo.test(_)?m(C).position()[g]+"px":_})}),m.each({Height:"height",Width:"width"},function(h,g){m.each({padding:"inner"+h,content:g,"":"outer"+h},function(C,_){m.fn[_]=function(T,I){var A=arguments.length&&(C||typeof T!="boolean"),U=C||(T===!0||I===!0?"margin":"border");return It(this,function(j,X,ue){var de;return w(j)?_.indexOf("outer")===0?j["inner"+h]:j.document.documentElement["client"+h]:j.nodeType===9?(de=j.documentElement,Math.max(j.body["scroll"+h],de["scroll"+h],j.body["offset"+h],de["offset"+h],de["client"+h])):ue===void 0?m.css(j,X,U):m.style(j,X,ue,U)},g,A?T:void 0,A)}})}),m.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(h,g){m.fn[g]=function(C){return this.on(g,C)}}),m.fn.extend({bind:function(h,g,C){return this.on(h,null,g,C)},unbind:function(h,g){return this.off(h,null,g)},delegate:function(h,g,C,_){return this.on(g,h,C,_)},undelegate:function(h,g,C){return arguments.length===1?this.off(h,"**"):this.off(g,h||"**",C)},hover:function(h,g){return this.on("mouseenter",h).on("mouseleave",g||h)}}),m.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(h,g){m.fn[g]=function(C,_){return arguments.length>0?this.on(g,null,C,_):this.trigger(g)}});var iR=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;m.proxy=function(h,g){var C,_,T;if(typeof g=="string"&&(C=h[g],g=h,h=C),!!x(h))return _=i.call(arguments,2),T=function(){return h.apply(g||this,_.concat(i.call(arguments)))},T.guid=h.guid=h.guid||m.guid++,T},m.holdReady=function(h){h?m.readyWait++:m.ready(!0)},m.isArray=Array.isArray,m.parseJSON=JSON.parse,m.nodeName=D,m.isFunction=x,m.isWindow=w,m.camelCase=Ut,m.type=S,m.now=Date.now,m.isNumeric=function(h){var g=m.type(h);return(g==="number"||g==="string")&&!isNaN(h-parseFloat(h))},m.trim=function(h){return h==null?"":(h+"").replace(iR,"$1")};var aR=t.jQuery,sR=t.$;return m.noConflict=function(h){return t.$===m&&(t.$=sR),h&&t.jQuery===m&&(t.jQuery=aR),m},typeof n>"u"&&(t.jQuery=t.$=m),m})}(zp)),zp.exports}(function(e){(function(t){t(["jquery"],function(n){return function(){var r,o,i=0,a={error:"error",info:"info",success:"success",warning:"warning"},s={clear:x,remove:w,error:l,getContainer:c,info:f,options:{},subscribe:d,success:p,version:"2.1.4",warning:v},u;return s;function l(D,N,B){return k({type:a.error,iconClass:m().iconClasses.error,message:D,optionsOverride:B,title:N})}function c(D,N){return D||(D=m()),r=n("#"+D.containerId),r.length||N&&(r=E(D)),r}function f(D,N,B){return k({type:a.info,iconClass:m().iconClasses.info,message:D,optionsOverride:B,title:N})}function d(D){o=D}function p(D,N,B){return k({type:a.success,iconClass:m().iconClasses.success,message:D,optionsOverride:B,title:N})}function v(D,N,B){return k({type:a.warning,iconClass:m().iconClasses.warning,message:D,optionsOverride:B,title:N})}function x(D,N){var B=m();r||c(B),b(D,B,N)||y(B)}function w(D){var N=m();if(r||c(N),D&&n(":focus",D).length===0){P(D);return}r.children().length&&r.remove()}function y(D){for(var N=r.children(),B=N.length-1;B>=0;B--)b(n(N[B]),D)}function b(D,N,B){var z=B&&B.force?B.force:!1;return D&&(z||n(":focus",D).length===0)?(D[N.hideMethod]({duration:N.hideDuration,easing:N.hideEasing,complete:function(){P(D)}}),!0):!1}function E(D){return r=n("<div/>").attr("id",D.containerId).addClass(D.positionClass),r.appendTo(n(D.target)),r}function S(){return{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,closeMethod:!1,closeDuration:!1,closeEasing:!1,closeOnHover:!0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:!1,target:"body",closeHtml:'<button type="button">&times;</button>',closeClass:"toast-close-button",newestOnTop:!0,preventDuplicates:!1,progressBar:!1,progressClass:"toast-progress",rtl:!1}}function R(D){o&&o(D)}function k(D){var N=m(),B=D.iconClass||N.iconClass;if(typeof D.optionsOverride<"u"&&(N=n.extend(N,D.optionsOverride),B=D.optionsOverride.iconClass||B),Ke(N,D))return;i++,r=c(N,!0);var z=null,V=n("<div/>"),Z=n("<div/>"),K=n("<div/>"),ne=n("<div/>"),J=n(N.closeHtml),$={intervalId:null,hideEta:null,maxHideTime:null},Y={toastId:i,state:"visible",startTime:new Date,options:N,map:D};return he(),Se(),be(),R(Y),N.debug&&console&&console.log(Y),V;function ee(Ue){return Ue==null&&(Ue=""),Ue.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function he(){Ae(),$e(),et(),Qe(),it(),ze(),Pe(),me()}function me(){var Ue="";switch(D.iconClass){case"toast-success":case"toast-info":Ue="polite";break;default:Ue="assertive"}V.attr("aria-live",Ue)}function be(){N.closeOnHover&&V.hover(Oe,pt),!N.onclick&&N.tapToDismiss&&V.click(qe),N.closeButton&&J&&J.click(function(Ue){Ue.stopPropagation?Ue.stopPropagation():Ue.cancelBubble!==void 0&&Ue.cancelBubble!==!0&&(Ue.cancelBubble=!0),N.onCloseClick&&N.onCloseClick(Ue),qe(!0)}),N.onclick&&V.click(function(Ue){N.onclick(Ue),qe()})}function Se(){V.hide(),V[N.showMethod]({duration:N.showDuration,easing:N.showEasing,complete:N.onShown}),N.timeOut>0&&(z=setTimeout(qe,N.timeOut),$.maxHideTime=parseFloat(N.timeOut),$.hideEta=new Date().getTime()+$.maxHideTime,N.progressBar&&($.intervalId=setInterval(vt,10)))}function Ae(){D.iconClass&&V.addClass(N.toastClass).addClass(B)}function Pe(){N.newestOnTop?r.prepend(V):r.append(V)}function $e(){if(D.title){var Ue=D.title;N.escapeHtml&&(Ue=ee(D.title)),Z.append(Ue).addClass(N.titleClass),V.append(Z)}}function et(){if(D.message){var Ue=D.message;N.escapeHtml&&(Ue=ee(D.message)),K.append(Ue).addClass(N.messageClass),V.append(K)}}function Qe(){N.closeButton&&(J.addClass(N.closeClass).attr("role","button"),V.prepend(J))}function it(){N.progressBar&&(ne.addClass(N.progressClass),V.prepend(ne))}function ze(){N.rtl&&V.addClass("rtl")}function Ke(Ue,It){if(Ue.preventDuplicates){if(It.message===u)return!0;u=It.message}return!1}function qe(Ue){var It=Ue&&N.closeMethod!==!1?N.closeMethod:N.hideMethod,on=Ue&&N.closeDuration!==!1?N.closeDuration:N.hideDuration,cr=Ue&&N.closeEasing!==!1?N.closeEasing:N.hideEasing;if(!(n(":focus",V).length&&!Ue))return clearTimeout($.intervalId),V[It]({duration:on,easing:cr,complete:function(){P(V),clearTimeout(z),N.onHidden&&Y.state!=="hidden"&&N.onHidden(),Y.state="hidden",Y.endTime=new Date,R(Y)}})}function pt(){(N.timeOut>0||N.extendedTimeOut>0)&&(z=setTimeout(qe,N.extendedTimeOut),$.maxHideTime=parseFloat(N.extendedTimeOut),$.hideEta=new Date().getTime()+$.maxHideTime)}function Oe(){clearTimeout(z),$.hideEta=0,V.stop(!0,!0)[N.showMethod]({duration:N.showDuration,easing:N.showEasing})}function vt(){var Ue=($.hideEta-new Date().getTime())/$.maxHideTime*100;ne.width(Ue+"%")}}function m(){return n.extend({},S(),s.options)}function P(D){r||(r=c()),!D.is(":visible")&&(D.remove(),D=null,r.children().length===0&&(r.remove(),u=void 0))}}()})})(function(t,n){e.exports?e.exports=n($O()):window.toastr=n(window.jQuery)})})(hS);var HO=hS.exports;const Ot=rs(HO);function VO(){const[e,t]=W.useState(!1),[n,r]=W.useState(!1),[o,i]=W.useState([]),[a,s]=W.useState(""),[u,l]=W.useState(""),[c,f]=W.useState(""),[d,p]=W.useState(""),[v,x]=W.useState(""),[w,y]=W.useState(null),[b,E]=W.useState(null),[S,R]=W.useState(null),[k,m]=W.useState(!1),P="http://127.0.0.1:8000/RecognitionApp",D=W.useRef(null),N=()=>{r(!0),Pt.post(`${P}/getCustomerList`).then(K=>{i(K.data.customerList),r(!1)}).catch(K=>{if(K.response){Ot.error(K,"Something went Wrong!"),r(!1);return}Ot.error(K,"Something went Wrong!"),r(!1)})},B=()=>{r(!0);const K=new FormData;K.append("username",a),K.append("name",u),K.append("email",c),K.append("phone",d),K.append("gender",v),K.append("photo1",w),K.append("photo2",b),K.append("photo3",S),Pt.post(`${P}/registerCustomer`,K,{headers:{"Content-Type":"multipart/form-data"},timeout:18e4}).then(async ne=>{z(),m(!1),N(),r(!1),Ot.success("Add Customer Successful!","Success")}).catch(ne=>{if(ne.response)if(ne.response.status==460){Ot.error("This user has been existed!","Something went Wrong!"),r(!1);return}else if(ne.response.status==490){Ot.error("Invalid Email","Something went Wrong!"),r(!1);return}else if(ne.response.status==440){Ot.error("Invalid Username","Something went Wrong!"),r(!1);return}else if(ne.response.status==420){Ot.error(ne.response.data.error,"Something went Wrong!"),r(!1);return}else{Ot.error(ne,"Something went Wrong!"),r(!1);return}Ot.error(ne,"Something went Wrong!"),r(!1)})},z=()=>{s(""),l(""),f(""),x(""),p(""),y(null),E(null),R(null)},V=K=>{r(!0);const ne={customerId:K};Pt.post(`${P}/deleteCustomer`,dS.stringify(ne),{timeout:15e3}).then(async J=>{N(),r(!1),Ot.success("Delete Customer Successful!","Success")}).catch(J=>{if(J.response)if(J.response.status==460){Ot.error("Customer not exist!","Something went Wrong!"),r(!1);return}else if(J.response.status==500){Ot.error(J.response.data.error,"Something went Wrong!"),r(!1);return}else{Ot.error(J,"Something went Wrong!"),r(!1);return}Ot.error(J,"Something went Wrong!"),r(!1)})},Z=K=>{K==="open"&&!D.current?D.current=window.open("/webcam?type=register","webcamWindow","width=950,height=530"):K==="close"&&D.current&&(D.current.close(),D.current=null)};if(W.useEffect(()=>(N(),window.receivePhotoFromWebcam=(K,ne)=>{ne===3?y(K):ne===2?E(K):ne===1&&R(K)},t(!0),()=>{delete window.receivePhotoFromWebcam}),[]),W.useEffect(()=>{const K=setInterval(()=>{D.current&&D.current.closed&&(D.current=null)},1e3);return()=>clearInterval(K)},[]),e)return F.jsxs(F.Fragment,{children:[F.jsx("style",{jsx:!0,children:`
                        .btn-1 {
                            background: #0F0F6D;
                            color: #ffffff;
                            font-family: 'Poppins';
                            font-weight: bold;
                            cursor: pointer;
                            font-size: 1em;
                            padding: 1rem;
                            border: 0;
                            transition: all 0.5s;
                            border-radius: 10px;
                            width: auto;
                            position: relative;
                            user-select: none;
                            animation: thirdFadeIn 2s forwards;
                            animation-delay: 4.2s;

                            span {
                                position: absolute;
                                left: 75%;
                                top: 27%;
                                right: 5%;
                                bottom: 0;
                                opacity: 0;
                            }

                            &:hover {
                                background: #2b2bff;
                                transition: all 0.5s;
                                border-radius: 10px;
                                box-shadow: 0px 6px 15px #0000ff61;
                                padding: 1rem 3rem 1rem 1rem;

                                span {
                                    opacity: 1;
                                    transition: all 0.5s;
                                }
                            }


                        }
                    `}),F.jsxs(Fo,{show:k,onHide:()=>{m(!1),z(),Z("close")},size:"lg","aria-labelledby":"example-modal-sizes-title-lg",children:[F.jsx(Fo.Header,{closeButton:!0,children:F.jsx(Fo.Title,{children:"Add Customer"})}),F.jsx(Fo.Body,{children:F.jsx("div",{style:{width:"100%",height:"100%",padding:10,display:"flex",flexDirection:"column",gap:10},children:F.jsxs(Mn,{children:[F.jsxs(Mn.Group,{className:"mb-3",controlId:"photoForm",style:{display:"flex",flexDirection:"column",width:"100%"},children:[F.jsx(Mn.Label,{children:"Take a Photo"}),F.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:10,width:"100%",alignItems:"center",justifyContent:"center"},children:[w?F.jsx("img",{id:"photo1",src:w,style:{width:"30%",height:150,alignSelf:"center",cursor:"pointer"},onLoad:()=>URL.revokeObjectURL(w),onClick:()=>Z("open")}):F.jsx(E3,{style:{width:100,height:150,alignSelf:"center",cursor:"pointer"},onClick:()=>Z("open")}),b&&F.jsx("img",{id:"photo2",src:b,style:{width:"30%",height:150,alignSelf:"center",cursor:"pointer"},onLoad:()=>URL.revokeObjectURL(b),onClick:()=>Z("open")}),S&&F.jsx("img",{id:"photo3",src:S,style:{width:"30%",height:150,alignSelf:"center",cursor:"pointer"},onLoad:()=>URL.revokeObjectURL(S),onClick:()=>Z("open")})]})]}),F.jsxs(Mn.Group,{className:"mb-3",controlId:"Name",children:[F.jsx(Mn.Label,{children:"Username"}),F.jsx(Mn.Control,{type:"text",placeholder:"Jack0123",value:a,onChange:K=>s(K.target.value),autoFocus:!0})]}),F.jsxs(Mn.Group,{className:"mb-3",controlId:"Name",children:[F.jsx(Mn.Label,{children:"Name"}),F.jsx(Mn.Control,{type:"text",placeholder:"jack",value:u,onChange:K=>l(K.target.value)})]}),F.jsxs(Mn.Group,{className:"mb-3",controlId:"email",children:[F.jsx(Mn.Label,{children:"Email address"}),F.jsx(Mn.Control,{type:"email",placeholder:"name@example.com",value:c,onChange:K=>f(K.target.value)})]}),F.jsxs(Mn.Group,{className:"mb-3",controlId:"phone",children:[F.jsx(Mn.Label,{children:"Phone Number"}),F.jsx(Mn.Control,{type:"tel",placeholder:"+60123456789",value:d,onChange:K=>p(K.target.value)})]}),F.jsxs(Mn.Group,{className:"mb-3",controlId:"gender",children:[F.jsx(Mn.Label,{children:"Gender"}),F.jsxs("select",{className:"form-select",value:v,id:"genderSelect",onChange:K=>x(K.target.value),children:[F.jsx("option",{value:"",disabled:!0,children:"Select..."}),F.jsx("option",{value:"M",children:"Male"}),F.jsx("option",{value:"F",children:"Female"})]})]})]})})}),F.jsxs(Fo.Footer,{children:[F.jsx(Ui,{variant:"secondary",onClick:()=>{m(!1),z(),Z("close")},children:"Close"}),F.jsx(Ui,{variant:"primary",disabled:!a.trim()||!u.trim()||!c.trim()||!d.trim()||!v.trim()||!w,onClick:()=>{B()},children:"Add Customer"})]})]}),n&&F.jsx(sc,{}),F.jsxs("div",{className:"frs-container",children:[F.jsx(oh,{currentPage:"register"}),F.jsx("div",{className:"frs-second-container",children:F.jsxs("div",{style:{width:"100%",height:"85%",margin:"4%",background:"rgba(255, 255, 255, 0.85)",borderRadius:"20px",display:"flex",flexDirection:"column",padding:25,gap:25},children:[F.jsxs("div",{style:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[F.jsx("div",{style:{fontWeight:"bold",fontSize:"larger",paddingLeft:"10px"},children:"Registered Customer"}),F.jsxs("div",{className:"btn-1",onClick:()=>{m(!0)},children:["Add Customer",F.jsx("span",{className:"material-symbols-outlined",children:"person_add"})]})]}),F.jsx("div",{style:{width:"100%",height:"90%",display:"grid",overflowY:"auto",padding:10,gridTemplateColumns:"30% 30% 30%",gridTemplateRows:"20% 20% 20%",gridColumnGap:"4%",gridRowGap:"5%"},children:o&&o.map(K=>F.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:5,boxShadow:"rgba(0, 0, 0, 0.1) 5px 3px 12px 3px",padding:10,borderRadius:10},children:[F.jsx("img",{src:K.photo1_url,style:{userSelect:"none",width:"80px",height:"80px",borderRadius:"50%",alignSelf:"center",objectFit:"cover"}}),F.jsxs("div",{style:{display:"flex",flexDirection:"column",width:"80%",height:"100%",justifyContent:"center"},children:[F.jsx("div",{style:{width:"100%",display:"flex",flexDirection:"row",fontWeight:"bold"},children:K.name}),F.jsx("div",{style:{width:"100%",display:"flex",flexDirection:"row",fontSize:"small"},children:K.email}),F.jsx("div",{style:{width:"100%",display:"flex",flexDirection:"row",fontSize:"small"},children:K.phone}),F.jsx("div",{style:{width:"100%",display:"flex",flexDirection:"row",fontSize:"small"},children:K.gender})]}),F.jsx("div",{style:{height:"100%",display:"flex",alignItems:"center",paddingRight:10},children:F.jsx(S3,{style:{color:"red",width:30,height:"auto",cursor:"pointer"},onClick:()=>V(K.id)})})]},K.id))})]})}),F.jsxs("ul",{className:"frs-circles",children:[F.jsx("li",{}),F.jsx("li",{}),F.jsx("li",{}),F.jsx("li",{}),F.jsx("li",{}),F.jsx("li",{}),F.jsx("li",{}),F.jsx("li",{}),F.jsx("li",{}),F.jsx("li",{})]})]})]})}function GO(){const[e,t]=W.useState(!1),[n,r]=W.useState(!1),[o,i]=W.useState(!1),[a,s]=W.useState(!1),[u,l]=W.useState(!1),[c,f]=W.useState(!1),[d,p]=W.useState([]),[v,x]=W.useState([]),w="http://127.0.0.1:8000/RecognitionApp",y=W.useRef(null);let b=!1;const E=m=>{i(!0),m==="open"&&!y.current?(y.current=window.open("/webcam?type=recognition","webcamWindow","width=950,height=530"),b=!0):(m==="close"&&y.current&&(y.current.close(),y.current=null),i(!1))},S=()=>{i(!0),Pt.post(`${w}/getLoginRecord`).then(m=>{p(m.data.recordList),i(!1)}).catch(m=>{if(m.response){Ot.error(m,"Something went Wrong!"),i(!1);return}Ot.error(m,"Something went Wrong!"),i(!1)})},R=m=>{const P=new Date(m),D=Math.floor((Date.now()-P)/1e3);let N=D/3600;return N<1?(N=D/60,N<1?D<=1?D+" second ago":D+" seconds ago":N<2?Math.floor(N)+" minute ago":Math.floor(N)+" minutes ago"):N<2?Math.floor(N)+" hour ago":Math.floor(N)+" hours ago"},k=m=>{r(!0);const P={recordId:m};Pt.post(`${w}/deleteRecord`,dS.stringify(P),{timeout:15e3}).then(async D=>{S(),r(!1),Ot.success("Delete Record Successful!","Success")}).catch(D=>{if(D.response)if(D.response.status==420){Ot.error("Record not exist!","Something went Wrong!"),r(!1);return}else{Ot.error(D,"Something went Wrong!"),r(!1);return}Ot.error(D,"Something went Wrong!"),r(!1)})};if(W.useEffect(()=>(S(),window.receivePhotoFromWebcam=m=>{b=!0;const P=new FormData;P.append("photo",m),Pt.post(`${w}/webcamRecognition`,P,{headers:{"Content-Type":"multipart/form-data"},timeout:15e3}).then(async D=>{S(),Ot.success("Our Member!","Welcome"),i(!1),b=!1}).catch(D=>{if(D.response)if(D.response.status==420){Ot.error("Not a Member","Recognigtion Fail!"),i(!1),b=!1;return}else if(D.response.status==440){Ot.error(D.response.data.error,"Something went Wrong!"),i(!1),b=!1;return}else{Ot.error(D,"Something went Wrong!"),i(!1),b=!1;return}Ot.error(D,"Something went Wrong!"),i(!1),b=!1})},t(!0),()=>{delete window.receivePhotoFromWebcam}),[]),W.useEffect(()=>{const m=setInterval(()=>{y.current&&y.current.closed&&!b&&(i(!1),y.current=null)},1e3);return()=>clearInterval(m)},[]),e)return F.jsxs(F.Fragment,{children:[F.jsx("style",{jsx:!0,children:`
                        .camera-button{
                            transition: all 0.5s;
                            padding:30px;
                            width:300px;
                            height:300px;
                            box-shadow:0 0 32px 7.5px #11a9ec;

                            &:hover {
                                box-shadow:0 0 32px 7.5px #2b2bff;
                                padding: 50px;
                                scale:1.5;
                            }
                        }

                        .fade-in {
                            opacity: 1;
                        }

                        .fade-out {
                            opacity: 0;
                        }

                        .container-fade-in{
                            z-index: 1;
                            opacity: 1;
                        }

                        .container-fade-out{
                            opacity: 0;
                            z-index: 0;
                        }

                        .waitingdot{
                            display: flex;
                            flex-direction: row;
                            gap: 15px;
                            margin-bottom: 0px;
                            margin-top: auto;
                            color: gray;
                        }

                        .waitingdot li{
                            animation: pop 1s infinite;
                        }

                        .waitingdot li:nth-child(1){
                            animation-delay: 0s;
                        }

                        .waitingdot li:nth-child(2){
                            animation-delay: 0.25s;
                        }

                        .waitingdot li:nth-child(3){
                            animation-delay: 0.5s;
                        }


                        @keyframes pop {

                            0%{
                                opacity: 1;
                            }

                            100%{
                                opacity: 0;
                            }

                          }
                    `}),n&&F.jsx(sc,{zIndex:2}),F.jsxs("div",{className:"frs-container",children:[F.jsx(oh,{currentPage:"recognition"}),F.jsx("div",{className:"frs-second-container",children:F.jsxs("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",overflowX:"hidden"},children:[F.jsxs("div",{className:`${u?"container-fade-out":"container-fade-in"}`,style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"15%",position:"absolute",left:0,transition:"all 0.5s",paddingLeft:60},children:[F.jsxs("div",{className:"camera-button",style:{borderRadius:"50%",background:"rgba(255, 255, 255, 0.4)",position:"relative",cursor:"pointer"},onMouseOver:()=>s(!0),onMouseLeave:()=>s(!1),onClick:()=>{l(!0),S()},children:[F.jsx(C3,{className:`${a?"fade-in":"fade-out"}`,style:{width:150,height:150,alignSelf:"center",color:"#2b2bff",position:"absolute",top:"25%",left:"25%"}}),F.jsx(Fx,{className:`${a?"fade-out":"fade-in"}`,style:{width:150,height:150,alignSelf:"center",color:"#0F0F6D",position:"absolute",top:"25%",left:"25%"}})]}),F.jsx("div",{style:{fontSize:window.innerWidth<1700?"30px":"45px",fontWeight:"bold",fontFamily:"Poppins",color:"#fff"},children:"Start Recognition"})]}),F.jsx("div",{className:`${u?"container-fade-in":"container-fade-out"}`,style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",position:"absolute",left:0,transition:"all 0.5s",paddingLeft:60},children:F.jsx("div",{style:{height:"86%",background:"rgba(255, 255, 255, 0.85)",borderRadius:"20px",padding:"15px 0px 25px 25px",position:"absolute"},children:o?F.jsx("div",{style:{width:"50vw",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:F.jsxs("div",{style:{display:"flex",flexDirection:"row"},children:[F.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"gray",fontFamily:"Poppins"},children:"Wait for Recognition"}),F.jsxs("ul",{className:"waitingdot",children:[F.jsx("li",{}),F.jsx("li",{}),F.jsx("li",{})]})]})}):F.jsxs("div",{style:{height:"100%",display:"flex",flexDirection:"row",transition:"all 0.5s"},children:[F.jsxs("div",{style:{width:"40vw",display:"flex",flexDirection:"column",gap:20,padding:15},children:[F.jsxs("div",{style:{width:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},children:[F.jsx(Ui,{variant:"secondary",onClick:()=>{l(!1),E("close")},children:"< Back"}),F.jsxs(Ui,{variant:"primary",onClick:()=>E("open"),children:[F.jsx(Fx,{})," Open Camera"]})]}),F.jsx("div",{style:{width:"100%",display:"flex",flexDirection:"column",gap:20,overflow:"auto",padding:10},children:d&&d.map(m=>F.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:5,boxShadow:"rgba(0, 0, 0, 0.1) 5px 3px 12px 3px",padding:10,borderRadius:10},children:[F.jsx("img",{src:m.customer.photo1_url,style:{userSelect:"none",width:"80px",height:"80px",borderRadius:"50%",alignSelf:"center",objectFit:"cover"}}),F.jsxs("div",{style:{display:"flex",flexDirection:"row",width:"84%",height:"100%",alignItems:"center",justifyContent:"space-between",paddingLeft:10},children:[F.jsxs("div",{style:{width:"100%",display:"flex",flexDirection:"column",fontWeight:"bold",fontSize:"1.3rem",gap:5},children:[F.jsx("div",{style:{fontWeight:"bold",fontSize:"1.0rem"},children:m.customer.name}),F.jsx("div",{style:{fontWeight:"bold",fontSize:"0.8rem",color:"grey"},children:R(m.login_time)})]}),F.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:5,padding:"10px 0px"},children:[F.jsx(Ui,{variant:"primary",onClick:()=>{f(!0),x(m.customer)},children:"View"}),F.jsx(Ui,{variant:"danger",onClick:()=>k(m.id),children:"Remove"})]})]})]}))})]}),F.jsxs("div",{style:{width:c?"25vw":0,transition:"width 0.5s, opacity 0.3s",opacity:c?1:0,borderLeft:"solid lightgrey",padding:10,display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[F.jsx("img",{className:"illustration",src:v.photo1_url,style:{userSelect:"none",maxWidth:"90%",maxHeight:"50%",objectFit:"cover"}}),F.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:5},children:[F.jsx("div",{style:{fontWeight:"bold",fontSize:"1.5rem"},children:"Name:"}),F.jsx("div",{children:v.name})]}),F.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:5},children:[F.jsx("div",{style:{fontWeight:"bold",fontSize:"1.5rem"},children:"Email:"}),F.jsx("div",{children:v.email})]}),F.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:5},children:[F.jsx("div",{style:{fontWeight:"bold",fontSize:"1.5rem"},children:"Phone:"}),F.jsx("div",{children:v.phone})]}),F.jsxs("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"flex-end"},children:[F.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:5},children:[F.jsx("div",{style:{fontWeight:"bold",fontSize:"1.5rem"},children:"Gender:"}),F.jsx("div",{children:v.gender})]}),F.jsx(Ui,{variant:"secondary",style:{height:"65%"},onClick:()=>f(!1),children:"Close"})]})]})]})})})]})}),F.jsxs("ul",{className:"frs-circles",children:[F.jsx("li",{}),F.jsx("li",{}),F.jsx("li",{}),F.jsx("li",{}),F.jsx("li",{}),F.jsx("li",{}),F.jsx("li",{}),F.jsx("li",{}),F.jsx("li",{}),F.jsx("li",{})]})]})]})}var pS={exports:{}};(function(e,t){(function(r,o){e.exports=o(W)})(Zm,function(n){return function(r){var o={};function i(a){if(o[a])return o[a].exports;var s=o[a]={i:a,l:!1,exports:{}};return r[a].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=r,i.c=o,i.d=function(a,s,u){i.o(a,s)||Object.defineProperty(a,s,{enumerable:!0,get:u})},i.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},i.t=function(a,s){if(s&1&&(a=i(a)),s&8||s&4&&typeof a=="object"&&a&&a.__esModule)return a;var u=Object.create(null);if(i.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:a}),s&2&&typeof a!="string")for(var l in a)i.d(u,l,(function(c){return a[c]}).bind(null,l));return u},i.n=function(a){var s=a&&a.__esModule?function(){return a.default}:function(){return a};return i.d(s,"a",s),s},i.o=function(a,s){return Object.prototype.hasOwnProperty.call(a,s)},i.p="",i(i.s="./src/react-webcam.tsx")}({"./src/react-webcam.tsx":function(r,o,i){i.r(o);var a=i("react"),s=function(){var d=function(p,v){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var y in w)w.hasOwnProperty(y)&&(x[y]=w[y])},d(p,v)};return function(p,v){d(p,v);function x(){this.constructor=p}p.prototype=v===null?Object.create(v):(x.prototype=v.prototype,new x)}}(),u=function(){return u=Object.assign||function(d){for(var p,v=1,x=arguments.length;v<x;v++){p=arguments[v];for(var w in p)Object.prototype.hasOwnProperty.call(p,w)&&(d[w]=p[w])}return d},u.apply(this,arguments)},l=function(d,p){var v={};for(var x in d)Object.prototype.hasOwnProperty.call(d,x)&&p.indexOf(x)<0&&(v[x]=d[x]);if(d!=null&&typeof Object.getOwnPropertySymbols=="function")for(var w=0,x=Object.getOwnPropertySymbols(d);w<x.length;w++)p.indexOf(x[w])<0&&Object.prototype.propertyIsEnumerable.call(d,x[w])&&(v[x[w]]=d[x[w]]);return v};(function(){typeof window>"u"||(navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(p){var v=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return v?new Promise(function(x,w){v.call(navigator,p,x,w)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}))})();function c(){return!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)}var f=function(d){s(p,d);function p(v){var x=d.call(this,v)||this;return x.canvas=null,x.ctx=null,x.requestUserMediaId=0,x.unmounted=!1,x.state={hasUserMedia:!1},x}return p.prototype.componentDidMount=function(){var v=this,x=v.state,w=v.props;if(this.unmounted=!1,!c()){w.onUserMediaError("getUserMedia not supported");return}x.hasUserMedia||this.requestUserMedia(),w.children&&typeof w.children!="function"&&console.warn("children must be a function")},p.prototype.componentDidUpdate=function(v){var x=this.props;if(!c()){x.onUserMediaError("getUserMedia not supported");return}var w=JSON.stringify(v.audioConstraints)!==JSON.stringify(x.audioConstraints),y=JSON.stringify(v.videoConstraints)!==JSON.stringify(x.videoConstraints),b=v.minScreenshotWidth!==x.minScreenshotWidth,E=v.minScreenshotHeight!==x.minScreenshotHeight;(y||b||E)&&(this.canvas=null,this.ctx=null),(w||y)&&(this.stopAndCleanup(),this.requestUserMedia())},p.prototype.componentWillUnmount=function(){this.unmounted=!0,this.stopAndCleanup()},p.stopMediaStream=function(v){v&&(v.getVideoTracks&&v.getAudioTracks?(v.getVideoTracks().map(function(x){v.removeTrack(x),x.stop()}),v.getAudioTracks().map(function(x){v.removeTrack(x),x.stop()})):v.stop())},p.prototype.stopAndCleanup=function(){var v=this.state;v.hasUserMedia&&(p.stopMediaStream(this.stream),v.src&&window.URL.revokeObjectURL(v.src))},p.prototype.getScreenshot=function(v){var x=this,w=x.state,y=x.props;if(!w.hasUserMedia)return null;var b=this.getCanvas(v);return b&&b.toDataURL(y.screenshotFormat,y.screenshotQuality)},p.prototype.getCanvas=function(v){var x=this,w=x.state,y=x.props;if(!this.video||!w.hasUserMedia||!this.video.videoHeight)return null;if(!this.ctx){var b=this.video.videoWidth,E=this.video.videoHeight;if(!this.props.forceScreenshotSourceSize){var S=b/E;b=y.minScreenshotWidth||this.video.clientWidth,E=b/S,y.minScreenshotHeight&&E<y.minScreenshotHeight&&(E=y.minScreenshotHeight,b=E*S)}this.canvas=document.createElement("canvas"),this.canvas.width=(v==null?void 0:v.width)||b,this.canvas.height=(v==null?void 0:v.height)||E,this.ctx=this.canvas.getContext("2d")}var R=this,k=R.ctx,m=R.canvas;return k&&m&&(m.width=(v==null?void 0:v.width)||m.width,m.height=(v==null?void 0:v.height)||m.height,y.mirrored&&(k.translate(m.width,0),k.scale(-1,1)),k.imageSmoothingEnabled=y.imageSmoothing,k.drawImage(this.video,0,0,(v==null?void 0:v.width)||m.width,(v==null?void 0:v.height)||m.height),y.mirrored&&(k.scale(-1,1),k.translate(-m.width,0))),m},p.prototype.requestUserMedia=function(){var v=this,x=this.props,w=function(E,S){var R={video:typeof S<"u"?S:!0};x.audio&&(R.audio=typeof E<"u"?E:!0),v.requestUserMediaId++;var k=v.requestUserMediaId;navigator.mediaDevices.getUserMedia(R).then(function(m){v.unmounted||k!==v.requestUserMediaId?p.stopMediaStream(m):v.handleUserMedia(null,m)}).catch(function(m){v.handleUserMedia(m)})};if("mediaDevices"in navigator)w(x.audioConstraints,x.videoConstraints);else{var y=function(E){return{optional:[{sourceId:E}]}},b=function(E){var S=E.deviceId;return typeof S=="string"?S:Array.isArray(S)&&S.length>0?S[0]:typeof S=="object"&&S.ideal?S.ideal:null};MediaStreamTrack.getSources(function(E){var S=null,R=null;E.forEach(function(P){P.kind==="audio"?S=P.id:P.kind==="video"&&(R=P.id)});var k=b(x.audioConstraints);k&&(S=k);var m=b(x.videoConstraints);m&&(R=m),w(y(S),y(R))})}},p.prototype.handleUserMedia=function(v,x){var w=this.props;if(v||!x){this.setState({hasUserMedia:!1}),w.onUserMediaError(v);return}this.stream=x;try{this.video&&(this.video.srcObject=x),this.setState({hasUserMedia:!0})}catch{this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(x)})}w.onUserMedia(x)},p.prototype.render=function(){var v=this,x=this,w=x.state,y=x.props,b=y.audio;y.forceScreenshotSourceSize;var E=y.disablePictureInPicture;y.onUserMedia,y.onUserMediaError,y.screenshotFormat,y.screenshotQuality,y.minScreenshotWidth,y.minScreenshotHeight,y.audioConstraints,y.videoConstraints,y.imageSmoothing;var S=y.mirrored,R=y.style,k=R===void 0?{}:R,m=y.children,P=l(y,["audio","forceScreenshotSourceSize","disablePictureInPicture","onUserMedia","onUserMediaError","screenshotFormat","screenshotQuality","minScreenshotWidth","minScreenshotHeight","audioConstraints","videoConstraints","imageSmoothing","mirrored","style","children"]),D=S?u(u({},k),{transform:(k.transform||"")+" scaleX(-1)"}):k,N={getScreenshot:this.getScreenshot.bind(this)};return a.createElement(a.Fragment,null,a.createElement("video",u({autoPlay:!0,disablePictureInPicture:E,src:w.src,muted:!b,playsInline:!0,ref:function(B){v.video=B},style:D},P)),m&&m(N))},p.defaultProps={audio:!1,disablePictureInPicture:!1,forceScreenshotSourceSize:!1,imageSmoothing:!0,mirrored:!1,onUserMedia:function(){},onUserMediaError:function(){},screenshotFormat:"image/webp",screenshotQuality:.92},p}(a.Component);o.default=f},react:function(r,o){r.exports=n}}).default})})(pS);var qO=pS.exports;const KO=rs(qO);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var vS=function(e,t){return(vS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)r.hasOwnProperty(o)&&(n[o]=r[o])})(e,t)};function vo(e,t){function n(){this.constructor=e}vS(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function Ie(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(l){try{u(r.next(l))}catch(c){i(c)}}function s(l){try{u(r.throw(l))}catch(c){i(c)}}function u(l){l.done?o(l.value):new n(function(c){c(l.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})}function De(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(u){return function(l){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){a=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(c[0]===6&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(f){c=[6,f],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([u,l])}}}var XO=function(){function e(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return e.prototype.setPlatform=function(t,n){this.platform!=null&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+n+"."),this.platformName=t,this.platform=n},e.prototype.registerFlag=function(t,n,r){if(this.flagRegistry[t]={evaluationFn:n,setHook:r},this.urlFlags[t]!=null){var o=this.urlFlags[t];console.warn("Setting feature override from URL "+t+": "+o+"."),this.set(t,o)}},e.prototype.get=function(t){return t in this.flags?this.flags[t]:(this.flags[t]=this.evaluateFlag(t),this.flags[t])},e.prototype.getNumber=function(t){return this.get(t)},e.prototype.getBool=function(t){return this.get(t)},e.prototype.getFlags=function(){return this.flags},Object.defineProperty(e.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),e.prototype.set=function(t,n){if(this.flagRegistry[t]==null)throw new Error("Cannot set flag "+t+" as it has not been registered.");this.flags[t]=n,this.flagRegistry[t].setHook!=null&&this.flagRegistry[t].setHook(n)},e.prototype.evaluateFlag=function(t){if(this.flagRegistry[t]==null)throw new Error("Cannot evaluate flag '"+t+"': no evaluation function found.");return this.flagRegistry[t].evaluationFn()},e.prototype.setFlags=function(t){this.flags=Object.assign({},t)},e.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},e.prototype.populateURLFlags=function(){var t=this;if(this.global!==void 0&&this.global.location!==void 0&&this.global.location.search!==void 0){var n,r,o=(n=this.global.location.search,r={},n.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(i){for(var a=[],s=1;s<arguments.length;s++)a[s-1]=arguments[s];return YO(r,a[0],a[1]),a.join("=")}),r);"tfjsflags"in o&&o.tfjsflags.split(",").forEach(function(i){var a=i.split(":"),s=a[0],u=a[1];t.urlFlags[s]=function(l,c){if((c=c.toLowerCase())==="true"||c==="false")return c==="true";if(""+ +c===c)return+c;throw new Error("Could not parse value flag value "+c+" for flag "+l+".")}(s,u)})}},e}();function YO(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function ce(){return mS}var mS=null,hd=new Map,Dm=new Map;function gS(e,t){var n=xS(e,t);return hd.get(n)}function QO(e){return Dm.get(e)}function iw(e){for(var t=hd.entries(),n=[];;){var r=t.next(),o=r.done,i=r.value;if(o)break;var a=i[0],s=i[1];a.split("_")[0]===e&&n.push(s)}return n}function yS(e){var t=e.kernelName,n=e.backendName,r=xS(t,n);if(hd.has(r))throw new Error("The kernel '"+t+"' for backend '"+n+"' is already registered");hd.set(r,e)}function JO(e){var t=e.kernelName;Dm.has(t)&&console.warn("Overriding the gradient for '"+t+"'"),Dm.set(t,e)}function xS(e,t){return t+"_"+e}function Nm(e,t,n){return Math.max(e,Math.min(t,n))}function wS(e){return e%2==0?e:e+1}function ZO(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function M(e,t){if(!e)throw new Error(typeof t=="string"?t:t())}function Tt(e,t,n){n===void 0&&(n=""),M(Nn(e,t),function(){return n+" Shapes "+e+" and "+t+" must match"})}function Tu(e){M(e!=null,function(){return"The input to the tensor constructor must be a non-null value."})}function mu(e,t,n){if(t===void 0&&(t=[]),n===void 0&&(n=!1),t==null&&(t=[]),Array.isArray(e)||zo(e)&&!n)for(var r=0;r<e.length;++r)mu(e[r],t,n);else t.push(e);return t}function Fe(e){if(e.length===0)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function Nn(e,t){if(e===t)return!0;if(e==null||t==null||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function rn(e){return e%1==0}function eM(e){if(Math.tanh!=null)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)}function Am(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function Qs(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function aw(e,t,n){return t===void 0&&(t=function(r){return 0}),new Promise(function(r,o){var i=0,a=function(){if(e())r();else{i++;var s=t(i);n!=null&&i>=n?o():setTimeout(a,s)}};a()})}function tM(e,t){for(var n=1,r=-1,o=0;o<e.length;++o)if(e[o]>=0)n*=e[o];else if(e[o]===-1){if(r!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+o);r=o}else if(e[o]<0)throw Error("Shapes can not be < 0. Found "+e[o]+" at dim "+o);if(r===-1){if(t>0&&t!==n)throw Error("Size("+t+") must match the product of shape "+e);return e}if(n===0)throw Error("Cannot infer the missing size in ["+e+"] when there are 0 elements");if(t%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+t+" / "+n);var i=e.slice();return i[r]=t/n,i}function kn(e,t){var n=t.length;return M((e=e==null?t.map(function(r,o){return o}):[].concat(e)).every(function(r){return r>=-n&&r<n}),function(){return"All values in axis param must be in range [-"+n+", "+n+") but got axis "+e}),M(e.every(function(r){return rn(r)}),function(){return"All values in axis param must be integers but got axis "+e}),e.map(function(r){return r<0?n+r:r})}function Oa(e,t){for(var n=[],r=[],o=t!=null&&Array.isArray(t)&&t.length===0,i=t==null||o?null:kn(t,e).sort(),a=0,s=0;s<e.length;++s){if(i!=null){if(i[a]===s&&e[s]!==1)throw new Error("Can't squeeze axis "+s+" since its dim '"+e[s]+"' is not 1");(i[a]==null||i[a]>s)&&e[s]===1&&(n.push(e[s]),r.push(s)),i[a]<=s&&a++}e[s]!==1&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function Hl(e,t){var n=null;if(e==null||e==="float32")n=new Float32Array(t);else if(e==="int32")n=new Int32Array(t);else{if(e!=="bool")throw new Error("Unknown data type "+e);n=new Uint8Array(t)}return n}function pd(e,t){var n=null;if(e==null||e==="float32")n=new Float32Array(t);else if(e==="int32")n=new Int32Array(t);else if(e==="bool")n=new Uint8Array(t);else{if(e!=="string")throw new Error("Unknown data type "+e);n=new Array(t)}return n}function nM(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+t+" being uploaded contains "+r+".")}}function rM(e){return e==="bool"||e==="complex64"||e==="float32"||e==="int32"||e==="string"}function oM(e,t){return t!=="complex64"&&(t!=="float32"||e==="complex64")&&(t!=="int32"||e==="float32"||e==="complex64")&&(t!=="bool"||e!=="bool")}function zo(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function bS(e){if(e==="float32"||e==="int32")return 4;if(e==="complex64")return 8;if(e==="bool")return 1;throw new Error("Unknown dtype "+e)}function iM(e){if(e==null)return 0;var t=0;return e.forEach(function(n){return t+=n.length}),t}function vy(e){return typeof e=="string"||e instanceof String}function aM(e){return typeof e=="boolean"}function sM(e){return typeof e=="number"}function dc(e){return Array.isArray(e)?dc(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":sM(e)?"float32":vy(e)?"string":aM(e)?"bool":"float32"}function Pm(e){return!!(e&&e.constructor&&e.call&&e.apply)}function Fm(e,t){for(var n=t;n<e;++n)if(e%n==0)return n;return e}function Uo(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function ES(e,t,n){if(t==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=mu(e)),n&&nM(e,t),function(i,a){return i instanceof Float32Array&&a==="float32"||i instanceof Int32Array&&a==="int32"||i instanceof Uint8Array&&a==="bool"}(e,t))return e;if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool"){for(var r=new Uint8Array(e.length),o=0;o<r.length;++o)Math.round(e[o])!==0&&(r[o]=1);return r}throw new Error("Unknown data type "+t)}function sw(e,t){if(e.length===0)return t[0];var n=e.reduce(function(r,o){return r*o});if(n===0)return[];if(n!==t.length)throw new Error("["+e+"] does not match the input size.");return function r(o,i,a){var s=new Array;if(i.length===1)for(var u=i[0],l=0;l<u;l++)s[l]=a[o+l];else{u=i[0];var c=i.slice(1),f=c.reduce(function(d,p){return d*p});for(l=0;l<u;l++)s[l]=r(o+l*f,c,a)}return s}(0,e,t)}function CS(e,t){for(var n=hc(e,t),r=0;r<n.length;r++)n[r]=1;return n}function hc(e,t){if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool")return new Uint8Array(e);throw new Error("Unknown data type "+t)}function No(){return ce().platform.now()}function SS(e){e.forEach(function(t){M(Number.isInteger(t)&&t>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+e+"]."})})}function uM(e,t){return t===void 0&&(t="utf-8"),t=t||"utf-8",ce().platform.encode(e,t)}function vd(e,t){return t===void 0&&(t="utf-8"),t=t||"utf-8",ce().platform.decode(e,t)}function uw(e,t,n){if(t===0)return 0;if(t===1)return e[0];for(var r=e[e.length-1],o=0;o<e.length-1;++o)r+=n[o]*e[o];return r}function lM(e,t,n){if(t===0)return[];if(t===1)return[e];for(var r=new Array(t),o=0;o<r.length-1;++o)r[o]=Math.floor(e/n[o]),e-=r[o]*n[o];return r[r.length-1]=e,r}var cM=function(){function e(t,n){this.backendTimer=t,this.logger=n,n==null&&(this.logger=new fM)}return e.prototype.profileKernel=function(t,n,r){var o,i=this,a=this.backendTimer.time(function(){o=r()});return o.forEach(function(s){s.data().then(function(u){(function(l,c,f){if(c!=="float32")return!1;for(var d=0;d<l.length;d++){var p=l[d];if(isNaN(p)||!isFinite(p))return console.warn("Found "+p+" in the result of '"+f+"'"),!0}})(u,s.dtype,t),a.then(function(l){var c="";l.getExtraProfileInfo!=null&&(c=l.getExtraProfileInfo()),i.logger.logKernelProfile(t,s,u,l.kernelMs,n,c)})})}),o},e}(),fM=function(){function e(){}return e.prototype.logKernelProfile=function(t,n,r,o,i,a){var s=typeof o=="number"?Qs(o+"ms",9):o.error,u=Qs(t,25),l=n.rank,c=n.size,f=Qs(n.shape.toString(),14),d="";for(var p in i){var v=i[p].shape||n.shape,x=v.length;d+=p+": "+x+"D "+(x>0?v:"")+" "}console.log("%c"+u+"	%c"+s+"	%c"+l+"D "+f+"	%c"+c+"	%c"+d+"	%c"+a,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},e}(),lw=20,Zu=3,Up=7;function dM(e,t,n,r){var o=Uo(t),i=function(l,c,f,d){var p=Fe(c),v=d[d.length-1],x=new Array(v).fill(0),w=c.length,y=f==="complex64"?tl(l):l;if(w>1)for(var b=0;b<p/v;b++)for(var E=b*v,S=0;S<v;S++)x[S]=Math.max(x[S],el(y[E+S],0,f).length);return x}(e,t,n,o),a=t.length,s=function l(c,f,d,p,v,x){x===void 0&&(x=!0);var w=d==="complex64"?2:1,y=f[0],b=f.length;if(b===0)return d==="complex64"?[el(tl(c)[0],0,d)]:d==="bool"?[_S(c[0])]:[c[0].toString()];if(b===1){if(y>lw){var E=Zu*w,S=Array.from(c.slice(0,E)),R=Array.from(c.slice((y-Zu)*w,y*w));return d==="complex64"&&(S=tl(S),R=tl(R)),["["+S.map(function(K,ne){return el(K,v[ne],d)}).join(", ")+", ..., "+R.map(function(K,ne){return el(K,v[y-Zu+ne],d)}).join(", ")+"]"]}return["["+(d==="complex64"?tl(c):Array.from(c)).map(function(K,ne){return el(K,v[ne],d)}).join(", ")+"]"]}var k=f.slice(1),m=p.slice(1),P=p[0]*w,D=[];if(y>lw){for(var N=0;N<Zu;N++){var B=(z=N*P)+P;D.push.apply(D,l(c.slice(z,B),k,d,m,v,!1))}for(D.push("..."),N=y-Zu;N<y;N++)B=(z=N*P)+P,D.push.apply(D,l(c.slice(z,B),k,d,m,v,N===y-1))}else for(N=0;N<y;N++){var z;B=(z=N*P)+P,D.push.apply(D,l(c.slice(z,B),k,d,m,v,N===y-1))}var V=b===2?",":"";for(D[0]="["+D[0]+V,N=1;N<D.length-1;N++)D[N]=" "+D[N]+V;var Z=`,
`;for(N=2;N<b;N++)Z+=`
`;return D[D.length-1]=" "+D[D.length-1]+"]"+(x?"":Z),D}(e,t,n,o,i),u=["Tensor"];return r&&(u.push("  dtype: "+n),u.push("  rank: "+a),u.push("  shape: ["+t+"]"),u.push("  values:")),u.push(s.map(function(l){return"    "+l}).join(`
`)),u.join(`
`)}function el(e,t,n){return Qs(Array.isArray(e)?parseFloat(e[0].toFixed(Up))+" + "+parseFloat(e[1].toFixed(Up))+"j":vy(e)?"'"+e+"'":n==="bool"?_S(e):parseFloat(e.toFixed(Up)).toString(),t)}function _S(e){return e===0?"false":"true"}function tl(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var Vl=function(){function e(t,n,r){var o=this;if(this.dtype=n,this.shape=t.slice(),this.size=Fe(t),r!=null){var i=r.length;M(i===this.size,function(){return"Length of values '"+i+"' does not match the size inferred by the shape '"+o.size+"'."})}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||pd(n,this.size),this.strides=Uo(t)}return e.prototype.set=function(t){for(var n=this,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];r.length===0&&(r=[0]),M(r.length===this.rank,function(){return"The number of provided coordinates ("+r.length+") must match the rank ("+n.rank+")"});var i=this.locToIndex(r);this.values[i]=t},e.prototype.get=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];t.length===0&&(t=[0]);for(var r=0,o=0,i=t;o<i.length;o++){var a=i[o];if(a<0||a>=this.shape[r]){var s="Requested out of range element at "+t+".   Buffer shape="+this.shape;throw new Error(s)}r++}for(var u=t[t.length-1],l=0;l<t.length-1;++l)u+=this.strides[l]*t[l];return this.values[u]},e.prototype.locToIndex=function(t){if(this.rank===0)return 0;if(this.rank===1)return t[0];for(var n=t[t.length-1],r=0;r<t.length-1;++r)n+=this.strides[r]*t[r];return n},e.prototype.indexToLoc=function(t){if(this.rank===0)return[];if(this.rank===1)return[t];for(var n=new Array(this.shape.length),r=0;r<n.length-1;++r)n[r]=Math.floor(t/this.strides[r]),t-=n[r]*this.strides[r];return n[n.length-1]=t,n},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.toTensor=function(){return Oo().makeTensor(this.values,this.shape,this.dtype)},e}(),Oo=null,se=null,kS=null,Gt=function(){function e(t,n,r,o){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=Fe(t),this.strides=Uo(t),this.dataId=r,this.id=o,this.rankType=this.rank<5?this.rank.toString():"higher"}return e.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},e.prototype.asScalar=function(){return this.throwIfDisposed(),M(this.size===1,function(){return"The array must have only 1 element."}),this.reshape([])},e.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},e.prototype.as2D=function(t,n){return this.throwIfDisposed(),this.reshape([t,n])},e.prototype.as3D=function(t,n,r){return this.throwIfDisposed(),this.reshape([t,n,r])},e.prototype.as4D=function(t,n,r,o){return this.throwIfDisposed(),this.reshape([t,n,r,o])},e.prototype.as5D=function(t,n,r,o,i){return this.throwIfDisposed(),this.reshape([t,n,r,o,i])},e.prototype.asType=function(t){return this.throwIfDisposed(),se.cast(this,t)},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.buffer=function(){return Ie(this,void 0,void 0,function(){var t;return De(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return t=n.sent(),[2,se.buffer(this.shape,this.dtype,t)]}})})},e.prototype.bufferSync=function(){return se.buffer(this.shape,this.dtype,this.dataSync())},e.prototype.array=function(){return Ie(this,void 0,void 0,function(){var t;return De(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return t=n.sent(),[2,sw(this.shape,t)]}})})},e.prototype.arraySync=function(){return sw(this.shape,this.dataSync())},e.prototype.data=function(){return Ie(this,void 0,void 0,function(){var t,n;return De(this,function(r){switch(r.label){case 0:return this.throwIfDisposed(),t=Oo().read(this.dataId),this.dtype!=="string"?[3,2]:[4,t];case 1:n=r.sent();try{return[2,n.map(function(o){return vd(o)})]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}r.label=2;case 2:return[2,t]}})})},e.prototype.dataSync=function(){this.throwIfDisposed();var t=Oo().readSync(this.dataId);if(this.dtype==="string")try{return t.map(function(n){return vd(n)})}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t},e.prototype.bytes=function(){return Ie(this,void 0,void 0,function(){var t;return De(this,function(n){switch(n.label){case 0:return this.throwIfDisposed(),[4,Oo().read(this.dataId)];case 1:return t=n.sent(),this.dtype==="string"?[2,t]:[2,new Uint8Array(t.buffer)]}})})},e.prototype.dispose=function(){this.isDisposed||(Oo().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),e.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},e.prototype.toFloat=function(){return this.asType("float32")},e.prototype.toInt=function(){return this.asType("int32")},e.prototype.toBool=function(){return this.asType("bool")},e.prototype.print=function(t){return t===void 0&&(t=!1),se.print(this,t)},e.prototype.reshape=function(t){return this.throwIfDisposed(),se.reshape(this,t)},e.prototype.reshapeAs=function(t){return this.throwIfDisposed(),this.reshape(t.shape)},e.prototype.expandDims=function(t){return t===void 0&&(t=0),se.expandDims(this,t)},e.prototype.cumsum=function(t,n,r){return t===void 0&&(t=0),n===void 0&&(n=!1),r===void 0&&(r=!1),se.cumsum(this,t,n,r)},e.prototype.squeeze=function(t){return this.throwIfDisposed(),se.squeeze(this,t)},e.prototype.clone=function(){return this.throwIfDisposed(),se.clone(this)},e.prototype.oneHot=function(t,n,r){return this.throwIfDisposed(),se.oneHot(this,t,n,r)},e.prototype.toString=function(t){return t===void 0&&(t=!1),dM(this.dataSync(),this.shape,this.dtype,t)},e.prototype.tile=function(t){return this.throwIfDisposed(),se.tile(this,t)},e.prototype.gather=function(t,n){return n===void 0&&(n=0),this.throwIfDisposed(),se.gather(this,t,n)},e.prototype.matMul=function(t,n,r){return n===void 0&&(n=!1),r===void 0&&(r=!1),this.throwIfDisposed(),se.matMul(this,t,n,r)},e.prototype.dot=function(t){return this.throwIfDisposed(),se.dot(this,t)},e.prototype.norm=function(t,n,r){return t===void 0&&(t="euclidean"),n===void 0&&(n=null),r===void 0&&(r=!1),this.throwIfDisposed(),se.norm(this,t,n,r)},e.prototype.slice=function(t,n){return this.throwIfDisposed(),se.slice(this,t,n)},e.prototype.reverse=function(t){return this.throwIfDisposed(),se.reverse(this,t)},e.prototype.concat=function(t,n){return n===void 0&&(n=0),this.throwIfDisposed(),t instanceof e&&(t=[t]),se.concat([this].concat(t),n)},e.prototype.split=function(t,n){return n===void 0&&(n=0),this.throwIfDisposed(),se.split(this,t,n)},e.prototype.stack=function(t,n){return n===void 0&&(n=0),se.stack([this,t],n)},e.prototype.unstack=function(t){return t===void 0&&(t=0),se.unstack(this,t)},e.prototype.pad=function(t,n){return n===void 0&&(n=0),se.pad(this,t,n)},e.prototype.batchNormalization=function(t,n,r,o,i){return r===void 0&&(r=.001),kS("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(t,n,i,o,r)},e.prototype.batchNorm=function(t,n,r,o,i){return i===void 0&&(i=.001),this.throwIfDisposed(),se.batchNorm(this,t,n,r,o,i)},e.prototype.all=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),se.all(this,t,n)},e.prototype.any=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),se.any(this,t,n)},e.prototype.logSumExp=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),se.logSumExp(this,t,n)},e.prototype.sum=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),se.sum(this,t,n)},e.prototype.prod=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),se.prod(this,t,n)},e.prototype.mean=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),se.mean(this,t,n)},e.prototype.min=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),se.min(this,t,n)},e.prototype.max=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),se.max(this,t,n)},e.prototype.argMin=function(t){return t===void 0&&(t=null),this.throwIfDisposed(),se.argMin(this,t)},e.prototype.argMax=function(t){return t===void 0&&(t=null),this.throwIfDisposed(),se.argMax(this,t)},e.prototype.cast=function(t){return this.throwIfDisposed(),se.cast(this,t)},e.prototype.add=function(t){return this.throwIfDisposed(),se.add(this,t)},e.prototype.addStrict=function(t){return this.throwIfDisposed(),se.addStrict(this,t)},e.prototype.atan2=function(t){return this.throwIfDisposed(),se.atan2(this,t)},e.prototype.sub=function(t){return this.throwIfDisposed(),se.sub(this,t)},e.prototype.subStrict=function(t){return this.throwIfDisposed(),se.subStrict(this,t)},e.prototype.pow=function(t){return this.throwIfDisposed(),se.pow(this,t)},e.prototype.powStrict=function(t){return this.throwIfDisposed(),se.powStrict(this,t)},e.prototype.mul=function(t){return this.throwIfDisposed(),se.mul(this,t)},e.prototype.mulStrict=function(t){return this.throwIfDisposed(),se.mulStrict(this,t)},e.prototype.div=function(t){return this.throwIfDisposed(),se.div(this,t)},e.prototype.divNoNan=function(t){return this.throwIfDisposed(),se.divNoNan(this,t)},e.prototype.floorDiv=function(t){return this.throwIfDisposed(),se.floorDiv(this,t)},e.prototype.divStrict=function(t){return this.throwIfDisposed(),se.divStrict(this,t)},e.prototype.minimum=function(t){return this.throwIfDisposed(),se.minimum(this,t)},e.prototype.minimumStrict=function(t){return this.throwIfDisposed(),se.minimumStrict(this,t)},e.prototype.maximum=function(t){return this.throwIfDisposed(),se.maximum(this,t)},e.prototype.maximumStrict=function(t){return this.throwIfDisposed(),se.maximumStrict(this,t)},e.prototype.mod=function(t){return this.throwIfDisposed(),se.mod(this,t)},e.prototype.modStrict=function(t){return this.throwIfDisposed(),se.modStrict(this,t)},e.prototype.squaredDifferenceStrict=function(t){return this.throwIfDisposed(),se.squaredDifferenceStrict(this,t)},e.prototype.transpose=function(t){return this.throwIfDisposed(),se.transpose(this,t)},e.prototype.notEqual=function(t){return this.throwIfDisposed(),se.notEqual(this,t)},e.prototype.notEqualStrict=function(t){return this.throwIfDisposed(),se.notEqualStrict(this,t)},e.prototype.less=function(t){return this.throwIfDisposed(),se.less(this,t)},e.prototype.lessStrict=function(t){return this.throwIfDisposed(),se.lessStrict(this,t)},e.prototype.equal=function(t){return this.throwIfDisposed(),se.equal(this,t)},e.prototype.equalStrict=function(t){return this.throwIfDisposed(),se.equalStrict(this,t)},e.prototype.lessEqual=function(t){return this.throwIfDisposed(),se.lessEqual(this,t)},e.prototype.lessEqualStrict=function(t){return this.throwIfDisposed(),se.lessEqualStrict(this,t)},e.prototype.greater=function(t){return this.throwIfDisposed(),se.greater(this,t)},e.prototype.greaterStrict=function(t){return this.throwIfDisposed(),se.greaterStrict(this,t)},e.prototype.greaterEqual=function(t){return this.throwIfDisposed(),se.greaterEqual(this,t)},e.prototype.greaterEqualStrict=function(t){return this.throwIfDisposed(),se.greaterEqualStrict(this,t)},e.prototype.logicalAnd=function(t){return this.throwIfDisposed(),se.logicalAnd(this,t)},e.prototype.logicalOr=function(t){return this.throwIfDisposed(),se.logicalOr(this,t)},e.prototype.logicalNot=function(){return this.throwIfDisposed(),se.logicalNot(this)},e.prototype.logicalXor=function(t){return this.throwIfDisposed(),se.logicalXor(this,t)},e.prototype.where=function(t,n){return this.throwIfDisposed(),se.where(t,this,n)},e.prototype.neg=function(){return this.throwIfDisposed(),se.neg(this)},e.prototype.ceil=function(){return this.throwIfDisposed(),se.ceil(this)},e.prototype.floor=function(){return this.throwIfDisposed(),se.floor(this)},e.prototype.sign=function(){return this.throwIfDisposed(),se.sign(this)},e.prototype.isNaN=function(){return this.throwIfDisposed(),se.isNaN(this)},e.prototype.isInf=function(){return this.throwIfDisposed(),se.isInf(this)},e.prototype.isFinite=function(){return this.throwIfDisposed(),se.isFinite(this)},e.prototype.exp=function(){return this.throwIfDisposed(),se.exp(this)},e.prototype.expm1=function(){return this.throwIfDisposed(),se.expm1(this)},e.prototype.log=function(){return this.throwIfDisposed(),se.log(this)},e.prototype.log1p=function(){return this.throwIfDisposed(),se.log1p(this)},e.prototype.sqrt=function(){return this.throwIfDisposed(),se.sqrt(this)},e.prototype.rsqrt=function(){return this.throwIfDisposed(),se.rsqrt(this)},e.prototype.square=function(){return this.throwIfDisposed(),se.square(this)},e.prototype.reciprocal=function(){return this.throwIfDisposed(),se.reciprocal(this)},e.prototype.abs=function(){return this.throwIfDisposed(),se.abs(this)},e.prototype.clipByValue=function(t,n){return this.throwIfDisposed(),se.clipByValue(this,t,n)},e.prototype.relu=function(){return this.throwIfDisposed(),se.relu(this)},e.prototype.relu6=function(){return this.throwIfDisposed(),se.relu6(this)},e.prototype.elu=function(){return this.throwIfDisposed(),se.elu(this)},e.prototype.selu=function(){return this.throwIfDisposed(),se.selu(this)},e.prototype.leakyRelu=function(t){return t===void 0&&(t=.2),this.throwIfDisposed(),se.leakyRelu(this,t)},e.prototype.prelu=function(t){return this.throwIfDisposed(),se.prelu(this,t)},e.prototype.sigmoid=function(){return this.throwIfDisposed(),se.sigmoid(this)},e.prototype.logSigmoid=function(){return this.throwIfDisposed(),se.logSigmoid(this)},e.prototype.softplus=function(){return this.throwIfDisposed(),se.softplus(this)},e.prototype.zerosLike=function(){return this.throwIfDisposed(),se.zerosLike(this)},e.prototype.onesLike=function(){return this.throwIfDisposed(),se.onesLike(this)},e.prototype.sin=function(){return this.throwIfDisposed(),se.sin(this)},e.prototype.cos=function(){return this.throwIfDisposed(),se.cos(this)},e.prototype.tan=function(){return this.throwIfDisposed(),se.tan(this)},e.prototype.asin=function(){return this.throwIfDisposed(),se.asin(this)},e.prototype.acos=function(){return this.throwIfDisposed(),se.acos(this)},e.prototype.atan=function(){return this.throwIfDisposed(),se.atan(this)},e.prototype.sinh=function(){return this.throwIfDisposed(),se.sinh(this)},e.prototype.cosh=function(){return this.throwIfDisposed(),se.cosh(this)},e.prototype.tanh=function(){return this.throwIfDisposed(),se.tanh(this)},e.prototype.asinh=function(){return this.throwIfDisposed(),se.asinh(this)},e.prototype.acosh=function(){return this.throwIfDisposed(),se.acosh(this)},e.prototype.atanh=function(){return this.throwIfDisposed(),se.atanh(this)},e.prototype.erf=function(){return this.throwIfDisposed(),se.erf(this)},e.prototype.round=function(){return this.throwIfDisposed(),se.round(this)},e.prototype.step=function(t){return t===void 0&&(t=0),this.throwIfDisposed(),se.step(this,t)},e.prototype.softmax=function(t){return t===void 0&&(t=-1),this.throwIfDisposed(),se.softmax(this,t)},e.prototype.logSoftmax=function(t){return t===void 0&&(t=-1),this.throwIfDisposed(),se.logSoftmax(this,t)},e.prototype.resizeBilinear=function(t,n){return n===void 0&&(n=!1),this.throwIfDisposed(),se.image.resizeBilinear(this,t,n)},e.prototype.resizeNearestNeighbor=function(t,n){return n===void 0&&(n=!1),this.throwIfDisposed(),se.image.resizeNearestNeighbor(this,t,n)},e.prototype.conv1d=function(t,n,r,o,i,a){return o===void 0&&(o="NWC"),i===void 0&&(i=1),this.throwIfDisposed(),se.conv1d(this,t,n,r,o,i,a)},e.prototype.conv2d=function(t,n,r,o,i,a){return o===void 0&&(o="NHWC"),i===void 0&&(i=[1,1]),this.throwIfDisposed(),se.conv2d(this,t,n,r,o,i,a)},e.prototype.conv2dTranspose=function(t,n,r,o,i){return this.throwIfDisposed(),se.conv2dTranspose(this,t,n,r,o,i)},e.prototype.depthwiseConv2D=function(t,n,r,o,i,a){return o===void 0&&(o="NHWC"),i===void 0&&(i=[1,1]),this.throwIfDisposed(),se.depthwiseConv2d(this,t,n,r,o,i,a)},e.prototype.separableConv2d=function(t,n,r,o,i,a){return i===void 0&&(i=[1,1]),a===void 0&&(a="NHWC"),this.throwIfDisposed(),se.separableConv2d(this,t,n,r,o,i,a)},e.prototype.avgPool=function(t,n,r,o){return this.throwIfDisposed(),se.avgPool(this,t,n,r,o)},e.prototype.maxPool=function(t,n,r,o){return this.throwIfDisposed(),se.maxPool(this,t,n,r,o)},e.prototype.localResponseNormalization=function(t,n,r,o){return t===void 0&&(t=5),n===void 0&&(n=1),r===void 0&&(r=1),o===void 0&&(o=.5),se.localResponseNormalization(this,t,n,r,o)},e.prototype.pool=function(t,n,r,o,i){return this.throwIfDisposed(),se.pool(this,t,n,r,o,i)},e.prototype.variable=function(t,n,r){return t===void 0&&(t=!0),this.throwIfDisposed(),Oo().makeVariable(this,t,n,r)},e.prototype.unsortedSegmentSum=function(t,n){return this.throwIfDisposed(),se.unsortedSegmentSum(this,t,n)},e.prototype.batchToSpaceND=function(t,n){return this.throwIfDisposed(),se.batchToSpaceND(this,t,n)},e.prototype.spaceToBatchND=function(t,n){return this.throwIfDisposed(),se.spaceToBatchND(this,t,n)},e.prototype.topk=function(t,n){return t===void 0&&(t=1),n===void 0&&(n=!0),this.throwIfDisposed(),se.topk(this,t,n)},e.prototype.stridedSlice=function(t,n,r,o,i,a,s,u){return o===void 0&&(o=0),i===void 0&&(i=0),a===void 0&&(a=0),s===void 0&&(s=0),u===void 0&&(u=0),this.throwIfDisposed(),se.stridedSlice(this,t,n,r,o,i,a,s,u)},e.prototype.depthToSpace=function(t,n){return this.throwIfDisposed(),se.depthToSpace(this,t,n)},e.prototype.fft=function(){return this.throwIfDisposed(),se.spectral.fft(this)},e.prototype.ifft=function(){return this.throwIfDisposed(),se.spectral.ifft(this)},e.prototype.rfft=function(){return this.throwIfDisposed(),se.spectral.rfft(this)},e.prototype.irfft=function(){return this.throwIfDisposed(),se.spectral.irfft(this)},e}();Object.defineProperty(Gt,Symbol.hasInstance,{value:function(e){return!!e&&e.dataId!=null&&e.shape!=null&&e.dtype!=null}});var cw,Om,Mm,Lm,Bm,gu=function(e){function t(n,r,o,i){var a=e.call(this,n.shape,n.dtype,n.dataId,i)||this;return a.trainable=r,a.name=o,a}return vo(t,e),t.prototype.assign=function(n){if(n.dtype!==this.dtype)throw new Error("dtype of the new value ("+n.dtype+") and previous value ("+this.dtype+") must match");if(!Nn(n.shape,this.shape))throw new Error("shape of the new value ("+n.shape+") and previous value ("+this.shape+") must match");Oo().disposeTensor(this),this.dataId=n.dataId,Oo().incRef(this,null)},t.prototype.dispose=function(){Oo().disposeVariable(this),this.isDisposedInternal=!0},t}(Gt);Object.defineProperty(gu,Symbol.hasInstance,{value:function(e){return e instanceof Gt&&e.assign!=null&&e.assign instanceof Function}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(cw||(cw={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(Om||(Om={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(Mm||(Mm={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(Lm||(Lm={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(Bm||(Bm={}));var hM={float32:Lm,int32:Om,bool:Mm,complex64:Bm};function jn(e,t){if(e==="string"||t==="string"){if(e==="string"&&t==="string")return"string";throw new Error("Can not upcast "+e+" with "+t)}return hM[e][t]}function $p(e){return jn(e,"int32")}function Yt(e,t){if(e.dtype===t.dtype)return[e,t];var n=jn(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function pM(e,t){M(e.dtype===t.dtype,function(){return"The dtypes of the first("+e.dtype+") and second("+t.dtype+") input must match"})}function RS(e){var t=[];return function n(r,o,i){if(r!=null){if(r instanceof Gt)return void o.push(r);if(a=r,!(!Array.isArray(a)&&typeof a!="object")){var a,s=r;for(var u in s){var l=s[u];i.has(l)||(i.add(l),n(l,o,i))}}}}(e,t,new Set),t}var Hp,fw=function(){function e(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return e.prototype.dispose=function(){for(var t in this.registeredVariables)this.registeredVariables[t].dispose()},e}(),vM=function(){function e(t){this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new fw}return e.prototype.ready=function(){return Ie(this,void 0,void 0,function(){var t,n,r;return De(this,function(o){switch(o.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then(function(){})];if(this.backendInstance!=null)return[2];t=this.getSortedBackends(),n=0,o.label=1;case 1:return n<t.length?(r=t[n],[4,this.initializeBackend(r).success]):[3,5];case 2:return o.sent()?[4,this.setBackend(r)]:[3,4];case 3:return o.sent(),[2];case 4:return n++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(e.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(this.backendInstance==null){var t=this.initializeBackendsAndReturnBest(),n=t.name;if(t.asyncInit)throw new Error("The highest priority backend '"+n+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(n)}return this.backendInstance},enumerable:!0,configurable:!0}),e.prototype.backendNames=function(){return Object.keys(this.registryFactory)},e.prototype.findBackend=function(t){return!(t in this.registry)&&(!(t in this.registryFactory)||this.initializeBackend(t).asyncInit)?null:this.registry[t]},e.prototype.findBackendFactory=function(t){return t in this.registryFactory?this.registryFactory[t].factory:null},e.prototype.registerBackend=function(t,n,r){return r===void 0&&(r=1),t in this.registryFactory?(console.warn(t+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[t]={factory:n,priority:r},!0)},e.prototype.setBackend=function(t){return Ie(this,void 0,void 0,function(){var n,r,o;return De(this,function(i){switch(i.label){case 0:if(this.registryFactory[t]==null)throw new Error("Backend name '"+t+"' not found in registry");return this.backendName=t,this.registry[t]!=null?[3,4]:(this.backendInstance=null,n=this.initializeBackend(t),r=n.success,n.asyncInit?[4,r]:[3,2]);case 1:return o=i.sent(),[3,3];case 2:o=r,i.label=3;case 3:if(!o)return[2,!1];i.label=4;case 4:return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new cM(this.backendInstance),[2,!0]}})})},e.prototype.setupRegisteredKernels=function(){var t=this;iw(this.backendName).forEach(function(n){n.setupFunc!=null&&n.setupFunc(t.backendInstance)})},e.prototype.disposeRegisteredKernels=function(t){var n=this;iw(t).forEach(function(r){r.disposeFunc!=null&&r.disposeFunc(n.registry[t])})},e.prototype.initializeBackend=function(t){var n=this,r=this.registryFactory[t];if(r==null)throw new Error("Cannot initialize backend "+t+", no registration found.");try{var o=r.factory();if(Promise.resolve(o)===o){var i=++this.pendingBackendInitId,a=o.then(function(s){return!(i<n.pendingBackendInitId)&&(n.registry[t]=s,n.pendingBackendInit=null,!0)}).catch(function(s){return!(i<n.pendingBackendInitId)&&(n.pendingBackendInit=null,console.warn("Initialization of backend "+t+" failed"),console.warn(s.stack||s.message),!1)});return this.pendingBackendInit=a,{success:a,asyncInit:!0}}return this.registry[t]=o,{success:!0,asyncInit:!1}}catch(s){return console.warn("Initialization of backend "+t+" failed"),console.warn(s.stack||s.message),{success:!1,asyncInit:!1}}},e.prototype.removeBackend=function(t){if(!(t in this.registryFactory))throw new Error(t+" backend not found in registry");this.backendName===t&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},e.prototype.getSortedBackends=function(){var t=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(n,r){return t.registryFactory[r].priority-t.registryFactory[n].priority})},e.prototype.initializeBackendsAndReturnBest=function(){for(var t=this.getSortedBackends(),n=0;n<t.length;n++){var r=t[n],o=this.initializeBackend(r),i=o.success,a=o.asyncInit;if(a||i)return{name:r,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")},e.prototype.moveData=function(t,n){var r=this.state.tensorInfo.get(n),o=r.backend,i=this.readSync(n);o.disposeData(n),r.backend=t,t.move(n,i,r.shape,r.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},e.prototype.tidy=function(t,n){var r,o=this,i=null;if(n==null){if(typeof t!="function")throw new Error("Please provide a function to tidy()");n=t}else{if(typeof t!="string"&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");i=t}return this.scopedRun(function(){return o.startScope(i)},function(){return o.endScope(r)},function(){return(r=n())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r})},e.prototype.scopedRun=function(t,n,r){t();try{var o=r();return n(),o}catch(i){throw n(),i}},e.prototype.nextTensorId=function(){return e.nextTensorId++},e.prototype.nextVariableId=function(){return e.nextVariableId++},e.prototype.clone=function(t){var n=this.makeTensorFromDataId(t.dataId,t.shape,t.dtype),r={x:t};return this.addTapeNode(this.state.activeScope.name,r,[n],function(o){return{x:function(){return o.toFloat()}}},[]),n},e.prototype.runKernel=function(t,n,r,o,i){return this.runKernelFunc(null,n,null,t,r,o,i)},e.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},e.prototype.checkKernelForMemLeak=function(t,n,r){var o=this.backend.numDataIds(),i=0;r.forEach(function(u){i+=u.dtype==="complex64"?3:1});var a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=o-n-i-a;if(s>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+s+" data ids) after running '"+t+"'")},e.prototype.runKernelFunc=function(t,n,r,o,i,a,s){var u,l=this;a===void 0&&(a=[]),s===void 0&&(s=[]);var c=[],f=this.isTapeOn();o==null&&(o=this.state.activeScope!=null?this.state.activeScope.name:"");var d,p=function(b){f&&(c=b.map(function(E){return l.keep(l.clone(E))}))},v=this.state.numBytes,x=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var w,y=gS(o,this.backendName);return d=y!=null?function(){var b=l.backend.numDataIds();w=y.kernelFunc({inputs:n,attrs:i,backend:l.backend});var E=Array.isArray(w)?w:[w];l.shouldCheckForMemLeaks()&&l.checkKernelForMemLeak(o,b,E);var S=E.map(function(k){var m=k.dataId,P=k.shape,D=k.dtype;return l.makeTensorFromDataId(m,P,D)}),R=S.filter(function(k,m){return s[m]});return p((a||[]).slice().concat(R)),S}:function(){var b=l.backend.numDataIds();w=l.tidy(function(){return t(l.backend,p)});var E=Array.isArray(w)?w:[w];return l.shouldCheckForMemLeaks()&&l.checkKernelForMemLeak(o,b,E),E},this.scopedRun(function(){return l.state.kernelDepth++},function(){return l.state.kernelDepth--},function(){u=l.ENV.getBool("DEBUG")?l.profiler.profileKernel(o,n,function(){return d()}):d()}),f&&this.addTapeNode(o,n,u,r,c),this.state.profiling&&this.state.activeProfile.kernels.push({name:o,bytesAdded:this.state.numBytes-v,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-x,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(n).map(function(b){return n[b].shape}),outputShapes:u.map(function(b){return b.shape})}),Array.isArray(w)?u:u[0]},e.prototype.makeTensor=function(t,n,r,o){if(t==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",o=o||this.backend;var i=t;r==="string"&&vy(t[0])&&(i=t.map(function(c){return uM(c)}));var a=o.write(i,n,r),s=new Gt(n,r,a,this.nextTensorId());if(this.incRef(s,o),r==="string"){var u=this.state.tensorInfo.get(a),l=iM(i);this.state.numBytes+=l-u.bytes,u.bytes=l}return s},e.prototype.makeTensorFromDataId=function(t,n,r,o){var i=new Gt(n,r=r||"float32",t,this.nextTensorId());return this.incRef(i,o),i},e.prototype.makeVariable=function(t,n,r,o){n===void 0&&(n=!0),r=r||this.nextVariableId().toString(),o!=null&&o!==t.dtype&&(t=t.asType(o));var i=new gu(t,n,r,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error("Variable with name "+i.name+" was already registered");return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i},e.prototype.incRef=function(t,n){var r=this.state.tensorInfo.has(t.dataId)?this.state.tensorInfo.get(t.dataId).refCount:0;if(this.state.numTensors++,t.dtype==="string"&&this.state.numStringTensors++,r===0){this.state.numDataBuffers++;var o=0;t.dtype!=="complex64"&&t.dtype!=="string"&&(o=t.size*bS(t.dtype)),this.state.tensorInfo.set(t.dataId,{backend:n||this.backend,dtype:t.dtype,shape:t.shape,bytes:o,refCount:0}),this.state.numBytes+=o}this.state.tensorInfo.get(t.dataId).refCount++,t instanceof gu||this.track(t)},e.prototype.disposeTensor=function(t){if(this.state.tensorInfo.has(t.dataId)){this.state.numTensors--,t.dtype==="string"&&this.state.numStringTensors--;var n=this.state.tensorInfo.get(t.dataId);n.refCount<=1?(t.dtype!=="complex64"&&(this.state.numBytes-=n.bytes),this.state.numDataBuffers--,n.backend.disposeData(t.dataId),this.state.tensorInfo.delete(t.dataId)):this.state.tensorInfo.get(t.dataId).refCount--}},e.prototype.disposeVariables=function(){for(var t in this.state.registeredVariables){var n=this.state.registeredVariables[t];this.disposeVariable(n)}},e.prototype.disposeVariable=function(t){this.disposeTensor(t),this.state.registeredVariables[t.name]!=null&&delete this.state.registeredVariables[t.name]},e.prototype.memory=function(){var t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,t.reasons==null&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t},e.prototype.profile=function(t){return Ie(this,void 0,void 0,function(){var n,r;return De(this,function(o){return this.state.profiling=!0,n=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=t(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(i){return i.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r,[2,this.state.activeProfile]})})},e.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},e.prototype.addTapeNode=function(t,n,r,o,i){var a=this,s={id:this.state.nextTapeNodeId++,kernelName:t,inputs:n,outputs:r,saved:i},u=QO(t);u!=null&&(o=u.gradFunc),o!=null&&(s.gradient=function(l){return l=l.map(function(c,f){if(c==null){var d=r[f],p=hc(d.size,d.dtype);return a.makeTensor(p,d.shape,d.dtype)}return c}),o(l.length>1?l:l[0],i)}),this.state.activeTape.push(s)},e.prototype.keep=function(t){return t.kept=!0,t},e.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},e.prototype.endTape=function(){this.state.gradientDepth--},e.prototype.startScope=function(t){var n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(n.name=t),this.state.scopeStack.push(n),this.state.activeScope=n},e.prototype.endScope=function(t){for(var n=this,r=RS(t),o=new Set(r.map(function(u){return u.id})),i=0;i<this.state.activeScope.track.length;i++){var a=this.state.activeScope.track[i];a.kept||o.has(a.id)||a.dispose()}var s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach(function(u){u.kept||u.scopeId!==s.id||n.track(u)})},e.prototype.gradients=function(t,n,r,o){var i=this;if(o===void 0&&(o=!1),M(n.length>0,function(){return"gradients() received an empty list of xs."}),r!=null&&r.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+r.dtype+"'");var a=this.scopedRun(function(){return i.startTape()},function(){return i.endTape()},function(){return i.tidy("forward",t)});M(a instanceof Gt,function(){return"The result y returned by f() must be a tensor."});var s=function(u,l,c){for(var f={},d={},p=0;p<l.length;p++)f[l[p].id]=!0;for(p=0;p<u.length;p++){var v=(k=u[p]).inputs;for(var x in v){for(var w=v[x],y=!1,b=0;b<l.length;b++)if(f[w.id]){k.outputs.forEach(function(N){return f[N.id]=!0}),y=!0,d[k.id]=!0;break}if(y)break}}var E={};E[c.id]=!0;var S={};for(p=u.length-1;p>=0;p--)for(v=(k=u[p]).inputs,b=0;b<k.outputs.length;b++)if(E[k.outputs[b].id]){for(var x in v)E[v[x].id]=!0,S[k.id]=!0;break}var R=[];for(p=0;p<u.length;p++){var k;if(d[(k=u[p]).id]&&S[k.id]){var m={};for(var x in k.inputs){var P=k.inputs[x];f[P.id]&&(m[x]=P)}var D=Object.assign({},k);D.inputs=m,D.outputs=k.outputs,R.push(D)}}return R}(this.state.activeTape,n,a);if(!o&&s.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var u,l,c={};c[a.id]=r??(u=a.shape,l=CS(Fe(u),"float32"),q.makeTensor(l,u,"float32")),function(d,p,v){for(var x=function(y){var b=p[y],E=[];if(b.outputs.forEach(function(m){var P=d[m.id];P!=null?E.push(P):E.push(null)}),b.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+b.kernelName+".");var S=b.gradient(E),R=function(m){if(!(m in S))throw new Error("Cannot backprop through input "+m+". Available gradients found: "+Object.keys(S)+".");var P=v(function(){return S[m]()});if(P.dtype!=="float32")throw new Error("Error in gradient for op "+b.kernelName+". The gradient of input "+m+" must have 'float32' dtype, but has '"+P.dtype+"'");var D=b.inputs[m];if(!Nn(P.shape,D.shape))throw new Error("Error in gradient for op "+b.kernelName+". The gradient of input '"+m+"' has shape '"+P.shape+"', which does not match the shape of the input '"+D.shape+"'");if(d[D.id]==null)d[D.id]=P;else{var N=d[D.id];d[D.id]=N.add(P),N.dispose()}};for(var k in b.inputs)R(k)},w=p.length-1;w>=0;w--)x(w)}(c,s,function(d){return i.tidy(d)});var f=n.map(function(d){return c[d.id]});return i.state.gradientDepth===0&&(i.state.activeTape.forEach(function(d){for(var p=0,v=d.saved;p<v.length;p++)v[p].dispose()}),i.state.activeTape=null),{value:a,grads:f}})},e.prototype.customGrad=function(t){var n=this;return M(Pm(t),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var r,o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];M(o.every(function(s){return s instanceof Gt}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var a={};return o.forEach(function(s,u){a[u]=s}),n.runKernelFunc(function(s,u){return M((r=t.apply(void 0,o.concat([u]))).value instanceof Gt,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),M(Pm(r.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),r.value},a,function(s,u){var l=r.gradFunc(s,u),c=Array.isArray(l)?l:[l];M(c.length===o.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),M(c.every(function(d){return d instanceof Gt}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var f={};return c.forEach(function(d,p){f[p]=function(){return d}}),f})}},e.prototype.readSync=function(t){return this.state.tensorInfo.get(t).backend.readSync(t)},e.prototype.read=function(t){return this.state.tensorInfo.get(t).backend.read(t)},e.prototype.time=function(t){return Ie(this,void 0,void 0,function(){var n,r;return De(this,function(o){switch(o.label){case 0:return n=No(),[4,this.backend.time(t)];case 1:return(r=o.sent()).wallMs=No()-n,[2,r]}})})},e.prototype.track=function(t){return this.state.activeScope!=null&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t},Object.defineProperty(e.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),e.prototype.reset=function(){for(var t in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new fw,this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},e.nextTensorId=0,e.nextVariableId=0,e}(),q=function(){var e=function(){if(Hp==null){var n=void 0;if(typeof window<"u")n=window;else if(typeof global<"u")n=global;else if(typeof process<"u")n=process;else{if(typeof self>"u")throw new Error("Could not find a global object");n=self}Hp=n}return Hp}();if(e._tfengine==null){var t=new XO(e);e._tfengine=new vM(t)}return function(n){mS=n}(e._tfengine.ENV),Oo=function(){return e._tfengine},e._tfengine}();function TS(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var ti=ce();ti.registerFlag("DEBUG",function(){return!1},function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),ti.registerFlag("IS_BROWSER",function(){return TS()}),ti.registerFlag("IS_NODE",function(){return typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0}),ti.registerFlag("IS_CHROME",function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),ti.registerFlag("PROD",function(){return!1}),ti.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return ti.getBool("DEBUG")}),ti.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),ti.registerFlag("IS_TEST",function(){return!1});var Gl,Dr,Tr,Na={},Vp={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function mM(e,t){Na[e]=t}function qo(e){e in Na||(Na[e]=function(n){if(n!==1&&n!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var r=function(o){if(typeof OffscreenCanvas<"u"&&o===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(n);return r.addEventListener("webglcontextlost",function(o){o.preventDefault(),delete Na[n]},!1),n===1?r.getContext("webgl",Vp)||r.getContext("experimental-webgl",Vp):r.getContext("webgl2",Vp)}(e));var t=Na[e];return t.isContextLost()?(delete Na[e],qo(e)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),Na[e])}function fh(e,t){return[t,e]}function bl(e){var t=Fe(e);return Am(Math.ceil(t/4))}function pc(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function my(e,t){var n,r,o,i,a,s,u,l,c,f=e;return ce().getNumber("WEBGL_VERSION")===2?(n=f.R32F,r=f.R16F,o=f.RGBA16F,i=f.RGBA32F,a=f.RED,s=4,u=1,l=f.HALF_FLOAT,c=f.FLOAT):(n=e.RGBA,r=e.RGBA,o=e.RGBA,i=f.RGBA,a=e.RGBA,s=4,u=4,l=t!=null?t.HALF_FLOAT_OES:null,c=e.FLOAT),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:o,internalFormatPackedFloat:i,textureFormatFloat:a,downloadTextureFormat:e.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:u,textureTypeHalfFloat:l,textureTypeFloat:c}}function Be(e,t,n){var r=n();return t&&function(o){var i=o.getError();if(i!==o.NO_ERROR)throw new Error("WebGL Error: "+wM(o,i))}(e),r}(function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"})(Gl||(Gl={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(Dr||(Dr={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(Tr||(Tr={}));var gM=596e-10,yM=65504;function xM(e){return!!(ce().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||e===0||gM<Math.abs(e)&&Math.abs(e)<yM)}function wM(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+t}}function Zc(e,t,n){return wi(e,t,function(){return e.getExtension(n)},'Extension "'+n+'" not supported on this browser.')}function bM(e,t,n){var r=wi(e,t,function(){return e.createShader(e.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(Be(e,t,function(){return e.shaderSource(r,n)}),Be(e,t,function(){return e.compileShader(r)}),e.getShaderParameter(r,e.COMPILE_STATUS)===!1)throw console.log(e.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function EM(e,t,n){var r=wi(e,t,function(){return e.createShader(e.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(Be(e,t,function(){return e.shaderSource(r,n)}),Be(e,t,function(){return e.compileShader(r)}),e.getShaderParameter(r,e.COMPILE_STATUS)===!1)throw function(o,i){var a=CM.exec(i);if(a==null)return console.log("Couldn't parse line number in error: "+i),void console.log(o);for(var s=+a[1],u=o.split(`
`),l=u.length.toString().length+2,c=u.map(function(w,y){return Qs((y+1).toString(),l)+w}),f=0,d=0;d<c.length;d++)f=Math.max(c[d].length,f);var p=c.slice(0,s-1),v=c.slice(s-1,s),x=c.slice(s);console.log(p.join(`
`)),console.log(i.split(`
`)[0]),console.log("%c "+Qs(v[0],f),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(x.join(`
`))}(n,e.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var Gp,qp,CM=/ERROR: [0-9]+:([0-9]+):/g;function SM(e,t){return wi(e,t,function(){return e.createProgram()},"Unable to create WebGLProgram.")}function _M(e,t,n){if(Be(e,t,function(){return e.linkProgram(n)}),e.getProgramParameter(n,e.LINK_STATUS)===!1)throw console.log(e.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function Kp(e,t,n){if(Be(e,t,function(){return e.validateProgram(n)}),e.getProgramParameter(n,e.VALIDATE_STATUS)===!1)throw console.log(e.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function kM(e,t,n){var r=wi(e,t,function(){return e.createBuffer()},"Unable to create WebGLBuffer");return Be(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,r)}),Be(e,t,function(){return e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW)}),r}function RM(e,t,n){var r=wi(e,t,function(){return e.createBuffer()},"Unable to create WebGLBuffer");return Be(e,t,function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r)}),Be(e,t,function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,n,e.STATIC_DRAW)}),r}function TM(e,t){return wi(e,t,function(){return e.createTexture()},"Unable to create WebGLTexture.")}function IM(e,t){var n=ce().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="["+e+"x"+t+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n)throw r="["+e+"x"+t+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+("["+n+"x"+n+"]")+".")}function DM(e,t){return wi(e,t,function(){return e.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function dw(e,t,n,r,o,i,a,s){var u=e.getAttribLocation(n,r);return u!==-1&&(Be(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,o)}),Be(e,t,function(){return e.vertexAttribPointer(u,i,e.FLOAT,!1,a,s)}),Be(e,t,function(){return e.enableVertexAttribArray(u)}),!0)}function NM(e,t,n,r){MM(e,r),Be(e,t,function(){return e.activeTexture(e.TEXTURE0+r)}),Be(e,t,function(){return e.bindTexture(e.TEXTURE_2D,n)})}function AM(e,t,n,r){return wi(e,t,function(){return e.getUniformLocation(n,r)},'uniform "'+r+'" not present in program.')}function PM(e,t,n){return e.getUniformLocation(t,n)}function FM(e,t,n,r,o,i){Be(e,t,function(){return NM(e,t,r,i)}),Be(e,t,function(){return e.uniform1i(o,i)})}function Xp(e,t,n,r){Be(e,t,function(){return e.bindFramebuffer(e.FRAMEBUFFER,r)}),Be(e,t,function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0)})}function hw(e,t,n){Be(e,t,function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)}),Be(e,t,function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)})}function ef(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+OM(e,t))}function OM(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+t}}function wi(e,t,n,r){var o=Be(e,t,function(){return n()});if(o==null)throw new Error(r);return o}function MM(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+n+"]")+".")}function md(e,t){return t===void 0&&(t=2),Fe(e.slice(0,e.length-t))}function gd(e){if(e.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function Yp(e){var t=[1,1,1];return e.length===0||e.length===1&&e[0]===1||(t=[md(e)].concat(gd(e))),t}function LM(e,t){var n;t===void 0&&(t=!1);var r=ce().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(r*=2,(e=e.map(function(l,c){return c>=e.length-2?wS(e[c]):e[c]})).length===1&&(e=[2,e[0]])),e.length!==2){var o=Oa(e);e=o.newShape}var i=Fe(e);if(e.length<=1&&i<=r)return[1,i];if(e.length===2&&e[0]<=r&&e[1]<=r)return e;if(e.length===3&&e[0]*e[1]<=r&&e[2]<=r)return[e[0]*e[1],e[2]];if(e.length===3&&e[0]<=r&&e[1]*e[2]<=r)return[e[0],e[1]*e[2]];if(e.length===4&&e[0]*e[1]*e[2]<=r&&e[3]<=r)return[e[0]*e[1]*e[2],e[3]];if(e.length===4&&e[0]<=r&&e[1]*e[2]*e[3]<=r)return[e[0],e[1]*e[2]*e[3]];if(t){var a=md(e),s=2,u=2;return e.length&&(s=(n=gd(e))[0],u=n[1]),Am(i=a*(s/2)*(u/2)).map(function(l){return 2*l})}return Am(i)}function tf(e){return e%2==0}function nf(e,t){if(Nn(e=e.slice(-2),t=t.slice(-2))||!e.length||!t.length||e[0]===0||e[1]===0||t[0]===0||t[1]===0)return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r||tf(n)&&tf(r)&&(e[0]===1||t[0]===1))return!0}return e[1]===t[1]&&tf(e[0])&&tf(t[0])}function BM(e){if(Gp==null){var t=qo(e);Gp=t.getParameter(t.MAX_TEXTURE_SIZE)}return Gp}function jM(e){if(qp==null){var t=qo(e);qp=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,qp)}function WM(e){if(e===0)return 0;var t=qo(e);return Kr(t,"EXT_disjoint_timer_query_webgl2")&&e===2?2:Kr(t,"EXT_disjoint_timer_query")?1:0}function Kr(e,t){return e.getExtension(t)!=null}function pw(e){try{if(qo(e)!=null)return!0}catch{return!1}return!1}function zM(e){if(e===0)return!1;var t=qo(e);if(e===1){if(!Kr(t,"OES_texture_float"))return!1}else if(!Kr(t,"EXT_color_buffer_float"))return!1;return jm(t)}function UM(e){if(e===0)return!1;var t=qo(e);if(e!==1){if(Kr(t,"EXT_color_buffer_float"))return jm(t);if(Kr(t,"EXT_color_buffer_half_float")){var n=t.getExtension("EXT_color_buffer_half_float");return function(r,o){var i=my(r,o),a=r.createTexture();r.bindTexture(r.TEXTURE_2D,a),r.texImage2D(r.TEXTURE_2D,0,i.internalFormatHalfFloat,1,1,0,i.textureFormatFloat,i.textureTypeHalfFloat,null);var s=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,s),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,a,0);var u=r.checkFramebufferStatus(r.FRAMEBUFFER)===r.FRAMEBUFFER_COMPLETE;return r.bindTexture(r.TEXTURE_2D,null),r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteTexture(a),r.deleteFramebuffer(s),u}(t,n)}return!1}return!!Kr(t,"OES_texture_float")&&!!Kr(t,"WEBGL_color_buffer_float")&&jm(t)}function jm(e){var t=my(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var o=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),o}function $M(e){return e===2&&qo(e).fenceSync!=null}var Je=ce();function IS(e){ce().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function Re(e,t){return q.tidy(e,t)}function Cr(e){RS(e).forEach(function(t){return t.dispose()})}function HM(e){return q.keep(e)}function yd(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];ce().getBool("IS_TEST")||console.warn.apply(console,e)}function pa(e,t){var n=e;if(zo(e))return t==="string"?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(n)||zo(n)&&t!=="string";)r.push(n.length),n=n[0];return Array.isArray(e)&&ce().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function o(i,a,s){if(s=s||[],!Array.isArray(i)&&!zo(i))return void M(a.length===0,function(){return"Element arr["+s.join("][")+"] is a primitive, but should be an array/TypedArray of "+a[0]+" elements"});M(a.length>0,function(){return"Element arr["+s.join("][")+"] should be a primitive, but is an array of "+i.length+" elements"}),M(i.length===a[0],function(){return"Element arr["+s.join("][")+"] should have "+a[0]+" elements, but has "+i.length+" elements"});for(var u=a.slice(1),l=0;l<i.length;++l)o(i[l],u,s.concat(l))}(e,r,[]),r}function vw(e,t,n,r){if(e!=null&&(e!=="numeric"&&e!==t||e==="numeric"&&t==="string"))throw new Error("Argument '"+n+"' passed to '"+r+"' must be "+e+" tensor, but got "+t+" tensor")}function O(e,t,n,r){if(r===void 0&&(r="numeric"),e instanceof Gt)return vw(r,e.dtype,t,n),e;var o=dc(e);if(o!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(o=r),vw(r,o,t,n),e==null||!zo(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string"){var i=e==null?"null":e.constructor.name;throw new Error("Argument '"+t+"' passed to '"+n+"' must be a Tensor or TensorLike, but got '"+i+"'")}var a=pa(e,o);zo(e)||Array.isArray(e)||(e=[e]);var s=o!=="string"?ES(e,o,ce().getBool("DEBUG")):mu(e,[],!0);return q.makeTensor(s,a,o)}function xd(e,t,n,r){if(r===void 0&&(r="numeric"),!Array.isArray(e))throw new Error("Argument "+t+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`");return e.map(function(o,i){return O(o,t+"["+i+"]",n)},r)}function DS(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function VM(e,t,n){for(var r=e.length+t.length,o=[],i=0,a=0,s=0;s<r;s++)n.indexOf(s)===-1?o.push(e[i++]):o.push(t[a++]);return o}function Gn(e,t){for(var n=[],r=e.length,o=0;o<r;o++)t.indexOf(o)===-1&&n.push(e[o]);return[n,t.map(function(i){return e[i]})]}function Sr(e,t){return VM(e,t.map(function(n){return 1}),t)}function Rr(e,t,n){M(DS(t,n),function(){return e+" supports only inner-most axes for now. Got axes "+t+" and rank-"+n+" input."})}function Ko(e,t){if(DS(e,t))return null;for(var n=[],r=0;r<t;++r)e.indexOf(r)===-1&&n.push(r);return e.forEach(function(o){return n.push(o)}),n}function gy(e){return e.map(function(t,n){return[n,t]}).sort(function(t,n){return t[1]-n[1]}).map(function(t){return t[0]})}function Xo(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}function GM(e,t){var n=e[0].length;e.forEach(function(o,i){M(o.length===n,function(){return"Error in concat"+n+"D: rank of tensors["+i+"] must be the same as the rank of the rest ("+n+")"})}),M(t>=0&&t<n,function(){return"Error in concat"+n+"D: axis must be between 0 and "+(n-1)+"."});var r=e[0];e.forEach(function(o,i){for(var a=0;a<n;a++)M(a===t||o[a]===r[a],function(){return"Error in concat"+n+"D: Shape of tensors["+i+"] ("+o+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+i+"."})})}function yu(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}function H(e){var t=Object.keys(e);if(t.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+t.length+" keys.");var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));var o=function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];q.startScope(n);try{var s=r.apply(void 0,i);return s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),q.endScope(s),s}catch(u){throw q.endScope(null),u}};return Object.defineProperty(o,"name",{value:n,configurable:!0}),o}Je.registerFlag("HAS_WEBGL",function(){return Je.getNumber("WEBGL_VERSION")>0}),Je.registerFlag("WEBGL_VERSION",function(){return pw(2)?2:pw(1)?1:0}),Je.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return Je.get("WEBGL_VERSION")===2}),Je.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),Je.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),Je.registerFlag("WEBGL_PACK",function(){return Je.getBool("HAS_WEBGL")}),Je.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return Je.getBool("WEBGL_PACK")}),Je.registerFlag("WEBGL_PACK_CLIP",function(){return Je.getBool("WEBGL_PACK")}),Je.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),Je.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return Je.getBool("WEBGL_PACK")}),Je.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return Je.getBool("WEBGL_PACK")}),Je.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return Je.getBool("WEBGL_PACK")}),Je.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return Je.getBool("WEBGL_PACK")}),Je.registerFlag("WEBGL_PACK_REDUCE",function(){return Je.getBool("WEBGL_PACK")}),Je.registerFlag("WEBGL_LAZILY_UNPACK",function(){return Je.getBool("WEBGL_PACK")}),Je.registerFlag("WEBGL_CONV_IM2COL",function(){return Je.getBool("WEBGL_PACK")}),Je.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return BM(Je.getNumber("WEBGL_VERSION"))}),Je.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return jM(Je.getNumber("WEBGL_VERSION"))}),Je.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var e=Je.getNumber("WEBGL_VERSION");return e===0?0:WM(e)}),Je.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return Je.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(e=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))));var e}),Je.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return zM(Je.getNumber("WEBGL_VERSION"))}),Je.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!Je.getBool("WEBGL_FORCE_F16_TEXTURES")&&Je.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),Je.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return UM(Je.getNumber("WEBGL_VERSION"))}),Je.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return $M(Je.getNumber("WEBGL_VERSION"))}),Je.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return Je.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),kS=IS;var Bn=H({complex_:function(e,t){var n=O(e,"real","complex"),r=O(t,"imag","complex");return Tt(n.shape,r.shape,"real and imag shapes, "+n.shape+" and "+r.shape+", must match in call to tf.complex()."),q.runKernelFunc(function(o){return o.complex(n,r)},{$real:n,$imag:r})}}),Gr=H({real_:function(e){var t=O(e,"input","real");return q.runKernelFunc(function(n){return n.real(t)},{$input:t})}}),Mo=H({imag_:function(e){var t=O(e,"input","imag");return q.runKernelFunc(function(n){return n.imag(t)},{$input:t})}});function Wn(e,t,n){return va(e,t,pa(e,n),n)}function va(e,t,n,r){if(r==null&&(r=dc(e)),r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!zo(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(t!=null){SS(t);var o=Fe(t),i=Fe(n);M(o===i,function(){return"Based on the provided shape, ["+t+"], the tensor should have "+o+" values but has "+i});for(var a=0;a<n.length;++a){var s=n[a],u=a!==n.length-1||s!==Fe(t.slice(a));M(n[a]===t[a]||!u,function(){return"Error creating a new Tensor. Inferred shape ("+n+") does not match the provided shape ("+t+"). "})}}return zo(e)||Array.isArray(e)||(e=[e]),t=t||n,e=r!=="string"?ES(e,r,ce().getBool("DEBUG")):mu(e,[],!0),q.makeTensor(e,t,r)}function Ee(e,t){if((zo(e)&&t!=="string"||Array.isArray(e))&&t!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(t==="string"&&zo(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return va(e,[],[],t)}function hn(e,t){Tu(e);var n=pa(e,t);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return va(e,null,n,t)}function oa(e,t,n){if(Tu(e),t!=null&&t.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var r=pa(e,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return va(e,t,r,n)}function yy(e,t,n){if(Tu(e),t!=null&&t.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var r=pa(e,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return va(e,t,r,n)}function gr(e,t,n){if(Tu(e),t!=null&&t.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var r=pa(e,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return va(e,t,r,n)}function qM(e,t,n){if(Tu(e),t!=null&&t.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var r=pa(e,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return va(e,t,r,n)}function KM(e,t,n){if(Tu(e),t!=null&&t.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var r=pa(e,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return va(e,t=t||r,r,n)}function XM(e,t,n,r){return t===void 0&&(t=!0),q.makeVariable(e,t,n,r)}function Iu(e,t){if(t===void 0&&(t="float32"),t==="complex64"){var n=Iu(e,"float32"),r=Wt(e,"float32");return Bn(n,r)}var o=CS(Fe(e),t);return q.makeTensor(o,e,t)}function Wt(e,t){if(t===void 0&&(t="float32"),t==="complex64"){var n=Wt(e,"float32"),r=Wt(e,"float32");return Bn(n,r)}var o=hc(Fe(e),t);return q.makeTensor(o,e,t)}function $o(e,t,n){return q.runKernelFunc(function(r){return r.fill(e,t,n)},{})}function YM(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");return q.runKernelFunc(function(r){return r.linspace(e,t,n)},{})}function wd(e,t,n,r){if(n===void 0&&(n=1),r===void 0&&(r="float32"),n===0)throw new Error("Cannot have a step of zero");if(e===t||e<t&&n<0||t<e&&n>1)return Wt([0],r);var o=hc(Math.abs(Math.ceil((t-e)/n)),r);t<e&&n===1&&(n=-1),o[0]=e;for(var i=1;i<o.length;i++)o[i]=o[i-1]+n;return hn(o,r)}var NS=H({onesLike_:function(e){var t=O(e,"x","onesLike");if(t.dtype==="complex64"){var n=NS(Gr(t)),r=Ct(Mo(t));return Bn(n,r)}return q.runKernelFunc(function(o){return o.onesLike(t)},{$x:t},function(o,i){return{$x:function(){return Ct(o)}}})}}),Ct=H({zerosLike_:function(e){var t=O(e,"x","zerosLike");return q.runKernelFunc(function(n){return n.zerosLike(t)},{$x:t},function(n,r){return{$x:function(){return Ct(n)}}})}}),bn=H({concat_:function(e,t){t===void 0&&(t=0),M(e.length>=1,function(){return"Pass at least one tensor to concat"});var n=xd(e,"tensors","concat");n[0].dtype==="complex64"&&n.forEach(function(s){if(s.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `+s.dtype+". ")}),t=kn(t,n[0].shape)[0];var r=yu(n.map(function(s){return s.shape}),t);if(Fe(r)===0)return Wn([],r);if((n=n.filter(function(s){return s.size>0})).length===1)return n[0];var o=n.map(function(s){return s.shape});GM(o,t);var i=n,a={axis:t};return q.runKernelFunc(function(s){return s.concat(n,t)},i,function(s){var u=o.map(function(l){return l[t]});return xy(s,u,t).map(function(l){return function(){return l}})},"Concat",a)}}),QM=H({concat1d_:function(e){return bn(e,0)}}),JM=H({concat2d_:function(e,t){return bn(e,t)}}),ZM=H({concat3d_:function(e,t){return bn(e,t)}}),e4=H({concat4d_:function(e,t){return bn(e,t)}}),xy=H({split_:function(e,t,n){n===void 0&&(n=0);var r,o=O(e,"x","split");return n=kn(n,o.shape)[0],typeof t=="number"?(M(o.shape[n]%t==0,function(){return"Number of splits must evenly divide the axis."}),r=new Array(t).fill(o.shape[n]/t)):(M(o.shape[n]===t.reduce(function(i,a){return i+a}),function(){return"The sum of sizes must match the size of the axis dimension."}),r=t),q.runKernelFunc(function(i){return i.split(o,r,n)},{$x:o},function(i){return{$x:function(){return bn(i,n)}}})}});function as(e,t){return e(t={exports:{}},t.exports),t.exports}var t4=as(function(e){(function(t,n,r){function o(s){var u,l=this,c=(u=4022871197,function(f){f=f.toString();for(var d=0;d<f.length;d++){var p=.02519603282416938*(u+=f.charCodeAt(d));p-=u=p>>>0,u=(p*=u)>>>0,u+=4294967296*(p-=u)}return 23283064365386963e-26*(u>>>0)});l.next=function(){var f=2091639*l.s0+23283064365386963e-26*l.c;return l.s0=l.s1,l.s1=l.s2,l.s2=f-(l.c=0|f)},l.c=1,l.s0=c(" "),l.s1=c(" "),l.s2=c(" "),l.s0-=c(s),l.s0<0&&(l.s0+=1),l.s1-=c(s),l.s1<0&&(l.s1+=1),l.s2-=c(s),l.s2<0&&(l.s2+=1),c=null}function i(s,u){return u.c=s.c,u.s0=s.s0,u.s1=s.s1,u.s2=s.s2,u}function a(s,u){var l=new o(s),c=u&&u.state,f=l.next;return f.int32=function(){return 4294967296*l.next()|0},f.double=function(){return f()+11102230246251565e-32*(2097152*f()|0)},f.quick=f,c&&(typeof c=="object"&&i(c,l),f.state=function(){return i(l,{})}),f}n&&n.exports?n.exports=a:r&&r.amd?r(function(){return a}):this.alea=a})(0,e,!1)}),n4=as(function(e){(function(t,n,r){function o(s){var u=this,l="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var f=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^f^f>>>8},s===(0|s)?u.x=s:l+=s;for(var c=0;c<l.length+64;c++)u.x^=0|l.charCodeAt(c),u.next()}function i(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u}function a(s,u){var l=new o(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(d===0);return d},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&i(c,l),f.state=function(){return i(l,{})}),f}n&&n.exports?n.exports=a:r&&r.amd?r(function(){return a}):this.xor128=a})(0,e,!1)}),r4=as(function(e){(function(t,n,r){function o(s){var u=this,l="";u.next=function(){var f=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^f^f<<1)|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,s===(0|s)?u.x=s:l+=s;for(var c=0;c<l.length+64;c++)u.x^=0|l.charCodeAt(c),c==l.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function i(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u.v=s.v,u.d=s.d,u}function a(s,u){var l=new o(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(d===0);return d},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&i(c,l),f.state=function(){return i(l,{})}),f}n&&n.exports?n.exports=a:r&&r.amd?r(function(){return a}):this.xorwow=a})(0,e,!1)}),o4=as(function(e){(function(t,n,r){function o(s){var u=this;u.next=function(){var l,c,f=u.x,d=u.i;return l=f[d],c=(l^=l>>>7)^l<<24,c^=(l=f[d+1&7])^l>>>10,c^=(l=f[d+3&7])^l>>>3,c^=(l=f[d+4&7])^l<<7,l=f[d+7&7],c^=(l^=l<<13)^l<<9,f[d]=c,u.i=d+1&7,c},function(l,c){var f,d=[];if(c===(0|c))d[0]=c;else for(c=""+c,f=0;f<c.length;++f)d[7&f]=d[7&f]<<15^c.charCodeAt(f)+d[f+1&7]<<13;for(;d.length<8;)d.push(0);for(f=0;f<8&&d[f]===0;++f);for(f==8?d[7]=-1:d[f],l.x=d,l.i=0,f=256;f>0;--f)l.next()}(u,s)}function i(s,u){return u.x=s.x.slice(),u.i=s.i,u}function a(s,u){s==null&&(s=+new Date);var l=new o(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(d===0);return d},f.int32=l.next,f.quick=f,c&&(c.x&&i(c,l),f.state=function(){return i(l,{})}),f}n&&n.exports?n.exports=a:r&&r.amd?r(function(){return a}):this.xorshift7=a})(0,e,!1)}),i4=as(function(e){(function(t,n,r){function o(s){var u=this;u.next=function(){var l,c,f=u.w,d=u.X,p=u.i;return u.w=f=f+1640531527|0,c=d[p+34&127],l=d[p=p+1&127],c^=c<<13,l^=l<<17,c^=c>>>15,l^=l>>>12,c=d[p]=c^l,u.i=p,c+(f^f>>>16)|0},function(l,c){var f,d,p,v,x,w=[],y=128;for(c===(0|c)?(d=c,c=null):(c+="\0",d=0,y=Math.max(y,c.length)),p=0,v=-32;v<y;++v)c&&(d^=c.charCodeAt((v+32)%c.length)),v===0&&(x=d),d^=d<<10,d^=d>>>15,d^=d<<4,d^=d>>>13,v>=0&&(x=x+1640531527|0,p=(f=w[127&v]^=d+x)==0?p+1:0);for(p>=128&&(w[127&(c&&c.length||0)]=-1),p=127,v=512;v>0;--v)d=w[p+34&127],f=w[p=p+1&127],d^=d<<13,f^=f<<17,d^=d>>>15,f^=f>>>12,w[p]=d^f;l.w=x,l.X=w,l.i=p}(u,s)}function i(s,u){return u.i=s.i,u.w=s.w,u.X=s.X.slice(),u}function a(s,u){s==null&&(s=+new Date);var l=new o(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(d===0);return d},f.int32=l.next,f.quick=f,c&&(c.X&&i(c,l),f.state=function(){return i(l,{})}),f}n&&n.exports?n.exports=a:r&&r.amd?r(function(){return a}):this.xor4096=a})(0,e,!1)}),a4=as(function(e){(function(t,n,r){function o(s){var u=this,l="";u.next=function(){var f=u.b,d=u.c,p=u.d,v=u.a;return f=f<<25^f>>>7^d,d=d-p|0,p=p<<24^p>>>8^v,v=v-f|0,u.b=f=f<<20^f>>>12^d,u.c=d=d-p|0,u.d=p<<16^d>>>16^v,u.a=v-f|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,s===Math.floor(s)?(u.a=s/4294967296|0,u.b=0|s):l+=s;for(var c=0;c<l.length+20;c++)u.b^=0|l.charCodeAt(c),u.next()}function i(s,u){return u.a=s.a,u.b=s.b,u.c=s.c,u.d=s.d,u}function a(s,u){var l=new o(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(d===0);return d},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&i(c,l),f.state=function(){return i(l,{})}),f}n&&n.exports?n.exports=a:r&&r.amd?r(function(){return a}):this.tychei=a})(0,e,!1)}),Aa=as(function(e){(function(t,n){var r,o=this,i=256,a=6,s="random",u=n.pow(i,a),l=n.pow(2,52),c=2*l,f=i-1;function d(y,b,E){var S=[],R=x(function P(D,N){var B,z=[],V=typeof D;if(N&&V=="object")for(B in D)try{z.push(P(D[B],N-1))}catch{}return z.length?z:V=="string"?D:D+"\0"}((b=b==1?{entropy:!0}:b||{}).entropy?[y,w(t)]:y??function(){try{var P;return r&&(P=r.randomBytes)?P=P(i):(P=new Uint8Array(i),(o.crypto||o.msCrypto).getRandomValues(P)),w(P)}catch{var D=o.navigator,N=D&&D.plugins;return[+new Date,o,N,o.screen,w(t)]}}(),3),S),k=new p(S),m=function(){for(var P=k.g(a),D=u,N=0;P<l;)P=(P+N)*i,D*=i,N=k.g(1);for(;P>=c;)P/=2,D/=2,N>>>=1;return(P+N)/D};return m.int32=function(){return 0|k.g(4)},m.quick=function(){return k.g(4)/4294967296},m.double=m,x(w(k.S),t),(b.pass||E||function(P,D,N,B){return B&&(B.S&&v(B,k),P.state=function(){return v(k,{})}),N?(n[s]=P,D):P})(m,R,"global"in b?b.global:this==n,b.state)}function p(y){var b,E=y.length,S=this,R=0,k=S.i=S.j=0,m=S.S=[];for(E||(y=[E++]);R<i;)m[R]=R++;for(R=0;R<i;R++)m[R]=m[k=f&k+y[R%E]+(b=m[R])],m[k]=b;(S.g=function(P){for(var D,N=0,B=S.i,z=S.j,V=S.S;P--;)D=V[B=f&B+1],N=N*i+V[f&(V[B]=V[z=f&z+D])+(V[z]=D)];return S.i=B,S.j=z,N})(i)}function v(y,b){return b.i=y.i,b.j=y.j,b.S=y.S.slice(),b}function x(y,b){for(var E,S=y+"",R=0;R<S.length;)b[f&R]=f&(E^=19*b[f&R])+S.charCodeAt(R++);return w(b)}function w(y){return String.fromCharCode.apply(0,y)}if(n["seed"+s]=d,x(n.random(),t),e.exports){e.exports=d;try{r=require("crypto")}catch{}}})([],Math)});Aa.alea=t4,Aa.xor128=n4,Aa.xorwow=r4,Aa.xorshift7=o4,Aa.xor4096=i4,Aa.tychei=a4;var dh=Aa.alea,wy=function(){function e(t,n,r,o,i){this.mean=t,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=o,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var a=i||Math.random();this.random=dh(a.toString())}return e.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var t=this.nextVal;return this.nextVal=NaN,t}for(var n,r,o=!1;!o;){var i=void 0,a=void 0,s=void 0;do s=(i=2*this.random()-1)*i+(a=2*this.random()-1)*a;while(s>=1||s===0);var u=Math.sqrt(-2*Math.log(s)/s);n=this.mean+this.stdDev*i*u,r=this.mean+this.stdDev*a*u,this.truncated&&!this.isValidTruncated(n)||(o=!0)}return this.truncated&&!this.isValidTruncated(r)||(this.nextVal=this.convertValue(r)),this.convertValue(n)},e.prototype.convertValue=function(t){return this.dtype==null||this.dtype==="float32"?t:Math.round(t)},e.prototype.isValidTruncated=function(t){return t<=this.upper&&t>=this.lower},e}(),s4=function(){function e(t,n,r,o){this.alpha=t,this.beta=1/n,this.dtype=r;var i=o||Math.random();this.randu=dh(i.toString()),this.randn=new wy(0,1,r,!1,this.randu()),this.d=t<1?t+2/3:t-1/3,this.c=1/Math.sqrt(9*this.d)}return e.prototype.nextValue=function(){for(var t,n,r,o,i,a;;){do o=this.randn.nextValue(),a=1+this.c*o;while(a<=0);if(a*=a*a,n=1-.331*(t=o*o)*t,r=.5*t+this.d*(1-a+Math.log(a)),(i=this.randu())<n||Math.log(i)<r)break}return a=1/this.beta*this.d*a,this.alpha<1&&(a*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(a)},e.prototype.convertValue=function(t){return this.dtype==="float32"?t:Math.round(t)},e}(),u4=function(){function e(t,n,r,o){var i=this;if(t===void 0&&(t=0),n===void 0&&(n=1),this.canReturnFloat=function(){return i.dtype==null||i.dtype==="float32"},this.min=t,this.range=n-t,this.dtype=r,o==null&&(o=Math.random()),typeof o=="number"&&(o=o.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+t+" - "+n+" <= 1 and dtype is not float");this.random=dh(o)}return e.prototype.convertValue=function(t){return this.canReturnFloat()?t:Math.round(t)},e.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},e}();function ot(e,t,n){return t===void 0&&(t="float32"),t=t||"float32",SS(e),new Vl(e,t,n)}function l4(e,t){t===void 0&&(t=!1),console.log(e.toString(t))}var AS=H({batchToSpaceND_:function(e,t,n){var r=O(e,"x","batchToSpaceND"),o=t.reduce(function(i,a){return i*a});return M(r.rank>=1+t.length,function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+t.length}),M(n.length===t.length,function(){return"crops.length is "+n.length+" but should be equal to blockShape.length  "+t.length}),M(r.shape[0]%o==0,function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+t.join(" * ")+" === "+o}),q.runKernelFunc(function(i){return i.batchToSpaceND(r,t,n)},{$x:r},function(i){return{$x:function(){return i.spaceToBatchND(t,n)}}})}}),c4=H({broadcastTo_:function(e,t){var n=O(e,"broadcastTo","x"),r=n.shape;if(t.some(function(u){return!(u>0)||u%1!=0}))throw new Error("broadcastTo(): Invalid broadcast shape ["+t+"].");if(t.length<n.rank)throw new Error("broadcastTo(): shape.length="+t.length+" < input.rank="+n.rank+".");if(t.length>n.rank){for(var o=n.shape.slice();o.length<t.length;)o.unshift(1);n=n.reshape(o)}for(var i=Array.from(t),a=t.length-1;a>=0;a--)if(n.shape[a]===t[a])i[a]=1;else if(n.shape[a]!==1)throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+t+"].");var s=i.map(function(u,l){return u>1?l:-1}).filter(function(u){return u>=0});return s.length===0?n.clone():q.runKernelFunc(function(u){return u.tile(n,i)},{input:n},function(u){return{input:function(){return u.sum(s,!0)}}})}}),f4=H({cast_:function(e,t){var n=O(e,"x","cast");if(!rM(t))throw new Error("Failed to cast to unknown dtype "+t);if(t==="string"&&n.dtype!=="string"||t!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");var r={dtype:t};return q.runKernelFunc(function(o){return o.cast(n,t)},{x:n},function(o){return{x:function(){return o.clone()}}},"Cast",r)}}),d4=H({clone_:function(e){var t=O(e,"x","clone",null);return q.runKernelFunc(function(){return q.makeTensorFromDataId(t.dataId,t.shape,t.dtype)},{$x:t},function(n){return{$x:function(){return n.toFloat()}}})}}),h4=H({cumsum_:function(e,t,n,r){t===void 0&&(t=0),n===void 0&&(n=!1),r===void 0&&(r=!1);var o=O(e,"x","cumsum"),i=Ko([t|=0],o.rank),a=o;i!=null&&(a=o.transpose(i));var s=Xo(1,o.rank)[0],u=q.runKernelFunc(function(l){return l.cumsum(a,s,n,r)},{permutedX:a},function(l){return{permutedX:function(){return l.cumsum(t,n,!r)}}});return i!=null&&(u=u.transpose(i)),u}}),p4=H({depthToSpace_:function(e,t,n){n===void 0&&(n="NHWC");var r=O(e,"x","depthToSpace"),o=n==="NHWC"?r.shape[1]:r.shape[2],i=n==="NHWC"?r.shape[2]:r.shape[3],a=n==="NHWC"?r.shape[3]:r.shape[1];return M(o*t>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+o+" and "+t+`  for depthToSpace with input shape
      `+r.shape}),M(i*t>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+i+" and "+t+` for depthToSpace with input shape
          `+r.shape}),M(a%(t*t)==0,function(){return"Dimension size must be evenly divisible by "+t*t+" but is "+a+" for depthToSpace with input shape "+r.shape}),q.runKernelFunc(function(s){return s.depthToSpace(r,t,n)},{$x:r})}}),Vr=H({expandDims_:function(e,t){t===void 0&&(t=0);var n=O(e,"x","expandDims",null);M(t<=n.rank,function(){return"Axis must be <= rank of the tensor"});var r=n.shape.slice();return t<0&&(M(-(n.rank+1)<=t,function(){return"Axis must be in the interval ["+-(n.rank+1)+", "+n.rank+"]"}),t=n.rank+t+1),r.splice(t,0,1),lo(n,r)}}),PS=H({eye_:function(e,t,n,r){r===void 0&&(r="float32"),t==null&&(t=e);for(var o=ot([e,t],r),i=e<=t?e:t,a=0;a<i;++a)o.set(1,a,a);var s=o.toTensor().as2D(e,t);if(n==null)return s;if(n.length===1)return Js(Vr(s,0),[n[0],1,1]);if(n.length===2)return Js(Vr(Vr(s,0),0),[n[0],n[1],1,1]);if(n.length===3)return Js(Vr(Vr(Vr(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+n.length+"D.")}}),v4=H({multinomial_:function(e,t,n,r){r===void 0&&(r=!1);var o=O(e,"logits","multinomial"),i=o.size,a=o.rank;if(i<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+i+".");if(a>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+a);n=n||Math.random();var s=a===1?o.as2D(1,-1):o,u=q.runKernelFunc(function(l){return l.multinomial(s,r,t,n)},{logits2D:s});return a===1?u.as1D():u}}),Wm=H({oneHot_:function(e,t,n,r){if(n===void 0&&(n=1),r===void 0&&(r=0),t<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+t);var o=O(e,"indices","oneHot","int32"),i=o.shape.concat([t]);return o=o.flatten(),q.runKernelFunc(function(a){return a.oneHot(o,t,n,r)},{$indices:o},function(a){return{$indices:function(){return Wt(o.shape,"float32")}}}).reshape(i)}}),ss=H({pad_:function(e,t,n){n===void 0&&(n=0);var r=O(e,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var o={paddings:t,constantValue:n};return q.runKernelFunc(function(i){return i.pad(r,t,n)},{x:r},function(i){var a=t.map(function(s){return s[0]});return{x:function(){return i.slice(a,r.shape)}}},"PadV2",o)}}),m4=H({pad1d_:function(e,t,n){return n===void 0&&(n=0),M(t.length===2,function(){return"Invalid number of paddings. Must be length of 2."}),ss(e,[t],n)}}),g4=H({pad2d_:function(e,t,n){return n===void 0&&(n=0),M(t.length===2&&t[0].length===2&&t[1].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),ss(e,t,n)}}),y4=H({pad3d_:function(e,t,n){return n===void 0&&(n=0),M(t.length===3&&t[0].length===2&&t[1].length===2&&t[2].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),ss(e,t,n)}}),x4=H({pad4d_:function(e,t,n){return n===void 0&&(n=0),M(t.length===4&&t[0].length===2&&t[1].length===2&&t[2].length===2&&t[3].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),ss(e,t,n)}}),w4=H({rand_:function(e,t,n){var r=Fe(e),o=null;if(n==null||n==="float32")o=new Float32Array(r);else if(n==="int32")o=new Int32Array(r);else{if(n!=="bool")throw new Error("Unknown data type "+n);o=new Uint8Array(r)}for(var i=0;i<r;i++)o[i]=t();return q.makeTensor(o,e,n)}}),b4=H({randomNormal_:function(e,t,n,r,o){if(t===void 0&&(t=0),n===void 0&&(n=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var i=new wy(t,n,r,!1,o),a=ot(e,r),s=0;s<a.values.length;s++)a.values[s]=i.nextValue();return a.toTensor()}}),E4=H({randomGamma_:function(e,t,n,r,o){if(n===void 0&&(n=1),r===void 0&&(r="float32"),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error("Unsupported data type "+r);for(var i=new s4(t,n,r,o),a=ot(e,r),s=0;s<a.values.length;s++)a.values[s]=i.nextValue();return a.toTensor()}}),FS=H({randomUniform_:function(e,t,n,r,o){t===void 0&&(t=0),n===void 0&&(n=1),r===void 0&&(r="float32");for(var i=ot(e,r),a=new u4(t,n,null,o),s=0;s<i.values.length;s++)i.values[s]=a.nextValue();return i.toTensor()}}),lo=H({reshape_:function(e,t){var n=O(e,"x","reshape",null);t=tM(t,n.size),M(n.size===Fe(t),function(){return"new shape and old shape must have the same number of elements."});var r={shape:t};return q.runKernelFunc(function(o){return o.reshape(n,t)},{x:n},function(o){return{x:function(){return o.reshape(n.shape)}}},"Reshape",r)}}),OS=H({spaceToBatchND_:function(e,t,n){var r=O(e,"x","spaceToBatchND");return M(r.rank>=1+t.length,function(){return"input rank "+r.rank+" should be > than [blockShape] "+t.length}),M(n.length===t.length,function(){return"paddings.shape[0] "+n.length+" must be equal to [blockShape] "+t.length}),M(r.shape.reduce(function(o,i,a){return a>0&&a<=t.length?o&&(i+n[a-1][0]+n[a-1][1])%t[a-1]==0:o},!0),function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+n.toString()+" must be divisible by blockShapes "+t.toString()}),q.runKernelFunc(function(o){return o.spaceToBatchND(r,t,n)},{$x:r},function(o){return{$x:function(){return o.batchToSpaceND(t,n)}}})}}),MS=H({squeeze_:function(e,t){var n=O(e,"x","squeeze");return lo(n,Oa(n.shape,t).newShape)}}),Or=H({stack_:function(e,t){t===void 0&&(t=0);var n=xd(e,"tensors","stack");if(M(n.length>=1,function(){return"Pass at least one tensor to tf.stack"}),n.length===1)return n[0].expandDims(t);var r=n[0].rank,o=n[0].shape,i=n[0].dtype;M(t<=r,function(){return"Axis must be <= rank of the tensor"}),n.forEach(function(s){Tt(o,s.shape,"All tensors passed to stack must have matching shapes")}),n.forEach(function(s){M(i===s.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var a=n.map(function(s){return s.expandDims(t)});return bn(a,t)}}),Js=H({tile_:function(e,t){var n=O(e,"x","tile",null);M(n.rank===t.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of reps "+t+"."});var r=[n],o={reps:t};return q.runKernelFunc(function(i,a){var s=i.tile(n,t);return a([n]),s},{x:n},function(i,a){var s=a[0];return{x:function(){var u=Ct(s);if(s.rank===1)for(var l=0;l<t[0];++l)u=u.add(i.slice([l*s.shape[0]],[s.shape[0]]));else if(s.rank===2)for(l=0;l<t[0];++l)for(var c=0;c<t[1];++c)u=u.add(i.slice([l*s.shape[0],c*s.shape[1]],[s.shape[0],s.shape[1]]));else if(s.rank===3)for(l=0;l<t[0];++l)for(c=0;c<t[1];++c)for(var f=0;f<t[2];++f)u=u.add(i.slice([l*s.shape[0],c*s.shape[1],f*s.shape[2]],[s.shape[0],s.shape[1],s.shape[2]]));else{if(s.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+s.rank+" tensors yet.");for(l=0;l<t[0];++l)for(c=0;c<t[1];++c)for(f=0;f<t[2];++f)for(var d=0;d<t[3];++d)u=u.add(i.slice([l*s.shape[0],c*s.shape[1],f*s.shape[2],d*s.shape[3]],[s.shape[0],s.shape[1],s.shape[2],s.shape[3]]))}return u}}},"Tile",o,r)}}),C4=H({truncatedNormal_:function(e,t,n,r,o){if(t===void 0&&(t=0),n===void 0&&(n=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var i=new wy(t,n,r,!0,o),a=ot(e,r),s=0;s<a.values.length;s++)a.values[s]=i.nextValue();return a.toTensor()}}),En=H({unstack_:function(e,t){t===void 0&&(t=0),t=t||0;var n=O(e,"x","unstack");M(t>=-n.shape.length&&t<n.shape.length,function(){return"Axis = "+t+" is not in [-"+n.shape.length+", "+n.shape.length+")"}),t<0&&(t+=n.shape.length);var r={axis:t};return q.runKernelFunc(function(o){return o.unstack(n,t)},{x:n},function(o){return{x:function(){return Or(o,t)}}},"Unpack",r)}}),S4=function(e,t){return Ie(this,void 0,void 0,function(){var n,r,o,i,a,s,u,l,c,f;return De(this,function(d){switch(d.label){case 0:return n=O(e,"x","setdiff1d"),r=O(t,"y","setdiff1d"),M(n.dtype===r.dtype,function(){return"x and y should have the same dtype, but got x ("+n.dtype+") and y ("+r.dtype+")."}),M(n.rank===1,function(){return"x should be 1D tensor, but got x ("+n.shape+")."}),M(r.rank===1,function(){return"y should be 1D tensor, but got y ("+r.shape+")."}),[4,n.data()];case 1:return o=d.sent(),[4,r.data()];case 2:for(i=d.sent(),a=new Set(i),s=0,c=0;c<o.length;c++)a.has(o[c])||s++;for(u=new Vl([s],n.dtype),l=new Vl([s],"int32"),c=0,f=0;c<o.length;c++)a.has(o[c])||(u.values[f]=o[c],l.values[f]=c,f++);return[2,[u.toTensor(),l.toTensor()]]}})})};function bd(e,t,n,r){r===void 0&&(r=!0);var o=[];if(r)(o=o.concat(t.slice(0))).push(e[0]/n),o=o.concat(e.slice(1));else{o=o.concat(e[0]);for(var i=t.length,a=0;a<i;++a)o=o.concat([e[a+1]/t[a],t[a]]);o=o.concat(e.slice(i+1))}return o}function Ed(e,t,n){n===void 0&&(n=!0);var r=[];if(n){r.push(t);for(var o=t+1;o<e;++o)o<=2*t?(r.push(o),r.push(o-(t+1))):r.push(o)}else{var i=[],a=[];for(o=1;o<e;++o)o>=2*t+1||o%2==1?a.push(o):i.push(o);r.push.apply(r,i),r.push(0),r.push.apply(r,a)}return r}function Cd(e,t,n,r){r===void 0&&(r=!0);var o=[];r?o.push(e[0]/n):o.push(e[0]*n);for(var i=1;i<e.length;++i)i<=t.length?r?o.push(t[i-1]*e[i]):o.push(e[i]/t[i-1]):o.push(e[i]);return o}function LS(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function BS(e,t,n){for(var r=e.slice(0,1),o=0;o<n;++o)r.push(e[o+1]-t[o][0]-t[o][1]);return r}function jS(e,t){if(e.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+e.rank+".");if(t.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if(t.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+t.dtype+".");if(t.shape[t.rank-1]>e.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+t.shape[t.rank-1]+" vs. "+e.rank);if(e.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+e.shape+".");for(var n=t.shape,r=n[n.length-1],o=1,i=0;i<n.length-1;++i)o*=n[i];var a=e.shape,s=n.slice();s.pop();var u=1;for(i=r;i<e.rank;++i)u*=a[i],s.push(a[i]);var l=Uo(e.shape).map(function(c){return c/u}).concat([1]).slice(0,r);return[s,o,u,l]}var WS=30;function Qp(e){return e<=WS?e:Fm(e,Math.floor(Math.sqrt(e)))}function _4(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,o=t.rank>1?t.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+n.shape+", indices.shape: "+t.shape+", shape: "+e+", sliceDim: "+r+", and batchDim: "+o+".";if(n.rank<o)throw new Error(i+" update.rank < "+o+". ");if(e.length<r+(n.rank-o))throw new Error(i+" Output shape length < "+(r+(n.rank-o)));if(n.rank!==o+e.length-r)throw new Error(i+" update.rank != "+(o+e.length-r));for(var a=0;a<o;++a)if(n.shape[a]!==t.shape[a])throw new Error(i+" updates.shape["+a+"] ("+n.shape[a]+") != indices.shape["+a+"] ("+t.shape[a]+").");for(a=0;a<n.rank-o;++a)if(n.shape[a+o]!==e[a+r])throw new Error(i+" updates.shape["+(a+o)+"] ("+n.shape[a+o]+") != shape["+(a+o)+"] ("+e[a+o]+")")}function k4(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+e.rank+".");if(t.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+t.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(n.length===0){if(t.size===0)throw new Error("Indices specified for empty output. indices shape: "+t.shape);if(e.size===0)throw new Error("Updates specified for empty output. updates shape: "+e.shape)}_4(n,t,e)}function Sd(e,t,n){for(var r=t.shape.length,o=r>1?t.shape[r-1]:1,i=n.length,a=1,s=o;s<i;++s)a*=n[s];var u=o<1?1:o;return{sliceRank:o,numUpdates:Fe(t.shape)/u,sliceSize:a,strides:Uo(n.slice(0,o)).concat([1]),outputSize:Fe(n)}}function R4(e,t,n){M(e.rank===t.length,function(){return"Error in slice"+e.rank+"D: Length of begin "+t+" must match the rank of the array ("+e.rank+")."}),M(e.rank===n.length,function(){return"Error in slice"+e.rank+"D: Length of size "+n+" must match the rank of the array ("+e.rank+")."});for(var r=function(i){M(t[i]+n[i]<=e.shape[i],function(){return"Error in slice"+e.rank+"D: begin["+i+"] + size["+i+"] ("+(t[i]+n[i])+") would overflow input.shape["+i+"] ("+e.shape[i]+")"})},o=0;o<e.rank;++o)r(o)}function mw(e){for(var t=[],n=0;e>0;)1&e&&t.push(n),e/=2,n++;return t}function by(e,t,n){for(var r=[],o=0;o<e.length;o++)r[o]=Math.ceil((t[o]-e[o])/n[o]);return r}function T4(e,t,n,r,o){var i=t[o],a=n[o]||1;(e&1<<o||i==null)&&(i=a>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var s=r[o];return i<0&&(i+=s),i=Nm(0,i,s-1)}function I4(e,t,n,r,o){var i=t[o],a=n[o]||1;(e&1<<o||i==null)&&(i=a>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var s=r[o];return i<0&&(i+=s),i=a>0?Nm(0,i,s):Nm(-1,i,s-1)}function zS(e,t,n){for(var r=n.length,o=0;o<n.length;o++)if(n[o]>1){r=o;break}for(o=r+1;o<n.length;o++)if(t[o]>0||n[o]!==e[o])return!1;return!0}function US(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function D4(e,t){M(Pm(e),function(){return"The f passed in variableGrads(f) must be a function"}),M(t==null||Array.isArray(t)&&t.every(function(c){return c instanceof gu}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var n=t!=null;if(!n)for(var r in t=[],q.registeredVariables)t.push(q.registeredVariables[r]);var o=n?t.filter(function(c){return!c.trainable}):null,i=t.length;M((t=t.filter(function(c){return c.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+i+" variables is trainable."});var a=q.gradients(e,t,null,!0),s=a.value,u=a.grads;M(u.some(function(c){return c!=null}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),M(s.rank===0,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+s.rank+" tensor"});var l={};return t.forEach(function(c,f){u[f]!=null&&(l[c.name]=u[f])}),o!=null&&o.forEach(function(c){return l[c.name]=null}),{value:s,grads:l}}function hh(e){return q.customGrad(e)}var bi=H({softmax_:function(e,t){t===void 0&&(t=-1);var n=O(e,"logits","softmax","float32");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+t);return q.runKernelFunc(function(r,o){var i=r.softmax(n,t);return o([i]),i},{logits:n},function(r,o){var i=o[0],a=r.mul(i);return{logits:function(){return a.sub(a.sum([t],!0).mul(i))}}},"Softmax",{dim:t},[],[!0])}}),N4=H({logSoftmax_:function(e,t){t===void 0&&(t=-1);var n=O(e,"logits","logSoftmax");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and axis was "+t);return hh(function(r,o){var i=r.max(t,!0),a=r.sub(i),s=a.toFloat().sub(a.exp().sum(t,!0).log());return o([s]),{value:s,gradFunc:function(u,l){var c=l[0].exp();return u.sub(u.sum(t,!0).mul(c))}}})(n)}}),$S=function(){function e(t,n){this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return e.prototype.get=function(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)},e.prototype.set=function(t,n){this.dataIdsCount++,this.data.set(t,n)},e.prototype.has=function(t){return this.data.has(t)},e.prototype.delete=function(t){return this.dataIdsCount--,this.data.delete(t)},e.prototype.numDataIds=function(){return this.dataIdsCount},e}(),HS=function(){function e(){}return e.prototype.time=function(t){return ie("time")},e.prototype.read=function(t){return ie("read")},e.prototype.readSync=function(t){return ie("readSync")},e.prototype.numDataIds=function(){return ie("numDataIds")},e.prototype.disposeData=function(t){return ie("disposeData")},e.prototype.write=function(t,n,r){return ie("write")},e.prototype.move=function(t,n,r,o){return ie("move")},e.prototype.memory=function(){return ie("memory")},e.prototype.floatPrecision=function(){return ie("floatPrecision")},e.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},e.prototype.batchMatMul=function(t,n,r,o){return ie("batchMatMul")},e.prototype.fusedBatchMatMul=function(t){return t.a,t.b,t.transposeA,t.transposeB,t.bias,t.activation,t.preluActivationWeights,ie("fusedBatchMatMul")},e.prototype.slice=function(t,n,r){return ie("slice")},e.prototype.stridedSlice=function(t,n,r,o){return ie("stridedSlice")},e.prototype.unstack=function(t,n){return ie("unstack")},e.prototype.reverse=function(t,n){return ie("reverse")},e.prototype.concat=function(t,n){return ie("concat")},e.prototype.neg=function(t){return ie("neg")},e.prototype.add=function(t,n){return ie("add")},e.prototype.addN=function(t){return ie("addN")},e.prototype.subtract=function(t,n){return ie("subtract")},e.prototype.multiply=function(t,n){return ie("multiply")},e.prototype.realDivide=function(t,n){return ie("realDivide")},e.prototype.floorDiv=function(t,n){return ie("floorDiv")},e.prototype.sum=function(t,n){return ie("sum")},e.prototype.prod=function(t,n){return ie("prod")},e.prototype.unsortedSegmentSum=function(t,n,r){return ie("unsortedSegmentSum")},e.prototype.argMin=function(t,n){return ie("argMin")},e.prototype.argMax=function(t,n){return ie("argMax")},e.prototype.equal=function(t,n){return ie("equal")},e.prototype.notEqual=function(t,n){return ie("notEqual")},e.prototype.less=function(t,n){return ie("less")},e.prototype.lessEqual=function(t,n){return ie("lessEqual")},e.prototype.greater=function(t,n){return ie("greater")},e.prototype.greaterEqual=function(t,n){return ie("greaterEqual")},e.prototype.logicalNot=function(t){return ie("logicalNot")},e.prototype.logicalAnd=function(t,n){return ie("logicalAnd")},e.prototype.logicalOr=function(t,n){return ie("logicalOr")},e.prototype.where=function(t){return ie("where")},e.prototype.select=function(t,n,r){return ie("select")},e.prototype.topk=function(t,n,r){return ie("topk")},e.prototype.min=function(t,n){return ie("min")},e.prototype.minimum=function(t,n){return ie("minimum")},e.prototype.mod=function(t,n){return ie("mod")},e.prototype.max=function(t,n){return ie("max")},e.prototype.maximum=function(t,n){return ie("maximum")},e.prototype.all=function(t,n){return ie("all")},e.prototype.any=function(t,n){return ie("any")},e.prototype.squaredDifference=function(t,n){return ie("squaredDifference")},e.prototype.ceil=function(t){return ie("ceil")},e.prototype.floor=function(t){return ie("floor")},e.prototype.round=function(t){return ie("round")},e.prototype.sign=function(t){return ie("sign")},e.prototype.isNaN=function(t){return ie("isNaN")},e.prototype.isInf=function(t){return ie("isInf")},e.prototype.isFinite=function(t){return ie("isFinite")},e.prototype.pow=function(t,n){return ie("pow")},e.prototype.exp=function(t){return ie("exp")},e.prototype.expm1=function(t){return ie("expm1")},e.prototype.softmax=function(t,n){return ie("softmax")},e.prototype.log=function(t){return ie("log")},e.prototype.log1p=function(t){return ie("log1p")},e.prototype.sqrt=function(t){return ie("sqrt")},e.prototype.rsqrt=function(t){return ie("rsqrt")},e.prototype.square=function(t){return ie("square")},e.prototype.reciprocal=function(t){return ie("reciprocal")},e.prototype.relu=function(t){return ie("relu")},e.prototype.relu6=function(t){return ie("relu6")},e.prototype.prelu=function(t,n){return ie("prelu")},e.prototype.elu=function(t){return ie("elu")},e.prototype.eluDer=function(t,n){return ie("eluDer")},e.prototype.selu=function(t){return ie("selu")},e.prototype.int=function(t){return ie("int")},e.prototype.clip=function(t,n,r){return ie("clip")},e.prototype.abs=function(t){return ie("abs")},e.prototype.complexAbs=function(t){return ie("complexAbs")},e.prototype.sigmoid=function(t){return ie("sigmoid")},e.prototype.softplus=function(t){return ie("softplus")},e.prototype.sin=function(t){return ie("sin")},e.prototype.cos=function(t){return ie("cos")},e.prototype.tan=function(t){return ie("tan")},e.prototype.asin=function(t){return ie("asin")},e.prototype.acos=function(t){return ie("acos")},e.prototype.atan=function(t){return ie("atan")},e.prototype.atan2=function(t,n){return ie("atan2")},e.prototype.sinh=function(t){return ie("sinh")},e.prototype.cosh=function(t){return ie("cosh")},e.prototype.tanh=function(t){return ie("tanh")},e.prototype.asinh=function(t){return ie("asinh")},e.prototype.acosh=function(t){return ie("acosh")},e.prototype.atanh=function(t){return ie("atanh")},e.prototype.erf=function(t){return ie("erf")},e.prototype.step=function(t,n){return ie("step")},e.prototype.fusedConv2d=function(t){return t.input,t.filter,t.convInfo,t.bias,t.activation,t.preluActivationWeights,ie("fusedConv2d")},e.prototype.conv2d=function(t,n,r){return ie("conv2d")},e.prototype.conv2dDerInput=function(t,n,r){return ie("conv2dDerInput")},e.prototype.conv2dDerFilter=function(t,n,r){return ie("conv2dDerFilter")},e.prototype.fusedDepthwiseConv2D=function(t){return t.input,t.filter,t.convInfo,t.bias,t.activation,t.preluActivationWeights,ie("fusedDepthwiseConv2D")},e.prototype.depthwiseConv2D=function(t,n,r){return ie("depthwiseConv2D")},e.prototype.depthwiseConv2DDerInput=function(t,n,r){return ie("depthwiseConv2DDerInput")},e.prototype.depthwiseConv2DDerFilter=function(t,n,r){return ie("depthwiseConv2DDerFilter")},e.prototype.conv3d=function(t,n,r){return ie("conv3d")},e.prototype.conv3dDerInput=function(t,n,r){return ie("conv3dDerInput")},e.prototype.conv3dDerFilter=function(t,n,r){return ie("conv3dDerFilter")},e.prototype.maxPool=function(t,n){return ie("maxPool")},e.prototype.maxPoolBackprop=function(t,n,r,o){return ie("maxPoolBackprop")},e.prototype.avgPool=function(t,n){return ie("avgPool")},e.prototype.avgPoolBackprop=function(t,n,r){return ie("avgPoolBackprop")},e.prototype.avgPool3d=function(t,n){return ie("avgPool3d")},e.prototype.avgPool3dBackprop=function(t,n,r){return ie("avgPool3dBackprop")},e.prototype.maxPool3d=function(t,n){return ie("maxPool3d")},e.prototype.maxPool3dBackprop=function(t,n,r,o){return ie("maxPool3dBackprop")},e.prototype.reshape=function(t,n){return ie("reshape")},e.prototype.cast=function(t,n){return ie("cast")},e.prototype.tile=function(t,n){return ie("tile")},e.prototype.pad=function(t,n,r){return ie("pad")},e.prototype.transpose=function(t,n){return ie("transpose")},e.prototype.gather=function(t,n,r){return ie("gather")},e.prototype.gatherND=function(t,n){return ie("gatherND")},e.prototype.scatterND=function(t,n,r){return ie("scatterND")},e.prototype.batchToSpaceND=function(t,n,r){return ie("batchToSpaceND")},e.prototype.spaceToBatchND=function(t,n,r){return ie("spaceToBatchND")},e.prototype.resizeBilinear=function(t,n,r,o){return ie("resizeBilinear")},e.prototype.resizeBilinearBackprop=function(t,n,r){return ie("resizeBilinearBackprop")},e.prototype.resizeNearestNeighbor=function(t,n,r,o){return ie("resizeNearestNeighbor")},e.prototype.resizeNearestNeighborBackprop=function(t,n,r){return ie("resizeNearestNeighborBackprop")},e.prototype.batchNormalization=function(t,n,r,o,i,a){return ie("batchNormalization")},e.prototype.localResponseNormalization4D=function(t,n,r,o,i){return ie("localResponseNormalization4D")},e.prototype.LRNGrad=function(t,n,r,o,i,a,s){return ie("LRNGrad")},e.prototype.multinomial=function(t,n,r,o){return ie("multinomial")},e.prototype.oneHot=function(t,n,r,o){return ie("oneHot")},e.prototype.cumsum=function(t,n,r,o){return ie("cumsum")},e.prototype.nonMaxSuppression=function(t,n,r,o,i){return ie("nonMaxSuppression")},e.prototype.fft=function(t){return ie("fft")},e.prototype.ifft=function(t){return ie("ifft")},e.prototype.complex=function(t,n){return ie("complex")},e.prototype.real=function(t){return ie("real")},e.prototype.imag=function(t){return ie("imag")},e.prototype.cropAndResize=function(t,n,r,o,i,a){return ie("cropAndResize")},e.prototype.depthToSpace=function(t,n,r){return ie("depthToSpace")},e.prototype.split=function(t,n,r){return ie("split")},e.prototype.sparseToDense=function(t,n,r,o){return ie("sparseToDense")},e.prototype.diag=function(t){return ie("diag")},e.prototype.fill=function(t,n,r){return ie("fill")},e.prototype.onesLike=function(t){return ie("onesLike")},e.prototype.zerosLike=function(t){return ie("zerosLike")},e.prototype.linspace=function(t,n,r){return ie("linspace")},e.prototype.dispose=function(){return ie("dispose")},e}();function ie(e){throw new Error("'"+e+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function Gi(e,t){for(var n=e.length,r=[],o=0;o<n;o++){var i=n-1-o,a=e[i]||1;(t[t.length-1-o]||1)>1&&a===1&&r.unshift(i)}return r}function Sn(e,t){for(var n=[],r=0;r<t.length;r++){var o=e[e.length-r-1],i=t.length-r-1,a=t[i];(o==null||o===1&&a>1)&&n.unshift(i)}return n}function ht(e,t){for(var n=[],r=Math.max(e.length,t.length),o=0;o<r;o++){var i=e[e.length-o-1];i==null&&(i=1);var a=t[t.length-o-1];if(a==null&&(a=1),i===1)n.unshift(a);else if(a===1)n.unshift(i);else{if(i!==a)throw Error("Operands could not be broadcast together with shapes "+e+" and "+t+".");n.unshift(i)}}return n}function ql(e,t,n,r,o,i,a){a===void 0&&(a="channelsLast");var s,u=Rd(t),l=u[0],c=u[1];if(a==="channelsLast")s=[l,c,e[3],e[3]];else{if(a!=="channelsFirst")throw new Error("Unknown dataFormat "+a);s=[l,c,e[1],e[1]]}return us(e,s,n,r,o,i,!1,a)}function _d(e,t,n,r,o,i,a){a===void 0&&(a="NDHWC");var s,u,l=zm(t),c=l[0],f=l[1],d=l[2];if(a==="NDHWC")u="channelsLast",s=[c,f,d,e[4],e[4]];else{if(a!=="NCDHW")throw new Error("Unknown dataFormat "+a);u="channelsFirst",s=[c,f,d,e[1],e[1]]}return kd(e,s,n,r,o,!1,u,i)}function us(e,t,n,r,o,i,a,s){a===void 0&&(a=!1),s===void 0&&(s="channelsLast");var u=[-1,-1,-1,-1],l=u[0],c=u[1],f=u[2],d=u[3];if(s==="channelsLast")l=e[0],c=e[1],f=e[2],d=e[3];else{if(s!=="channelsFirst")throw new Error("Unknown dataFormat "+s);l=e[0],d=e[1],c=e[2],f=e[3]}var p,v=t[0],x=t[1],w=t[3],y=Rd(n),b=y[0],E=y[1],S=Rd(r),R=S[0],k=S[1],m=Zs(v,R),P=Zs(x,k),D=function(Z,K,ne,J,$,Y,ee,he){var me,be,Se;if(typeof Z=="number"){me={top:Z,bottom:Z,left:Z,right:Z,type:Z===0?"VALID":"NUMBER"};var Ae=function(ze,Ke,qe,pt,Oe){pt==null&&(pt=VS(ze,Ke,qe));var vt=ze[0],Ue=ze[1],It=El((vt-Ke+2*pt)/qe+1,Oe);M(rn(It),function(){return"The output # of rows ("+It+") must be an integer. Change the stride and/or zero pad parameters"});var on=El((Ue-Ke+2*pt)/qe+1,Oe);return M(rn(on),function(){return"The output # of columns ("+on+") must be an integer. Change the stride and/or zero pad parameters"}),[It,on]}([K,ne],Y,J,Z,he);be=Ae[0],Se=Ae[1]}else if(Z==="same"){be=Math.ceil(K/J),Se=Math.ceil(ne/$);var Pe=Math.max(0,(be-1)*J+Y-K),$e=Math.max(0,(Se-1)*$+ee-ne),et=Math.floor(Pe/2),Qe=Pe-et,it=Math.floor($e/2);me={top:et,bottom:Qe,left:it,right:$e-it,type:"SAME"}}else{if(Z!=="valid")throw Error("Unknown padding parameter: "+Z);me={top:0,bottom:0,left:0,right:0,type:"VALID"},be=Math.ceil((K-Y+1)/J),Se=Math.ceil((ne-ee+1)/$)}return{padInfo:me,outHeight:be,outWidth:Se}}(o,c,f,b,E,m,P,i),N=D.padInfo,B=D.outHeight,z=D.outWidth,V=a?w*d:w;return s==="channelsFirst"?p=[l,V,B,z]:s==="channelsLast"&&(p=[l,B,z,V]),{batchSize:l,dataFormat:s,inHeight:c,inWidth:f,inChannels:d,outHeight:B,outWidth:z,outChannels:V,padInfo:N,strideHeight:b,strideWidth:E,filterHeight:v,filterWidth:x,effectiveFilterHeight:m,effectiveFilterWidth:P,dilationHeight:R,dilationWidth:k,inShape:e,outShape:p,filterShape:t}}function kd(e,t,n,r,o,i,a,s){i===void 0&&(i=!1),a===void 0&&(a="channelsLast");var u=[-1,-1,-1,-1,-1],l=u[0],c=u[1],f=u[2],d=u[3],p=u[4];if(a==="channelsLast")l=e[0],c=e[1],f=e[2],d=e[3],p=e[4];else{if(a!=="channelsFirst")throw new Error("Unknown dataFormat "+a);l=e[0],p=e[1],c=e[2],f=e[3],d=e[4]}var v,x=t[0],w=t[1],y=t[2],b=t[4],E=zm(n),S=E[0],R=E[1],k=E[2],m=zm(r),P=m[0],D=m[1],N=m[2],B=Zs(x,P),z=Zs(w,D),V=Zs(y,N),Z=function(ee,he,me,be,Se,Ae,Pe,$e,et,Qe,it){var ze,Ke,qe,pt;if(typeof ee=="number"){ze={top:ee,bottom:ee,left:ee,right:ee,front:ee,back:ee,type:ee===0?"VALID":"NUMBER"};var Oe=function($t,Ce,He,fn,Pn,fr){Pn==null&&(Pn=VS($t,Ce,fn));var ga=$t[0],ya=$t[1],go=$t[2],tr=El((ga-Ce+2*Pn)/fn+1,fr);M(rn(tr),function(){return"The output # of depths ("+tr+") must be an integer. Change the stride and/or zero pad parameters"});var dr=El((ya-Ce+2*Pn)/fn+1,fr);M(rn(dr),function(){return"The output # of rows ("+dr+") must be an integer. Change the stride and/or zero pad parameters"});var nr=El((go-Ce+2*Pn)/fn+1,fr);return M(rn(nr),function(){return"The output # of columns ("+nr+") must be an integer. Change the stride and/or zero pad parameters"}),[tr,dr,nr,He]}([he,me,be,1],$e,1,Se,ee,it);Ke=Oe[0],qe=Oe[1],pt=Oe[2]}else if(ee==="same"){Ke=Math.ceil(he/Se),qe=Math.ceil(me/Ae),pt=Math.ceil(be/Pe);var vt=(Ke-1)*Se+$e-he,Ue=(qe-1)*Ae+et-me,It=(pt-1)*Pe+Qe-be,on=Math.floor(vt/2),cr=vt-on,pn=Math.floor(Ue/2),Ut=Ue-pn,an=Math.floor(It/2);ze={top:pn,bottom:Ut,left:an,right:It-an,front:on,back:cr,type:"SAME"}}else{if(ee!=="valid")throw Error("Unknown padding parameter: "+ee);ze={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},Ke=Math.ceil((he-$e+1)/Se),qe=Math.ceil((me-et+1)/Ae),pt=Math.ceil((be-Qe+1)/Pe)}return{padInfo:ze,outDepth:Ke,outHeight:qe,outWidth:pt}}(o,c,f,d,S,R,k,B,z,V,s),K=Z.padInfo,ne=Z.outDepth,J=Z.outHeight,$=Z.outWidth,Y=i?b*p:b;return a==="channelsFirst"?v=[l,Y,ne,J,$]:a==="channelsLast"&&(v=[l,ne,J,$,Y]),{batchSize:l,dataFormat:a,inDepth:c,inHeight:f,inWidth:d,inChannels:p,outDepth:ne,outHeight:J,outWidth:$,outChannels:Y,padInfo:K,strideDepth:S,strideHeight:R,strideWidth:k,filterDepth:x,filterHeight:w,filterWidth:y,effectiveFilterDepth:B,effectiveFilterHeight:z,effectiveFilterWidth:V,dilationDepth:P,dilationHeight:D,dilationWidth:N,inShape:e,outShape:v,filterShape:t}}function VS(e,t,n,r){r===void 0&&(r=1);var o=Zs(t,r);return Math.floor((e[0]*(n-1)-n+o)/2)}function Rd(e){return typeof e=="number"?[e,e,e]:e.length===2?[e[0],e[1],1]:e}function zm(e){return typeof e=="number"?[e,e,e]:e}function Zs(e,t){return t<=1?e:e+(e-1)*(t-1)}function El(e,t){if(!t)return e;switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode "+t)}}function xu(e){var t=Rd(e),n=t[0],r=t[1],o=t[2];return n===1&&r===1&&o===1}function _r(e,t){return xu(e)||xu(t)}function Ey(e){if(e==="NHWC")return"channelsLast";if(e==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat "+e)}function GS(e,t,n){if(t==="complex64"){if(e.dtype==="complex64")return e.clone();var r=Wt(e.shape),o=e.toFloat(),i=n.complex(o,r);return r.dispose(),o.dispose(),i}if(!oM(e.dtype,t))return q.makeTensorFromDataId(e.dataId,e.shape,t);if(e.dtype==="complex64"){var a=n.real(e);return i=a.cast(t),a.dispose(),i}if(t==="int32")return n.int(e);if(t==="bool"){var s=Ee(0,e.dtype);return i=n.notEqual(e,s),s.dispose(),i}throw new Error("Error in Cast: failed to cast "+e.dtype+" to "+t)}function Um(e,t){return q.makeTensorFromDataId(e.dataId,t,e.dtype)}function qS(e,t,n){var r=(t-e)/(n-1),o=hc(n,"float32");o[0]=e;for(var i=1;i<o.length;i++)o[i]=o[i-1]+r;return hn(o,"float32")}function $m(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+e.length+", imag: "+t.length+".");for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function gw(e,t){return{real:e[2*t],imag:e[2*t+1]}}function A4(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function P4(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}function F4(e,t,n){var r=function(i,a,s){return function(u,l,c){for(var f=0,d=u.length,p=0,v=!1;f<d;){var x=c(l,u[p=f+(d-f>>>1)]);x>0?f=p+1:(d=p,v=!x)}return v?f:-f-1}(i,a,s||O4)}(e,t,n),o=r<0?-(r+1):r;e.splice(o,0,t)}function O4(e,t){return e>t?1:e<t?-1:0}function Cy(e,t,n,r,o){return KS(e,t,n,r,o,0).selectedIndices}function Sy(e,t,n,r,o,i){var a=KS(e,t,n,r,o,i);return a.numValidOutputs.dispose(),{selectedIndices:a.selectedIndices,selectedScores:a.selectedScores}}function KS(e,t,n,r,o,i,a,s){s===void 0&&(s=!1);for(var u=Array.from(t).map(function(S,R){return{score:S,boxIndex:R,suppressBeginIndex:0}}).filter(function(S){return S.score>o}).sort(yw),l=i>0?-.5/i:0,c=[],f=[];c.length<n&&u.length>0;){var d=u.pop(),p=d.score,v=d.boxIndex,x=d.suppressBeginIndex;if(p<o)break;for(var w=!1,y=c.length-1;y>=x;--y){var b=M4(e,v,c[y]);if(b>=r){w=!0;break}if(d.score=d.score*L4(r,l,b),d.score<=o)break}d.suppressBeginIndex=c.length,w||(d.score===p?(c.push(v),f.push(d.score)):d.score>o&&F4(u,d,yw))}var E=c.length;return s&&(c.fill(0,E),f.fill(0,E)),{selectedIndices:hn(c,"int32"),selectedScores:hn(f,"float32"),numValidOutputs:Ee(E,"int32")}}function M4(e,t,n){var r=e.subarray(4*t,4*t+4),o=e.subarray(4*n,4*n+4),i=Math.min(r[0],r[2]),a=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(o[0],o[2]),c=Math.min(o[1],o[3]),f=Math.max(o[0],o[2]),d=Math.max(o[1],o[3]),p=(s-i)*(u-a),v=(f-l)*(d-c);if(p<=0||v<=0)return 0;var x=Math.max(i,l),w=Math.max(a,c),y=Math.min(s,f),b=Math.min(u,d),E=Math.max(y-x,0)*Math.max(b-w,0);return E/(p+v-E)}function L4(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function yw(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function XS(e,t,n){var r=new Array(e.rank).fill(0),o=e.shape.slice();return t.map(function(i){o[n]=i;var a=e.slice(r,o);return r[n]+=i,a})}function YS(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];var o=ot(n,e.dtype);for(r=0;r<o.values.length;++r){for(var i=o.indexToLoc(r),a=new Array(e.rank),s=0;s<a.length;s++)a[s]=i[s]%e.shape[s];var u=e.locToIndex(a);o.values[r]=e.values[u]}return o.toTensor()}function QS(e,t,n,r,o){for(var i=t[t.length-1],a=[e.length/i,i],s=a[0],u=a[1],l=Hl(n,s*r),c=Hl("int32",s*r),f=0;f<s;f++){for(var d=f*u,p=e.subarray(d,d+u),v=[],x=0;x<p.length;x++)v.push({value:p[x],index:x});v.sort(function(S,R){return R.value-S.value});var w=f*r,y=l.subarray(w,w+r),b=c.subarray(w,w+r);for(x=0;x<r;x++)y[x]=v[x].value,b[x]=v[x].index}var E=t.slice();return E[E.length-1]=r,[Wn(l,E,n),Wn(c,E,"int32")]}function _y(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);var o=ot(e,"int32"),i=ot([n.length,e.length],"int32");for(r=0;r<n.length;r++){var a=o.indexToLoc(n[r]),s=r*e.length;i.values.set(a,s)}return i.toTensor()}var B4=function(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map(function(o,i){return"T"+i});var n=[];this.variableNames.forEach(function(o){n.push("float v"+o+" = get"+o+"AtOutCoords();")});var r=this.variableNames.map(function(o){return"v"+o}).join(" + ");this.userCode=`
      void main() {
        `+n.join(`
        `)+`

        float result = `+r+`;
        setOutput(result);
      }
    `},j4=function(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map(function(o,i){return"T"+i});var n=[];this.variableNames.forEach(function(o){n.push("vec4 v"+o+" = get"+o+"AtOutCoords();")});var r=this.variableNames.map(function(o){return"v"+o}).join(" + ");this.userCode=`
      void main() {
        `+n.join(`
        `)+`

        vec4 result = `+r+`;
        setOutput(result);
      }
    `},W4=function(e,t,n){this.variableNames=["A"];var r=e.windowSize,o=e.batchSize,i=e.inSize,a=Math.ceil(i/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[o,a];var s=t==="max"?">":"<",u=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+r+`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `+r+`; i++) {
          int inIdx = `+u+`;
          float candidate = getA(batch, inIdx);
          if (candidate `+s+` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `};function JS(e,t){return["x","y","z","w","u","v"].slice(0,t).map(function(n){return e+"."+n})}function yr(e,t){return t===1?[e]:JS(e,t)}function Xn(){var e,t,n,r,o,i,a,s,u,l;return ce().getNumber("WEBGL_VERSION")===2?(e="#version 300 es",t="in",n="out",r="in",o="texture",i="outputColor",a="out vec4 outputColor;",s=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,u="",l=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(e="",t="attribute",n="varying",r="varying",o="texture2D",i="gl_FragColor",a="",s=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,u=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,l=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:o,output:i,defineOutput:a,defineSpecialNaN:s,defineSpecialInf:u,defineRound:l}}function Ua(e,t,n){n===void 0&&(n="index");var r=Uo(t);return r.map(function(o,i){return"int "+e[i]+" = "+n+" / "+o+"; "+(i===r.length-1?"int "+e[i+1]+" = "+n+" - "+e[i]+" * "+o:"index -= "+e[i]+" * "+o)+";"}).join("")}function ky(e){var t=Uo(e).map(function(n){return n.toString()});return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * `+t[0]+" + coords.y * "+t[1]+` + coords.z;
  }
`}var ZS=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;function z4(e,t,n,r){var o=[];e.forEach(function(p){var v=Fe(p.shapeInfo.logicalShape);p.shapeInfo.isUniform?o.push("uniform float "+p.name+(v>1?"["+v+"]":"")+";"):(o.push("uniform sampler2D "+p.name+";"),o.push("uniform int offset"+p.name+";"))});var i,a,s=o.join(`
`),u=e.map(function(p){return function(v,x,w){w===void 0&&(w=!1);var y="";y+=w?e_(v):ks(v);var b=v.shapeInfo.logicalShape,E=x.logicalShape;return b.length<=E.length&&(y+=w?function(S,R){var k,m=S.name,P=m.charAt(0).toUpperCase()+m.slice(1),D="get"+P+"AtOutCoords",N=S.shapeInfo.logicalShape.length,B=R.logicalShape.length,z=Gi(S.shapeInfo.logicalShape,R.logicalShape),V=Bt(B),Z=B-N,K=["x","y","z","w","u","v"];k=N===0?"":B<2&&z.length>=1?"coords = 0;":z.map(function(me){return"coords."+K[me+Z]+" = 0;"}).join(`
`);var ne="";ne=B<2&&N>0?"coords":S.shapeInfo.logicalShape.map(function(me,be){return"coords."+K[be+Z]}).join(", ");var J="return outputValue;",$=Fe(S.shapeInfo.logicalShape)===1,Y=Fe(R.logicalShape)===1;if(N!==1||$||Y){if($&&!Y)J=B===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if(z.length){var ee=N-2,he=N-1;z.indexOf(ee)>-1&&z.indexOf(he)>-1?J="return vec4(outputValue.x);":z.indexOf(ee)>-1?J="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":z.indexOf(he)>-1&&(J="return vec4(outputValue.xx, outputValue.zz);")}}else J=`
      return vec4(outputValue.xy, outputValue.xy);
    `;return`
    vec4 `+D+`() {
      `+V+` coords = getOutputCoords();
      `+k+`
      vec4 outputValue = get`+P+"("+ne+`);
      `+J+`
    }
  `}(v,x):function(S,R){var k=S.name,m=k.charAt(0).toUpperCase()+k.slice(1),P="get"+m+"AtOutCoords",D=R.texShape,N=S.shapeInfo.texShape,B=S.shapeInfo.logicalShape.length,z=R.logicalShape.length;if(!S.shapeInfo.isUniform&&B===z&&S.shapeInfo.flatOffset==null&&Nn(N,D))return`
      float `+P+`() {
        return sampleTexture(`+k+`, resultUV);
      }
    `;var V,Z=Bt(z),K=Gi(S.shapeInfo.logicalShape,R.logicalShape),ne=z-B,J=["x","y","z","w","u","v"];V=B===0?"":z<2&&K.length>=1?"coords = 0;":K.map(function(Y){return"coords."+J[Y+ne]+" = 0;"}).join(`
`);var $="";return $=z<2&&B>0?"coords":S.shapeInfo.logicalShape.map(function(Y,ee){return"coords."+J[ee+ne]}).join(", "),`
    float `+P+`() {
      `+Z+` coords = getOutputCoords();
      `+V+`
      return get`+m+"("+$+`);
    }
  `}(v,x)),y}(p,t,r)}).join(`
`),l=t.texShape,c=Xn(),f=function(p){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `+p.texture2D+`(textureSampler, uv).r;
    }
  `}(c),d=function(p){return p.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+p.varyingFs+` vec2 resultUV;
    `+p.defineOutput+`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    `+p.defineSpecialNaN+`
    `+p.defineSpecialInf+`
    `+p.defineRound+`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `+U4+`
    `+$4+`
    `+H4+`
  `}(c);return t.isPacked?(i=function(p,v){switch(p.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(S,R){var k=[Math.ceil(R[0]/2),Math.ceil(R[1]/2)];return k[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `+k[1]+`.0);
      }
    `:k[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `+k[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+k[0]+", "+k[1]+`));
      return 2 * (resTexRC.x * `+k[1]+` + resTexRC.y);
    }
  `}(0,v);case 2:return function(S,R){var k=[Math.ceil(R[0]/2),Math.ceil(R[1]/2)];if(Nn(S,R))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`+k[0]+", "+k[1]+`));
      }
    `;var m=Math.ceil(S[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+k[0]+", "+k[1]+`));

      int index = resTexRC.x * `+k[1]+` + resTexRC.y;
      int r = 2 * (index / `+m+`);
      int c = imod(index, `+m+`) * 2;

      return ivec2(r, c);
    }
  `}(p,v);case 3:return x=p,w=v,y=[Math.ceil(w[0]/2),Math.ceil(w[1]/2)],b=Math.ceil(x[2]/2),E=b*Math.ceil(x[1]/2),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+y[0]+", "+y[1]+`));
      int index = resTexRC.x * `+y[1]+` + resTexRC.y;

      int b = index / `+E+`;
      index -= b * `+E+`;

      int r = 2 * (index / `+b+`);
      int c = imod(index, `+b+`) * 2;

      return ivec3(b, r, c);
    }
  `;default:return function(S,R){for(var k=[Math.ceil(R[0]/2),Math.ceil(R[1]/2)],m=Math.ceil(S[S.length-1]/2),P=m*Math.ceil(S[S.length-2]/2),D=P,N="",B="b, r, c",z=2;z<S.length-1;z++)D*=S[S.length-z-1],N=`
      int b`+z+" = index / "+D+`;
      index -= b`+z+" * "+D+`;
    `+N,B="b"+z+", "+B;return`
    ivec`+S.length+` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+k[0]+", "+k[1]+`));
      int index = resTexRC.x * `+k[1]+` + resTexRC.y;

      `+N+`

      int b = index / `+P+`;
      index -= b * `+P+`;

      int r = 2 * (index / `+m+`);
      int c = imod(index, `+m+`) * 2;

      return ivec`+S.length+"("+B+`);
    }
  `}(p,v)}var x,w,y,b,E}(t.logicalShape,l),a=function(p){return`
    void setOutput(vec4 val) {
      `+p.output+` = val;
    }
  `}(c)):(i=function(p,v){switch(p.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(y,b){return b[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * `+b[1]+`.0);
      }
    `:b[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * `+b[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+b[0]+", "+b[1]+`));
      return resTexRC.x * `+b[1]+` + resTexRC.y;
    }
  `}(0,v);case 2:return function(y,b){return Nn(y,b)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`+b[0]+", "+b[1]+`));
      }
    `:y[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+b[0]+", "+b[1]+`));
        int index = resTexRC.x * `+b[1]+` + resTexRC.y;
        return ivec2(index, 0);
      }
    `:y[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+b[0]+", "+b[1]+`));
        int index = resTexRC.x * `+b[1]+` + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+b[0]+", "+b[1]+`));
      int index = resTexRC.x * `+b[1]+` + resTexRC.y;
      int r = index / `+y[1]+`;
      int c = index - r * `+y[1]+`;
      return ivec2(r, c);
    }
  `}(p,v);case 3:return x=v,w=Ua(["r","c","d"],p),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+x[0]+", "+x[1]+`));
      int index = resTexRC.x * `+x[1]+` + resTexRC.y;
      `+w+`
      return ivec3(r, c, d);
    }
  `;case 4:return function(y,b){var E=Ua(["r","c","d","d2"],y);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+b[0]+", "+b[1]+`));
      int index = resTexRC.x * `+b[1]+` + resTexRC.y;
      `+E+`
      return ivec4(r, c, d, d2);
    }
  `}(p,v);case 5:return function(y,b){var E=Ua(["r","c","d","d2","d3"],y);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`+b[0]+`,
                             `+b[1]+`));

      int index = resTexRC.x * `+b[1]+` + resTexRC.y;

      `+E+`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}(p,v);case 6:return function(y,b){var E=Ua(["r","c","d","d2","d3","d4"],y);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+b[0]+", "+b[1]+`));
      int index = resTexRC.x * `+b[1]+` + resTexRC.y;

      `+E+`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}(p,v);default:throw new Error(p.length+"-D output sampling is not yet supported")}var x,w}(t.logicalShape,l),a=function(p){return`
    void setOutput(float val) {
      `+p.output+` = vec4(val, 0, 0, 0);
    }
  `}(c)),r&&(d+=V4),[d,f,a,s,i,u,n].join(`
`)}function ks(e){var t=e.shapeInfo.logicalShape;switch(t.length){case 0:return function(n){var r=n.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1);if(n.shapeInfo.isUniform)return"float "+o+"() {return "+r+";}";var i=n.shapeInfo.texShape,a=i[0],s=i[1];if(a===1&&s===1)return`
      float `+o+`() {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var u=n.shapeInfo.texShape,l=u[0],c=u[1],f=Ra(r);return`
    float `+o+`() {
      vec2 uv = uvFromFlat(`+l+", "+c+", "+f+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(e);case 1:return function(n){var r=n.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1);if(n.shapeInfo.isUniform)return`
      float `+o+`(int index) {
        `+bs(n)+`
      }
    `;var i=n.shapeInfo.texShape,a=i[0],s=i[1];if(s===1&&a===1)return`
      float `+o+`(int index) {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var u=Ra(r);return s===1?`
      float `+o+`(int index) {
        vec2 uv = vec2(0.5, (float(index + `+u+") + 0.5) / "+a+`.0);
        return sampleTexture(`+r+`, uv);
      }
    `:a===1?`
      float `+o+`(int index) {
        vec2 uv = vec2((float(index + `+u+") + 0.5) / "+s+`.0, 0.5);
        return sampleTexture(`+r+`, uv);
      }
    `:`
    float `+o+`(int index) {
      vec2 uv = uvFromFlat(`+a+", "+s+", index + "+u+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(e);case 2:return function(n){var r=n.shapeInfo.logicalShape,o=n.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),a=n.shapeInfo.texShape;if(a!=null&&Nn(r,a)){var s=a[0],u=a[1];return`
    float `+i+`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`+u+".0, "+s+`.0);
      return sampleTexture(`+o+`, uv);
    }
  `}var l=Oa(r),c=l.newShape,f=l.keptDims,d=c;if(d.length<r.length){var p=Rs(n,d);return`
      `+ks(p)+`
      float `+i+`(int row, int col) {
        return `+i+"("+Ts(["row","col"],f)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+i+`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`+r[1]+`, 1)));
        `+bs(n)+`
      }
    `;var v=a[0],x=a[1],w=Ra(o);return x===1?`
    float `+i+`(int row, int col) {
      float index = dot(vec3(row, col, `+w+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `+v+`.0);
      return sampleTexture(`+o+`, uv);
    }
  `:v===1?`
    float `+i+`(int row, int col) {
      float index = dot(vec3(row, col, `+w+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `+x+`.0, 0.5);
      return sampleTexture(`+o+`, uv);
    }
  `:`
  float `+i+`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `+r[1]+" + col + "+w+`;
    vec2 uv = uvFromFlat(`+v+", "+x+`, index);
    return sampleTexture(`+o+`, uv);
  }
`}(e);case 3:return function(n){var r=n.shapeInfo.logicalShape,o=n.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),a=r[1]*r[2],s=r[2],u=Oa(r),l=u.newShape,c=u.keptDims,f=l;if(f.length<r.length){var d=Rs(n,f);return`
        `+ks(d)+`
        float `+i+`(int row, int col, int depth) {
          return `+i+"("+Ts(["row","col","depth"],c)+`);
        }
      `}if(n.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`+a+", "+s+`, 1)));
        `+bs(n)+`
      }
    `;var p=n.shapeInfo.texShape,v=p[0],x=p[1],w=n.shapeInfo.flatOffset;if(x===a&&w==null)return`
        float `+i+`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`+s+`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`+x+".0, "+v+`.0);
          return sampleTexture(`+o+`, uv);
        }
      `;if(x===s&&w==null)return`
    float `+i+`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`+r[1]+`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+x+".0, "+v+`.0);
      return sampleTexture(`+o+`, uv);
    }
  `;var y=Ra(o);return`
      float `+i+`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `+a+" + col * "+s+" + depth + "+y+`;
        vec2 uv = uvFromFlat(`+v+", "+x+`, index);
        return sampleTexture(`+o+`, uv);
      }
  `}(e);case 4:return function(n){var r=n.shapeInfo.logicalShape,o=n.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),a=r[3],s=r[2]*a,u=r[1]*s,l=Oa(r),c=l.newShape,f=l.keptDims;if(c.length<r.length){var d=Rs(n,c);return`
      `+ks(d)+`
      float `+i+`(int row, int col, int depth, int depth2) {
        return `+i+"("+Ts(["row","col","depth","depth2"],f)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`+u+", "+s+", "+a+`, 1)));
        `+bs(n)+`
      }
    `;var p=n.shapeInfo.flatOffset,v=n.shapeInfo.texShape,x=v[0],w=v[1];if(w===u&&p==null)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`+s+", "+a+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+w+".0, "+x+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;if(w===a&&p==null)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`+r[1]*r[2]+", "+r[2]+`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+w+".0, "+x+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;var y=Ra(o);return`
    float `+i+`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+u+" + col * "+s+` +
          depth * `+a+` + depth2;
      vec2 uv = uvFromFlat(`+x+", "+w+", index + "+y+`);
      return sampleTexture(`+o+`, uv);
    }
  `}(e);case 5:return function(n){var r=n.shapeInfo.logicalShape,o=n.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),a=r[4],s=r[3]*a,u=r[2]*s,l=r[1]*u,c=Oa(r),f=c.newShape,d=c.keptDims;if(f.length<r.length){var p=Rs(n,f);return`
      `+ks(p)+`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        return `+i+"("+Ts(["row","col","depth","depth2","depth3"],d)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`+l+", "+u+", "+s+", "+a+`)) +
          depth3;
        `+bs(n)+`
      }
    `;var v=n.shapeInfo.flatOffset,x=n.shapeInfo.texShape,w=x[0],y=x[1];if(y===l&&v==null)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`+u+", "+s+", "+a+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+y+".0, "+w+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;if(y===a&&v==null)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]+`,
               `+r[2]*r[3]+", "+r[3]+`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+y+".0, "+w+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;var b=Ra(o);return`
    float `+i+`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+l+" + col * "+u+" + depth * "+s+` +
          depth2 * `+a+" + depth3 + "+b+`;
      vec2 uv = uvFromFlat(`+w+", "+y+`, index);
      return sampleTexture(`+o+`, uv);
    }
  `}(e);case 6:return function(n){var r=n.shapeInfo.logicalShape,o=n.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),a=Oa(r),s=a.newShape,u=a.keptDims;if(s.length<r.length){var l=Rs(n,s);return`
      `+ks(l)+`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `+i+"("+Ts(["row","col","depth","depth2","depth3","depth4"],u)+`);
      }
    `}var c=r[5],f=r[4]*c,d=r[3]*f,p=r[2]*d,v=r[1]*p;if(n.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`+v+", "+p+", "+d+", "+f+`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`+c+`, 1)));
        `+bs(n)+`
      }
    `;var x=n.shapeInfo.flatOffset,w=n.shapeInfo.texShape,y=w[0],b=w[1];if(b===v&&x==null)return`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`+p+", "+d+", "+f+", "+c+`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+b+".0, "+y+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;if(b===c&&x==null)return`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]*r[4]+`,
               `+r[2]*r[3]*r[4]+`,
               `+r[3]*r[4]+`,
               `+r[4]+`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+b+".0, "+y+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;var E=Ra(o);return`
    float `+i+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+v+" + col * "+p+" + depth * "+d+` +
          depth2 * `+f+" + depth3 * "+c+" + depth4 + "+E+`;
      vec2 uv = uvFromFlat(`+y+", "+b+`, index);
      return sampleTexture(`+o+`, uv);
    }
  `}(e);default:throw new Error(t.length+"-D input sampling is not yet supported")}}function e_(e){var t,n,r;switch(e.shapeInfo.logicalShape.length){case 0:return t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=Xn(),`
    vec4 `+n+`() {
      return `+r.texture2D+"("+t+`, halfCR);
    }
  `;case 1:return function(o){var i=o.name,a="get"+i.charAt(0).toUpperCase()+i.slice(1),s=o.shapeInfo.texShape,u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],l=Xn();return`
    vec4 `+a+`(int index) {
      vec2 uv = packedUVfrom1D(
        `+u[0]+", "+u[1]+`, index);
      return `+l.texture2D+"("+i+`, uv);
    }
  `}(e);case 2:return function(o){var i=o.shapeInfo.logicalShape,a=o.name,s="get"+a.charAt(0).toUpperCase()+a.slice(1),u=o.shapeInfo.texShape,l=u[0],c=u[1],f=Xn();if(u!=null&&Nn(i,u))return`
      vec4 `+s+`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`+c+".0, "+l+`.0);

        return `+f.texture2D+"("+a+`, uv);
      }
    `;var d=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)],p=Math.ceil(i[1]/2);return`
    vec4 `+s+`(int row, int col) {
      vec2 uv = packedUVfrom2D(`+p+", "+d[0]+", "+d[1]+`, row, col);
      return `+f.texture2D+"("+a+`, uv);
    }
  `}(e);case 3:return function(o){var i=o.shapeInfo.logicalShape,a=o.name,s="get"+a.charAt(0).toUpperCase()+a.slice(1),u=o.shapeInfo.texShape,l=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)];if(i[0]===1){var c=i.slice(1),f=Rs(o,c);return`
        `+e_(f)+`
        vec4 `+s+`(int b, int row, int col) {
          return `+s+"("+Ts(["b","row","col"],[1,2])+`);
        }
      `}var d=l[0],p=l[1],v=Math.ceil(i[2]/2),x=v*Math.ceil(i[1]/2),w=Xn();return`
    vec4 `+s+`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `+d+", "+p+", "+x+", "+v+`, b, row, col);
      return `+w.texture2D+"("+a+`, uv);
    }
  `}(e);default:return function(o){for(var i=o.shapeInfo.logicalShape,a=i.length,s=o.name,u="get"+s.charAt(0).toUpperCase()+s.slice(1),l=o.shapeInfo.texShape,c=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)],f=c[0],d=c[1],p=Math.ceil(i[a-1]/2),v=p*Math.ceil(i[a-2]/2),x="int b, int row, int col",w="b * "+v+" + (row / 2) * "+p+" + (col / 2)",y=2;y<a-1;y++)x="int b"+y+", "+x,v*=i[a-y-1],w="b"+y+" * "+v+" + "+w;var b=Xn();return`
    vec4 `+u+"("+x+`) {
      int index = `+w+`;
      int texR = index / `+d+`;
      int texC = index - texR * `+d+`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+d+", "+f+`);
      return `+b.texture2D+"("+s+`, uv);
    }
  `}(e)}}var U4=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,$4=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,H4=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,V4=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function Ra(e){return"offset"+e}function bs(e){var t=e.name,n=Fe(e.shapeInfo.logicalShape);return n<2?"return "+t+";":`
    for (int i = 0; i < `+n+`; i++) {
      if (i == index) {
        return `+t+`[i];
      }
    }
  `}function Bt(e){if(e<=1)return"int";if(e===2)return"ivec2";if(e===3)return"ivec3";if(e===4)return"ivec4";if(e===5)return"ivec5";if(e===6)return"ivec6";throw Error("GPU for rank "+e+" is not yet supported")}function Rs(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function Ts(e,t){return t.map(function(n){return e[n]}).join(", ")}var G4=function(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,M(e.length>2,function(){return"Packed arg"+(n.charAt(0).toUpperCase()+n.slice(1))+" supports only inputs with rank above 2."});var o=e[e.length-1],i=Math.ceil(o/t);this.outputShape=e.slice(0,-1),i>1&&this.outputShape.push(i),r||this.variableNames.push("bestIndicesA");var a,s,u=this.outputShape,l=u.length,c=Bt(l),f=yr("coords",l);if(i===1){var d=Bt(s=l+1);a=`
        `+d+" sourceLocR = "+d+"("+f.join()+`, 0);
        ++`+f[l-1]+`;
        `+d+" sourceLocG = "+d+"("+f.join()+`, 0);
        ++`+f[l-2]+`;
        `+d+" sourceLocA = "+d+"("+f.join()+`, 0);
        --`+f[l-1]+`;
        `+d+" sourceLocB = "+d+"("+f.join()+`, 0);
        --`+f[l-2]+";"}else s=l,a=`
        `+c+` sourceLocR = coords;
        ++`+f[l-1]+`;
        `+c+` sourceLocG = coords;
        ++`+f[l-2]+`;
        `+c+` sourceLocA = coords;
        --`+f[l-1]+`;
        `+c+` sourceLocB = coords;
        --`+f[l-2]+";";var p=["x","y","z","w","u","v"].slice(0,s),v="."+p[s-1],x=p.map(function(P){return"int "+P}),w=yr("sourceLocR",s-1).concat("inIdx.r"),y=yr("sourceLocG",s-1).concat("inIdx.g"),b=yr("sourceLocB",s-1).concat("inIdx.b"),E=yr("sourceLocA",s-1).concat("inIdx.a"),S=n==="max"?"greaterThan":"lessThan",R=r?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`+w.join()+`),
                             getBestIndicesAChannel(`+y.join()+`),
                             getBestIndicesAChannel(`+b.join()+`),
                             getBestIndicesAChannel(`+E.join()+")));",k=`vec4(
            getAChannel(`+w.join()+`),
            hasNextCol ? getAChannel(`+y.join()+`) : 0.,
            hasNextRow ? getAChannel(`+b.join()+`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`+E.join()+") : 0.)",m=r?"":`
      float getBestIndicesAChannel(`+x.join()+`) {
        return getChannel(getBestIndicesA(`+p.join()+`),
                                          vec2(`+p.slice(-2).join()+`));
      }`;this.userCode=`
      float getAChannel(`+x.join()+`) {
        return getChannel(getA(`+p.join()+`),
                               vec2(`+p.slice(-2).join()+`));
      }
      `+m+`
      void main() {
        `+c+` coords = getOutputCoords();
        bool hasNextCol = `+f[l-1]+" < "+(u[l-1]-1)+`;
        bool hasNextRow = `+f[l-2]+" < "+(u[l-2]-1)+`;
        `+a+`
        ivec4 srcIdx = ivec4(sourceLocR`+v+", sourceLocG"+v+`,
          sourceLocB`+v+", sourceLocA"+v+") * "+t+`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `+k+`;

        for (int i = 0; i < `+t+`; i++) {
          inIdx = srcIdx;
          `+R+`
          vec4 candidate = `+k+`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`+S+`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `},q4=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,o=e.strideWidth,i=e.dilationHeight,a=e.dilationWidth,s=e.effectiveFilterHeight,u=e.effectiveFilterWidth,l=s-1-e.padInfo.top,c=u-1-e.padInfo.left,f=1/(t*n);this.userCode=`
      const ivec2 pads = ivec2(`+l+", "+c+`);
      const float avgMultiplier = float(`+f+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+s+`;
            wR += `+i+`) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+u+`;
            wC+= `+a+`) {
            float dyC = float(dyCCorner + wC) / `+o+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `},K4=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,o=e.strideDepth,i=e.strideHeight,a=e.strideWidth,s=e.dilationDepth,u=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterDepth,f=e.effectiveFilterHeight,d=e.effectiveFilterWidth,p=c-1-e.padInfo.front,v=f-1-e.padInfo.top,x=d-1-e.padInfo.left,w=1/(t*n*r);this.userCode=`
      const ivec3 pads = ivec3(`+p+", "+v+", "+x+`);
      const float avgMultiplier = float(`+w+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+c+`;
            wD += `+s+`) {
          float dyD = float(dyDCorner + wD) / `+o+`.0;

          if (dyD < 0.0 || dyD >= `+e.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+f+`;
              wR += `+u+`) {
            float dyR = float(dyRCorner + wR) / `+i+`.0;

            if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+d+`;
                wC += `+l+`) {
              float dyC = float(dyCCorner + wC) / `+a+`.0;

              if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `},X4=function(e,t,n,r,o,i){this.outputShape=[],this.variableNames=["x","mean","variance"],ht(e,t),ht(e,n);var a="0.0";r!=null&&(ht(e,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");var s="1.0";o!=null&&(ht(e,o),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `+a+`;
        float scale = `+s+`;
        float inv = scale * inversesqrt(variance + float(`+i+`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `},Y4=function(e,t,n,r,o,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],ht(e,t),ht(e,n);var a="vec4(0.0)";r!=null&&(ht(e,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");var s="vec4(1.0)";o!=null&&(ht(e,o),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = `+a+`;
        vec4 scale = `+s+`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`+i+`));

        setOutput((x - mean) * inv + offset);
      }
    `},Q4="return areal * breal - aimag * bimag;",J4="return areal * bimag + aimag * breal;",xw=function(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=ht(t,n),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `+e+`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `},Jp="return a + b;",Zp="return a - b;",ww="return a * b;",t_="return (a < 0.) ? b * a : a;",Zt=function(e,t,n){this.variableNames=["A","B"],this.outputShape=ht(t,n),this.userCode=`
      float binaryOperation(float a, float b) {
        `+e+`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `},n_=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,ni=function(e,t,n,r){r===void 0&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=ht(t,n);var o=this.outputShape.length,i="";if(r)if(o===0||Fe(this.outputShape)===1)i=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(i=`
          `+Bt(o)+` coords = getOutputCoords();
        `,o===1)i+=`
            result.y = (coords + 1) >= `+this.outputShape[0]+` ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{var a=yr("coords",o);i+=`
            bool nextRowOutOfBounds =
              (`+a[o-2]+" + 1) >= "+this.outputShape[o-2]+`;
            bool nextColOutOfBounds =
              (`+a[o-1]+" + 1) >= "+this.outputShape[o-1]+`;
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `+e+`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        `+i+`

        setOutput(result);
      }
    `},Z4=function(){function e(t){this.variableNames=["A"],this.outputShape=t,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}return e.prototype.getCustomSetupFunc=function(t,n){var r=this;return function(o,i){r.minLoc==null&&(r.minLoc=o.getUniformLocationNoThrow(i,"minVal"),r.maxLoc=o.getUniformLocationNoThrow(i,"maxVal")),o.gl.uniform1f(r.minLoc,t),o.gl.uniform1f(r.maxLoc,n)}},e}(),eL=function(){function e(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}return e.prototype.getCustomSetupFunc=function(t,n){var r=this;return function(o,i){r.minLoc==null&&(r.minLoc=o.getUniformLocationNoThrow(i,"minVal"),r.maxLoc=o.getUniformLocationNoThrow(i,"maxVal")),o.gl.uniform1f(r.minLoc,t),o.gl.uniform1f(r.maxLoc,n)}},e}(),tL=function(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `},nL=function(e){this.outputShape=[],this.outputShape=yu(e,1),this.variableNames=e.map(function(s,u){return"T"+u});var t=new Array(e.length-1);t[0]=e[0][1];for(var n=1;n<t.length;n++)t[n]=t[n-1]+e[n][1];var r=["if (yC < "+t[0]+") setOutput(getT0(yR, yC));"];for(n=1;n<t.length;n++){var o=t[n-1];r.push("else if (yC < "+t[n]+") setOutput(getT"+n+"(yR, yC-"+o+"));")}var i=t.length,a=t[t.length-1];r.push("else setOutput(getT"+i+"(yR, yC-"+a+"));"),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `+r.join(`
        `)+`
      }
    `},rL=function(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=yu(e,t);var n=this.outputShape,r=n.length,o=Bt(r),i=yr("coords",r),a=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map(function(w,y){return"T"+y});var s=new Array(e.length-1);s[0]=e[0][t];for(var u=1;u<s.length;u++)s[u]=s[u-1]+e[u][t];var l=a[t],c=a.slice(-2),f=a.join(),d="if ("+l+" < "+s[0]+`) {
        return getChannel(
            getT0(`+f+"), vec2("+c.join()+`));
        }`;for(u=1;u<s.length;u++){var p=s[u-1];d+=`
        if (`+l+" < "+s[u]+"  && "+l+" >= "+s[u-1]+`) {
          return getChannel(
            getT`+u+"("+rf(a,l,p)+`),
            vec2(`+rf(c,l,p)+`));
        }`}var v=s.length,x=s[s.length-1];d+=`
        return getChannel(
          getT`+v+"("+rf(a,l,x)+`),
          vec2(`+rf(c,l,x)+"));",this.userCode=`
      float getValue(`+a.map(function(w){return"int "+w})+`) {
        `+d+`
      }

      void main() {
        `+o+` coords = getOutputCoords();
        vec4 result = vec4(getValue(`+i+`), 0., 0., 0.);

        `+i[r-1]+" = "+i[r-1]+` + 1;
        if (`+i[r-1]+" < "+n[r-1]+`) {
          result.g = getValue(`+i+`);
        }

        `+i[r-2]+" = "+i[r-2]+` + 1;
        if (`+i[r-2]+" < "+n[r-2]+`) {
          result.a = getValue(`+i+`);
        }

        `+i[r-1]+" = "+i[r-1]+` - 1;
        if (`+i[r-2]+" < "+n[r-2]+` &&
            `+i[r-1]+" < "+n[r-1]+`) {
          result.b = getValue(`+i+`);
        }
        setOutput(result);
      }
    `};function rf(e,t,n){var r=e.indexOf(t);return e.map(function(o,i){return i===r?o+" - "+n:o}).join()}var oL=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,o=e.padInfo.left,i=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `+e.batchSize+`; b++) {
          for (int yR = 0; yR < `+e.outHeight+`; yR++) {
            int xR = wR + yR * `+t+" - "+r+`;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+e.outWidth+`; yC++) {
              int xC = wC + yC * `+n+" - "+o+`;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              if (`+i+`) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},iL=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,o=e.strideWidth,i=e.dataFormat==="channelsLast",a=t-1-e.padInfo.top,s=n-1-e.padInfo.left,u=i?1:2,l=i?2:3,c=i?3:1;this.userCode=`
      const ivec2 pads = ivec2(`+a+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[`+c+`];

        ivec2 dyCorner = ivec2(coords[`+u+"], coords["+l+`]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+t+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+t+` - 1 - wR;

          for (int wC = 0; wC < `+n+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+o+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+n+` - 1 - wC;

            for (int d2 = 0; d2 < `+e.outChannels+`; d2++) {

              if (`+i+`) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},aL=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,o=e.padInfo.front,i=e.padInfo.top,a=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `+e.batchSize+`; b++) {
          for (int yF = 0; yF < `+e.outDepth+`; yF++) {
            int xF = wF + yF * `+t+" - "+o+`;

            if (xF < 0 || xF >= `+e.inDepth+`) {
              continue;
            }

            for (int yR = 0; yR < `+e.outHeight+`; yR++) {
              int xR = wR + yR * `+n+" - "+i+`;

              if (xR < 0 || xR >= `+e.inHeight+`) {
                continue;
              }

              for (int yC = 0; yC < `+e.outWidth+`; yC++) {
                int xC = wC + yC * `+r+" - "+a+`;

                if (xC < 0 || xC >= `+e.inWidth+`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},sL=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,o=e.strideDepth,i=e.strideHeight,a=e.strideWidth,s=t-1-e.padInfo.front,u=n-1-e.padInfo.top,l=r-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`+s+", "+u+", "+l+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `+t+`; wF++) {
          float dyF = float(dyFCorner + wF) / `+o+`.0;

          if (dyF < 0.0 || dyF >= `+e.outDepth+`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `+t+` - 1 - wF;

          for (int wR = 0; wR < `+n+`; wR++) {
            float dyR = float(dyRCorner + wR) / `+i+`.0;

            if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `+n+` - 1 - wR;

            for (int wC = 0; wC < `+r+`; wC++) {
              float dyC = float(dyCCorner + wC) / `+a+`.0;

              if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `+r+` - 1 - wC;

              for (int d2 = 0; d2 < `+e.outChannels+`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},uL=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,o=e.padInfo.left,i=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `+i+` + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < `+e.batchSize+`; b++) {
          for (int yR = 0; yR < `+e.outHeight+`; yR++) {
            int xR = wR + yR * `+t+" - "+r+`;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+e.outWidth+`; yC++) {
              int xC = wC + yC * `+n+" - "+o+`;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `},lL=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,o=e.strideWidth,i=t-1-e.padInfo.top,a=n-1-e.padInfo.left,s=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`+i+", "+a+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `+t+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+t+` - 1 - wR;

          for (int wC = 0; wC < `+n+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+o+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+n+` - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < `+s+`; dm++) {
              int d2 = d1 * `+s+` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `},bw=function(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var o=e.padInfo.top,i=e.padInfo.left,a=e.strideHeight,s=e.strideWidth,u=e.dilationHeight,l=e.dilationWidth,c=e.filterHeight,f=e.filterWidth,d=4*Math.floor(e.inChannels/4),p=e.inChannels%4,v=e.dataFormat==="channelsLast",x=v?1:2,w=v?2:3,y=v?3:1,b="",E="";n&&(b=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`
          float activation(float x) {
            `+n+`
          }
        `,E="result = activation(result);");var S=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+b+`

      const ivec2 strides = ivec2(`+a+", "+s+`);
      const ivec2 pads = ivec2(`+o+", "+i+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[`+y+`];

        ivec2 xRCCorner =
            ivec2(coords[`+x+"], coords["+w+`]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+c+`; wR++) {
          int xR = xRCorner + wR * `+u+`;

          if (xR < 0 || xR >= `+e.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+f+`; wC++) {
            int xC = xCCorner + wC * `+l+`;

            if (xC < 0 || xC >= `+e.inWidth+`) {
              continue;
            }

            for (int d1 = 0; d1 < `+d+`; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (`+v+`) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (`+(p===1)+`) {

              if (`+v+`) {
                dotProd +=
                    getX(batch, xR, xC, `+d+`) *
                    getW(wR, wC, `+d+`, d2);
              } else {
                dotProd +=
                    getX(batch, `+d+`, xR, xC) *
                    getW(wR, wC, `+d+`, d2);
              }

            } else if (`+(p===2)+`) {
              vec2 wValues = vec2(
                getW(wR, wC, `+d+`, d2),
                getW(wR, wC, `+d+` + 1, d2)
              );

              if (`+v+`) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, `+d+`),
                  getX(batch, xR, xC, `+d+` + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, `+d+`, xR, xC),
                  getX(batch, `+d+` + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (`+(p===3)+`) {
              vec3 wValues = vec3(
                getW(wR, wC, `+d+`, d2),
                getW(wR, wC, `+d+` + 1, d2),
                getW(wR, wC, `+d+` + 2, d2)
              );

              if (`+v+`) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, `+d+`),
                  getX(batch, xR, xC, `+d+` + 1),
                  getX(batch, xR, xC, `+d+` + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, `+d+`, xR, xC),
                  getX(batch, `+d+` + 1, xR, xC),
                  getX(batch, `+d+` + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        `+S+`
        `+E+`
        setOutput(result);
      }
    `},cL=function(e){this.variableNames=["x","W"],this.outputShape=e.outShape;var t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,o=e.strideDepth,i=e.strideHeight,a=e.strideWidth,s=e.dilationDepth,u=e.dilationHeight,l=e.dilationWidth,c=e.filterDepth,f=e.filterHeight,d=e.filterWidth,p=4*Math.floor(e.inChannels/4),v=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`+o+", "+i+", "+a+`);
      const ivec3 pads = ivec3(`+t+", "+n+", "+r+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `+c+`; wF++) {
          int xF = xFCorner + wF * `+s+`;

          if (xF < 0 || xF >= `+e.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+f+`; wR++) {
            int xR = xRCorner + wR * `+u+`;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+d+`; wC++) {
              int xC = xCCorner + wC * `+l+`;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              for (int d1 = 0; d1 < `+p+`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`+(v===1)+`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `+p+`) *
                  getW(wF, wR, wC, `+p+`, d2);
              } else if (`+(v===2)+`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `+p+`),
                  getX(batch, xF, xR, xC, `+p+` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `+p+`, d2),
                  getW(wF, wR, wC, `+p+` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`+(v===3)+`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `+p+`),
                  getX(batch, xF, xR, xC, `+p+` + 1),
                  getX(batch, xF, xR, xC, `+p+` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `+p+`, d2),
                  getW(wF, wR, wC, `+p+` + 1, d2),
                  getW(wF, wR, wC, `+p+` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},Ew=function(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var o=e.inHeight,i=e.inWidth,a=e.padInfo.top,s=e.padInfo.left,u=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,f=e.dilationWidth,d=e.filterHeight,p=e.filterWidth,v=e.outChannels/e.inChannels,x="",w="";n&&(x=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`
          float activation(float x) {
            `+n+`
          }
        `,w="result = activation(result);");var y=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+x+`

      const ivec2 strides = ivec2(`+u+", "+l+`);
      const ivec2 pads = ivec2(`+a+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `+v+`;
        int q = d2 - d1 * `+v+`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `+d+`; wR++) {
          int xR = xRCorner + wR * `+c+`;

          if (xR < 0 || xR >= `+o+`) {
            continue;
          }

          for (int wC = 0; wC < `+p+`; wC++) {
            int xC = xCCorner + wC * `+f+`;

            if (xC < 0 || xC >= `+i+`) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        `+y+`
        `+w+`
        setOutput(result);
      }
    `},Cw=function(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.outShape;for(var o=e.inHeight,i=e.inWidth,a=e.padInfo.top,s=e.padInfo.left,u=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,f=e.dilationWidth,d=e.filterHeight,p=e.filterWidth,v=p,x="int xR; int xC; int xCOffset;",w=0;w<d;w++)for(var y=0;y<p;y++)x+=`
          vec4 xTexelR`+w+"C"+2*y+` = vec4(0.);
          vec4 wR`+w+"C"+y+` = vec4(0.);
          vec4 xR`+w+"C"+y+" = vec4(0.);";for(w=0;w<d;w++)for(var b=0;b<v;b++){if(x+=`
          xR = xRCorner + `+w*c+`;
          xC = xCCorner + `+(y=2*b)*f+`;
        `,l===1){if(y<p&&(x+=s%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < `+o+" && xCOffset >= 0 && xCOffset < "+i+`) {
                  xTexelR`+w+"C"+y+` = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+i+`) {
                    xTexelR`+w+"C"+y+`.zw = vec2(0.);
                  }
                } else {
                  xTexelR`+w+"C"+y+` = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < `+o+" && xCOffset >= 0 && xCOffset < "+i+`) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+i+`) {
                    previous.zw = vec2(0.);
                  }

                  xR`+w+"C"+y+" = vec4(previous.zw, xTexelR"+w+"C"+y+`.xy);
                } else {
                  xR`+w+"C"+y+" = vec4(0, 0, xTexelR"+w+"C"+y+`.xy);
                }
              `:`
                if(xR >= 0 && xR < `+o+" && xC >= 0 && xC < "+i+`) {
                  xTexelR`+w+"C"+y+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+w+"C"+y+` = vec4(0.);
                }

                xR`+w+"C"+y+" = xTexelR"+w+"C"+y+`;
              `,y+1<p)){var E=s%2==0?wS(f):f;f%2==0&&s%2==1||f%2!=0&&s%2!=1?(x+=`
                  xCOffset = xC + `+s%2+" + "+E+`;

                  if(xR >= 0 && xR < `+o+` &&
                    xCOffset >= 0 && xCOffset < `+i+`) {
                    xTexelR`+w+"C"+(y+2)+` = getX(batch, xR, xCOffset, d1);
                  }
                `,f>1&&(x+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < `+o+` &&
                      xCOffset >= 0 && xCOffset < `+i+`) {
                      xTexelR`+w+"C"+y+` = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR`+w+"C"+y+` = vec4(0.);
                    }
                  `),x+=`
                  xR`+w+"C"+(y+1)+` = vec4(
                    xTexelR`+w+"C"+y+".zw, xTexelR"+w+"C"+(y+2)+`.xy);
                `):x+=`
                  xCOffset = xC + `+E+`;

                  if(xR >= 0 && xR < `+o+` &&
                    xCOffset >= 0 && xCOffset < `+i+`) {
                    xTexelR`+w+"C"+(y+2)+` = getX(batch, xR, xCOffset, d1);
                  }

                  xR`+w+"C"+(y+1)+" = xTexelR"+w+"C"+(y+2)+`;
                `}}else y<p&&(x+=`
              if(xR >= 0 && xR < `+o+`) {
            `,s%2==1?(x+=`
                xCOffset = xC + 1 - `+l+`;
                if(xCOffset >= 0 && xCOffset < `+i+`) {
                  xTexelR`+w+"C"+y+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+w+"C"+y+` = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < `+i+`) {
                  xTexelR`+w+"C"+(y+2)+` = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR`+w+"C"+(y+2)+` = vec4(0.);
                }

                xR`+w+"C"+y+` = vec4(
                  xTexelR`+w+"C"+y+".zw, xTexelR"+w+"C"+(y+2)+`.zw);
              `,y+1<p&&(x+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + `+l+`;
                  if(xCOffset >= 0 && xCOffset < `+i+`) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR`+w+"C"+(y+1)+" = vec4(xTexelR"+w+"C"+(y+2)+`.xy, final.xy);
                `)):(x+=`
                if(xC >= 0 && xC < `+i+`) {
                  xTexelR`+w+"C"+y+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+w+"C"+y+` = vec4(0.);
                }

                xCOffset = xC + `+l+`;
                if(xCOffset >= 0 && xCOffset < `+i+`) {
                  xTexelR`+w+"C"+(y+2)+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+w+"C"+(y+2)+` = vec4(0.);
                }

                xR`+w+"C"+y+` = vec4(
                  xTexelR`+w+"C"+y+".xy, xTexelR"+w+"C"+(y+2)+`.xy);
              `,y+1<p&&(x+=`
                  xR`+w+"C"+(y+1)+` = vec4(
                    xTexelR`+w+"C"+y+".zw, xTexelR"+w+"C"+(y+2)+`.zw);
                `)),x+="}");y<p&&(x+=`
            vec4 wTexelR`+w+"C"+y+" = getW("+w+", "+y+`, d1, q);
            wR`+w+"C"+y+" = vec4(wTexelR"+w+"C"+y+".xz, wTexelR"+w+"C"+y+`.xz);
          `,y+1<p&&(x+=`
              vec4 wTexelR`+w+"C"+(y+1)+" = getW("+w+", "+(y+1)+`, d1, q);
              wR`+w+"C"+(y+1)+` =
                vec4(wTexelR`+w+"C"+(y+1)+".xz, wTexelR"+w+"C"+(y+1)+".xz);"))}for(w=0;w<d;w++)for(y=0;y<p;y++)x+="dotProd += xR"+w+"C"+y+" * wR"+w+"C"+y+";";var S="",R="";n&&(S=r?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`vec4 activation(vec4 x) {
          `+n+`
        }`,R="result = activation(result);");var k=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+S+`

      const ivec2 strides = ivec2(`+u+", "+l+`);
      const ivec2 pads = ivec2(`+a+", "+s+`);

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        `+x+`

        vec4 result = dotProd;
        `+k+`
        `+R+`
        setOutput(result);
      }
    `},fL=function(e,t,n,r,o){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var i=e[0],a=e[1],s=e[2],u=e[3],l=t[0],c=n[0],f=n[1];this.outputShape=[l,c,f,u];var d=r==="bilinear"?1:0,p=[a-1+".0",s-1+".0"],v=p[0],x=p[1],w=c>1?[""+(a-1)/(c-1),"(y2-y1) * height_ratio","y1*"+v+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+v],y=w[0],b=w[1],E=w[2],S=f>1?[""+(s-1)/(f-1),"(x2-x1) * width_ratio","x1*"+x+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+x],R=S[0],k=S[1],m=S[2];this.userCode=`
      const float height_ratio = float(`+y+`);
      const float width_ratio = float(`+R+`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `+i+`) {
          return;
        }

        float height_scale = `+b+`;
        float width_scale = `+k+`;

        float in_y = `+E+`;
        if( in_y < 0.0 || in_y > `+v+` ) {
          setOutput(float(`+o+`));
          return;
        }
        float in_x = `+m+`;
        if( in_x < 0.0 || in_x > `+x+` ) {
          setOutput(float(`+o+`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`+d+` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `},dL=function(e,t,n){this.variableNames=["x"],this.outputShape=e;var r=e.length,o=e[e.length-1],i=n?"<":">";this.userCode=`
      int getIndex(int i) {
        `+(n?"return "+o+" -i - 1;":"return i;")+`
      }

      void main() {
        `+Bt(r)+` coords = getOutputCoords();
        int end = `+Sw(r,"coords")+`;
        float val = 0.0;
        for (int i = `+o+` - 1; i >= 0; i -= 1) {
          int idx = getIndex(i);
          if (idx `+i+` end) {
            continue;
          }
          if (idx == end && `+t+`) {
            continue;
          }
          `+Sw(r,"coords")+` = idx;
          val += getX(`+function(a,s){if(a===1)return""+s;if(a===2)return s+".x, "+s+".y";if(a===3)return s+".x, "+s+".y, "+s+".z";if(a===4)return s+".x, "+s+".y, "+s+".z, "+s+".w";throw Error("Cumulative sum for rank "+a+" is not yet supported")}(r,"coords")+`);
        }
        setOutput(val);
      }
    `};function Sw(e,t){if(e===1)return""+t;if(e===2)return t+".y";if(e===3)return t+".z";if(e===4)return t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}var hL=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Gl.DENSE;var t=bl(e),n=Xn();this.outputShape=e,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Ua(["r","c","d"],e)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+t[0]+", "+t[1]+`));
        int index = 4 * (resTexRC.x * `+t[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        `+n.output+` = result;
      }
    `},pL=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Gl.DENSE;var t=bl(e),n=Xn();this.outputShape=e,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Ua(["r","c","d"],e)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+t[0]+", "+t[1]+`));
        int index = 4 * (resTexRC.x * `+t[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        `+n.output+` = result;
      }
    `},vL=function(){function e(t,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `+this.getHeightCoordString()+`;
      int w = `+this.getWidthCoordString()+`;
      int d = `+this.getDepthCoordString()+`;

      int in_h = h / `+n+`;
      int offset_h = imod(h, `+n+`);
      int in_w = w / `+n+`;
      int offset_w = imod(w, `+n+`);
      int offset_d = (offset_h * `+n+` + offset_w) *
        `+this.getOutputDepthSize()+`;
      int in_d = d + offset_d;

      float result = `+this.getInputSamplingString()+`;
      setOutput(result);
    }
  `}return e.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},e.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},e.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},e.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},e.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},e}(),mL=function(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `},gL=function(e){this.variableNames=["A"],this.outTexUsage=Dr.DOWNLOAD;var t=Xn();this.outputShape=e,this.userCode=`
      `+ZS+`

      void main() {
        float x = getAAtOutCoords();
        `+t.output+` = encode_float(x);
      }
    `},yL=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Dr.DOWNLOAD;var t=Xn();this.outputShape=e,this.userCode=`
      `+ZS+`

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        `+t.output+` = encode_float(x);
      }
    `},xL=function(e,t,n){n===void 0&&(n=!1),this.variableNames=["A"];var r=Xn(),o=t[0],i=t[1];this.outputShape=e;var a="result";n&&(a="floor(result * 255. + 0.5)"),this.userCode=`
      `+ky(e)+`

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);
        
        int r = flatIndex / `+i+`;
        int c = imod(flatIndex, `+i+`);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(`+i+".0, "+o+`.0);
        vec4 values = `+r.texture2D+`(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        `+r.output+" = vec4("+a+`, 0., 0., 0.);
      }
    `},wL=function(e,t,n){n===void 0&&(n=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=Xn(),o=t[0],i=t[1];this.outputShape=e;var a="",s="result";n&&(s="floor(result * 255. + 0.5)");for(var u=0;u<=1;u++)for(var l=0;l<=1;l++){var c=2*u+l;a+=`
          localCoords = coords;
          if(localCoords[2] + `+l+" < "+e[2]+`) {
            localCoords[2] += `+l+`;
            if(localCoords[1] + `+u+" < "+e[1]+`) {
              localCoords[1] += `+u+`;

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / `+i+`;
              c = imod(flatIndex, `+i+`);
              uv = (vec2(c, r) + halfCR) / vec2(`+i+".0, "+o+`.0);
              values = `+r.texture2D+`(A, uv);

              if(offset == 0) {
                result[`+c+`] = values[0];
              } else if(offset == 1) {
                result[`+c+`] = values[1];
              } else if(offset == 2) {
                result[`+c+`] = values[2];
              } else {
                result[`+c+`] = values[3];
              }
            }
          }
        `}this.userCode=`
      `+ky(e)+`

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        `+a+`

        `+r.output+" = "+s+`;
      }
    `},bL="return real * expR - imag * expI;",EL="return real * expI + imag * expR;",_w=function(e,t,n){this.variableNames=["real","imag"];var r=t[1];this.outputShape=t;var o=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,i=n?r+".0":"1.0";this.userCode=`
      const float exponentMultiplier = `+o+`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `+e+`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`+r+`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `+r+`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `+i+`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `},CL=function(){function e(t,n){this.outputShape=[],this.variableNames=["x"],this.outputShape=t,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var n=this;return function(r,o){n.valueLoc==null&&(n.valueLoc=r.getUniformLocationNoThrow(o,"value")),r.gl.uniform1f(n.valueLoc,t)}},e}(),SL=function(e,t,n){this.variableNames=["A","indices"];var r=e.slice();r[n]=t,this.outputShape=r,this.rank=r.length;var o=Bt(this.rank),i=function(a,s){var u=a.length;if(u>4)throw Error("Gather for rank "+u+" is not yet supported");if(u===1)return"int(getIndices(resRC))";for(var l=["resRC.x","resRC.y","resRC.z","resRC.w"],c=[],f=0;f<a.length;f++)f===s?c.push("int(getIndices("+l[f]+"))"):c.push(""+l[f]);return c.join()}(e,n);this.userCode=`
      void main() {
        `+o+` resRC = getOutputCoords();
        setOutput(getA(`+i+`));
      }
    `},_L=function(e,t,n){this.sliceDim=e,this.strides=t,this.variableNames=["x","indices"],this.outputShape=n;var r=Bt(t.length),o=Bt(n.length),i=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        `+r+" strides = "+r+"("+this.strides+`);
         void main() {
          `+o+` coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < `+this.sliceDim+`; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * `+i+`;
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `};function kL(e,t){var n=Xn();return bM(e,t,n.version+`
    precision highp float;
    `+n.attribute+` vec3 clipSpacePos;
    `+n.attribute+` vec2 uv;
    `+n.varyingVs+` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function RL(e,t){return kM(e,t,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function TL(e,t){return RM(e,t,new Uint16Array([0,1,2,2,1,3]))}function vc(e,t,n,r,o,i,a){IM(n,r);var s=TM(e,t),u=e.TEXTURE_2D;return Be(e,t,function(){return e.bindTexture(u,s)}),Be(e,t,function(){return e.texParameteri(u,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)}),Be(e,t,function(){return e.texParameteri(u,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}),Be(e,t,function(){return e.texParameteri(u,e.TEXTURE_MIN_FILTER,e.NEAREST)}),Be(e,t,function(){return e.texParameteri(u,e.TEXTURE_MAG_FILTER,e.NEAREST)}),Be(e,t,function(){return e.texImage2D(u,0,o,n,r,0,i,a,null)}),Be(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)}),s}function IL(e,t,n,r,o){var i=fh(n,r);return vc(e,t,i[0],i[1],o.internalFormatFloat,o.textureFormatFloat,e.FLOAT)}function DL(e,t,n,r,o){var i=fh(n,r);return vc(e,t,i[0],i[1],o.internalFormatHalfFloat,o.textureFormatFloat,o.textureTypeHalfFloat)}function NL(e,t,n,r,o){var i=fh(n,r);return vc(e,t,i[0],i[1],e.RGBA,e.RGBA,e.UNSIGNED_BYTE)}function AL(e,t,n,r,o){var i=pc(n,r);return vc(e,t,i[0],i[1],o.internalFormatPackedFloat,e.RGBA,e.FLOAT)}function PL(e,t,n,r,o){var i=pc(n,r);return vc(e,t,i[0],i[1],o.internalFormatPackedHalfFloat,e.RGBA,o.textureTypeHalfFloat)}function FL(e,t,n,r){return Be(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,r)}),dw(e,t,n,"clipSpacePos",r,3,20,0)&&dw(e,t,n,"uv",r,2,20,12)}function OL(e,t,n,r,o,i,a){var s,u,l;Be(e,t,function(){return e.bindTexture(e.TEXTURE_2D,n)}),i instanceof Uint8Array?(s=new Uint8Array(r*o*4),u=e.UNSIGNED_BYTE,l=e.RGBA):(s=new Float32Array(r*o*4),u=e.FLOAT,l=a.internalFormatPackedFloat),s.set(i),Be(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,l,r,o,0,e.RGBA,u,s)}),Be(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)})}function ML(e,t,n,r){Be(e,t,function(){return e.bindTexture(e.TEXTURE_2D,n)}),r.data instanceof Uint8Array?Be(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r.width,r.height,0,e.RGBA,e.UNSIGNED_BYTE,r.data)}):Be(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r)}),Be(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)})}function LL(e,t,n,r,o){var i=e.createBuffer();Be(e,t,function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,i)});var a=16*n*r;return Be(e,t,function(){return e.bufferData(e.PIXEL_PACK_BUFFER,a,e.STREAM_READ)}),Be(e,t,function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,0)}),Be(e,t,function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)}),i}function BL(e,t,n){var r=e,o=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,o),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),o}function jL(e,t,n,r,o){var i=fh(n,r),a=i[0],s=i[1],u=new Uint8Array(n*r*4);return Be(e,t,function(){return e.readPixels(0,0,a,s,o.downloadTextureFormat,e.UNSIGNED_BYTE,u)}),new Float32Array(u.buffer)}function WL(e,t,n,r,o,i,a,s){var u=e,l=new Float32Array(function(c,f){var d=pc(c,f);return d[0]*d[1]*4}(i,a));return u.bindBuffer(u.PIXEL_PACK_BUFFER,t),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,l),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),l}function zL(e,t,n,r){var o=new Float32Array(n*r*4);return Be(e,t,function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,o)}),o}var UL=function(){function e(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var n=ce().getNumber("WEBGL_VERSION");t!=null?(this.gl=t,mM(n,t)):this.gl=qo(n);var r="WEBGL_color_buffer_float";if(ce().getNumber("WEBGL_VERSION")===1){if(this.textureFloatExtension=Zc(this.gl,this.debug,"OES_texture_float"),Kr(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=Zc(this.gl,this.debug,"OES_texture_half_float");else if(ce().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Kr(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=Zc(this.gl,this.debug,"EXT_color_buffer_half_float");else if(ce().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Kr(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!Kr(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=RL(this.gl,this.debug),this.indexBuffer=TL(this.gl,this.debug),this.framebuffer=DM(this.gl,this.debug),this.textureConfig=my(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(e.prototype,"debug",{get:function(){return ce().getBool("DEBUG")},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var t=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var n=this.gl;Be(n,this.debug,function(){return n.finish()}),Be(n,this.debug,function(){return n.bindFramebuffer(n.FRAMEBUFFER,null)}),Be(n,this.debug,function(){return n.deleteFramebuffer(t.framebuffer)}),Be(n,this.debug,function(){return n.bindBuffer(n.ARRAY_BUFFER,null)}),Be(n,this.debug,function(){return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null)}),Be(n,this.debug,function(){return n.deleteBuffer(t.indexBuffer)}),this.disposed=!0}},e.prototype.createFloat32MatrixTexture=function(t,n){return this.throwIfDisposed(),IL(this.gl,this.debug,t,n,this.textureConfig)},e.prototype.createFloat16MatrixTexture=function(t,n){return this.throwIfDisposed(),DL(this.gl,this.debug,t,n,this.textureConfig)},e.prototype.createUnsignedBytesMatrixTexture=function(t,n){return this.throwIfDisposed(),NL(this.gl,this.debug,t,n,this.textureConfig)},e.prototype.uploadPixelDataToTexture=function(t,n){this.throwIfDisposed(),ML(this.gl,this.debug,t,n)},e.prototype.uploadDenseMatrixToTexture=function(t,n,r,o){this.throwIfDisposed(),OL(this.gl,this.debug,t,n,r,o,this.textureConfig)},e.prototype.createFloat16PackedMatrixTexture=function(t,n){return this.throwIfDisposed(),PL(this.gl,this.debug,t,n,this.textureConfig)},e.prototype.createPackedMatrixTexture=function(t,n){return this.throwIfDisposed(),AL(this.gl,this.debug,t,n,this.textureConfig)},e.prototype.deleteMatrixTexture=function(t){var n=this;this.throwIfDisposed(),this.outputTexture===t&&(hw(this.gl,this.debug,this.framebuffer),this.outputTexture=null),Be(this.gl,this.debug,function(){return n.gl.deleteTexture(t)})},e.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(t,n,r){var o=this;return this.downloadMatrixDriver(t,function(){return jL(o.gl,o.debug,n,r,o.textureConfig)})},e.prototype.downloadPackedMatrixFromBuffer=function(t,n,r,o,i,a){return WL(this.gl,t,0,0,0,i,a,this.textureConfig)},e.prototype.downloadFloat32MatrixFromBuffer=function(t,n){return BL(this.gl,t,n)},e.prototype.createBufferFromTexture=function(t,n,r){this.bindTextureToFrameBuffer(t);var o=LL(this.gl,this.debug,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),o},e.prototype.createAndWaitForFence=function(){var t=this.createFence(this.gl);return this.pollFence(t)},e.prototype.createFence=function(t){var n,r,o=this;if(ce().getBool("WEBGL_FENCE_API_ENABLED")){var i=t,a=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),r=function(){var s=i.clientWaitSync(a,0,0);return s===i.ALREADY_SIGNALED||s===i.CONDITION_SATISFIED},n=a}else ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=function(){return o.isQueryAvailable(n,ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):r=function(){return!0};return{query:n,isFencePassed:r}},e.prototype.downloadMatrixFromPackedTexture=function(t,n,r){var o=this;return this.downloadMatrixDriver(t,function(){return zL(o.gl,o.debug,n,r)})},e.prototype.createProgram=function(t){this.throwIfDisposed();var n=this.gl,r=EM(n,this.debug,t),o=kL(n,this.debug),i=SM(n,this.debug);return Be(n,this.debug,function(){return n.attachShader(i,o)}),Be(n,this.debug,function(){return n.attachShader(i,r)}),_M(n,this.debug,i),this.debug&&Kp(n,this.debug,i),this.vertexAttrsAreBound||(this.setProgram(i),this.vertexAttrsAreBound=FL(n,this.debug,this.program,this.vertexBuffer)),i},e.prototype.deleteProgram=function(t){var n=this;this.throwIfDisposed(),t===this.program&&(this.program=null),t!=null&&Be(this.gl,this.debug,function(){return n.gl.deleteProgram(t)})},e.prototype.setProgram=function(t){var n=this;this.throwIfDisposed(),this.program=t,this.program!=null&&this.debug&&Kp(this.gl,this.debug,this.program),Be(this.gl,this.debug,function(){return n.gl.useProgram(t)})},e.prototype.getUniformLocation=function(t,n,r){return r===void 0&&(r=!0),this.throwIfDisposed(),r?AM(this.gl,this.debug,t,n):PM(this.gl,t,n)},e.prototype.getAttributeLocation=function(t,n){var r=this;return this.throwIfDisposed(),Be(this.gl,this.debug,function(){return r.gl.getAttribLocation(t,n)})},e.prototype.getUniformLocationNoThrow=function(t,n){return this.throwIfDisposed(),this.gl.getUniformLocation(t,n)},e.prototype.setInputMatrixTexture=function(t,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),FM(this.gl,this.debug,this.program,t,n,r)},e.prototype.setOutputMatrixTexture=function(t,n,r){this.setOutputMatrixTextureDriver(t,r,n)},e.prototype.setOutputPackedMatrixTexture=function(t,n,r){this.throwIfDisposed();var o=pc(n,r),i=o[0],a=o[1];this.setOutputMatrixTextureDriver(t,i,a)},e.prototype.setOutputMatrixWriteRegion=function(t,n,r,o){this.setOutputMatrixWriteRegionDriver(r,t,o,n)},e.prototype.setOutputPackedMatrixWriteRegion=function(t,n,r,o){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},e.prototype.debugValidate=function(){this.program!=null&&Kp(this.gl,this.debug,this.program),ef(this.gl)},e.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var t=this.gl;this.debug&&this.debugValidate(),Be(t,this.debug,function(){return t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0)})},e.prototype.blockUntilAllProgramsCompleted=function(){var t=this;this.throwIfDisposed(),Be(this.gl,this.debug,function(){return t.gl.finish()})},e.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=Zc(this.gl,this.debug,ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},e.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},e.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},e.prototype.beginQuery=function(){if(ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var t=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=t.createQuery();return t.beginQuery(n.TIME_ELAPSED_EXT,r),r}var o=this.getQueryTimerExtensionWebGL1(),i=o.createQueryEXT();return o.beginQueryEXT(o.TIME_ELAPSED_EXT,i),i},e.prototype.endQuery=function(){if(ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}else{var n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT)}},e.prototype.waitForQueryAndGetTime=function(t){return Ie(this,void 0,void 0,function(){var n=this;return De(this,function(r){switch(r.label){case 0:return[4,aw(function(){return n.disposed||n.isQueryAvailable(t,ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return r.sent(),[2,this.getQueryTime(t,ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},e.prototype.getQueryTime=function(t,n){if(n===0)return null;if(n===2){var r=this.gl;return r.getQueryParameter(t,r.QUERY_RESULT)/1e6}var o=this.getQueryTimerExtensionWebGL1();return o.getQueryObjectEXT(t,o.QUERY_RESULT_EXT)/1e6},e.prototype.isQueryAvailable=function(t,n){if(n===0)return!0;if(n===2){var r=this.gl,o=this.getQueryTimerExtensionWebGL2(),i=r.getQueryParameter(t,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),i&&!this.disjoint}return i=(o=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(t,o.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),i&&!this.disjoint},e.prototype.pollFence=function(t){var n=this;return new Promise(function(r){n.addItemToPoll(function(){return t.isFencePassed()},function(){return r()})})},e.prototype.pollItems=function(){for(var t=function(r){for(var o=0;o<r.length&&r[o]();++o);return o-1}(this.itemsToPoll.map(function(r){return r.isDoneFn})),n=0;n<=t;++n)(0,this.itemsToPoll[n].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(t+1)},e.prototype.addItemToPoll=function(t,n){var r=this;this.itemsToPoll.push({isDoneFn:t,resolveFn:n}),this.itemsToPoll.length>1||aw(function(){return r.pollItems(),r.itemsToPoll.length===0})},e.prototype.bindTextureToFrameBuffer=function(t){this.throwIfDisposed(),Xp(this.gl,this.debug,t,this.framebuffer),this.debug&&ef(this.gl)},e.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?(Xp(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&ef(this.gl)):hw(this.gl,this.debug,this.framebuffer)},e.prototype.downloadMatrixDriver=function(t,n){this.bindTextureToFrameBuffer(t);var r=n();return this.unbindTextureToFrameBuffer(),r},e.prototype.setOutputMatrixTextureDriver=function(t,n,r){this.throwIfDisposed();var o=this.gl;Xp(o,this.debug,t,this.framebuffer),this.debug&&ef(o),this.outputTexture=t,Be(o,this.debug,function(){return o.viewport(0,0,n,r)}),Be(o,this.debug,function(){return o.scissor(0,0,n,r)})},e.prototype.setOutputMatrixWriteRegionDriver=function(t,n,r,o){var i=this;this.throwIfDisposed(),Be(this.gl,this.debug,function(){return i.gl.scissor(t,n,r,o)})},e.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},e.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},e}();function kw(e,t){if(e.length!==t.length)throw Error("Binary was compiled with "+e.length+" inputs, but was executed with "+t.length+" inputs");e.forEach(function(n,r){var o=n.logicalShape,i=t[r],a=i.shape;if(!Nn(o,a))throw Error("Binary was compiled with different shapes than the current args. Shapes "+o+" and "+a+" must match");if(!n.isUniform||!i.isUniform){var s=n.texShape,u=i.isUniform?null:i.texData.texShape;if(!Nn(s,u))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+s+" and "+u+" must match")}})}var $L=function(e,t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var r=n.filterWidth,o=n.inChannels,i=n.strideWidth,a=n.strideHeight,s=n.padInfo,u=n.outWidth,l=n.dilationWidth,c=n.dilationHeight,f=n.dataFormat,d=s.left,p=s.top,v=o*r,x=Xn(),w=f==="channelsLast",y=w?0:1,b=w?1:2,E="",S=0;S<=1;S++)for(var R=0;R<=1;R++)E+=`
          blockIndex = rc.y + `+R+`;
          pos = rc.x + `+S+`;

          if(blockIndex < `+e[1]+" && pos < "+e[0]+`) {
            offsetY = int(blockIndex / (`+u+")) * "+a+" - "+p+`;
            d0 = offsetY + `+c+" * (pos / "+v+`);

            if(d0 < `+t[y]+` && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), `+u+".) * "+i+". - "+d+`.);
              d1 = offsetX + `+l+" * (int(mod(float(pos), "+v+".) / "+o+`.));

              if(d1 < `+t[b]+` && d1 >= 0) {

                ch = int(mod(float(pos), `+o+`.));

                if (`+w+`) {
                  innerDims = vec2(d1, ch);
                  result[`+(2*S+R)+`] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[`+(2*S+R)+`] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        `+E+`

        `+x.output+` = result;
      }
    `},HL=function(e,t,n,r,o){this.variableNames=["x"],this.outputShape=[];var i,a=t,s=e[3]-1;this.outputShape=e;var u="float("+n+") + float("+r+") * sum";i=o===.5?"inversesqrt("+u+")":o===1?"1.0/("+u+")":"exp(log("+u+") * float(-"+o+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`+a+"; j <= "+a+`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `+s+`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `+i+`;
        setOutput(val);
      }
    `},VL=function(e,t,n,r,o){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=o,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `+this.depth+`; ++d) {
          int depthBegin = int(max(0.0, float(d - `+t+`)));
          int depthEnd = int(min(float(`+this.depth+`),
              float(d + `+t+` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `+this.depth+`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`+r+") * norm + float("+n+`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`+r+`)
                * float(`+o+`)
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `+o+`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `},GL=function(e,t,n,r,o){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var i,a=t,s=e[3]-1;this.outputShape=e;var u="float("+n+") + float("+r+") * sum";i=o===.5?"inversesqrt("+u+")":o===1?"1.0/("+u+")":"exp(log("+u+") * float(-"+o+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < `+this.outputShape[3]+`;
        bool hasNextRow = c < `+this.outputShape[2]+`;

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - `+a+`;
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - `+a+"; j <= "+a+`; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(`+s+`));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * `+i+`;
        setOutput(result);
      }
    `},qL=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,o=e.effectiveFilterHeight,i=e.effectiveFilterWidth,a=o-1-e.padInfo.top,s=i-1-e.padInfo.left,u=o*i-1;this.userCode=`
      const ivec2 pads = ivec2(`+a+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+o+`;
          wR += `+r+`) {
          float dyR = float(dyRCorner + wR) / `+t+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+i+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+n+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `+u+` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `+i+` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `},KL=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,o=e.dilationDepth,i=e.dilationHeight,a=e.dilationWidth,s=e.effectiveFilterDepth,u=e.effectiveFilterHeight,l=e.effectiveFilterWidth,c=s-1-e.padInfo.front,f=u-1-e.padInfo.top,d=l-1-e.padInfo.left,p=s*u*l-1;this.userCode=`
      const ivec3 pads = ivec3(`+c+", "+f+", "+d+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+s+`;
           wD += `+o+`) {
          float dyD = float(dyDCorner + wD) / `+t+`.0;

          if (dyD < 0.0 || dyD >= `+e.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+u+`;
              wR += `+i+`) {
            float dyR = float(dyRCorner + wR) / `+n+`.0;

            if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+l+`;
                wC += `+a+`) {
              float dyC = float(dyCCorner + wC) / `+r+`.0;

              if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = `+p+` -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * `+u+" * "+l+` +
                  wR * `+l+` + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `},ev=function(e,t,n,r,o,i,a){n===void 0&&(n=!1),r===void 0&&(r=!1),o===void 0&&(o=!1),i===void 0&&(i=null),a===void 0&&(a=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;var s=n?e[1]:e[2],u=Math.ceil(s/2),l=n?"i * 2, rc.y":"rc.y, i * 2",c=r?"rc.z, i * 2":"i * 2, rc.z",f=n?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],d=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],p="",v="";i&&(p=a?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+i+`
        }`:`vec4 activation(vec4 x) {
          `+i+`
        }`,v="result = activation(result);");var x=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+p+`

      const float sharedDimension = `+u+`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < `+u+`; i++) {
          vec4 a = getMatrixA(rc.x, `+l+`);
          vec4 b = getMatrixB(rc.x, `+c+`);

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (`+f[0]+" * "+d[0]+`);
          result += (`+f[1]+" * "+d[1]+`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `+x+`

        `+v+`

        setOutput(result);
      }
    `},XL=function(){function e(t,n,r){this.variableNames=["probs"],this.outputShape=[t,r],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `+(n-1)+`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`+(n-1)+`));
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var n=this;return function(r,o){n.seedLoc==null&&(n.seedLoc=r.getUniformLocation(o,"seed")),r.gl.uniform1f(n.seedLoc,t)}},e}(),YL=function(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`+r+"), float("+n+`),
                      float(index == coords.y)));
      }
    `},QL=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e;var t=e.length;if(t===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var n=yr("rc",t),r=Bt(t),o=function(s,u,l){if(s===1)return"rc > "+u[0];for(var c="",f=s-2;f<s;f++)c+=l[f]+" >= "+u[f],f<s-1&&(c+="||");return c}(t,e,n),i=function(s,u,l,c){if(s===1)return"";var f=c.slice(-2);return`
    int r = `+f[0]+`;
    int c = `+f[1]+`;
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= `+u+`;
    bool rEdge = rp1 >= `+l+`;
  `}(t,e[e.length-1],e[e.length-2],n),a=function(s,u){var l=s.length,c=function(f,d){for(var p=[],v=0;v<=1;v++)for(var x=0;x<=1;x++){for(var w=(v===0?"r":"rp1")+", "+(x===0?"c":"cp1"),y=2;y<f;y++)w=d[d.length-1-y]+","+w;p.push(w)}return p}(l,u);return l===1?`getA(rc),
            rc + 1 >= `+s[0]+` ? 0. : getA(rc + 1),
            0, 0`:"getA("+c[0]+`),
          cEdge ? 0. : getA(`+c[1]+`),
          rEdge ? 0. : getA(`+c[2]+`),
          rEdge || cEdge ? 0. : getA(`+c[3]+")"}(e,n);this.userCode=`
        void main() {
          `+r+` rc = getOutputCoords();

          if(`+o+`) {
            setOutput(vec4(0));
          } else {
            `+i+`

            setOutput(vec4(`+a+`));
          }
        }
      `}},JL=function(e,t,n){this.variableNames=["x"],this.outputShape=t.map(function(u,l){return u[0]+e[l]+u[1]});var r=e.length,o=Bt(r),i=t.map(function(u){return u[0]}).join(","),a=t.map(function(u,l){return u[0]+e[l]}).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=r!==1?`
      `+o+" start = "+o+"("+i+`);
      `+o+" end = "+o+"("+a+`);

      void main() {
        `+o+` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(`+n+`));
        } else {
          `+o+` coords = outC - start;
          setOutput(getX(`+s+`));
        }
      }
    `:`
        int start = `+i+`;
        int end = `+a+`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(`+n+`));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `},ZL=function(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map(function(w,y){return w[0]+e[y]+w[1]});for(var r=e.length,o=Bt(r),i=t.map(function(w){return w[0]}).join(","),a=t.map(function(w,y){return w[0]+e[y]}).join(","),s=yr("rc",r),u=yr("source",r),l=s[r-1]+" < "+this.outputShape[r-1],c=r===1?"source":"vec2("+u.slice(-2).join()+")",f=[o+" rc = outputLoc;",s[r-1]+` += 1;
       if(`+l+`) {
      `,r===1?"":`}
       rc = outputLoc;
       `+s[r-2]+` += 1;
       if(`+s[r-2]+" < "+this.outputShape[r-2]+") {",r===1?"":"  "+s[r-1]+` += 1;
         if(`+l+") {"],d=r===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",p="",v=0,x=r===1?2:4;v<x;v++)p+=`
        `+f[v]+`
        if (`+d+`) {
          result[`+v+"] = float("+n+`);
        } else {
          `+o+` source = rc - start;
          result[`+v+"] = getChannel(getX("+u.join()+"), "+c+`);
        }
      `;p+=r===1?"} ":"}}",this.userCode=`
      const `+o+" start = "+o+"("+i+`);
      const `+o+" end = "+o+"("+a+`);

      void main() {
        `+o+` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `+p+`
        setOutput(result);
      }
    `},tv=function(e,t,n){if(this.variableNames=["x"],t==="avg"&&n)throw new Error("Cannot compute positions for average pool.");var r=e.filterWidth,o=e.strideHeight,i=e.strideWidth,a=e.dilationHeight,s=e.dilationWidth,u=e.effectiveFilterHeight,l=e.effectiveFilterWidth,c=e.padInfo.top,f=e.padInfo.left;this.outputShape=e.outShape;var d=t==="avg",p="0.0";if(d||(p="-1.0 / 1e-20"),n)this.userCode=`
        const ivec2 strides = ivec2(`+o+", "+i+`);
        const ivec2 pads = ivec2(`+c+", "+f+`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `+u+`;
              wR += `+a+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+l+`;
                wC += `+s+`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = wR * `+l+` + wC;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var v=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";t==="avg"&&(v="avgValue / count");var x=4*Math.floor(r/4),w=r%4,y=`
      if (`+d+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(`+o+", "+i+`);
      const ivec2 pads = ivec2(`+c+", "+f+`);
      const float initializationValue = `+p+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `+e.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+p+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `+u+`;
            wR += `+a+`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `+e.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+x+`; wC += 4) {
            int xC = xCCorner + wC * `+s+`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              getValue(batch, xR, xC + 2 * `+s+`, d),
              getValue(batch, xR, xC + 3 * `+s+`, d)
            );

            `+y+`
          }

          int xC = xCCorner + `+x+`;
          if (`+(w===1)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `+y+`
          } else if (`+(w===2)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              initializationValue,
              initializationValue
            );

            `+y+`
          } else if (`+(w===3)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              getValue(batch, xR, xC + 2 * `+s+`, d),
              initializationValue
            );

            `+y+`
          }
        }
        setOutput(`+v+`);
      }
    `}},nv=function(e,t,n){if(this.variableNames=["x"],t==="avg"&&n)throw new Error("Cannot compute positions for average pool.");var r=e.filterWidth,o=e.strideDepth,i=e.strideHeight,a=e.strideWidth,s=e.dilationDepth,u=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterDepth,f=e.effectiveFilterHeight,d=e.effectiveFilterWidth,p=e.padInfo.front,v=e.padInfo.top,x=e.padInfo.left;this.outputShape=e.outShape;var w=t==="avg",y="0.0";if(w||(y="-1.0 / 1e-20"),n)this.userCode=`
        const ivec3 strides =
            ivec3(`+o+", "+i+", "+a+`);
        const ivec3 pads = ivec3(`+p+", "+v+", "+x+`);

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < `+c+`;
              wD += `+s+`) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= `+e.inDepth+`) {
              continue;
            }

            for (int wR = 0; wR < `+f+`;
                wR += `+u+`) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= `+e.inHeight+`) {
                continue;
              }

              for (int wC = 0; wC < `+d+`;
                  wC += `+l+`) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= `+e.inWidth+`) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition =
                      wD * `+f+" * "+d+` +
                      wR * `+d+` + wC;;
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var b=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";t==="avg"&&(b="avgValue / count");var E=4*Math.floor(r/4),S=r%4,R=`
      if (`+w+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(`+o+", "+i+", "+a+`);
      const ivec3 pads = ivec3(`+p+", "+v+", "+x+`);
      const float initializationValue = `+y+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= `+e.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+y+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < `+c+`;
            wD += `+s+`) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= `+e.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+f+`;
            wR += `+u+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+E+`; wC += 4) {
              int xC = xCCorner + wC * `+l+`;

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+l+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+l+`, ch),
                getValue(batch, xD, xR, xC + 3 * `+l+`, ch)
              );

              `+R+`
            }

            int xC = xCCorner + `+E+`;
            if (`+(S===1)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              `+R+`
            } else if (`+(S===2)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+l+`, ch),
                initializationValue,
                initializationValue
              );

              `+R+`
            } else if (`+(S===3)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+l+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+l+`, ch),
                initializationValue
              );

              `+R+`
            }
          }
          setOutput(`+b+`);
        }
      }
    `}},eB=function(e,t){this.variableNames=["x"];var n=e.windowSize,r=e.batchSize,o=e.inSize,i=Math.ceil(o/n);this.outputShape=[r,i];var a="0.0",s="";t==="prod"?a="1.0":t==="min"?(a="1.0 / 1e-20",s="min"):t==="max"&&(a="-1.0 / 1e-20",s="max");var u=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";t==="sum"?u="sumValue":t==="prod"?u="prodValue":t==="all"?u="allValue":t==="any"&&(u="anyValue");var l=4*Math.floor(n/4),c=n%4,f=`
      if (`+(t==="sum")+`) {
        sumValue += dot(values, ones);
      } else if (`+(t==="prod")+`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `+s+`(values, minMaxValue);
      }
    `,d="vec4";t==="all"?(a="1.0",f=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,d="bvec4"):t==="any"&&(a="0.0",f=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,d="bvec4");var p="";o%n>0&&(p=`
        if (inIdx < 0 || inIdx >= `+o+`) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = `+a+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `+p+`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+n+`;

        vec4 minMaxValue = vec4(`+a+`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `+l+`; i += 4) {
          int inIdx = inOffset + i;
          `+d+" values = "+d+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `+f+`
        }

        int inIdx = inOffset + `+l+`;
        if (`+(c===1)+`) {
          `+d+" values = "+d+`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `+f+`
        } else if (`+(c===2)+`) {
          `+d+" values = "+d+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `+f+`
        } else if (`+(c===3)+`) {
          `+d+" values = "+d+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `+f+`
        }
        setOutput(`+u+`);
      }
    `},tB=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var n="",r=0;r<4;r++){var o="thisRC = rc;";r%2==1&&(o+="thisRC.z += 1;"),r>1&&(o+="thisRC.y += 1;"),n+=`
        `+o+`
        `+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`+r+`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `+(r>0?"}":"")+`
      `}this.userCode=`
      
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `+Ua(["r","c","d"],t)+`
      return ivec3(r, c, d);
    }
  
      `+ky(e)+`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `+e[1]+`;
        int cols = `+e[2]+`;

        `+n+`

        setOutput(result);
      }
    `},nB=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,o=r[1],i=r[2],a=e.shape,s=a[1],u=a[2],l=[n&&s>1?o-1:o,n&&u>1?i-1:i],c=[n&&s>1?s-1:s,n&&u>1?u-1:u],f=l[0]/c[0],d=l[1]/c[1],p=1/f,v=1/d,x=2*Math.ceil(p)+2,w=2*Math.ceil(v)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+f+`);
        const float widthScale = float(`+d+`);

        const float invHeightScale = float(`+p+`);
        const float invWidthScale = float(`+v+`);

        const int winHeight = int(`+x+`);
        const int winWidth = int(`+w+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+u+`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `+(o-1)+`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `+(i-1)+`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},rB=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var o=e[0],i=e[1],a=e[2],s=e[3];this.outputShape=[o,t,n,s];var u=[r&&t>1?i-1:i,r&&n>1?a-1:a],l=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`);
      const vec2 inputShapeRC = vec2(`+i+".0, "+a+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `},oB=function(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=e[0],i=e[1],a=e[2],s=e[3];this.outputShape=[o,t,n,s];var u=[r&&t>1?i-1:i,r&&n>1?a-1:a],l=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`,
          `+u[1]/l[1]+`);
      const vec3 inputShapeRC = vec3(`+i+".0, "+a+`.0,
                                     `+a+`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `+(s-1)+`;
        bool hasNextRow = coords.z < `+(n-1)+`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `},iB=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,o=r[1],i=r[2],a=e.shape,s=a[1],u=a[2],l=[n&&s>1?o-1:o,n&&u>1?i-1:i],c=[n&&s>1?s-1:s,n&&u>1?u-1:u],f=l[0]/c[0],d=l[1]/c[1],p=1/f,v=1/d,x=2*Math.ceil(p)+2,w=2*Math.ceil(v)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+f+`);
        const float widthScale = float(`+d+`);

        const float invHeightScale = float(`+p+`);
        const float invWidthScale = float(`+v+`);

        const int winHeight = int(`+x+`);
        const int winWidth = int(`+w+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+u+`) {
              continue;
            }

            float sourceFracRow =
              float(`+l[0]+`) *
                (float(dyR) / float(`+c[0]+`));

            float sourceFracCol =
                float(`+l[1]+`) *
                  (float(dyC) / float(`+c[1]+`));

            int sourceNearestRow = int(min(
                float(int(`+o+`) - 1),
                `+n+` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`+i+`) - 1),
                `+n+` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},aB=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var o=e[0],i=e[1],a=e[2],s=e[3];this.outputShape=[o,t,n,s];var u=[r&&t>1?i-1:i,r&&n>1?a-1:a],l=[r&&t>1?t-1:t,r&&n>1?n-1:n],c=r?"0.5":"0.0";this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`);
      const vec2 inputShapeRC = vec2(`+i+".0, "+a+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `+c+`)));

        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `},sB=function(e,t){this.variableNames=["x"];var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=e,n!==1){var r=e.map(function(i,a){return function(s){return t.indexOf(s)!==-1&&e[s]!==1?e[s]+" - coords["+s+"] - 1":"coords["+s+"]"}(a)}).join(","),o=Bt(n);this.userCode=`
      void main() {
        `+o+` coords = getOutputCoords();
        setOutput(getX(`+r+`));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`+e[0]+` - coord - 1));
        }
      `},uB=function(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");this.outputShape=e;var r=yr("rc",n),o=r[n-1]+" + 1 < "+this.outputShape[n-1],i=r[n-2]+" + 1 < "+this.outputShape[n-2],a=Bt(n);function s(u){var l=e.map(function(c,f){return function(d,p){return t.indexOf(d)!==-1&&e[d]!==1?e[d]+" - "+p[d]+" - 1":""+p[d]}(f,u)});return"getChannel(getX("+l.join(",")+"), vec2("+l.slice(-2).join(",")+"))"}this.userCode=n===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`+e[0]+` - rc - 1),
            `+e[0]+` - rc - 1);
          if(`+o+`){
              result.g = getChannel(getX(`+e[0]+` - (rc  + 1) - 1),
                `+e[0]+` - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          `+a+` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `+function(u){return s(u)}(r.slice())+`;
          if(`+o+`){
            result.g = `+function(u){return u[n-1]="("+u[n-1]+" + 1)",s(u)}(r.slice())+`;
          }
          if(`+i+`) {
            result.b = `+function(u){return u[n-2]="("+u[n-2]+" + 1)",s(u)}(r.slice())+`;
            if(`+o+`) {
              result.a = `+function(u){return u[n-1]="("+u[n-1]+" + 1)",u[n-2]="("+u[n-2]+" + 1)",s(u)}(r.slice())+`;
            }
          }
          setOutput(result);
        }
    `},Rw=function(e,t,n,r,o,i,a){this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;var s=Bt(o.length),u=Bt(i.length),l="";n===1?l="i":n===2&&(l="i, j");var c="getIndices("+l+")",f="";r===1?f="i":r===2&&(f="i, coords[1]");var d="getUpdates("+f+")",p=t>1?"strides[j]":"strides";this.userCode=`
        `+s+" strides = "+s+"("+o+`);

        void main() {
          `+u+` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `+e+`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `+t+`; j++) {
              int index = round(`+c+`);
              flattenedIndex += index * `+p+`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `+d+`;
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `},lB=function(e,t){this.variableNames=["x","segmentIds"];var n=e.windowSize,r=e.batchSize,o=e.inSize,i=e.numSegments,a=i*Math.ceil(o/n);this.outputShape=[r,a];var s=4*Math.floor(n/4),u=n%4,l=`
        sumValue += dot(values, segFilter);
    `,c="";o%n>0&&(c=`
        if (inIdx < 0 || inIdx >= `+o+`) {
          return initializationValue;
        }
      `);var f="";o%n>0&&(f=`
        if (inIdx < 0 || inIdx >= `+o+`) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        `+c+`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `+f+`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `+i+")) * float("+n+`));
        int currentSeg = int(mod(float(outIdx), float(`+i+`)));

        float sumValue = 0.0;

        for (int i = 0; i < `+s+`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `+l+`
        }

        int inIdx = inOffset + `+s+`;
        if (`+(u===1)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `+l+`
        } else if (`+(u===2)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `+l+`
        } else if (`+(u===3)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `+l+`
        }
        setOutput(sumValue);
      }
    `},cB=function(e,t,n){var r,o;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error("Where for rank "+n+" is not yet supported");if(n===1)o="resRC",r="resRC";else{for(var i=["resRC.x","resRC.y","resRC.z","resRC.w"],a=[],s=[],u=0;u<t.length;u++)s.push(""+i[u]),u<e&&a.push(""+i[u]);r=a.join(),o=s.join()}var l=Bt(n);this.userCode=`
      void main() {
        `+l+` resRC = getOutputCoords();
        float cVal = getC(`+r+`);
        if (cVal >= 1.0) {
          setOutput(getA(`+o+`));
        } else {
          setOutput(getB(`+o+`));
        }
      }
    `},fB=function(){function e(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var n,r=Bt(this.rank),o="uniform int start["+this.rank+"];",i=function(a){if(a===1)return"sourceLoc";if(a<=6)return rv.slice(0,a).map(function(s){return"sourceLoc."+s}).join(",");throw Error("Slicing for rank "+a+" is not yet supported")}(this.rank);n=`
        `+r+` sourceLoc;
        `+r+` coords = getOutputCoords();
        `+t.map(function(a,s){return"sourceLoc."+rv[s]+" = start["+s+"] + coords."+rv[s]+";"}).join(`
`)+`
      `,this.userCode=`
      `+o+`
      void main() {
        `+n+`
        setOutput(getSource(`+i+`));
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var n=this;if(t.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+t.length+")");return function(r,o){n.startLoc==null&&(n.startLoc=r.getUniformLocationNoThrow(o,"start"),n.startLoc==null)||r.gl.uniform1iv(n.startLoc,t)}},e}(),rv=["x","y","z","w","u","v"],dB=function(){function e(t){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length;var n=Bt(this.rank),r=yr("coords",this.rank),o=yr("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":"vec2("+o.slice(-2).join()+")",a="getChannel(getSource("+o.join()+"), "+i+")",s=`
      result.x = `+a+`;
      if (++`+r[this.rank-1]+" < "+t[this.rank-1]+`) {
        ++`+o[this.rank-1]+`;
        result.y = `+a+`;
        --`+o[this.rank-1]+`;
      }
    `,u=this.rank===1?"":`
      --`+r[this.rank-1]+`;
      if (++`+r[this.rank-2]+" < "+t[this.rank-2]+`) {
        ++`+o[this.rank-2]+`;
        result.z = `+a+`;
        if (++`+r[this.rank-1]+" < "+t[this.rank-1]+`) {
          ++`+o[this.rank-1]+`;
          result.w = `+a+`;
        }
      }
    `,l=this.rank<=4?`sourceLoc = coords +
            `+n+"("+t.map(function(c,f){return"start["+f+"]"}).join()+");":t.map(function(c,f){return o[f]+" = "+r[f]+" + start["+f+"];"}).join(`
`);this.userCode=`
      uniform int start[`+this.rank+`];
      void main() {
        `+n+` coords = getOutputCoords();
        `+n+` sourceLoc;
        `+l+`
        vec4 result = vec4(0.);
        `+s+`
        `+u+`
        setOutput(result);
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var n=this;if(t.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+t.length+")");return function(r,o){n.startLoc==null&&(n.startLoc=r.getUniformLocationNoThrow(o,"start"),n.startLoc==null)||r.gl.uniform1iv(n.startLoc,t)}},e}(),hB=function(e,t,n){this.variableNames=["x"],this.outputShape=n;var r=n.length,o=Bt(n.length),i=Bt(n.length),a="";if(r===1)a="coords * strides + begin";else{var s=0;a=n.map(function(u,l){return s++,n.length===1?"coords * strides["+l+"] + begin["+l+"]":"coords["+(s-1)+"] * strides["+l+"] + begin["+l+"]"}).join(",")}this.userCode=`
      `+o+" begin = "+o+"("+e+`);
      `+o+" strides = "+o+"("+t+`);

      void main() {
        `+i+` coords = getOutputCoords();
        setOutput(getX(`+a+`));
      }
    `},pB=function(){function e(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return e.prototype.acquireTexture=function(t,n,r){var o,i=Tw(n,r),a=Iw(t,i,r);if(a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]),this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var s=this.freeTextures[a].shift();return this.usedTextures[a].push(s),s}return this.numUsedTextures++,this.log(),i===Tr.PACKED_2X2_FLOAT32?o=this.gpgpu.createPackedMatrixTexture(t[0],t[1]):i===Tr.PACKED_2X2_FLOAT16?o=this.gpgpu.createFloat16PackedMatrixTexture(t[0],t[1]):i===Tr.UNPACKED_FLOAT32?o=this.gpgpu.createFloat32MatrixTexture(t[0],t[1]):i===Tr.UNPACKED_FLOAT16?o=this.gpgpu.createFloat16MatrixTexture(t[0],t[1]):i===Tr.PACKED_4X1_UNSIGNED_BYTE&&(o=this.gpgpu.createUnsignedBytesMatrixTexture(t[0],t[1])),this.usedTextures[a].push(o),o},e.prototype.releaseTexture=function(t,n,r,o){if(this.freeTextures!=null){var i=Iw(n,Tw(r,o),o);i in this.freeTextures||(this.freeTextures[i]=[]),this.freeTextures[i].push(t),this.numFreeTextures++,this.numUsedTextures--;var a=this.usedTextures[i],s=a.indexOf(t);if(s<0)throw new Error("Cannot release a texture that was never provided by this texture manager");a.splice(s,1),this.log()}},e.prototype.log=function(){if(this.logEnabled){var t=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+t+")")}},e.prototype.getNumUsedTextures=function(){return this.numUsedTextures},e.prototype.getNumFreeTextures=function(){return this.numFreeTextures},e.prototype.dispose=function(){var t=this;if(this.freeTextures!=null){for(var n in this.freeTextures)this.freeTextures[n].forEach(function(r){t.gpgpu.deleteMatrixTexture(r)});for(var n in this.usedTextures)this.usedTextures[n].forEach(function(o){t.gpgpu.deleteMatrixTexture(o)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},e}();function Tw(e,t){if(e===Dr.UPLOAD)return Tr.PACKED_2X2_FLOAT32;if(e===Dr.RENDER||e==null)return function(n){return ce().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?n?Tr.PACKED_2X2_FLOAT32:Tr.UNPACKED_FLOAT32:n?Tr.PACKED_2X2_FLOAT16:Tr.UNPACKED_FLOAT16}(t);if(e===Dr.DOWNLOAD||e===Dr.PIXELS)return Tr.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+e)}function Iw(e,t,n){return e[0]+"_"+e[1]+"_"+t+"_"+n}var vB=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[r]*t[r];this.outputShape=n,this.rank=n.length;var o=Bt(this.rank),i=function(a){var s=a.length;if(s>5)throw Error("Tile for rank "+s+" is not yet supported");if(s===1)return"imod(resRC, "+a[0]+")";for(var u=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],l=[],c=0;c<a.length;c++)l.push("imod("+u[c]+", "+a[c]+")");return l.join()}(e);this.userCode=`
      void main() {
        `+o+` resRC = getOutputCoords();
        setOutput(getA(`+i+`));
      }
    `},mB=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];this.outputShape=n,this.rank=n.length;var o=Bt(this.rank),i=function(a){var s=a.length;if(s>6)throw Error("Transpose for rank "+s+" is not yet supported");for(var u=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],l=new Array(s),c=0;c<a.length;c++)l[a[c]]=u[c];return l.join()}(t);this.userCode=`
    void main() {
      `+o+` resRC = getOutputCoords();
      setOutput(getA(`+i+`));
    }
    `},gB=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var o=Bt(this.rank),i=JS("rc",this.rank),a=new Array(this.rank);for(r=0;r<t.length;r++)a[t[r]]=i[r];var s="vec2("+a.slice(-2).join()+")",u="++"+i[this.rank-1]+" < "+n[this.rank-1],l="getChannel(getA("+a.join()+"), "+s+")";this.userCode=`
    void main() {
      `+o+` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `+l+`;
      if(`+u+`) {
        result[1] = `+l+`;
      }
      --`+i[this.rank-1]+`;
      if(++`+i[this.rank-2]+" < "+n[this.rank-2]+`) {
        result[2] = `+l+`;
        if(`+u+`) {
          result[3] = `+l+`;
        }
      }
      setOutput(result);
    }
    `},Ry=1.7580993408473768,Ty=1.0507009873554805,st=function(e,t){this.variableNames=["A"],this.outputShape=e,this.userCode=`
      float unaryOperation(float x) {
        `+t+`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `},mo="if (isnan(x)) return x;",yB="return x;",Dw="return abs(x);",r_=mo+`
  return (x < 0.0) ? 0.0 : x;
`,o_=mo+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,i_="return (x >= 0.0) ? x : (exp(x) - 1.0);",xB=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `+Ry+`;
  float scale = `+Ty+`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,Nw="return -x;",Aw="return ceil(x);",Pw="return floor(x);",Fw="return exp(x);",Ow="return exp(x) - 1.0;",wB=mo+`
  return sin(x);
`,bB=mo+`
  return cos(x);
`,EB=mo+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,CB=mo+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,SB=mo+`
  return atan(x);
`,_B=mo+"return log(x + sqrt(x * x + 1.0));",kB=mo+`
  if (x < 1.0) return NAN;
  return log(x + sqrt(x * x - 1.0));`,RB=mo+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
  return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,of="return x;",TB="return x;",a_=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,s_=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,u_=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,nl=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `+t+`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `},IB=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e;var t=e.length,n=yr("rc",t),r=Bt(t),o=function(s,u){if(s===1)return"rc";for(var l="",c=0;c<s;c++)l+=u[c],c<s-1&&(l+=",");return l}(t,n),i=n.slice(-2),a=t<=1?"rc":"vec2("+i.join(",")+")";this.userCode=`
      void main() {
        `+r+` rc = getOutputCoords();
        vec4 packedInput = getA(`+o+`);

        setOutput(getChannel(packedInput, `+a+`));
      }
    `},af={};function sf(e,t){if(t===void 0&&(t=!1),e==="linear")return t?TB:yB;if(e==="relu")return t?a_:r_;if(e==="elu")return t?u_:i_;if(e==="relu6")return t?s_:o_;if(e==="prelu")return t?n_:t_;throw new Error("Activation "+e+" has not been implemented for the WebGL backend.")}var DB=600,NB=function(e){function t(n){var r,o=e.call(this)||this;if(o.pendingRead=new WeakMap,o.pendingDisposal=new WeakSet,o.dataRefCount=new WeakMap,o.numBytesInGPU=0,o.uploadWaitMs=0,o.downloadWaitMs=0,o.warnedAboutMemory=!1,o.pendingDeletes=0,o.disposed=!1,!ce().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(n==null){var i=qo(ce().getNumber("WEBGL_VERSION"));o.binaryCache=((r=ce().getNumber("WEBGL_VERSION"))in af||(af[r]={}),af[r]),o.gpgpu=new UL(i),o.canvas=i.canvas,o.gpgpuCreatedLocally=!0}else o.gpgpu=n,o.binaryCache={},o.gpgpuCreatedLocally=!1,o.canvas=n.gl.canvas;return o.textureManager=new pB(o.gpgpu),o.numMBBeforeWarning=ce().global.screen==null?1024:ce().global.screen.height*ce().global.screen.width*window.devicePixelRatio*DB/1024/1024,o.texData=new $S(o,q),o}return vo(t,e),t.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},t.prototype.write=function(n,r,o){if(ce().getBool("DEBUG")&&this.checkNumericalProblems(n),o==="complex64"&&n!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var i={};return this.texData.set(i,{shape:r,dtype:o,values:n,usage:Dr.UPLOAD}),i},t.prototype.move=function(n,r,o,i){if(ce().getBool("DEBUG")&&this.checkNumericalProblems(r),i==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(n,{shape:o,dtype:i,values:r,usage:Dr.UPLOAD})},t.prototype.readSync=function(n){var r=this.texData.get(n),o=r.values,i=r.dtype,a=r.complexTensors,s=r.slice,u=r.shape,l=r.isPacked;if(s!=null){var c=void 0;c=l?new nl(u,of):new st(u,of);var f=this.runWebGLProgram(c,[{dataId:n,shape:u,dtype:i}],i),d=this.readSync(f.dataId);return this.disposeData(f.dataId),d}if(o!=null)return this.convertAndCacheOnCPU(n);if(i==="string")return o;var p,v,x=this.activeTimers!=null;return x&&(p=No()),i==="complex64"?v=$m(a.real.dataSync(),a.imag.dataSync()):v=this.getValuesFromTexture(n),x&&(this.downloadWaitMs+=No()-p),this.convertAndCacheOnCPU(n,v)},t.prototype.read=function(n){return Ie(this,void 0,void 0,function(){var r,o,i,a,s,u,l,c,f,d,p,v,x,w,y,b,E,S,R,k,m,P;return De(this,function(D){switch(D.label){case 0:if(this.pendingRead.has(n))return r=this.pendingRead.get(n),[2,new Promise(function(N){return r.push(N)})];if(o=this.texData.get(n),i=o.values,a=o.shape,s=o.slice,u=o.dtype,l=o.complexTensors,c=o.isPacked,s!=null)return f=void 0,f=c?new nl(a,of):new st(a,of),d=this.runWebGLProgram(f,[{dataId:n,shape:a,dtype:u}],u),p=this.read(d.dataId),this.disposeData(d.dataId),[2,p];if(i!=null)return[2,this.convertAndCacheOnCPU(n)];if(!ce().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&ce().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return v=null,u!=="complex64"&&ce().get("WEBGL_BUFFER_SUPPORTED")&&(x=this.decode(n),w=this.texData.get(x.dataId),v=(P=this.gpgpu).createBufferFromTexture.apply(P,[w.texture].concat(bl(a)))),this.pendingRead.set(n,[]),u==="complex64"?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:D.sent(),D.label=2;case 2:return u!=="complex64"?[3,4]:[4,Promise.all([l.real.data(),l.imag.data()])];case 3:return b=D.sent(),E=b[0],S=b[1],y=$m(E,S),[3,5];case 4:v==null?y=this.getValuesFromTexture(n):(R=Fe(a),y=this.gpgpu.downloadFloat32MatrixFromBuffer(v,R)),D.label=5;case 5:return x!=null&&this.disposeData(x.dataId),k=this.convertAndCacheOnCPU(n,y),m=this.pendingRead.get(n),this.pendingRead.delete(n),m.forEach(function(N){return N(k)}),this.pendingDisposal.has(n)&&(this.pendingDisposal.delete(n),this.disposeData(n),this.pendingDeletes--),[2,k]}})})},t.prototype.checkNumericalProblems=function(n){if(n!=null)for(var r=0;r<n.length;r++){var o=n[r];if(!xM(o))throw ce().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value "+o+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value "+o+" cannot be represented on this device.")}},t.prototype.getValuesFromTexture=function(n){var r,o=this.texData.get(n),i=o.shape,a=o.dtype,s=o.isPacked,u=Fe(i);if(ce().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var l=this.decode(n),c=this.texData.get(l.dataId),f=(r=this.gpgpu).downloadMatrixFromPackedTexture.apply(r,[c.texture].concat(bl(i))).subarray(0,u);return this.disposeData(l.dataId),f}var d=ce().getBool("WEBGL_PACK")&&s===!0,p=d?Yp(i):i,v=d?new yL(p):new gL(p),x=this.runWebGLProgram(v,[{shape:p,dtype:a,dataId:n}],"float32"),w=this.texData.get(x.dataId),y=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(w.texture,w.texShape[0],w.texShape[1]).subarray(0,u);return this.disposeData(x.dataId),y},t.prototype.time=function(n){return Ie(this,void 0,void 0,function(){var r,o,i,a,s,u,l;return De(this,function(c){switch(c.label){case 0:return r=this.activeTimers,o=[],i=!1,this.programTimersStack==null?(this.programTimersStack=o,i=!0):this.activeTimers.push(o),this.activeTimers=o,n(),a=mu(this.activeTimers.map(function(f){return f.query})).filter(function(f){return f!=null}),s=mu(this.activeTimers.map(function(f){return f.name})).filter(function(f){return f!=null}),this.activeTimers=r,i&&(this.programTimersStack=null),u={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(a)]:[3,2];case 1:return l=c.sent(),u.kernelMs=ZO(l),u.getExtraProfileInfo=function(){return l.map(function(f,d){return{name:s[d],ms:f}}).map(function(f){return f.name+": "+f.ms}).join(", ")},[3,3];case 2:u.kernelMs={error:"WebGL query timers are not supported in this environment."},c.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,u]}})})},t.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},t.prototype.startTimer=function(){return ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:No(),endMs:null}},t.prototype.endTimer=function(n){return ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),n):(n.endMs=No(),n)},t.prototype.getQueryTime=function(n){return Ie(this,void 0,void 0,function(){var r;return De(this,function(o){return ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(n)]:[2,(r=n).endMs-r.startMs]})})},t.prototype.disposeData=function(n){if(!this.pendingDisposal.has(n)){if(this.pendingRead.has(n))return this.pendingDisposal.add(n),void this.pendingDeletes++;if(this.texData.has(n)){this.releaseGPUData(n);var r=this.texData.get(n).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.texData.delete(n)}}},t.prototype.releaseGPUData=function(n){var r=this.texData.get(n),o=r.texture,i=r.dtype,a=r.texShape,s=r.usage,u=r.isPacked,l=r.slice,c=l&&l.origDataId||n,f=this.dataRefCount.get(c);f>1?this.dataRefCount.set(c,f-1):(this.dataRefCount.delete(c),o!=null&&(this.numBytesInGPU-=this.computeBytes(a,i),this.textureManager.releaseTexture(o,a,s,u)));var d=this.texData.get(n);d.texture=null,d.texShape=null,d.isPacked=!1,d.slice=null},t.prototype.getTexture=function(n){return this.uploadToGPU(n),this.texData.get(n).texture},t.prototype.getDataInfo=function(n){return this.texData.get(n)},t.prototype.getCPUBackend=function(){return ce().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=q.findBackend("cpu")),this.cpuBackend):null},t.prototype.shouldExecuteOnCPU=function(n,r){var o=this;return r===void 0&&(r=128),this.getCPUBackend()!=null&&n.every(function(i){return o.texData.get(i.dataId).texture==null&&i.size<r})},t.prototype.getGPGPUContext=function(){return this.gpgpu},t.prototype.complex=function(n,r){var o=this.makeOutput(n.shape,"complex64");return this.texData.get(o.dataId).complexTensors={real:q.keep(n.clone()),imag:q.keep(r.clone())},o},t.prototype.real=function(n){return this.texData.get(n.dataId).complexTensors.real.clone()},t.prototype.imag=function(n){return this.texData.get(n.dataId).complexTensors.imag.clone()},t.prototype.slice=function(n,r,o){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.slice(n,r,o);if(Fe(o)===0)return Wn([],o,n.dtype);var i=this.texData.get(n.dataId).isPacked,a=zS(n.shape,r,o);if(i||!a){var s=ce().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new dB(o):new fB(o),u=s.getCustomSetupFunc(r);return this.compileAndRun(s,[n],null,u)}return this.uploadToGPU(n.dataId),this.shallowSlice(n,r,o)},t.prototype.shallowSlice=function(n,r,o){var i=this.texData.get(n.dataId),a=this.makeOutput(o,n.dtype),s=this.texData.get(a.dataId);Object.assign(s,i),s.shape=o,s.dtype=n.dtype;var u=US(r,n.strides);i.slice&&(u+=i.slice.flatOffset),s.slice={flatOffset:u,origDataId:i.slice&&i.slice.origDataId||n.dataId};var l=this.dataRefCount.get(s.slice.origDataId)||1;return this.dataRefCount.set(s.slice.origDataId,l+1),a},t.prototype.stridedSlice=function(n,r,o,i){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.stridedSlice(n,r,o,i);var a=by(r,o,i);if(a.some(function(u){return u===0}))return Wn([],a);var s=new hB(r,i,a);return this.compileAndRun(s,[n])},t.prototype.reverse=function(n,r){var o=ce().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new uB(n.shape,r):new sB(n.shape,r);return this.compileAndRun(o,[n])},t.prototype.concat=function(n,r){if(n[0].dtype==="complex64"){var o=n.map(function(p){return Gr(p)}),i=n.map(function(p){return Mo(p)});return Bn(this.concat(o,r),this.concat(i,r))}if(this.shouldExecuteOnCPU(n))return this.cpuBackend.concat(n,r);if(n.length===1)return n[0];if(n.length>ce().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var a=Math.floor(n.length/2),s=this.concat(n.slice(0,a),r),u=this.concat(n.slice(a),r);return this.concat([s,u],r)}if(ce().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&n[0].rank>1){var l=new rL(n.map(function(p){return p.shape}),r);return this.compileAndRun(l,n)}var c=yu(n.map(function(p){return p.shape}),r),f=n.map(function(p){return p.as2D(-1,Fe(p.shape.slice(r)))}),d=new nL(f.map(function(p){return p.shape}));return this.compileAndRun(d,f).reshape(c)},t.prototype.neg=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.neg(n);if(ce().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,Nw,n.dtype);var r=new st(n.shape,Nw);return this.compileAndRun(r,[n])},t.prototype.batchMatMul=function(n,r,o,i){var a=o?n.shape[2]:n.shape[1],s=i?r.shape[1]:r.shape[2],u=o?n.shape[1]:n.shape[2],l=n.shape[0];if((a===1||s===1)&&u>1e3){o&&(n=n.transpose([0,2,1])),i&&(r=r.transpose([0,2,1]));var c=s===1?n:n.as3D(l,u,1),f=s===1?2:1,d=s===1?r.as3D(l,1,u):r;return this.multiply(c,d).sum(f,!0)}var p=jn(n.dtype,r.dtype),v=new ev(n.shape,[l,a,s],o,i);return this.compileAndRun(v,[n,r],p)},t.prototype.fusedBatchMatMul=function(n){var r=n.a,o=n.b,i=n.transposeA,a=n.transposeB,s=n.bias,u=n.activation,l=n.preluActivationWeights,c=i?r.shape[2]:r.shape[1],f=a?o.shape[1]:o.shape[2],d=r.shape[0],p=jn(r.dtype,o.dtype),v=s!=null,x=l!=null,w=u?sf(u,!0):null,y=new ev(r.shape,[d,c,f],i,a,v,w,x),b=[r,o];return s&&b.push(s),l&&b.push(l),this.compileAndRun(y,b,p)},t.prototype.multiply=function(n,r){if(n.dtype==="complex64"){var o=this.texData.get(n.dataId),i=this.texData.get(r.dataId),a=new xw(Q4,n.shape,r.shape),s=new xw(J4,n.shape,r.shape),u=[this.makeComplexComponentTensorInfo(n,o.complexTensors.real),this.makeComplexComponentTensorInfo(n,o.complexTensors.imag),this.makeComplexComponentTensorInfo(r,i.complexTensors.real),this.makeComplexComponentTensorInfo(r,i.complexTensors.imag)],l=this.compileAndRun(a,u),c=this.compileAndRun(s,u),f=this.complex(l,c);return l.dispose(),c.dispose(),f}if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.multiply(n,r);if(ce().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,ww,n.dtype);var d=new Zt(ww,n.shape,r.shape);return this.compileAndRun(d,[n,r],n.dtype)},t.prototype.batchNormalization=function(n,r,o,i,a,s){var u=[n,r,o],l=null;s!=null&&(l=s.shape,u.push(s));var c=null;if(a!=null&&(c=a.shape,u.push(a)),ce().getBool("WEBGL_PACK_NORMALIZATION")){var f=new Y4(n.shape,r.shape,o.shape,l,c,i);return this.compileAndRun(f,u)}var d=new X4(n.shape,r.shape,o.shape,l,c,i);return this.compileAndRun(d,u)},t.prototype.localResponseNormalization4D=function(n,r,o,i,a){var s=ce().getBool("WEBGL_PACK_NORMALIZATION")?new GL(n.shape,r,o,i,a):new HL(n.shape,r,o,i,a);return this.compileAndRun(s,[n])},t.prototype.LRNGrad=function(n,r,o,i,a,s,u){var l=new VL(r.shape,i,a,s,u);return this.compileAndRun(l,[r,o,n])},t.prototype.tile=function(n,r){if(n.dtype==="string"){var o=this.readSync(n.dataId).map(function(a){return vd(a)});return YS(ot(n.shape,n.dtype,o),r)}var i=new vB(n.shape,r);return this.compileAndRun(i,[n])},t.prototype.pad=function(n,r,o){var i=ce().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new ZL(n.shape,r,o):new JL(n.shape,r,o);return this.compileAndRun(i,[n])},t.prototype.transpose=function(n,r){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.transpose(n,r);var o=ce().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new gB(n.shape,r):new mB(n.shape,r);return this.compileAndRun(o,[n])},t.prototype.gather=function(n,r,o){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.gather(n,r,o);var i=new SL(n.shape,r.size,o);return this.compileAndRun(i,[n,r])},t.prototype.batchToSpaceND=function(n,r,o){M(n.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var i=r.reduce(function(f,d){return f*d}),a=bd(n.shape,r,i),s=Ed(a.length,r.length),u=Cd(n.shape,r,i),l=LS(o,r.length),c=BS(u,o,r.length);return n.reshape(a).transpose(s).reshape(u).slice(l,c)},t.prototype.spaceToBatchND=function(n,r,o){M(n.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var i=r.reduce(function(d,p){return d*p}),a=[[0,0]];a.push.apply(a,o);for(var s=1+r.length;s<n.shape.length;++s)a.push([0,0]);var u=n.pad(a),l=bd(u.shape,r,i,!1),c=Ed(l.length,r.length,!1),f=Cd(u.shape,r,i,!1);return u.reshape(l).transpose(c).reshape(f)},t.prototype.reduce=function(n,r,o){var i=n.shape[0],a=n.shape[1],s=Qp(a),u=new eB({windowSize:s,inSize:a,batchSize:i},r),l=this.compileAndRun(u,[n],o);return l.shape[1]===1?l:this.reduce(l,r,o)},t.prototype.argReduce=function(n,r,o){o===void 0&&(o=null);var i=n.shape[0],a=n.shape[1];o!=null&&(i=o.shape[0],a=o.shape[1]);var s=Qp(a),u=new W4({windowSize:s,inSize:a,batchSize:i},r,o==null),l=[n];o!=null&&l.push(o);var c=this.compileAndRun(u,l,"int32");return c.shape[1]===1?c:this.argReduce(n,r,c)},t.prototype.argReducePacked=function(n,r,o){o===void 0&&(o=null);var i=o!=null?o.shape:n.shape,a=Qp(i[i.length-1]),s=new G4(i,a,r,o==null),u=o==null?[n]:[n,o],l=this.compileAndRun(s,u,"int32");return l.rank===n.rank?this.argReducePacked(n,r,l):l},t.prototype.sum=function(n,r){Rr("sum",r,n.rank);var o=Gn(n.shape,r),i=o[0],a=Fe(o[1]),s=n.as2D(-1,a),u=$p(n.dtype);return this.reduce(s,"sum",u).reshape(i)},t.prototype.prod=function(n,r){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.prod(n,r);var o=Gn(n.shape,r),i=o[0],a=Fe(o[1]),s=n.as2D(-1,a),u=$p(n.dtype);return this.reduce(s,"prod",u).reshape(i)},t.prototype.unsortedSegmentSum=function(n,r,o){var i=0,a=Ko([i],n.rank),s=n;a!=null&&(s=n.transpose(a),i=Xo(1,n.rank)[0]);var u=function(p,v,x){for(var w=[],y=p.length,b=0;b<y;b++)b!==v?w.push(p[b]):w.push(x);return w}(s.shape,i,o),l=Fe([s.shape[i]]),c=s.as2D(-1,l),f=$p(n.dtype),d=this.segOpCompute(c,"unsortedSegmentSum",r,f,o).reshape(u);return a!=null&&(d=d.transpose(gy(a))),d},t.prototype.segOpCompute=function(n,r,o,i,a){var s=n.shape[0],u=n.shape[1],l=function(d,p){var v,x=!1;for(d<=WS?(v=d,x=!0):v=Fm(d,Math.floor(Math.sqrt(d)));!x;)v>p||v===d?x=!0:v=Fm(d,v+1);return v}(u,a),c=new lB({windowSize:l,inSize:u,batchSize:s,numSegments:a}),f=this.compileAndRun(c,[n,o],i);return f.shape[1]===a?f:(o=wd(0,a).tile([u/l]),this.segOpCompute(f,r,o,i,a))},t.prototype.argMinMaxReduce=function(n,r,o){var i=[r];if(Rr("arg"+o.charAt(0).toUpperCase()+o.slice(1),i,n.rank),!ce().getBool("WEBGL_PACK_REDUCE")||n.rank<=2){var a=Gn(n.shape,i),s=a[0],u=Fe(a[1]),l=n.as2D(-1,u);return this.argReduce(l,o).reshape(s)}return this.argReducePacked(n,o)},t.prototype.argMin=function(n,r){return this.argMinMaxReduce(n,r,"min")},t.prototype.argMax=function(n,r){return this.argMinMaxReduce(n,r,"max")},t.prototype.cumsum=function(n,r,o,i){if(r!==n.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(n.rank-1)+" but got axis="+r);var a=new dL(n.shape,o,i);return this.compileAndRun(a,[n])},t.prototype.equal=function(n,r){if(ce().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(equal(a, b));
`,"bool");var o=new Zt("return float(a == b);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},t.prototype.notEqual=function(n,r){if(ce().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(notEqual(a, b));
`,"bool");var o=new Zt("return float(a != b);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},t.prototype.less=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.less(n,r);if(ce().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(lessThan(a, b));
`,"bool");var o=new Zt("return float(a < b);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},t.prototype.lessEqual=function(n,r){if(ce().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(lessThanEqual(a, b));
`,"bool");var o=new Zt("return float(a <= b);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},t.prototype.greater=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.greater(n,r);if(ce().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(greaterThan(a, b));
`,"bool");var o=new Zt("return float(a > b);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},t.prototype.greaterEqual=function(n,r){if(ce().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(greaterThanEqual(a, b));
`,"bool");var o=new Zt("return float(a >= b);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},t.prototype.logicalNot=function(n){var r=new st(n.shape,"return float(!(x >= 1.0));");return this.compileAndRun(r,[n])},t.prototype.logicalAnd=function(n,r){if(ce().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,"bool");var o=new Zt("return float(a >= 1.0 && b >= 1.0);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},t.prototype.logicalOr=function(n,r){if(ce().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,"bool");var o=new Zt("return float(a >= 1.0 || b >= 1.0);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},t.prototype.select=function(n,r,o){var i=new cB(n.rank,r.shape,r.rank);return this.compileAndRun(i,[n,r,o],jn(r.dtype,o.dtype))},t.prototype.where=function(n){yd("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var r=n.dataSync();return _y(n.shape,r)},t.prototype.topk=function(n,r,o){return QS(n.dataSync(),n.shape,n.dtype,r)},t.prototype.min=function(n,r){Rr("min",r,n.rank);var o=Gn(n.shape,r),i=o[0],a=Fe(o[1]),s=n.as2D(-1,a);return this.reduce(s,"min",s.dtype).reshape(i)},t.prototype.minimum=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.minimum(n,r);var o=ce().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ni(`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new Zt(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return min(a, b);
`,n.shape,r.shape);return this.compileAndRun(o,[n,r])},t.prototype.mod=function(n,r){var o=ce().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ni(`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new Zt(`if (b == 0.0) return NAN;
  return mod(a, b);`,n.shape,r.shape);return this.compileAndRun(o,[n,r])},t.prototype.max=function(n,r){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.max(n,r);Rr("max",r,n.rank);var o=Gn(n.shape,r),i=o[0],a=Fe(o[1]),s=n.as2D(-1,a);return this.reduce(s,"max",s.dtype).reshape(i)},t.prototype.maximum=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.maximum(n,r);var o=ce().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ni(`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new Zt(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return max(a, b);
`,n.shape,r.shape);return this.compileAndRun(o,[n,r])},t.prototype.all=function(n,r){Rr("all",r,n.rank);var o=Gn(n.shape,r),i=o[0],a=Fe(o[1]),s=n.as2D(-1,a);return this.reduce(s,"all",s.dtype).reshape(i)},t.prototype.any=function(n,r){Rr("any",r,n.rank);var o=Gn(n.shape,r),i=o[0],a=Fe(o[1]),s=n.as2D(-1,a);return this.reduce(s,"any",s.dtype).reshape(i)},t.prototype.realDivide=function(n,r){if(ce().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,"float32",!0);var o=new Zt(`
if (a == b) {
  return 1.0;
};
return a / b;`,n.shape,r.shape);return this.compileAndRun(o,[n,r],"float32")},t.prototype.floorDiv=function(n,r){if(ce().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,"int32");var o=new Zt(`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,n.shape,r.shape);return this.compileAndRun(o,[n,r],"int32")},t.prototype.add=function(n,r){if(n.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(n,r,Jp);if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.add(n,r);var o=jn(n.dtype,r.dtype);if(ce().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,Jp,o);var i=new Zt(Jp,n.shape,r.shape);return this.compileAndRun(i,[n,r],o)},t.prototype.packedUnaryOp=function(n,r,o){var i=new nl(n.shape,r);return this.compileAndRun(i,[n],o)},t.prototype.packedBinaryOp=function(n,r,o,i,a){a===void 0&&(a=!1);var s=new ni(o,n.shape,r.shape,a);return this.compileAndRun(s,[n,r],i)},t.prototype.complexSeparableBinaryOp=function(n,r,o){var i=this,a=this.texData.get(n.dataId),s=this.texData.get(r.dataId),u=[[a.complexTensors.real,s.complexTensors.real],[a.complexTensors.imag,s.complexTensors.imag]].map(function(d){var p=d[0],v=d[1],x=i.makeComplexComponentTensorInfo(n,p),w=i.makeComplexComponentTensorInfo(r,v),y=new Zt(o,n.shape,r.shape);return i.compileAndRun(y,[x,w],jn(p.dtype,v.dtype))}),l=u[0],c=u[1],f=this.complex(l,c);return l.dispose(),c.dispose(),f},t.prototype.makeComplexComponentTensorInfo=function(n,r){return{dataId:r.dataId,dtype:r.dtype,shape:n.shape}},t.prototype.addN=function(n){if(n.length===1)return n[0];if(n.length>ce().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var r=Math.floor(n.length/2),o=this.addN(n.slice(0,r)),i=this.addN(n.slice(r));return this.addN([o,i])}var a=n.map(function(l){return l.dtype}).reduce(function(l,c){return jn(l,c)}),s=n.map(function(l){return l.shape}),u=ce().getBool("WEBGL_PACK")?new j4(n[0].shape,s):new B4(n[0].shape,s);return this.compileAndRun(u,n,a)},t.prototype.subtract=function(n,r){if(n.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(n,r,Zp);if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.subtract(n,r);var o=jn(n.dtype,r.dtype);if(ce().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,Zp,n.dtype);var i=new Zt(Zp,n.shape,r.shape);return this.compileAndRun(i,[n,r],o)},t.prototype.pow=function(n,r){var o=ce().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ni(`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new Zt(`
if(a < 0.0 && floor(b) < b){
  return NAN;
}
if (b == 0.0) {
  return 1.0;
}
return (round(mod(b, 2.0)) != 1) ?
    pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,n.shape,r.shape),i=jn(n.dtype,r.dtype);return this.compileAndRun(o,[n,r],i)},t.prototype.ceil=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.ceil(n);if(ce().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,Aw,n.dtype);var r=new st(n.shape,Aw);return this.compileAndRun(r,[n])},t.prototype.floor=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.floor(n);if(ce().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,Pw,n.dtype);var r=new st(n.shape,Pw);return this.compileAndRun(r,[n])},t.prototype.sign=function(n){var r=new st(n.shape,`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`);return this.compileAndRun(r,[n])},t.prototype.isNaN=function(n){var r=new st(n.shape,"return float(isnan(x));");return this.compileAndRun(r,[n],"bool")},t.prototype.isInf=function(n){var r=new st(n.shape,"return float(isinf(x));");return this.compileAndRun(r,[n],"bool")},t.prototype.isFinite=function(n){var r=new st(n.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(r,[n],"bool")},t.prototype.round=function(n){var r=new st(n.shape,`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`);return this.compileAndRun(r,[n])},t.prototype.exp=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.exp(n);if(ce().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,Fw,n.dtype);var r=new st(n.shape,Fw);return this.compileAndRun(r,[n])},t.prototype.expm1=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.expm1(n);if(ce().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,Ow,n.dtype);var r=new st(n.shape,Ow);return this.compileAndRun(r,[n])},t.prototype.softmax=function(n,r){var o=kn([r],n.shape),i=this.max(n,o),a=Sr(i.shape,o),s=this.subtract(n,i.reshape(a)),u=this.exp(s),l=this.sum(u,o).reshape(a);return this.realDivide(u,l)},t.prototype.log=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.log(n);if(ce().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,n.dtype);var r=new st(n.shape,`if (x < 0.0) return NAN;
  return log(x);`);return this.compileAndRun(r,[n])},t.prototype.log1p=function(n){var r=new st(n.shape,"return log(1.0 + x);");return this.compileAndRun(r,[n])},t.prototype.sqrt=function(n){var r=new st(n.shape,"return sqrt(x);");return this.compileAndRun(r,[n])},t.prototype.rsqrt=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.rsqrt(n);var r=new st(n.shape,"return inversesqrt(x);");return this.compileAndRun(r,[n])},t.prototype.reciprocal=function(n){var r=new st(n.shape,"return 1.0 / x;");return this.compileAndRun(r,[n])},t.prototype.relu=function(n){var r;return r=ce().getBool("WEBGL_PACK")?new nl(n.shape,a_):new st(n.shape,r_),this.compileAndRun(r,[n])},t.prototype.relu6=function(n){var r;return r=ce().getBool("WEBGL_PACK")?new nl(n.shape,s_):new st(n.shape,o_),this.compileAndRun(r,[n])},t.prototype.prelu=function(n,r){var o=ce().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ni(n_,n.shape,r.shape):new Zt(t_,n.shape,r.shape);return this.compileAndRun(o,[n,r])},t.prototype.elu=function(n){if(ce().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,u_,n.dtype);var r=new st(n.shape,i_);return this.compileAndRun(r,[n])},t.prototype.eluDer=function(n,r){var o=ce().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ni(`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,n.shape,r.shape):new Zt("return (b >= 1.0) ? a : a * (b + 1.0);",n.shape,r.shape);return this.compileAndRun(o,[n,r])},t.prototype.selu=function(n){var r=new st(n.shape,xB);return this.compileAndRun(r,[n])},t.prototype.int=function(n){var r=new st(n.shape,"return float(int(x));");return this.compileAndRun(r,[n],"int32")},t.prototype.clip=function(n,r,o){var i,a=(i=ce().getBool("WEBGL_PACK_CLIP")?new eL(n.shape):new Z4(n.shape)).getCustomSetupFunc(r,o);return this.compileAndRun(i,[n],null,a)},t.prototype.abs=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.abs(n);if(ce().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,Dw,n.dtype);var r=new st(n.shape,Dw);return this.compileAndRun(r,[n])},t.prototype.complexAbs=function(n){var r=this.texData.get(n.dataId),o=new tL(n.shape),i=[this.makeComplexComponentTensorInfo(n,r.complexTensors.real),this.makeComplexComponentTensorInfo(n,r.complexTensors.imag)];return this.compileAndRun(o,i)},t.prototype.sigmoid=function(n){var r=new st(n.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(r,[n])},t.prototype.softplus=function(n){var r=new st(n.shape,`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`);return this.compileAndRun(r,[n])},t.prototype.sin=function(n){var r=new st(n.shape,wB);return this.compileAndRun(r,[n])},t.prototype.cos=function(n){var r=new st(n.shape,bB);return this.compileAndRun(r,[n])},t.prototype.tan=function(n){var r=new st(n.shape,"return tan(x);");return this.compileAndRun(r,[n])},t.prototype.asin=function(n){var r=new st(n.shape,EB);return this.compileAndRun(r,[n])},t.prototype.acos=function(n){var r=new st(n.shape,CB);return this.compileAndRun(r,[n])},t.prototype.atan=function(n){var r=new st(n.shape,SB);return this.compileAndRun(r,[n])},t.prototype.atan2=function(n,r){var o=ce().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ni(`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new Zt(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return atan(a, b);
`,n.shape,r.shape);return this.compileAndRun(o,[n,r])},t.prototype.sinh=function(n){var r=new st(n.shape,`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[n])},t.prototype.cosh=function(n){var r=new st(n.shape,`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[n])},t.prototype.tanh=function(n){var r=new st(n.shape,`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`);return this.compileAndRun(r,[n])},t.prototype.asinh=function(n){var r=new st(n.shape,_B);return this.compileAndRun(r,[n])},t.prototype.acosh=function(n){var r=new st(n.shape,kB);return this.compileAndRun(r,[n])},t.prototype.atanh=function(n){var r=new st(n.shape,RB);return this.compileAndRun(r,[n])},t.prototype.erf=function(n){var r=new st(n.shape,`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = 0.3275911;
  float a1 = 0.254829592;
  float a2 = -0.284496736;
  float a3 = 1.421413741;
  float a4 = -1.453152027;
  float a5 = 1.061405429;

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`);return this.compileAndRun(r,[n])},t.prototype.step=function(n,r){var o=new st(n.shape,function(i){return i===void 0&&(i=0),mo+`
    return x > 0.0 ? 1.0 : float(`+i+`);
  `}(r));return this.compileAndRun(o,[n])},t.prototype.conv2dByMatMul=function(n,r,o,i,a,s){var u=n.shape,l=this.texData.get(n.dataId),c=o.inChannels,f=u[0]*u[1]*u[2],d=o.outChannels,p=o.dataFormat==="channelsLast",v=(f===1||d===1)&&c>1e3,x=u[2]%2!=0&&!!l.isPacked;if(v||!ce().getBool("WEBGL_LAZILY_UNPACK")||!ce().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!x){var w=p?u[0]*u[1]*u[2]:u[0]*u[2]*u[3],y=this.reshape(n,[1,w,o.inChannels]),b=this.reshape(r,[1,o.inChannels,o.outChannels]);return this.reshape(this.fusedBatchMatMul({a:y,b,transposeA:!1,transposeB:!1,bias:i,activation:a,preluActivationWeights:s}),o.outShape)}var E=p?u[0]*u[1]*(u[2]+1):u[0]*u[2]*(u[3]+1),S={dataId:n.dataId,shape:[1,E,o.inChannels],dtype:n.dtype},R=l.shape;l.shape=l.shape.slice(),l.shape[l.shape.length-2]++,M(nf(l.shape,S.shape),function(){return"packed reshape "+l.shape+" to "+S.shape+" isn't free"});var k=this.reshape(r,[1,o.inChannels,o.outChannels]),m=this.fusedBatchMatMul({a:S,b:k,transposeA:!1,transposeB:!1,bias:i,activation:a,preluActivationWeights:s}),P=this.texData.get(m.dataId);return M(P.isPacked,function(){return"batchMatMul result is expected to be packed"}),l.shape=R,P.shape=o.outShape,q.makeTensorFromDataId(m.dataId,o.outShape,m.dtype)},t.prototype.conv2dWithIm2Row=function(n,r,o,i,a,s){var u=o.filterWidth,l=o.filterHeight,c=o.inChannels,f=o.outWidth,d=o.outHeight,p=o.dataFormat==="channelsLast",v=u*l*c,x=d*f,w=[v,x],y=n.squeeze([0]),b=r.reshape([1,v,-1]),E=new $L(w,y.shape,o),S=this.compileAndRun(E,[y]).reshape([1,w[0],w[1]]),R=i!=null,k=s!=null,m=a?sf(a,!0):null,P=new ev(S.shape,[1,x,o.outChannels],!0,!1,R,m,k),D=[S,b];i&&D.push(i),k&&D.push(s);var N=this.compileAndRun(P,D);return p?N.reshape([1,d,f,o.outChannels]):N.reshape([1,o.outChannels,d,f])},t.prototype.fusedConv2d=function(n){var r=n.input,o=n.filter,i=n.convInfo,a=n.bias,s=n.activation,u=n.preluActivationWeights;if(i.filterHeight===1&&i.filterWidth===1&&i.dilationHeight===1&&i.dilationWidth===1&&i.strideHeight===1&&i.strideWidth===1&&(i.padInfo.type==="SAME"||i.padInfo.type==="VALID"))return this.conv2dByMatMul(r,o,i,a,s,u);if(ce().getBool("WEBGL_CONV_IM2COL")&&r.shape[0]===1)return this.conv2dWithIm2Row(r,o,i,a,s,u);var l=a!=null,c=u!=null,f=s?sf(s,!1):null,d=new bw(i,l,f,c),p=[r,o];return a&&p.push(a),u&&p.push(u),this.compileAndRun(d,p)},t.prototype.conv2d=function(n,r,o){if(o.filterHeight===1&&o.filterWidth===1&&o.dilationHeight===1&&o.dilationWidth===1&&o.strideHeight===1&&o.strideWidth===1&&(o.padInfo.type==="SAME"||o.padInfo.type==="VALID"))return this.conv2dByMatMul(n,r,o);if(ce().getBool("WEBGL_CONV_IM2COL")&&n.shape[0]===1)return this.conv2dWithIm2Row(n,r,o);var i=new bw(o);return this.compileAndRun(i,[n,r])},t.prototype.conv2dDerInput=function(n,r,o){var i=new iL(o);return this.compileAndRun(i,[n,r])},t.prototype.conv2dDerFilter=function(n,r,o){var i=new oL(o);return this.compileAndRun(i,[n,r])},t.prototype.fusedDepthwiseConv2D=function(n){var r,o=n.input,i=n.filter,a=n.convInfo,s=n.bias,u=n.activation,l=n.preluActivationWeights,c=ce().getBool("WEBGL_PACK_DEPTHWISECONV")&&a.strideWidth<=2&&a.outChannels/a.inChannels==1,f=u?sf(u,c):null,d=[o,i],p=s!=null,v=l!=null;return p&&d.push(s),v&&d.push(l),c?(r=new Cw(a,p,f,v),this.compileAndRun(r,d)):(r=new Ew(a,p,f,v),this.compileAndRun(r,d))},t.prototype.depthwiseConv2D=function(n,r,o){var i;return ce().getBool("WEBGL_PACK_DEPTHWISECONV")&&o.strideWidth<=2&&o.outChannels/o.inChannels==1?(i=new Cw(o),this.compileAndRun(i,[n,r])):(i=new Ew(o),this.compileAndRun(i,[n,r]))},t.prototype.depthwiseConv2DDerInput=function(n,r,o){var i=new lL(o);return this.compileAndRun(i,[n,r])},t.prototype.depthwiseConv2DDerFilter=function(n,r,o){var i=new uL(o);return this.compileAndRun(i,[n,r])},t.prototype.conv3d=function(n,r,o){var i=new cL(o);return this.compileAndRun(i,[n,r])},t.prototype.conv3dDerInput=function(n,r,o){var i=new sL(o);return this.compileAndRun(i,[n,r])},t.prototype.conv3dDerFilter=function(n,r,o){var i=new aL(o);return this.compileAndRun(i,[n,r])},t.prototype.maxPool=function(n,r){var o=new tv(r,"max",!1);return this.compileAndRun(o,[n])},t.prototype.avgPool=function(n,r){var o=new tv(r,"avg",!1);return this.compileAndRun(o,[n],"float32")},t.prototype.maxPoolBackprop=function(n,r,o,i){var a=new tv(i,"max",!0),s=this.compileAndRun(a,[r]),u=new qL(i),l=this.compileAndRun(u,[n,s],r.dtype);return s.dispose(),l},t.prototype.avgPoolBackprop=function(n,r,o){var i=new q4(o);return this.compileAndRun(i,[n],r.dtype)},t.prototype.cast=function(n,r){return GS(n,r,this)},t.prototype.unstack=function(n,r){for(var o=n.shape[r],i=new Array(n.rank-1),a=0,s=0;s<n.rank;s++)s!==r&&(i[a++]=n.shape[s]);var u=new Array(n.rank).fill(0),l=n.shape.slice();l[r]=1;var c=new Array(o);for(s=0;s<c.length;s++)u[r]=s,c[s]=this.slice(n,u,l).reshape(i);return c},t.prototype.avgPool3d=function(n,r){var o=new nv(r,"avg",!1);return this.compileAndRun(o,[n],"float32")},t.prototype.avgPool3dBackprop=function(n,r,o){var i=new K4(o);return this.compileAndRun(i,[n],r.dtype)},t.prototype.maxPool3d=function(n,r){var o=new nv(r,"max",!1);return this.compileAndRun(o,[n],"float32")},t.prototype.maxPool3dBackprop=function(n,r,o,i){var a=new nv(i,"max",!0),s=this.compileAndRun(a,[r]),u=new KL(i),l=this.compileAndRun(u,[n,s],r.dtype);return s.dispose(),l},t.prototype.reshape=function(n,r){var o=this.texData.get(n.dataId);if(o.isPacked&&!nf(n.shape,r)&&(o.texture===null||!nf(o.shape,r))){var i=this.packedReshape(n,r);return q.makeTensorFromDataId(i.dataId,i.shape,i.dtype)}return Um(n,r)},t.prototype.resizeBilinear=function(n,r,o,i){var a=ce().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new oB(n.shape,r,o,i):new rB(n.shape,r,o,i);return this.compileAndRun(a,[n],"float32")},t.prototype.resizeBilinearBackprop=function(n,r,o){var i=new nB(n,r,o);return this.compileAndRun(i,[n])},t.prototype.resizeNearestNeighbor=function(n,r,o,i){var a=new aB(n.shape,r,o,i);return this.compileAndRun(a,[n])},t.prototype.resizeNearestNeighborBackprop=function(n,r,o){var i=new iB(n,r,o);return this.compileAndRun(i,[n])},t.prototype.multinomial=function(n,r,o,i){var a=r?n:bi(n),s=a.shape[0],u=a.shape[1],l=new XL(s,u,o),c=l.getCustomSetupFunc(i);return this.compileAndRun(l,[a],"int32",c)},t.prototype.oneHot=function(n,r,o,i){var a=new YL(n.size,r,o,i);return this.compileAndRun(a,[n])},t.prototype.diag=function(n){var r=new mL(n.size);return this.compileAndRun(r,[n])},t.prototype.nonMaxSuppression=function(n,r,o,i,a){return yd("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),Cy(n.dataSync(),r.dataSync(),o,i,a)},t.prototype.cropAndResize=function(n,r,o,i,a,s){var u=new fL(n.shape,r.shape,i,a,s);return this.compileAndRun(u,[n,r,o],"float32")},t.prototype.depthToSpace=function(n,r,o){M(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});var i=n.shape[0],a=o==="NHWC"?n.shape[1]:n.shape[2],s=o==="NHWC"?n.shape[2]:n.shape[3],u=o==="NHWC"?n.shape[3]:n.shape[1],l=a*r,c=s*r,f=u/(r*r),d=new vL(o==="NHWC"?[i,l,c,f]:[i,f,l,c],r,o);return this.compileAndRun(d,[n])},t.prototype.split=function(n,r,o){return XS(n,r,o)},t.prototype.scatterND=function(n,r,o){var i=Sd(0,n,o),a=i.sliceRank,s=i.numUpdates,u=i.sliceSize,l=i.strides,c=i.outputSize,f=[c/u,u],d=n.reshape([s,a]),p=r.reshape([s,u]);if(c===0)return Um(Wn([]),o);var v=Ee(0),x=new Rw(s,a,d.rank,p.rank,l,f);return this.compileAndRun(x,[p,d,v]).reshape(o)},t.prototype.sparseToDense=function(n,r,o,i){var a=Sd(0,n,o),s=a.sliceRank,u=a.numUpdates,l=a.strides,c=a.outputSize,f=new Rw(u,s,n.rank,r.rank,l,[c,1]);return this.compileAndRun(f,[r,n,i]).reshape(o)},t.prototype.fft=function(n){return this.fftImpl(n,!1)},t.prototype.ifft=function(n){return this.fftImpl(n,!0)},t.prototype.fftImpl=function(n,r){var o=this.texData.get(n.dataId),i=new _w(bL,n.shape,r),a=new _w(EL,n.shape,r),s=[this.makeComplexComponentTensorInfo(n,o.complexTensors.real),this.makeComplexComponentTensorInfo(n,o.complexTensors.imag)],u=this.compileAndRun(i,s),l=this.compileAndRun(a,s),c=this.complex(u,l).as2D(n.shape[0],n.shape[1]);return u.dispose(),l.dispose(),c},t.prototype.gatherND=function(n,r){var o=r.shape,i=o[o.length-1],a=jS(n,r),s=a[0],u=a[1],l=a[2],c=a[3],f=r.reshape([u,i]),d=n.reshape([n.size/l,l]),p=new _L(i,c,[u,l]);return this.compileAndRun(p,[d,f]).reshape(s)},t.prototype.fill=function(n,r,o){if((o=o||dc(r))==="string"){var i=pd(o,Fe(n));return i.fill(r),q.makeTensor(i,n,o,this)}var a=new CL(n,r),s=a.getCustomSetupFunc(r);return this.compileAndRun(a,[],o,s)},t.prototype.onesLike=function(n){if(n.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(n.shape,1,n.dtype)},t.prototype.zerosLike=function(n){return this.fill(n.shape,n.dtype==="string"?"":0,n.dtype)},t.prototype.linspace=function(n,r,o){return qS(n,r,o)},t.prototype.makeTensorInfo=function(n,r){var o=this.write(null,n,r);return this.texData.get(o).usage=null,{dataId:o,shape:n,dtype:r}},t.prototype.makeOutput=function(n,r){var o=this.makeTensorInfo(n,r).dataId;return q.makeTensorFromDataId(o,n,r,this)},t.prototype.unpackTensor=function(n){var r=new IB(n.shape);return this.runWebGLProgram(r,[n],n.dtype)},t.prototype.packTensor=function(n){var r=new QL(n.shape);return this.runWebGLProgram(r,[n],n.dtype,null,!0)},t.prototype.packedReshape=function(n,r){var o=[md(n.shape)].concat(gd(n.shape)),i={dtype:n.dtype,shape:o,dataId:n.dataId},a=[md(r)].concat(gd(r)),s=new tB(a,o),u=this.runWebGLProgram(s,[i],n.dtype,null,!0);return{dataId:u.dataId,shape:r,dtype:u.dtype}},t.prototype.decode=function(n){var r,o=this.texData.get(n),i=o.isPacked,a=o.shape,s=o.dtype,u=Yp(a);return r=i?new pL(u):new hL(u),{dtype:s,shape:a,dataId:this.runWebGLProgram(r,[{shape:u,dtype:s,dataId:n}],s,null,!0).dataId}},t.prototype.runWebGLProgram=function(n,r,o,i,a){var s=this;a===void 0&&(a=!1);var u=this.makeTensorInfo(n.outputShape,o),l=this.texData.get(u.dataId);if(n.packedOutput&&(l.isPacked=!0),n.outPackingScheme===Gl.DENSE){var c=bl(n.outputShape);l.texShape=c.map(function(E){return 2*E})}if(n.outTexUsage!=null&&(l.usage=n.outTexUsage),Fe(u.shape)===0)return l.values=Hl(u.dtype,0),u;var f=[],d=r.map(function(E){if(E.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var S=s.texData.get(E.dataId);if(S.texture==null){if(!n.packedInputs&&Fe(E.shape)<=ce().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:E.shape,texData:null,isUniform:!0,uniformValues:S.values};n.packedInputs&&(S.isPacked=!0,S.shape=E.shape)}else if(!!S.isPacked!=!!n.packedInputs)E=S.isPacked?s.unpackTensor(E):s.packTensor(E),f.push(E),S=s.texData.get(E.dataId);else if(S.isPacked&&!nf(S.shape,E.shape)){var R=E,k=E.shape;E.shape=S.shape,E=s.packedReshape(E,k),f.push(E),S=s.texData.get(E.dataId),R.shape=k}return s.uploadToGPU(E.dataId),{shape:E.shape,texData:S,isUniform:!1}});this.uploadToGPU(u.dataId);var p,v={shape:u.shape,texData:l,isUniform:!1},x=function(E,S,R){var k="";S.concat(R).forEach(function(D){var N=D.texData!=null&&D.texData.slice!=null&&D.texData.slice.flatOffset>0,B=D.isUniform?"uniform":D.texData.texShape;k+=D.shape+"_"+B+"_"+N});var m=E.userCode,P=E.constructor.name;return P+="_"+k+"_"+m}(n,d,v),w=this.getAndSaveBinary(x,function(){return function(E,S,R,k){var m=S.userCode,P=R.map(function($,Y){var ee={logicalShape:$.shape,texShape:$.isUniform?null:$.texData.texShape,isUniform:$.isUniform,isPacked:!$.isUniform&&$.texData.isPacked,flatOffset:null};return $.texData!=null&&$.texData.slice!=null&&$.texData.slice.flatOffset>0&&(ee.flatOffset=$.texData.slice.flatOffset),{name:S.variableNames[Y],shapeInfo:ee}}),D=P.map(function($){return $.shapeInfo}),N={logicalShape:k.shape,texShape:k.texData.texShape,isUniform:!1,isPacked:k.texData.isPacked,flatOffset:null},B=z4(P,N,m,S.packedInputs),z=E.createProgram(B),V=null,Z=E.getUniformLocation(z,"NAN",!1);ce().getNumber("WEBGL_VERSION")===1&&(V=E.getUniformLocation(z,"INFINITY",!1));for(var K={},ne=0;ne<S.variableNames.length;ne++){var J=S.variableNames[ne];K[J]=E.getUniformLocation(z,J,!1),K["offset"+J]=E.getUniformLocation(z,"offset"+J,!1)}return{program:S,source:B,webGLProgram:z,uniformLocations:K,inShapeInfos:D,outShapeInfo:N,infLoc:V,nanLoc:Z}}(s.gpgpu,n,d,v)}),y=this.activeTimers!=null;if(y&&(p=this.startTimer()),function(E,S,R,k,m){kw(S.inShapeInfos,R),kw([S.outShapeInfo],[k]);var P=k.texData.texture,D=k.texData.texShape;k.texData.isPacked?E.setOutputPackedMatrixTexture(P,D[0],D[1]):E.setOutputMatrixTexture(P,D[0],D[1]),E.setProgram(S.webGLProgram),ce().getNumber("WEBGL_VERSION")===1&&S.infLoc!==null&&E.gl.uniform1f(S.infLoc,1/0),S.nanLoc!==null&&E.gl.uniform1f(S.nanLoc,NaN),R.forEach(function(N,B){var z=S.program.variableNames[B],V=S.uniformLocations[z],Z=S.uniformLocations["offset"+z];if(V!=null)if(N.isUniform)if(Fe(N.shape)<2)E.gl.uniform1f(V,N.uniformValues[0]);else{var K=N.uniformValues;K instanceof Float32Array||(K=new Float32Array(K)),E.gl.uniform1fv(V,K)}else N.texData.slice!=null&&Z!=null&&E.gl.uniform1i(Z,N.texData.slice.flatOffset),E.setInputMatrixTexture(N.texData.texture,V,B)}),m!=null&&m(E,S.webGLProgram),E.executeProgram()}(this.gpgpu,w,d,v,i),f.forEach(function(E){return s.disposeData(E.dataId)}),y&&(p=this.endTimer(p),this.activeTimers.push({name:n.constructor.name,query:this.getQueryTime(p)})),!ce().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&a===!1){var b=this.unpackTensor(u);return this.disposeData(u.dataId),b}return u},t.prototype.compileAndRun=function(n,r,o,i,a){a===void 0&&(a=!1),o=o||r[0].dtype;var s=this.runWebGLProgram(n,r,o,i,a);return q.makeTensorFromDataId(s.dataId,s.shape,s.dtype)},t.prototype.getAndSaveBinary=function(n,r){return n in this.binaryCache||(this.binaryCache[n]=r()),this.binaryCache[n]},t.prototype.getTextureManager=function(){return this.textureManager},t.prototype.dispose=function(){var n=this;this.disposed||(ce().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(function(r){n.gpgpu.deleteProgram(n.binaryCache[r].webGLProgram),delete n.binaryCache[r]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},t.prototype.floatPrecision=function(){var n=this;return this.floatPrecisionValue==null&&(this.floatPrecisionValue=Re(function(){if(!ce().get("WEBGL_RENDER_FLOAT32_ENABLED")){var r=ce().getBool("DEBUG");ce().set("DEBUG",!1);var o=n.abs(Ee(1e-8)).dataSync()[0];if(ce().set("DEBUG",r),o>0)return 32}return 16})),this.floatPrecisionValue},t.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},t.prototype.uploadToGPU=function(n){var r,o=this.texData.get(n),i=o.shape,a=o.dtype,s=o.values,u=o.texture,l=o.usage,c=o.isPacked;if(u==null){var f,d=this.activeTimers!=null;d&&(f=No());var p=o.texShape;if(p==null&&(p=LM(i,c),o.texShape=p),s!=null){var v=Yp(i),x=void 0,w=p[1],y=p[0],b=s instanceof Uint8Array;c?(w=(r=pc(p[0],p[1]))[0],y=r[1],x=new wL(v,[y,w],b)):x=new xL(v,[y,w],b);var E=this.makeTensorInfo([y,w],a);this.texData.get(E.dataId).usage=b?Dr.PIXELS:Dr.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(E.dataId),w,y,s);var S=this.runWebGLProgram(x,[E],a,null,!0),R=this.texData.get(S.dataId);o.texture=R.texture,o.texShape=R.texShape,o.isPacked=R.isPacked,o.usage=R.usage,this.disposeData(E.dataId),this.texData.delete(S.dataId),o.values=null,d&&(this.uploadWaitMs+=No()-f)}else{var k=this.acquireTexture(p,l,a,c);o.texture=k}}},t.prototype.convertAndCacheOnCPU=function(n,r){var o=this.texData.get(n),i=o.dtype;return this.releaseGPUData(n),r!=null&&(o.values=function(a,s){if(s==="float32"||s==="complex64")return a;if(s==="int32"||s==="bool"){for(var u=s==="int32"?new Int32Array(a.length):new Uint8Array(a.length),l=0;l<u.length;++l)u[l]=Math.round(a[l]);return u}throw new Error("Unknown dtype "+s)}(r,i)),o.values},t.prototype.acquireTexture=function(n,r,o,i){if(this.numBytesInGPU+=this.computeBytes(n,o),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+a+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(n,r,i)},t.prototype.computeBytes=function(n,r){return n[0]*n[1]*bS(r)},t}(HS);TS()&&q.registerBackend("webgl",function(){return new NB},2);var AB=H({square_:function(e){var t=O(e,"x","square"),n=[t];return q.runKernelFunc(function(r,o){return o([t]),r.square(t)},{x:t},null,"Square",{},n,[])}}),Kl="SquaredDifference",l_=H({squaredDifference_:function(e,t){var n,r=O(e,"a","squaredDifference"),o=O(t,"b","squaredDifference");n=Yt(r,o),r=n[0],o=n[1],ht(r.shape,o.shape);var i={a:r,b:o},a=[r,o];return q.runKernelFunc(function(s,u){var l=s.squaredDifference(r,o);return u([r,o]),l},i,function(s,u){var l=u[0],c=u[1],f=Ee(2);return{a:function(){return s.mul(l.sub(c).mul(f))},b:function(){return s.mul(c.sub(l).mul(f))}}},Kl,{},a,[])}}),PB=H({abs_:function(e){var t=O(e,"x","abs");return t.dtype==="complex64"?q.runKernelFunc(function(n){return n.complexAbs(t)},{$x:t}):q.runKernelFunc(function(n,r){var o=n.abs(t);return r([t]),o},{x:t},function(n,r){var o=r[0];return{x:function(){return n.mul(o.toFloat().step(-1))}}},"Abs")}}),FB=H({acos_:function(e){var t=O(e,"x","acos");return q.runKernelFunc(function(n,r){var o=n.acos(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.divStrict(Ee(1).sub(o.toFloat().square()).sqrt()).neg()}}})}}),OB=H({acosh_:function(e){var t=O(e,"x","acosh");return q.runKernelFunc(function(n,r){var o=n.acosh(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.divStrict(o.toFloat().square().sub(1).sqrt())}}})}}),MB=H({asin_:function(e){var t=O(e,"x","asin");return q.runKernelFunc(function(n,r){var o=n.asin(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.divStrict(Ee(1).sub(o.toFloat().square()).sqrt())}}})}}),LB=H({asinh_:function(e){var t=O(e,"x","asinh");return q.runKernelFunc(function(n,r){var o=n.asinh(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.divStrict(Ee(1).add(o.toFloat().square()).sqrt())}}})}}),BB=H({atan_:function(e){var t=O(e,"x","atan");return q.runKernelFunc(function(n,r){var o=n.atan(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.div(o.toFloat().square().add(1))}}})}}),jB=H({atanh_:function(e){var t=O(e,"x","atanh");return q.runKernelFunc(function(n,r){var o=n.atanh(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.div(Ee(1).sub(o.toFloat().square()))}}})}}),WB=H({ceil_:function(e){var t=O(e,"x","ceil");return q.runKernelFunc(function(n){return n.ceil(t)},{$x:t},function(n){return{$x:function(){return Ct(n)}}})}}),Iy=H({clipByValue_:function(e,t,n){var r=O(e,"x","clipByValue");M(t<=n,function(){return"Error in clip: min ("+t+") must be less than or equal to max ("+n+")."});var o=[r],i={min:t,max:n};return q.runKernelFunc(function(a,s){var u=a.clip(r,t,n);return s([r]),u},{x:r},function(a,s){var u=s[0];return{x:function(){return a.where(u.greaterEqual(t).logicalAnd(u.lessEqual(n)),Ct(a))}}},"ClipByValue",i,o)}}),zB=H({cos_:function(e){var t=O(e,"x","cos"),n=[t];return q.runKernelFunc(function(r,o){var i=r.cos(t);return o([t]),i},{x:t},function(r,o){var i=o[0];return{x:function(){return i.toFloat().sin().neg().mul(r)}}},"Cos",{},n)}}),UB=H({cosh_:function(e){var t=O(e,"x","cosh");return q.runKernelFunc(function(n,r){var o=n.cosh(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return o.toFloat().sinh().mulStrict(n)}}})}}),$B=H({erf_:function(e){var t=O(e,"x","erf");return M(t.dtype==="int32"||t.dtype==="float32",function(){return"Input dtype must be `int32` or `float32`."}),t.dtype==="int32"&&(t=t.toFloat()),q.runKernelFunc(function(n,r){var o=n.erf(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.mul(o.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),Hm=H({exp_:function(e){var t=O(e,"x","exp");return q.runKernelFunc(function(n,r){var o=n.exp(t);return r([o]),o},{x:t},function(n,r){return{x:function(){return n.mulStrict(r[0])}}},"Exp",{},[],[!0])}}),HB=H({expm1_:function(e){var t=O(e,"x","expm1");return q.runKernelFunc(function(n,r){var o=n.expm1(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.mul(o.exp())}}})}}),VB=H({floor_:function(e){var t=O(e,"x","floor");return q.runKernelFunc(function(n){return n.floor(t)},{$x:t},function(n){return{$x:function(){return Ct(n)}}})}}),GB=H({log_:function(e){var t=O(e,"x","log"),n=[t];return q.runKernelFunc(function(r,o){var i=r.log(t);return o([t]),i},{x:t},function(r,o){var i=o[0];return{x:function(){return r.div(i.toFloat())}}},"Log",{},n)}}),qB=H({log1p_:function(e){var t=O(e,"x","log1p");return q.runKernelFunc(function(n,r){var o=n.log1p(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.div(o.add(1))}}})}}),KB=H({logSigmoid_:function(e){var t=O(e,"x","logSigmoid");return q.runKernelFunc(function(n,r){var o=n.softplus(t.neg()).neg();return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.mul(o.neg().sigmoid())}}})}}),Td=H({neg_:function(e){var t=O(e,"x","neg"),n=[t];return q.runKernelFunc(function(r){return r.neg(t)},{x:t},function(r){return{x:function(){return r.neg()}}},"Neg",{},n)}}),XB=H({reciprocal_:function(e){var t=O(e,"x","reciprocal");return q.runKernelFunc(function(n,r){var o=n.reciprocal(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.div(o.square().neg())}}})}}),YB=H({round_:function(e){var t=O(e,"x","round");return q.runKernelFunc(function(n){return n.round(t)},{$x:t},function(n){return{$x:function(){return Ct(n)}}})}}),c_=H({rsqrt_:function(e){var t=O(e,"x","rsqrt"),n=[t];return q.runKernelFunc(function(r,o){var i=r.rsqrt(t);return o([t]),i},{x:t},function(r,o){var i=o[0];return{x:function(){return r.div(i.pow(1.5).mul(2)).neg()}}},"Rsqrt",{},n)}}),f_=H({sigmoid_:function(e){var t=O(e,"x","sigmoid");return q.runKernelFunc(function(n,r){var o=n.sigmoid(t);return r([o]),o},{x:t},function(n,r){var o=r[0];return{x:function(){return n.mul(o.mul(Ee(1).sub(o)))}}},"Sigmoid")}}),QB=H({sign_:function(e){var t=O(e,"x","sign");return q.runKernelFunc(function(n){return n.sign(t)},{$x:t},function(n){return{$x:function(){return Ct(n)}}})}}),JB=H({isNaN_:function(e){var t=O(e,"x","isNaN");return q.runKernelFunc(function(n){return n.isNaN(t)},{$x:t},function(n){return{$x:function(){return Ct(n)}}})}}),ZB=H({isInf_:function(e){var t=O(e,"x","isInf");return q.runKernelFunc(function(n){return n.isInf(t)},{$x:t},function(n){return{$x:function(){return Ct(n)}}})}}),ej=H({isFinite_:function(e){var t=O(e,"x","isFinite");return q.runKernelFunc(function(n){return n.isFinite(t)},{$x:t},function(n){return{$x:function(){return Ct(n)}}})}}),tj=H({sin_:function(e){var t=O(e,"x","sin"),n=[t];return q.runKernelFunc(function(r,o){var i=r.sin(t);return o([t]),i},{x:t},function(r,o){var i=o[0];return{x:function(){return i.toFloat().cos().mul(r)}}},"Sin",{},n)}}),nj=H({sinh_:function(e){var t=O(e,"x","sinh");return q.runKernelFunc(function(n,r){var o=n.sinh(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return o.toFloat().cosh().mulStrict(n)}}})}}),rj=H({softplus_:function(e){var t=O(e,"x","softplus");return q.runKernelFunc(function(n,r){var o=n.softplus(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.mul(o.sigmoid())}}})}}),oj=H({sqrt_:function(e){var t=O(e,"x","sqrt");return q.runKernelFunc(function(n,r){var o=n.sqrt(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.div(o.toFloat().sqrt().mul(2))}}})}}),ij=H({step_:function(e,t){t===void 0&&(t=0);var n=O(e,"x","step");return q.runKernelFunc(function(r){return r.step(n,t)},{$x:n},function(r){return{$x:function(){return Ct(r)}}})}}),aj=H({tan_:function(e){var t=O(e,"x","tan");return q.runKernelFunc(function(n,r){var o=n.tan(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.div(o.cos().square())}}})}}),sj=H({tanh_:function(e){var t=O(e,"x","tanh");return q.runKernelFunc(function(n,r){var o=n.tanh(t);return r([o]),o},{x:t},function(n,r){var o=r[0];return{x:function(){return Ee(1).sub(o.square()).mulStrict(n)}}},"Tanh",{},null,[!0])}});function d_(e,t,n,r,o,i){var a,s,u=O(e,"x","batchNorm"),l=O(t,"mean","batchNorm"),c=O(n,"variance","batchNorm");return o!=null&&(a=O(o,"scale","batchNorm")),r!=null&&(s=O(r,"offset","batchNorm")),M(u.rank===2,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),M(l.rank===2||l.rank===1,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+l.rank+"."}),M(c.rank===2||c.rank===1,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+c.rank+"."}),a!=null&&M(a.rank===2||a.rank===1,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+a.rank+"."}),s!=null&&M(s.rank===2||s.rank===1,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."}),mc(u,l,c,s,a,i)}function h_(e,t,n,r,o,i){var a,s,u=O(e,"x","batchNorm"),l=O(t,"mean","batchNorm"),c=O(n,"variance","batchNorm");return o!=null&&(a=O(o,"scale","batchNorm")),r!=null&&(s=O(r,"offset","batchNorm")),M(u.rank===3,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),M(l.rank===3||l.rank===1,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+l.rank+"."}),M(c.rank===3||c.rank===1,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+c.rank+"."}),a!=null&&M(a.rank===3||a.rank===1,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+a.rank+"."}),s!=null&&M(s.rank===3||s.rank===1,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."}),mc(u,l,c,s,a,i)}function p_(e,t,n,r,o,i){var a,s,u=O(e,"x","batchNorm"),l=O(t,"mean","batchNorm"),c=O(n,"variance","batchNorm");return o!=null&&(a=O(o,"scale","batchNorm")),r!=null&&(s=O(r,"offset","batchNorm")),M(u.rank===4,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+u.rank+"."}),M(l.rank===4||l.rank===1,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+l.rank+"."}),M(c.rank===4||c.rank===1,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+c.rank+"."}),a!=null&&M(a.rank===4||a.rank===1,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+a.rank+"."}),s!=null&&M(s.rank===4||s.rank===1,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."}),mc(u,l,c,s,a,i)}function mc(e,t,n,r,o,i){i==null&&(i=.001);var a,s,u,l=O(e,"x","batchNorm"),c=O(t,"mean","batchNorm"),f=O(n,"variance","batchNorm");o!=null&&(a=O(o,"scale","batchNorm")),r!=null&&(s=O(r,"offset","batchNorm")),M(c.rank===f.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),M(s==null||c.rank===s.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),M(a==null||c.rank===a.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),u=l.rank===0||l.rank===1?l.as4D(1,1,1,l.size):l.rank===2?l.as4D(1,1,l.shape[0],l.shape[1]):l.rank===3?l.as4D(1,l.shape[0],l.shape[1],l.shape[2]):l;var d=[l,c,f,a];return q.runKernelFunc(function(p,v){var x=p.batchNormalization(u,uf(c),uf(f),i,uf(a),uf(s));return v([l,c,f,a]),x},{x:l,mean:c,variance:f,scale:a,offset:s},function(p,v){var x=v,w=x[0],y=x[1],b=x[2],E=x[3],S=E??Ee(1),R=Sn(y.shape,u.shape),k=[];if(y.rank===1){for(var m=0;m<u.shape.length-1;++m)k.push(u.shape[m]);k.push(1)}var P=w.sub(y),D=p.mul(S),N=c_(b.add(Ee(i))),B=N.mul(N).mul(N).mul(Ee(-.5));return{x:function(){return y.rank===1?p.mul(Js(N.as4D(1,1,1,y.shape[0]),k)).mul(S).reshape(w.shape):p.mul(N).mul(S).reshape(w.shape)},mean:function(){var z=N.mul(Ee(-1)).mul(D);return y.rank===1&&(z=z.sum(R)),z.reshape(y.shape)},variance:function(){var z=B.mul(P).mul(D);return y.rank===1&&(z=z.sum(R)),z.reshape(y.shape)},scale:function(){var z=P.mul(N),V=p.mul(z);return y.rank===1&&(V=V.sum(R)),V.reshape(y.shape)},offset:function(){var z=p;return y.rank===1&&(z=z.sum(R)),z.reshape(y.shape)}}},"BatchNormalization",{varianceEpsilon:i},d).reshape(l.shape)}function uf(e){return e==null?null:e.rank===0?e.as1D():e.rank===1?e:e.rank===2?e.as4D(1,1,e.shape[0],e.shape[1]):e.rank===3?e.as4D(1,e.shape[0],e.shape[1],e.shape[2]):e}function ph(){IS("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var uj=H({batchNormalization2d_:function(e,t,n,r,o,i){return r===void 0&&(r=.001),ph(),d_(e,t,n,i,o,r)}}),lj=H({batchNormalization3d_:function(e,t,n,r,o,i){return r===void 0&&(r=.001),ph(),h_(e,t,n,i,o,r)}}),cj=H({batchNormalization4d_:function(e,t,n,r,o,i){return r===void 0&&(r=.001),ph(),p_(e,t,n,i,o,r)}}),fj=H({batchNormalization_:function(e,t,n,r,o,i){return r===void 0&&(r=.001),ph(),mc(e,t,n,i,o,r)}}),v_=H({batchNorm_:mc}),dj=H({batchNorm2d_:d_}),hj=H({batchNorm3d_:h_}),pj=H({batchNorm4d_:p_}),vh=H({logicalAnd_:function(e,t){var n=O(e,"a","logicalAnd","bool"),r=O(t,"b","logicalAnd","bool");return ht(n.shape,r.shape),q.runKernelFunc(function(o){return o.logicalAnd(n,r)},{a:n,b:r},null,"LogicalAnd")}}),vj=H({logicalNot_:function(e){var t=O(e,"x","logicalNot","bool");return q.runKernelFunc(function(n){return n.logicalNot(t)},{$x:t})}}),m_=H({logicalOr_:function(e,t){var n=O(e,"a","logicalOr","bool"),r=O(t,"b","logicalOr","bool");return ht(n.shape,r.shape),q.runKernelFunc(function(o){return o.logicalOr(n,r)},{$a:n,$b:r})}}),mj=H({logicalXor_:function(e,t){var n=O(e,"a","logicalXor","bool"),r=O(t,"b","logicalXor","bool");return ht(n.shape,r.shape),m_(e,t).logicalAnd(vh(e,t).logicalNot())}}),ns=H({where_:function(e,t,n){var r=O(t,"a","where"),o=O(n,"b","where"),i=O(e,"condition","where","bool");return Tt(r.shape,o.shape,"Error in where: "),i.rank===1?M(i.shape[0]===r.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):Tt(i.shape,o.shape,"Error in where: "),q.runKernelFunc(function(a,s){var u=a.select(i,r,o);return s([i]),u},{$condition:i,$a:r,$b:o},function(a,s){var u=s[0];return{$condition:function(){return Ct(u).toFloat()},$a:function(){return a.mul(u.cast(a.dtype))},$b:function(){return a.mul(u.logicalNot().cast(a.dtype))}}})}}),g_=function(e){return Ie(this,void 0,void 0,function(){var t,n,r;return De(this,function(o){switch(o.label){case 0:return[4,(t=O(e,"condition","whereAsync","bool")).data()];case 1:return n=o.sent(),r=_y(t.shape,n),e!==t&&t.dispose(),[2,r]}})})},ct=H({add_:function(e,t){var n,r=O(e,"a","add"),o=O(t,"b","add");n=Yt(r,o),r=n[0],o=n[1];var i=ht(r.shape,o.shape);return q.runKernelFunc(function(a){return a.add(r,o)},{a:r,b:o},function(a){return{a:function(){var s=a,u=Sn(r.shape,i);return u.length>0&&(s=s.sum(u)),s.reshape(r.shape)},b:function(){var s=a,u=Sn(o.shape,i);return u.length>0&&(s=s.sum(u)),s.reshape(o.shape)}}},"Add")}}),gj=H({addN_:function(e){M(Array.isArray(e),function(){return"The argument passed to tf.addN() must be a list of tensors"}),M(e.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+e.length});var t=e.map(function(o,i){return O(o,"tensors"+i,"addN")}),n=t[0];t.forEach(function(o){if(o.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),t.forEach(function(o){if(!Nn(o.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var r=t;return q.runKernelFunc(function(o){return o.addN(t)},r,function(o){var i={};return t.forEach(function(a,s){i[s]=function(){return o.clone()}}),i},"AddN")}}),yj=H({addStrict_:function(e,t){var n=O(e,"a","addStrict"),r=O(t,"b","addStrict");return Tt(n.shape,r.shape,"Error in addStrict: "),n.add(r)}}),xj=H({atan2_:function(e,t){var n,r=O(e,"a","atan2"),o=O(t,"b","atan2");n=Yt(r,o),r=n[0],o=n[1];var i=ht(r.shape,o.shape);return q.runKernelFunc(function(a,s){var u=a.atan2(r,o);return s([r,o]),u},{$a:r,$b:o},function(a,s){var u=s[0],l=s[1];return{$a:function(){var c=ct(u.square(),l.square()),f=a.mul(l.div(c)),d=Sn(u.shape,i);return d.length>0&&(f=f.sum(d)),f.reshape(u.shape)},$b:function(){var c=ct(u.square(),l.square()),f=Td(a.mul(u.div(c))),d=Sn(l.shape,i);return d.length>0&&(f=f.sum(d)),f.reshape(l.shape)}}})}}),uo=H({div_:function(e,t){var n,r=O(e,"a","div"),o=O(t,"b","div");if(n=Yt(r,o),r=n[0],o=n[1],r.dtype==="int32"&&o.dtype==="int32")return y_(r,o);var i=ht(r.shape,o.shape);return q.runKernelFunc(function(a,s){var u=a.realDivide(r,o);return s([r,o]),u},{a:r,b:o},function(a,s){var u=s[0],l=s[1];return{a:function(){var c=a.div(l.toFloat()),f=Sn(u.shape,i);return f.length>0?c.sum(f).reshape(u.shape):c},b:function(){var c=a.mul(u.toFloat()),f=Sn(l.shape,i);f.length>0&&(c=c.sum(f).reshape(l.shape));var d=l.square();return c.div(d.toFloat()).neg()}}},"Div")}}),wj=H({divNoNan_:function(e,t){var n,r=O(e,"a","div"),o=O(t,"b","div");r=(n=Yt(r,o))[0],o=n[1];var i=uo(r,o),a=Ct(i),s=o.equal(a);return ns(s,a,i)}}),bj=H({divStrict_:function(e,t){var n=O(e,"a","div"),r=O(t,"b","div");return Tt(n.shape,r.shape,"Error in divideStrict: "),n.div(r)}}),y_=H({floorDiv_:function(e,t){var n,r=O(e,"a","floorDiv"),o=O(t,"b","floorDiv");n=Yt(r,o),r=n[0],o=n[1];var i=ht(r.shape,o.shape);return q.runKernelFunc(function(a,s){var u=a.floorDiv(r,o);return s([r,o]),u},{a:r,b:o},function(a,s){var u=s[0],l=s[1];return{a:function(){var c=a.div(l.toFloat()),f=Sn(u.shape,i);return f.length>0?c.sum(f).reshape(u.shape):c},b:function(){var c=a.mul(u.toFloat()),f=Sn(l.shape,i);f.length>0&&(c=c.sum(f).reshape(l.shape));var d=l.square();return c.div(d.toFloat()).neg()}}},"FloorDiv")}}),Dy=H({maximum_:function(e,t){var n,r=O(e,"a","maximum"),o=O(t,"b","maximum");return n=Yt(r,o),r=n[0],o=n[1],r.dtype==="bool"&&(r=r.toInt(),o=o.toInt()),ht(r.shape,o.shape),q.runKernelFunc(function(i,a){var s=i.maximum(r,o);return a([r,o]),s},{a:r,b:o},function(i,a){var s=a[0],u=a[1];return{a:function(){return i.mul(s.greaterEqual(u).toFloat())},b:function(){return i.mul(s.less(u).toFloat())}}},"Maximum")}}),Ej=H({maximumStrict_:function(e,t){var n=O(e,"a","maximumStrict"),r=O(t,"b","maximumStrict");return Tt(n.shape,r.shape,"Error in maximumStrict: "),n.maximum(r)}}),x_=H({minimum_:function(e,t){var n,r=O(e,"a","minimum"),o=O(t,"b","minimum");return n=Yt(r,o),r=n[0],o=n[1],r.dtype==="bool"&&(r=r.toInt(),o=o.toInt()),ht(r.shape,o.shape),q.runKernelFunc(function(i,a){var s=i.minimum(r,o);return a([r,o]),s},{a:r,b:o},function(i,a){var s=a[0],u=a[1];return{a:function(){return i.mul(s.lessEqual(u).toFloat())},b:function(){return i.mul(s.greater(u).toFloat())}}},"Minimum")}}),Cj=H({minimumStrict_:function(e,t){var n=O(e,"a","minimumStrict"),r=O(t,"b","minimumStrict");return Tt(n.shape,r.shape,"Error in minimumStrict: "),n.minimum(r)}}),Sj=H({mod_:function(e,t){var n,r=O(e,"a","mod"),o=O(t,"b","mod");n=Yt(r,o),r=n[0],o=n[1];var i=ht(r.shape,o.shape);return q.runKernelFunc(function(a,s){var u=a.mod(r,o);return s([r,o]),u},{$a:r,$b:o},function(a,s){var u=s[0],l=s[1];return{$a:function(){var c=Sn(u.shape,i);return c.length>0?a.sum(c).reshape(u.shape):a},$b:function(){var c=a.mul(u.div(l).floor().neg()),f=Sn(l.shape,i);return f.length>0?c.sum(f).reshape(l.shape):c}}})}}),_j=H({modStrict_:function(e,t){var n=O(e,"a","modStrict"),r=O(t,"b","modStrict");return Tt(n.shape,r.shape,"Error in modStrict: "),n.mod(r)}}),Qn=H({mul_:function(e,t){var n,r=O(e,"a","mul"),o=O(t,"b","mul");n=Yt(r,o),r=n[0],o=n[1];var i=ht(r.shape,o.shape);return q.runKernelFunc(function(a,s){var u=a.multiply(r,o);return s([r,o]),u},{a:r,b:o},function(a,s){var u=s[0],l=s[1];return{a:function(){var c=a.mul(l.toFloat()),f=Sn(u.shape,i);return f.length>0?c.sum(f).reshape(u.shape):c},b:function(){var c=a.mul(u.toFloat()),f=Sn(l.shape,i);return f.length>0?c.sum(f).reshape(l.shape):c}}},"Mul")}}),kj=H({mulStrict_:function(e,t){var n=O(e,"a","mul"),r=O(t,"b","mul");return Tt(n.shape,r.shape,"Error in multiplyStrict: "),n.mul(r)}}),Id=H({pow_:function(e,t){var n,r=O(e,"base","pow"),o=O(t,"exp","pow");n=Yt(r,o),r=n[0],o=n[1];var i=ht(r.shape,o.shape),a=[r,o];return q.runKernelFunc(function(s,u){var l=s.pow(r,o);return u([r,o,l]),l},{a:r,b:o},function(s,u){var l=u[0],c=u[1],f=u[2];return{a:function(){var d=c.toFloat(),p=s.mul(d.mul(l.pow(d.sub(Ee(1))))),v=Sn(l.shape,i);return v.length>0&&(p=p.sum(v)),p.reshape(l.shape)},b:function(){var d=l.greater(0),p=l.log().where(d,Ct(l)),v=s.mul(f.mul(p)),x=Sn(c.shape,i);return x.length>0&&(v=v.sum(x)),v.reshape(c.shape)}}},"Pow",{},a,[!0])}}),Rj=H({powStrict_:function(e,t){return Tt(e.shape,t.shape,"Error in powStrict: "),e.pow(t)}}),Tj=H({squaredDifferenceStrict_:function(e,t){var n=O(e,"a","squaredDifferenceStrict"),r=O(t,"b","squaredDifferenceStrict");return Tt(n.shape,r.shape,"Error in squaredDifferenceStrict: "),n.squaredDifference(r)}}),_n=H({sub_:function(e,t){var n,r=O(e,"a","sub"),o=O(t,"b","sub");n=Yt(r,o),r=n[0],o=n[1];var i=ht(r.shape,o.shape);return q.runKernelFunc(function(a){return a.subtract(r,o)},{a:r,b:o},function(a){return{a:function(){var s=a,u=Sn(r.shape,i);return u.length>0&&(s=s.sum(u)),s.reshape(r.shape)},b:function(){var s=a,u=Sn(o.shape,i);return u.length>0&&(s=s.sum(u)),s.neg().reshape(o.shape)}}},"Sub")}}),Ij=H({subStrict_:function(e,t){var n=O(e,"a","subStrict"),r=O(t,"b","subStrict");return Tt(n.shape,r.shape,"Error in subStrict: "),n.sub(r)}}),w_=H({equal_:function(e,t){var n,r=O(e,"a","equal"),o=O(t,"b","equal");return n=Yt(r,o),r=n[0],o=n[1],ht(r.shape,o.shape),q.runKernelFunc(function(i){return i.equal(r,o)},{$a:r,$b:o})}}),Dj=H({equalStrict_:function(e,t){var n=O(e,"a","equalStrict"),r=O(t,"b","equalStrict");return Tt(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}}),Nj=H({greater_:function(e,t){var n,r=O(e,"a","greater"),o=O(t,"b","greater");return n=Yt(r,o),r=n[0],o=n[1],ht(r.shape,o.shape),q.runKernelFunc(function(i){return i.greater(r,o)},{a:r,b:o},null,"Greater")}}),b_=H({greaterEqual_:function(e,t){var n,r=O(e,"a","greaterEqual"),o=O(t,"b","greaterEqual");return n=Yt(r,o),r=n[0],o=n[1],ht(r.shape,o.shape),q.runKernelFunc(function(i,a){var s=i.greaterEqual(r,o);return a([r,o]),s},{a:r,b:o},function(i,a){var s=a[0],u=a[1];return{a:function(){return Ct(s)},b:function(){return Ct(u)}}},"GreaterEqual")}}),Aj=H({greaterEqualStrict_:function(e,t){var n=O(e,"a","greaterEqualStrict"),r=O(t,"b","greaterEqualStrict");return Tt(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}}),Pj=H({greaterStrict_:function(e,t){var n=O(e,"a","greaterStrict"),r=O(t,"b","greaterStrict");return Tt(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}}),Fj=H({less_:function(e,t){var n,r=O(e,"a","less"),o=O(t,"b","less");return n=Yt(r,o),r=n[0],o=n[1],ht(r.shape,o.shape),q.runKernelFunc(function(i){return i.less(r,o)},{a:r,b:o},null,"Less")}}),Oj=H({lessEqual_:function(e,t){var n,r=O(e,"a","lessEqual"),o=O(t,"b","lessEqual");return n=Yt(r,o),r=n[0],o=n[1],ht(r.shape,o.shape),q.runKernelFunc(function(i,a){var s=i.lessEqual(r,o);return a([r,o]),s},{a:r,b:o},null,"LessEqual")}}),Mj=H({lessEqualStrict_:function(e,t){var n=O(e,"a","lessEqualStrict"),r=O(t,"b","lessEqualStrict");return Tt(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}}),Lj=H({lessStrict_:function(e,t){var n=O(e,"a","lessStrict"),r=O(t,"b","lessStrict");return Tt(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}}),Bj=H({notEqual_:function(e,t){var n,r=O(e,"a","notEqual"),o=O(t,"b","notEqual");return n=Yt(r,o),r=n[0],o=n[1],ht(r.shape,o.shape),q.runKernelFunc(function(i){return i.notEqual(r,o)},{a:r,b:o},null,"NotEqual")}}),jj=H({notEqualStrict_:function(e,t){var n=O(e,"a","notEqualStrict"),r=O(t,"b","notEqualStrict");return Tt(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}});function Mw(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function Lw(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var Ny=H({gather_:function(e,t,n){n===void 0&&(n=0);var r=O(e,"x","gather"),o=O(t,"indices","gather","int32");n=kn(n,r.shape)[0];var i=function(a,s,u){for(var l=a.shape[u],c=[],f=1,d=1,p=0;p<u;p++)c.push(a.shape[p]),f*=a.shape[p];for(p=0;p<s.rank;p++)c.push(s.shape[p]);for(p=u+1;p<a.rank;p++)c.push(a.shape[p]),d*=a.shape[p];return{batchSize:f,sliceSize:d,dimSize:l,outputShape:c}}(r,o,n);return q.runKernelFunc(function(a,s){var u=a.gather(r,o.flatten(),n);return s([o]),u},{x:r,indices:o},function(a,s){var u=s[0];return{x:function(){var l=r.shape,c=u.size,f=l.slice(0,n),d=f.length,p=l.slice(n,l.length).slice(1),v=p.length,x=Mw(0,d),w=Mw(d+1,d+1+v),y=Lw([f,[c],p]),b=a.reshape(y),E=u.reshape([c]),S=Lw([[d],x,w]),R=b.transpose(S),k=E_(R,E,r.shape[n]),m=gy(S);return k=k.transpose(m)},indices:function(){return u}}},"Gather",{axis:n}).reshape(i.outputShape)}}),E_=H({unsortedSegmentSum_:function(e,t,n){var r=O(e,"x","unsortedSegmentSum"),o=O(t,"segmentIds","unsortedSegmentSum","int32");return M(rn(n),function(){return"numSegments must be of dtype int"}),q.runKernelFunc(function(i,a){var s=i.unsortedSegmentSum(r,o,n);return a([o]),s},{$x:r},function(i,a){var s=a[0];return{$x:function(){return function(u,l){for(var c=Dy(l,Ct(l)),f=Ny(u,c),d=b_(l,Ee(0,"int32")),p=f.rank-d.rank,v=0;v<p;++v)d=Vr(d,v+1);d=vh(d,Iu(f.shape,"bool"));var x=Ct(f);return ns(d,f,x)}(i,s)}}})}}),Wj=function(e,t,n){return Ie(this,void 0,void 0,function(){var r,o,i,a,s,u,l,c,f,d,p,v,x;return De(this,function(w){switch(w.label){case 0:for(r=O(e,"tensor","boolMask"),o=O(t,"mask","boolMask","bool"),i=n??0,a=o.rank,s=r.shape,M(a>0,function(){return"mask cannot be scalar"}),Tt(s.slice(i,i+a),o.shape,"mask's shape must match the first K dimensions of tensor's shape,"),u=1,l=i;l<i+a;l++)u*=s[l];return c=s.slice(0,i).concat([u],s.slice(i+a)),f=r.reshape(c),d=o.reshape([-1]),[4,g_(d)];case 1:return p=w.sent(),v=p.squeeze([1]),x=Ny(f,v,i),e!==r&&r.dispose(),t!==o&&o.dispose(),v.dispose(),f.dispose(),d.dispose(),p.dispose(),[2,x]}})})};function C_(e,t,n,r,o,i,a){i===void 0&&(i="NHWC"),M(e.length===t.rank,function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"});var s=e,u=t,l=!1;t.rank===3&&(l=!0,u=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]),s=[1,e[0],e[1],e[2]]),M(s.length===4,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+s.length+"."}),M(u.rank===4,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+u.rank}),M(n.rank===4,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank});var c=i==="NHWC"?s[3]:s[1],f=i==="NHWC"?u.shape[3]:u.shape[1];M(c===n.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+c+") must match input depth for filter "+n.shape[2]+"."}),M(f===n.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+f+") must match output depth for filter "+n.shape[3]+"."}),a!=null&&M(rn(o),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+o+"."});var d=Ey(i),p=us(s,n.shape,r,1,o,a,!1,d),v=q.runKernelFunc(function(x,w){var y=x.conv2dDerInput(u,n,p);return w([n,u]),y},{dy4D:u,filter:n},function(x,w){var y=w[0],b=w[1];return{dy4D:function(){return Zr(x,y,r,o,i,1,a)},filter:function(){return Ay(x,b,y.shape,r,o,i,a)}}});return l?v.as3D(v.shape[1],v.shape[2],v.shape[3]):v}function ov(e){var t=function(i){return typeof i=="number"?[i,i,i]:i.length===2?[i[0],i[1],1]:i}(e),n=t[0],r=t[1],o=t[2];return n===1&&r===1&&o===1}function S_(e,t,n,r,o){M(e.length===t.rank,function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"});var i=e,a=t,s=!1;t.rank===4&&(s=!0,a=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]),i=[1,e[0],e[1],e[2],e[3]]);var u=i[4],l=a.shape[4];M(i.length===5,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+i.length+"."}),M(a.rank===5,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+a.rank}),M(n.rank===5,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank}),M(u===n.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+u+") must match input depth for filter "+n.shape[3]+"."}),M(l===n.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+l+") must match output depth for filter "+n.shape[4]+"."});var c=kd(i,n.shape,r,1,o),f=q.runKernelFunc(function(d){return d.conv3dDerInput(a,n,c)},{dy5D:a});return s?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}var zj=H({conv1d_:function(e,t,n,r,o,i,a){o===void 0&&(o="NWC"),i===void 0&&(i=1);var s=O(e,"x","conv1d"),u=O(t,"filter","conv1d"),l=s,c=!1;s.rank===2&&(c=!0,l=s.as3D(1,s.shape[0],s.shape[1])),M(l.rank===3,function(){return"Error in conv1d: input must be rank 3, but got rank "+l.rank+"."}),M(u.rank===3,function(){return"Error in conv1d: filter must be rank 3, but got rank "+u.rank+"."}),a!=null&&M(rn(r),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."}),M(l.shape[2]===u.shape[1],function(){return"Error in conv1d: depth of input ("+l.shape[2]+") must match input depth for filter "+u.shape[1]+"."}),M(_r(n,i),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+n+" and dilation '"+i+"'"}),M(o==="NWC",function(){return"Error in conv1d: got dataFormat of "+o+" but only NWC is currently supported."});var f=u.as4D(1,u.shape[0],u.shape[1],u.shape[2]),d=l.as4D(l.shape[0],1,l.shape[1],l.shape[2]),p=Zr(d,f,[1,n],r,"NHWC",[1,i],a);return c?p.as2D(p.shape[2],p.shape[3]):p.as3D(p.shape[0],p.shape[2],p.shape[3])}}),Zr=H({conv2d_:function(e,t,n,r,o,i,a){o===void 0&&(o="NHWC"),i===void 0&&(i=[1,1]);var s=O(e,"x","conv2d"),u=O(t,"filter","conv2d"),l=s,c=!1;s.rank===3&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),M(l.rank===4,function(){return"Error in conv2d: input must be rank 4, but got rank "+l.rank+"."}),M(u.rank===4,function(){return"Error in conv2d: filter must be rank 4, but got rank "+u.rank+"."}),a!=null&&M(rn(r),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."});var f=o==="NHWC"?l.shape[3]:l.shape[1];M(f===u.shape[2],function(){return"Error in conv2d: depth of input ("+f+") must match input depth for filter "+u.shape[2]+"."}),M(_r(n,i),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"});var d=Ey(o),p=us(l.shape,u.shape,n,i,r,a,!1,d),v=[u,l],x=q.runKernelFunc(function(w,y){var b=w.conv2d(l,u,p);return y([u,l]),b},{x:l,filter:u},function(w,y){var b=y,E=b[0],S=b[1];return M(xu(i),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+i+"'"}),{x:function(){return __(S.shape,w,E,n,r,o)},filter:function(){return Ay(S,w,E.shape,n,r,o)}}},"Conv2D",p,v);return c?x.as3D(x.shape[1],x.shape[2],x.shape[3]):x}}),Uj=H({conv3d_:function(e,t,n,r,o,i){o===void 0&&(o="NDHWC"),i===void 0&&(i=[1,1,1]);var a=O(e,"x","conv3d"),s=O(t,"filter","conv3d"),u=a,l=!1;a.rank===4&&(l=!0,u=a.as5D(1,a.shape[0],a.shape[1],a.shape[2],a.shape[3])),M(u.rank===5,function(){return"Error in conv3d: input must be rank 5, but got rank "+u.rank+"."}),M(s.rank===5,function(){return"Error in conv3d: filter must be rank 5, but got rank "+s.rank+"."}),M(u.shape[4]===s.shape[3],function(){return"Error in conv3d: depth of input ("+u.shape[4]+") must match input depth for filter "+s.shape[3]+"."}),M(function(d,p){return ov(d)||ov(p)}(n,i),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"}),M(o==="NDHWC",function(){return"Error in conv3d: got dataFormat of "+o+" but only NDHWC is currently supported."});var c=kd(u.shape,s.shape,n,i,r),f=q.runKernelFunc(function(d,p){var v=d.conv3d(u,s,c);return p([u,s]),v},{x:u,$filter:s},function(d,p){M(ov(i),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+i+"'"});var v=p[0],x=p[1];return{x:function(){return S_(v.shape,d,x,n,r)},$filter:function(){return function(w,y,b,E,S){var R=w;w.rank===4&&(R=w.as5D(1,w.shape[0],w.shape[1],w.shape[2],w.shape[3]));var k=y;k.rank===4&&(k=y.as5D(1,y.shape[0],y.shape[1],y.shape[2],y.shape[3])),M(R.rank===5,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+R.shape+"."}),M(k.rank===5,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+k.shape+"."}),M(b.length===5,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+b+"."}),M(R.shape[4]===b[3],function(){return"Error in conv3dDerFilter: depth of input "+R.shape[4]+") must match input depth in filter ("+b[3]+"."}),M(k.shape[4]===b[4],function(){return"Error in conv3dDerFilter: depth of dy ("+k.shape[4]+") must match output depth for filter ("+b[4]+")."});var m=kd(R.shape,b,E,1,S);return q.runKernelFunc(function(P){return P.conv3dDerFilter(R,k,m)},{x5D:R,dy5D:k})}(v,d,x.shape,n,r)}}});return l?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),Ay=H({conv2dDerFilter_:function(e,t,n,r,o,i,a){i===void 0&&(i="NHWC");var s=e;e.rank===3&&(s=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var u=t;u.rank===3&&(u=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),M(s.rank===4,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+s.shape+"."}),M(u.rank===4,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+u.shape+"."}),M(n.length===4,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."});var l=i==="NHWC"?s.shape[3]:s.shape[1],c=i==="NHWC"?u.shape[3]:u.shape[1];M(l===n[2],function(){return"Error in conv2dDerFilter: depth of input "+l+") must match input depth in filter ("+n[2]+"."}),M(c===n[3],function(){return"Error in conv2dDerFilter: depth of dy ("+c+") must match output depth for filter ("+n[3]+")."}),a!=null&&M(rn(o),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+o+"."});var f=Ey(i),d=us(s.shape,n,r,1,o,a,!1,f);return q.runKernelFunc(function(p){return p.conv2dDerFilter(s,u,d)},{x4D:s,dy4D:u})}}),__=H({conv2dDerInput_:C_}),mh=H({depthwiseConv2d_:function(e,t,n,r,o,i,a){i===void 0&&(i=[1,1]);var s=O(e,"x","depthwiseConv2d"),u=O(t,"filter","depthwiseConv2d"),l=s,c=!1;s.rank===3&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),M(l.rank===4,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+l.rank+"."}),M(u.rank===4,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+u.rank+"."}),M(l.shape[3]===u.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+l.shape[3]+") must match the inChannels dimension in filter "+u.shape[2]+"."}),i==null&&(i=[1,1]),M(_r(n,i),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"}),a!=null&&M(rn(r),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."});var f=us(l.shape,u.shape,n,i,r,a,!0),d=[l,u],p=q.runKernelFunc(function(v,x){var w=v.depthwiseConv2D(l,u,f);return x([l,u]),w},{x:l,filter:u},function(v,x){M(xu(i),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+i+"'"});var w=x[0],y=x[1];return{x:function(){return k_(w.shape,v,y,f)},filter:function(){return R_(w,v,y.shape,f)}}},"DepthwiseConv2dNative",f,d);return c?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}}),k_=H({depthwiseConv2dDerInput_:function(e,t,n,r){var o=t,i=!1;t.rank===3&&(i=!0,o=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var a=q.runKernelFunc(function(s){return s.depthwiseConv2DDerInput(o,n,r)},{dy4D:o});return i?a.as3D(a.shape[1],a.shape[2],a.shape[3]):a}}),R_=H({depthwiseConv2dDerFilter_:function(e,t,n,r){var o=e;e.rank===3&&(o=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var i=t;return i.rank===3&&(i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),q.runKernelFunc(function(a){return a.depthwiseConv2DDerFilter(o,i,r)},{x4D:o,dy4D:i})}}),Py=H({separableConv2d_:function(e,t,n,r,o,i,a){i===void 0&&(i=[1,1]),a===void 0&&(a="NHWC");var s=O(e,"x","separableConv2d"),u=O(t,"depthwiseFilter","separableConv2d"),l=O(n,"pointwiseFilter","separableConv2d"),c=s,f=!1;if(s.rank===3&&(f=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),a==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");M(c.rank===4,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+c.rank+"."}),M(u.rank===4,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+u.rank+"."}),M(l.rank===4,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+u.rank+"."}),M(l.shape[0]===1,function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+l.shape[0]+"."}),M(l.shape[1]===1,function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+l.shape[1]+"."});var d=u.shape[2],p=u.shape[3];M(l.shape[2]===d*p,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+d*p+", but got "+l.shape[2]+"."});var v=mh(c,u,r,o,a,i),x=Zr(v,l,1,"valid",a);return f?x.as3D(x.shape[1],x.shape[2],x.shape[3]):x}}),$j=H({conv2dTranspose_:function(e,t,n,r,o,i){return C_(n,O(e,"x","conv2dTranspose"),O(t,"filter","conv2dTranspose"),r,o,"NHWC",i)}}),Hj=H({conv3dTranspose_:function(e,t,n,r,o){return S_(n,O(e,"x","conv3dTranspose"),O(t,"filter","conv3dTranspose"),r,o)}}),gh=H({matMul_:function(e,t,n,r){var o;n===void 0&&(n=!1),r===void 0&&(r=!1);var i=O(e,"a","matMul"),a=O(t,"b","matMul");o=Yt(i,a),i=o[0],a=o[1];var s=n?i.shape[i.rank-2]:i.shape[i.rank-1],u=r?a.shape[a.rank-1]:a.shape[a.rank-2],l=n?i.shape[i.rank-1]:i.shape[i.rank-2],c=r?a.shape[a.rank-2]:a.shape[a.rank-1],f=i.shape.slice(0,-2),d=a.shape.slice(0,-2),p=Fe(f),v=Fe(d);M(i.rank>=2&&a.rank>=2&&i.rank===a.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+i.rank+" and "+a.rank+"."}),M(Nn(f,d),function(){return"Error in matMul: outer dimensions ("+f+") and ("+d+") of Tensors with shapes "+i.shape+" and "+a.shape+" must match."}),M(s===u,function(){return"Error in matMul: inner shapes ("+s+") and ("+u+") of Tensors with shapes "+i.shape+" and "+a.shape+" and transposeA="+n+" and transposeB="+r+" must match."});var x=i.shape.slice(0,-2).concat([l,c]),w=n?i.as3D(p,s,l):i.as3D(p,l,s),y=r?a.as3D(v,c,u):a.as3D(v,u,c),b={transposeA:n,transposeB:r};return q.runKernelFunc(function(E,S){var R=E.batchMatMul(w,y,n,r);return S([w,y]),R},{a:w,b:y},function(E,S){var R=S,k=R[0],m=R[1];return n||r?!n&&r?{a:function(){return E.matMul(m,!1,!1)},b:function(){return E.matMul(k,!0,!1)}}:n&&!r?{a:function(){return m.matMul(E,!1,!0)},b:function(){return k.matMul(E,!1,!1)}}:{a:function(){return m.matMul(E,!0,!0)},b:function(){return E.matMul(k,!0,!0)}}:{a:function(){return E.matMul(m,!1,!0)},b:function(){return k.matMul(E,!0,!1)}}},"BatchMatMul",b).reshape(x)}}),Vj=H({dot_:function(e,t){var n=O(e,"t1","dot"),r=O(t,"t2","dot");M(!(n.rank!==1&&n.rank!==2||r.rank!==1&&r.rank!==2),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+r.rank+"."});var o=n.rank===1?n.size:n.shape[1],i=r.rank===1?r.size:r.shape[0];return M(o===i,function(){return"Error in dot: inner dimensions of inputs must match, but got "+o+" and "+i+"."}),n.rank===1&&r.rank===1?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():n.rank===1&&r.rank===2?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():n.rank===2&&r.rank===1?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))}}),Gj=H({outerProduct_:function(e,t){var n=O(e,"v1","outerProduct"),r=O(t,"v2","outerProduct");return M(n.rank===1&&r.rank===1,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+r.rank+"."}),n.as2D(-1,1).matMul(r.as2D(1,-1))}}),gc=H({reverse_:function(e,t){var n=O(e,"x","reverse");if(n.rank===0)return n.clone();var r=kn(t,n.shape);return q.runKernelFunc(function(o){return o.reverse(n,r)},{$x:n},function(o){return{$x:function(){return o.reverse(r)}}}).reshapeAs(n)}}),qj=H({reverse1d_:function(e){var t=O(e,"x","reverse");return M(t.rank===1,function(){return"Error in reverse1D: x must be rank 1 but got rank "+t.rank+"."}),gc(t,0)}}),Kj=H({reverse2d_:function(e,t){var n=O(e,"x","reverse");return M(n.rank===2,function(){return"Error in reverse2D: x must be rank 2 but got rank "+n.rank+"."}),gc(n,t)}}),Xj=H({reverse3d_:function(e,t){var n=O(e,"x","reverse");return M(n.rank===3,function(){return"Error in reverse3D: x must be rank 3 but got rank "+n.rank+"."}),gc(n,t)}}),Yj=H({reverse4d_:function(e,t){var n=O(e,"x","reverse");return M(n.rank===4,function(){return"Error in reverse4D: x must be rank 4 but got rank "+n.rank+"."}),gc(n,t)}});function T_(e,t,n,r,o,i){var a=O(e,"x","maxPool"),s=a,u=!1;a.rank===3&&(u=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),r==null&&(r=[1,1]),M(s.rank===4,function(){return"Error in maxPool: input must be rank 4 but got rank "+s.rank+"."}),M(_r(n,r),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"}),i!=null&&M(rn(o),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+o+"."});var l=ql(s.shape,t,n,r,o,i);if(l.filterWidth===1&&l.filterHeight===1&&Nn(l.inShape,l.outShape))return a.clone();var c=[s],f=q.runKernelFunc(function(d,p){var v=d.maxPool(s,l);return p([s,v]),v},{x:s},function(d,p){var v=p[0],x=p[1];return{x:function(){return function(w,y,b,E,S,R,k,m){var P=O(w,"dy","maxPoolBackprop"),D=O(y,"input","maxPoolBackprop"),N=O(b,"output","maxPoolBackprop");M(D.rank===P.rank,function(){return"Rank of input ("+D.rank+") does not match rank of dy ("+P.rank+")"}),R==null&&(R=[1,1]),M(_r(S,R),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+S+" and dilations '"+R+"'"}),M(P.rank===4,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+P.rank+"."}),M(D.rank===4,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+D.rank+"."}),m!=null&&M(rn(k),function(){return"Error in maxPoolBackprop: pad must be an integer when using, dimRoundingMode "+m+" but got pad "+k+"."});var B=ql(D.shape,E,S,R,k,m);return q.runKernelFunc(function(z){return z.maxPoolBackprop(P,D,N,B)},{$dy:P,$input:D})}(d,v,x,t,n,r,o)}}},"MaxPool",l,c);return u?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}function I_(e,t,n,r,o,i){var a=O(e,"x","avgPool","float32");r==null&&(r=[1,1]),M(_r(n,r),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"});var s=a,u=!1;a.rank===3&&(u=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),M(s.rank===4,function(){return"Error in avgPool: x must be rank 4 but got rank "+s.rank+"."}),i!=null&&M(rn(o),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+o+"."});var l=ql(s.shape,t,n,r,o,i);if(l.filterWidth===1&&l.filterHeight===1&&Nn(l.inShape,l.outShape))return a.clone();var c=q.runKernelFunc(function(f){return f.avgPool(s,l)},{x:s},function(f){return{x:function(){return function(d,p,v,x,w,y){var b=O(d,"dy","avgPoolBackprop"),E=O(p,"input","avgPoolBackprop");M(E.rank===b.rank,function(){return"Rank of input ("+E.rank+") does not match rank of dy ("+b.rank+")"}),w==null&&(w=[1,1]),M(_r(x,w),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+x+" and dilations '"+w+"'"});var S=E,R=b,k=!1;E.rank===3&&(k=!0,S=E.as4D(1,E.shape[0],E.shape[1],E.shape[2]),R=b.as4D(1,b.shape[0],b.shape[1],b.shape[2])),M(R.rank===4,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+R.rank+"."}),M(S.rank===4,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+S.rank+"."});var m=ql(S.shape,v,x,w,y),P=q.runKernelFunc(function(D){return D.avgPoolBackprop(R,S,m)},{dy4D:R,input4D:S});return k?P.as3D(P.shape[1],P.shape[2],P.shape[3]):P}(f,s,t,n,r,o)}}},"AvgPool",l);return c=c.cast(a.dtype),u?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}var Rn=H({maxPool_:function(e,t,n,r,o){return T_(e,t,n,1,r,o)}}),yc=H({avgPool_:function(e,t,n,r,o){return I_(e,t,n,1,r,o)}}),Qj=H({pool_:function(e,t,n,r,o,i){o==null&&(o=[1,1]),i==null&&(i=1),r===0&&(r="valid");var a=O(e,"x","maxPool"),s=a,u=!1;a.rank===3&&(u=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),M(_r(i,o),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+i+" and dilations '"+o+"'"});var l,c=ql(s.shape,t,i,o,r),f=[c.dilationHeight,c.dilationWidth];l=r==="same"?function(S,R){var k=S.map(function(D,N){return D+(D-1)*(R[N]-1)}).map(function(D){return D-1}),m=k.map(function(D){return Math.floor(D/2)}),P=k.map(function(D,N){return D-m[N]});return k.map(function(D,N){return[m[N],P[N]]})}([c.filterHeight,c.filterWidth],f):[[0,0],[0,0]];var d=f[0]===1&&f[1]===1,p=function(S,R,k){var m=k.map(function(Z){return Z[0]}),P=k.map(function(Z){return Z[1]}),D=S.concat(m,P),N=R.map(function(Z,K){return(Z-D[K]%Z)%Z}),B=P.map(function(Z,K){return Z+N[K]}),z=R.map(function(Z,K){return[m[K],B[K]]}),V=R.map(function(Z,K){return[0,N[K]]});return[z,V]}([c.inHeight,c.inWidth],f,l),v=p[0],x=p[1],w=d?r:"valid",y=d?s:OS(s,f,v),b=(n==="avg"?function(){return I_(y,t,i,1,w)}:function(){return T_(y,t,i,1,w)})(),E=d?b:AS(b,f,x);return u?E.as3D(E.shape[1],E.shape[2],E.shape[3]):E}}),Jj=H({maxPool3d_:function(e,t,n,r,o,i,a){i===void 0&&(i="NDHWC");var s=O(e,"x","maxPool3d"),u=s,l=!1;s.rank===4&&(l=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),a==null&&(a=[1,1,1]),M(u.rank===5,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+u.rank+"."}),M(i==="NDHWC",function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+i}),M(_r(n,a),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"}),o!=null&&M(rn(r),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."});var c=_d(u.shape,t,n,a,r,o,i),f=q.runKernelFunc(function(d,p){var v=d.maxPool3d(u,c);return p([u,v]),v},{x:u},function(d,p){var v=p[0],x=p[1];return{x:function(){return function(w,y,b,E,S,R,k,m){var P=O(w,"dy","maxPool3dBackprop"),D=O(y,"input","maxPool3dBackprop"),N=O(b,"output","maxPool3dBackprop"),B=P,z=D,V=N,Z=!1;D.rank===4&&(Z=!0,B=P.as5D(1,P.shape[0],P.shape[1],P.shape[2],P.shape[3]),z=D.as5D(1,D.shape[0],D.shape[1],D.shape[2],D.shape[3]),V=N.as5D(1,N.shape[0],N.shape[1],N.shape[2],N.shape[3])),M(B.rank===5,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+B.rank+"."}),M(z.rank===5,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+z.rank+"."}),M(V.rank===5,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+V.rank+"."}),R==null&&(R=[1,1,1]),M(_r(S,R),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+S+" and dilations '"+R+"'"}),m!=null&&M(rn(k),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+m+" but got pad "+k+"."});var K=_d(z.shape,E,S,R,k,m),ne=q.runKernelFunc(function(J){return J.maxPool3dBackprop(B,z,V,K)},{dy5D:B,input5D:z});return Z?ne.as4D(ne.shape[1],ne.shape[2],ne.shape[3],ne.shape[4]):ne}(d,v,x,t,n,a,r,o)}}});return l?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),Zj=H({avgPool3d_:function(e,t,n,r,o,i,a){i===void 0&&(i="NDHWC");var s=O(e,"x","avgPool3d","float32"),u=s,l=!1;s.rank===4&&(l=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),a==null&&(a=[1,1,1]),M(u.rank===5,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+u.rank+"."}),M(i==="NDHWC",function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+i}),M(_r(n,a),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"}),o!=null&&M(rn(r),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."});var c=_d(u.shape,t,n,a,r,o,i),f=q.runKernelFunc(function(d){return d.avgPool3d(u,c)},{x:u},function(d){return{x:function(){return function(p,v,x,w,y,b,E){var S=O(p,"dy","avgPool3dBackprop"),R=O(v,"input","avgPool3dBackprop"),k=S,m=R,P=!1;R.rank===4&&(P=!0,k=S.as5D(1,S.shape[0],S.shape[1],S.shape[2],S.shape[3]),m=R.as5D(1,R.shape[0],R.shape[1],R.shape[2],R.shape[3])),M(k.rank===5,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+k.rank+"."}),M(m.rank===5,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+m.rank+"."}),y==null&&(y=[1,1,1]),M(_r(w,y),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+w+" and dilations '"+y+"'"}),E!=null&&M(rn(b),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+E+" but got pad "+b+"."});var D=_d(m.shape,x,w,y,b,E),N=q.runKernelFunc(function(B){return B.avgPool3dBackprop(k,m,D)},{dy5D:k,input5D:m});return P?N.as4D(N.shape[1],N.shape[2],N.shape[3],N.shape[4]):N}(d,u,t,n,a,r,o)}}});return f=f.cast(u.dtype),l?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),Ho=H({slice_:function(e,t,n){var r,o,i=O(e,"x","slice");if(i.rank===0)throw new Error("Slicing scalar is not possible");(r=typeof t=="number"?[t].concat(new Array(i.rank-1).fill(0)):t.length<i.rank?t.concat(new Array(i.rank-t.length).fill(0)):t.slice()).forEach(function(u){M(u!==-1,function(){return"slice() does not support negative begin indexing."})}),o=(o=n==null?new Array(i.rank).fill(-1):typeof n=="number"?[n].concat(new Array(i.rank-1).fill(-1)):n.length<i.rank?n.concat(new Array(i.rank-n.length).fill(-1)):n).map(function(u,l){return u>=0?u:(M(u===-1,function(){return"Negative size values should be exactly -1 but got "+u+" for the slice() size at index "+l+"."}),i.shape[l]-r[l])}),R4(i,r,o);var a=i.shape,s={begin:r,size:o};return q.runKernelFunc(function(u){return u.slice(i,r,o)},{x:i},function(u){for(var l=[],c=0;c<u.rank;c++)l.push([r[c],a[c]-r[c]-o[c]]);return{x:function(){return u.pad(l)}}},"Slice",s)}}),eW=H({slice1d_:function(e,t,n){var r=O(e,"x","slice1d");return M(r.rank===1,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"}),Ho(r,[t],[n])}}),tW=H({slice2d_:function(e,t,n){var r=O(e,"x","slice2d");return M(r.rank===2,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"}),Ho(r,t,n)}}),D_=H({slice3d_:function(e,t,n){var r=O(e,"x","slice3d");return M(r.rank===3,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"}),Ho(r,t,n)}}),nW=H({slice4d_:function(e,t,n){var r=O(e,"x","slice4d");return M(r.rank===4,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"}),Ho(r,t,n)}});function N_(e,t,n,r,o){return t.rank<n.rank&&(t=t.reshape(Sr(t.shape,r))),e.rank<n.rank&&(e=e.reshape(Sr(e.shape,r))),{x:function(){var i=e.mul(n.equal(t).cast(e.dtype));return o==null?i:i.transpose(o)}}}var rW=H({all_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=O(e,"x","all","bool"),o=kn(t,r.shape),i=o,a=Ko(i,r.rank);a!=null&&(r=r.transpose(a),i=Xo(i.length,r.rank));var s=q.runKernelFunc(function(l){return l.all(r,i)},{$x:r});if(n){var u=Sr(s.shape,o);return s.reshape(u)}return s}}),oW=H({any_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=O(e,"x","any","bool"),o=kn(t,r.shape),i=o,a=Ko(i,r.rank);a!=null&&(r=r.transpose(a),i=Xo(i.length,r.rank));var s=q.runKernelFunc(function(l){return l.any(r,i)},{$x:r});if(n){var u=Sr(s.shape,o);return s.reshape(u)}return s}}),iW=H({argMax_:function(e,t){t===void 0&&(t=0);var n=O(e,"x","argMax");t==null&&(t=0);var r=kn(t,n.shape),o=Ko(r,n.rank);o!=null&&(n=n.transpose(o),r=Xo(r.length,n.rank));var i={axis:r[0]},a=[n];return q.runKernelFunc(function(s,u){var l=s.argMax(n,r[0]);return u([n]),l},{x:n},function(s,u){var l=u[0];return{x:function(){return Ct(l)}}},"ArgMax",i,a)}}),aW=H({argMin_:function(e,t){t===void 0&&(t=0);var n=O(e,"x","argMin");t==null&&(t=0);var r=kn(t,n.shape),o=Ko(r,n.rank);return o!=null&&(n=n.transpose(o),r=Xo(r.length,n.rank)),q.runKernelFunc(function(i,a){var s=i.argMin(n,r[0]);return a([n]),s},{$x:n},function(i,a){var s=a[0];return{$x:function(){return Ct(s)}}})}}),sW=H({logSumExp_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=O(e,"x","logSumExp"),o=kn(t,r.shape),i=r.max(o,!0),a=r.sub(i).exp().sum(o).log(),s=i.reshape(a.shape).add(a);if(n){var u=Sr(s.shape,o);return s.reshape(u)}return s}}),yh=H({max_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=O(e,"x","max"),o=r,i=kn(t,r.shape),a=i,s=Ko(a,r.rank);s!=null&&(r=r.transpose(s),a=Xo(a.length,r.rank));var u=[r],l=q.runKernelFunc(function(f,d){var p=f.max(r,a);return d([o,p]),p},{x:r},function(f,d){return N_(f,d[1],d[0],i,s)},"Max",{axes:a},u,[!0]);if(n){var c=Sr(l.shape,i);l=l.reshape(c)}return l}}),uW=H({mean_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=O(e,"x","mean"),o=kn(t,r.shape),i=Fe(Gn(r.shape,o)[1]);return hh(function(a){var s=Ee(i);return{value:(s.dtype===a.dtype?a:a.cast(s.dtype)).div(s).sum(t,n),gradFunc:function(u){var l=a.shape.slice();return o.forEach(function(c){l[c]=1}),u.reshape(l).mul(Iu(a.shape,"float32")).div(i)}}})(r)}}),lW=H({min_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=O(e,"x","min"),o=r,i=kn(t,r.shape),a=i,s=Ko(a,r.rank);s!=null&&(r=r.transpose(s),a=Xo(a.length,r.rank));var u=[r],l=q.runKernelFunc(function(f,d){var p=f.min(r,a);return d([o,p]),p},{x:r},function(f,d){return N_(f,d[1],d[0],i,s)},"Min",{axes:a},u,[!0]);if(n){var c=Sr(l.shape,i);l=l.reshape(c)}return l}}),cW=H({moments_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=kn(t,(e=O(e,"x","moments")).shape),o=e.mean(r,n),i=o.shape;n||(i=Sr(o.shape,r));var a=e.toFloat().sub(o.reshape(i)).square();return{mean:o,variance:a.mean(r,n)}}}),A_=H({sum_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=O(e,"x","sum");r.dtype==="bool"&&(r=r.toInt());var o=kn(t,r.shape);return hh(function(i){var a=Ko(o,i.rank),s=o,u=i;a!=null&&(u=i.transpose(a),s=Xo(s.length,i.rank));var l=function(p){var v=i.shape.slice();return o.forEach(function(x){v[x]=1}),p.reshape(v).mul(Iu(i.shape,"float32"))},c={axes:s},f=q.runKernelFunc(function(p){return p.sum(u,s)},{x:u},function(p){return{x:function(){return l(p)}}},"Sum",c);if(n){var d=Sr(f.shape,o);f=f.reshape(d)}return{value:f,gradFunc:l}})(r)}}),fW=H({prod_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=O(e,"x","prod");r.dtype==="bool"&&(r=r.toInt());var o=kn(t,r.shape),i=Ko(o,r.rank),a=o,s=r;i!=null&&(s=r.transpose(i),a=Xo(a.length,r.rank));var u=q.runKernelFunc(function(c){return c.prod(s,a)},{permutedX:s});if(n){var l=Sr(u.shape,o);u=u.reshape(l)}return u}}),P_=H({elu_:function(e){var t=O(e,"x","elu");return q.runKernelFunc(function(n,r){var o=n.elu(t);return r([o]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return q.runKernelFunc(function(i){return i.eluDer(n,o)},{dy:n,y:o})}}})}}),dW=H({leakyRelu_:function(e,t){t===void 0&&(t=.2);var n=O(e,"x","leakyRelu");return Dy(Ee(t).mul(n),n)}}),F_=H({prelu_:function(e,t){var n=O(e,"x","prelu"),r=O(t,"alpha","prelu");return q.runKernelFunc(function(o,i){var a=o.prelu(n,r);return i([n,r]),a},{x:n,alpha:r},function(o,i){var a=i[0],s=i[1],u=a.greater(0);return{x:function(){return ns(u,o,o.mul(s))},alpha:function(){var l=ns(u,Ct(o),o.mul(a)),c=Sn(s.shape,o.shape);return c.length>0&&(l=l.sum(c)),l.reshape(s.shape)}}},"Prelu")}}),qt=H({relu_:function(e){var t=O(e,"x","relu");return t.dtype==="bool"?t.toInt():q.runKernelFunc(function(n,r){var o=n.relu(t);return r([t]),o},{x:t},function(n,r){var o=r[0];return{x:function(){return n.mulStrict(o.step().toFloat())}}},"Relu")}}),O_=H({relu6_:function(e){var t=O(e,"x","relu6");return t.dtype==="bool"?t.toInt():q.runKernelFunc(function(n,r){var o=n.relu6(t);return r([t]),o},{x:t},function(n,r){var o=r[0],i=o.lessEqual(6).mul(o.step());return{x:function(){return n.mulStrict(i.toFloat())}}},"Relu6")}}),hW=H({selu_:function(e){var t=O(e,"x","selu");return q.runKernelFunc(function(n,r){var o=n.selu(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){var i=o.greater(Ee(0)),a=Ee(Ry),s=Ee(Ty),u=n.mul(s),l=n.mul(a).mul(o.toFloat().exp());return ns(i,u,l)}}})}}),la=H({transpose_:function(e,t){var n=O(e,"x","transpose");if(t==null&&(t=n.shape.map(function(o,i){return i}).reverse()),M(n.rank===t.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of perm "+t+"."}),t.forEach(function(o){M(o>=0&&o<n.rank,function(){return"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+t})}),n.rank<=1)return n.clone();var r={perm:t};return q.runKernelFunc(function(o){return o.transpose(n,t)},{x:n},function(o){var i=gy(t);return{x:function(){return o.transpose(i)}}},"Transpose",r)}}),pW=H({localResponseNormalization_:function(e,t,n,r,o){t===void 0&&(t=5),n===void 0&&(n=1),r===void 0&&(r=1),o===void 0&&(o=.5);var i=O(e,"x","localResponseNormalization");M(i.rank===4||i.rank===3,function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+i.rank+"."}),M(rn(t),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+t+"."});var a=i,s=!1;i.rank===3&&(s=!0,a=i.as4D(1,i.shape[0],i.shape[1],i.shape[2]));var u=q.runKernelFunc(function(l,c){var f=l.localResponseNormalization4D(a,t,n,r,o);return c([a,f]),f},{x4D:a},function(l,c){var f=c[0],d=c[1];return{x4D:function(){return q.runKernelFunc(function(p){return p.LRNGrad(l,f,d,t,n,r,o)},{})}}});return s?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),M_=H({norm_:function(e,t,n,r){t===void 0&&(t="euclidean"),n===void 0&&(n=null),r===void 0&&(r=!1);var o=function s(u,l,c){if(c===void 0&&(c=null),u.rank===0)return u.abs();if(u.rank!==1&&c===null)return s(u.reshape([-1]),l,c);if(u.rank===1||typeof c=="number"||Array.isArray(c)&&c.length===1){if(l===1)return u.abs().sum(c);if(l===1/0)return u.abs().max(c);if(l===-1/0)return u.abs().min(c);if(l==="euclidean"||l===2)return u.abs().pow(Ee(2,"int32")).sum(c).sqrt();throw new Error("Error in norm: invalid ord value: "+l)}if(Array.isArray(c)&&c.length===2){if(l===1)return u.abs().sum(c[0]).max(c[1]-1);if(l===1/0)return u.abs().sum(c[1]).max(c[0]);if(l===-1/0)return u.abs().sum(c[1]).min(c[0]);if(l==="fro"||l==="euclidean")return u.square().sum(c).sqrt();throw new Error("Error in norm: invalid ord value: "+l)}throw new Error("Error in norm: invalid axis: "+c)}(e=O(e,"x","norm"),t,n),i=o.shape;if(r){var a=kn(n,e.shape);i=Sr(o.shape,a)}return o.reshape(i)}}),vW=H({basicLSTMCell_:function(e,t,n,r,o,i){var a=O(e,"forgetBias","basicLSTMCell"),s=O(t,"lstmKernel","basicLSTMCell"),u=O(n,"lstmBias","basicLSTMCell"),l=O(r,"data","basicLSTMCell"),c=O(o,"c","basicLSTMCell"),f=O(i,"h","basicLSTMCell"),d=l.concat(f,1).matMul(s).add(u),p=d.shape[0],v=d.shape[1]/4,x=[p,v],w=d.slice([0,0],x),y=d.slice([0,v],x),b=d.slice([0,2*v],x),E=d.slice([0,3*v],x),S=w.sigmoid().mulStrict(y.tanh()).addStrict(c.mulStrict(a.add(b).sigmoid())),R=S.tanh().mulStrict(E.sigmoid());return[S,R]}}),mW=H({multiRNNCell_:function(e,t,n,r){for(var o=O(t,"data","multiRNNCell"),i=xd(n,"c","multiRNNCell"),a=xd(r,"h","multiRNNCell"),s=o,u=[],l=0;l<e.length;l++){var c=e[l](s,i[l],a[l]);u.push(c[0]),u.push(c[1]),s=c[1]}var f=[],d=[];for(l=0;l<u.length;l+=2)f.push(u[l]),d.push(u[l+1]);return[f,d]}}),gW=H({movingAverage_:function(e,t,n,r,o){o===void 0&&(o=!0);var i=O(e,"v","movingAverage"),a=O(t,"x","movingAverage"),s=O(n,"decay","movingAverage");pM(i,a),M(Nn(i.shape,a.shape),function(){return"Shape mismatch in v and x"});var u=Ee(1),l=u.sub(s),c=a.sub(i).mul(l);if(o){M(r!=null,function(){return"When using zeroDebias: true, step is required."});var f=O(r,"step","movingAverage");c=c.div(u.sub(Id(s,f)))}return i.add(c)}}),yW=H({stridedSlice_:function(e,t,n,r,o,i,a,s,u){if(o===void 0&&(o=0),i===void 0&&(i=0),a===void 0&&(a=0),s===void 0&&(s=0),u===void 0&&(u=0),r==null&&(r=new Array(t.length)),a!==0)throw new Error("ellipsis mask is not yet supported");var l=O(e,"x","stridedSlice"),c=mw(s),f=l.shape.slice();c.forEach(function(w){t[w]=0,n[w]=1,f.splice(w,0,1)}),l=l.reshape(f);for(var d=0;d<l.rank;d++)t[d]=T4(o,t,r,l.shape,d),n[d]=I4(i,n,r,l.shape,d),r[d]=r[d]||1;var p=mw(u);p.forEach(function(w){n[w]=t[w]+1,r[w]=1});var v=by(t,n,r),x=v.filter(function(w,y){return p.indexOf(y)===-1});return r.every(function(w){return w===1})?Ho(l,t,v).reshape(x):q.runKernelFunc(function(w){return w.stridedSlice(l,t,n,r)},{$x:l}).reshape(x)}}),xW=H({topk_:function(e,t,n){t===void 0&&(t=1),n===void 0&&(n=!0);var r=O(e,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var o=r.shape[r.shape.length-1];if(t>o)throw new Error("'k' passed to topk() must be <= the last dimension ("+o+") but got "+t);var i=q.runKernelFunc(function(a){return a.topk(r,t,n)},{$x:r});return{values:i[0],indices:i[1]}}}),wW=H({scatterND_:function(e,t,n){var r=O(e,"indices","scatterND","int32"),o=O(t,"updates","scatterND");return k4(o,r,n),q.runKernelFunc(function(i){return i.scatterND(r,o,n)},{indices:r,updates:o},null,"ScatterNd",{shape:n})}}),Fy=H({fft_:function(e){M(e.dtype==="complex64",function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+e.dtype+"."});var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return q.runKernelFunc(function(o){return o.fft(r)},{input:e}).reshape(e.shape)}}),Dd=H({ifft_:function(e){M(e.dtype==="complex64",function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+e.dtype+"."});var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return q.runKernelFunc(function(o){return o.ifft(r)},{input:e}).reshape(e.shape)}}),Oy=H({rfft_:function(e,t){M(e.dtype==="float32",function(){return"The dtype for rfft() must be real value but got "+e.dtype});var n,r=e.shape[e.shape.length-1],o=e.size/r;if(t!=null&&t<r){var i=e.shape.map(function(y){return 0}),a=e.shape.map(function(y){return y});a[e.shape.length-1]=t,n=e.slice(i,a),r=t}else if(t!=null&&t>r){var s=e.shape.map(function(y){return y});s[e.shape.length-1]=t-r,n=e.concat(Wt(s),e.shape.length-1),r=t}else n=e;var u=n.zerosLike(),l=Bn(n,u).as2D(o,r),c=Fy(l),f=Math.floor(r/2)+1,d=Gr(c),p=Mo(c),v=d.split([f,r-f],d.shape.length-1),x=p.split([f,r-f],p.shape.length-1),w=n.shape.slice();return w[n.shape.length-1]=f,Bn(v[0],x[0]).reshape(w)}}),L_=H({irfft_:function(e){var t=e.shape[e.shape.length-1],n=e.size/t;if(t<=2){var r=e.as2D(n,t),o=Dd(r);return Gr(o)}var i=[n,2*(t-1)],a=Gr(e).as2D(n,t),s=Mo(e).as2D(n,t),u=a.slice([0,1],[n,t-2]).reverse(1),l=s.slice([0,1],[n,t-2]).reverse(1).mul(Ee(-1)),c=a.concat(u,1),f=s.concat(l,1);return r=Bn(c,f).as2D(i[0],i[1]),o=Dd(r),Gr(o)}}),bW=Object.freeze({fft:Fy,ifft:Dd,rfft:Oy,irfft:L_}),EW=H({sparseToDense_:function(e,t,n,r){r===void 0&&(r=0);var o=O(e,"sparseIndices","sparseToDense","int32"),i=O(t,"sparseValues","sparseToDense"),a=O(r,"defaultValue","sparseToDense",i.dtype);return function(s,u,l,c){if(s.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+s.dtype+".");if(s.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+s.shape+".");var f=s.rank>0?s.shape[0]:1,d=s.rank>1?s.shape[1]:1;if(l.length!==d)throw new Error("outputShape has incorrect number of elements:, "+l.length+", should be: "+d+".");var p=u.size;if(u.rank!==0&&(u.rank!==1||p!==f))throw new Error("sparseValues has incorrect shape "+u.shape+", should be [] or ["+f+"]");if(u.dtype!==c.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(o,i,n,a),q.runKernelFunc(function(s){return s.sparseToDense(o,i,n,a)},{$sparseIndices:o,$sparseValues:i,$defaultValue:a})}}),CW=H({gatherND_:function(e,t){var n=O(t,"indices","gatherND","int32"),r=O(e,"x","gatherND");return q.runKernelFunc(function(o){return o.gatherND(r,n)},{x:r,indices:n},null,"GatherNd")}}),SW=H({diag_:function(e){var t=O(e,"x","diag").flatten(),n=e.shape.concat(e.shape);return q.runKernelFunc(function(r){return r.diag(t)},{$x:t}).reshape(n)}}),_W=H({dropout_:function(e,t,n,r){var o=O(e,"x","dropout");if(M(o.dtype==="float32",function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+o.dtype+" tensor instead."}),M(t>=0&&t<1,function(){return"rate must be a float in the range [0, 1), but got "+t+"."}),t===0)return e instanceof Gt?o.clone():o;var i=function(u,l){if(l==null)return u.shape.slice();if(Nn(u.shape,l))return l;if(u.shape.length===l.length){for(var c=[],f=0;f<u.shape.length;f++)l[f]==null&&u.shape[f]!=null?c.push(u.shape[f]):c.push(l[f]);return c}return l}(o,n),a=1-t,s=FS(i,0,1,"float32",r).add(a).floor().div(a);return o.mul(s)}});function B_(e,t,n){for(var r=1-e%2,o=new Float32Array(e),i=0;i<e;++i){var a=2*Math.PI*i/(e+r-1);o[i]=t-n*Math.cos(a)}return hn(o,"float32")}var My=H({hannWindow_:function(e){return B_(e,.5,.5)}}),j_=H({hammingWindow_:function(e){return B_(e,.54,.46)}}),Ly=H({frame_:function(e,t,n,r,o){r===void 0&&(r=!1),o===void 0&&(o=0);for(var i=0,a=[];i+t<=e.size;)a.push(Ho(e,i,t)),i+=n;if(r)for(;i<e.size;){var s=i+t-e.size,u=bn([Ho(e,i,t-s),$o([s],o)]);a.push(u),i+=n}return a.length===0?oa([],[0,t]):bn(a).as2D(a.length,t)}}),W_=H({stft_:function(e,t,n,r,o){var i;o===void 0&&(o=My),r==null&&(i=t,r=Math.floor(Math.pow(2,Math.ceil(Math.log(i)/Math.log(2)))));for(var a=Ly(e,t,n),s=Qn(a,o(t)),u=[],l=0;l<a.shape[0];l++)u.push(Oy(s.slice([l,0],[1,t]),r));return bn(u)}}),kW=Object.freeze({hannWindow:My,hammingWindow:j_,frame:Ly,stft:W_}),Yn,RW=function(e,t,n){return n===void 0&&(n=1),Ie(this,void 0,void 0,function(){var r,o,i,a,s,u,l,c,f,d,p,v,x,w;return De(this,function(y){switch(y.label){case 0:return r=O(e,"predictions","inTopK"),o=O(t,"targets","inTopK"),M(r.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank}),M(r.rank-1===o.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+o.rank}),Tt(r.shape.slice(0,r.shape.length-1),o.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),i=r.shape[r.shape.length-1],M(n>0&&n<=i,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+i+"), but got "+n}),[4,r.data()];case 1:return a=y.sent(),[4,o.data()];case 2:for(s=y.sent(),u=[a.length/i,i],c=u[1],f=Hl("bool",l=u[0]),d=0;d<l;d++){for(p=d*c,v=a.subarray(p,p+c),x=[],w=0;w<v.length;w++)x.push({value:v[w],index:w});for(x.sort(function(b,E){return E.value-b.value}),f[d]=0,w=0;w<n;w++)if(x[w].index===s[d]){f[d]=1;break}}return e!==r&&r.dispose(),t!==o&&o.dispose(),[2,Wn(f,o.shape,"bool")]}})})};(function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Yn||(Yn={}));var TW=H({absoluteDifference_:function(e,t,n,r){r===void 0&&(r=Yn.SUM_BY_NONZERO_WEIGHTS);var o=O(e,"labels","absoluteDifference"),i=O(t,"predictions","absoluteDifference"),a=null;n!=null&&(a=O(n,"weights","absoluteDifference")),Tt(o.shape,i.shape,"Error in absoluteDifference: ");var s=o.sub(i).abs();return Ei(s,a,r)}}),Ei=H({computeWeightedLoss_:function(e,t,n){n===void 0&&(n=Yn.SUM_BY_NONZERO_WEIGHTS);var r=O(e,"losses","computeWeightedLoss"),o=null;t!=null&&(o=O(t,"weights","computeWeightedLoss"));var i=o==null?r:r.mul(o);if(n===Yn.NONE)return i;if(n===Yn.SUM)return i.sum();if(n===Yn.MEAN){if(o==null)return i.mean();var a=r.size/o.size,s=i.sum().div(o.sum());return a>1?s.div(Ee(a)):s}if(n===Yn.SUM_BY_NONZERO_WEIGHTS){if(o==null)return i.sum().div(Ee(r.size));var u=o.mul(Iu(r.shape)).notEqual(Ee(0)).sum().toFloat();return i.sum().div(u)}throw Error("Unknown reduction: "+n)}}),IW=H({cosineDistance_:function(e,t,n,r,o){o===void 0&&(o=Yn.SUM_BY_NONZERO_WEIGHTS);var i=O(e,"labels","cosineDistance"),a=O(t,"predictions","cosineDistance"),s=null;r!=null&&(s=O(r,"weights","cosineDistance")),Tt(i.shape,a.shape,"Error in cosineDistance: ");var u=Ee(1).sub(i.mul(a).sum(n,!0));return Ei(u,s,o)}}),DW=H({hingeLoss_:function(e,t,n,r){r===void 0&&(r=Yn.SUM_BY_NONZERO_WEIGHTS);var o=O(e,"labels","hingeLoss"),i=O(t,"predictions","hingeLoss"),a=null;n!=null&&(a=O(n,"weights","hingeLoss")),Tt(o.shape,i.shape,"Error in hingeLoss: ");var s=Ee(1);o=Ee(2).mul(o).sub(s);var u=s.sub(o.mul(i)).relu();return Ei(u,a,r)}}),NW=H({huberLoss_:function(e,t,n,r,o){r===void 0&&(r=1),o===void 0&&(o=Yn.SUM_BY_NONZERO_WEIGHTS);var i=O(e,"labels","huberLoss"),a=O(t,"predictions","huberLoss"),s=null;n!=null&&(s=O(n,"weights","huberLoss")),Tt(i.shape,a.shape,"Error in huberLoss: ");var u=Ee(r),l=a.sub(i).abs(),c=x_(l,u),f=l.sub(c),d=Ee(.5).mul(c.square()).add(u.mul(f));return Ei(d,s,o)}}),AW=H({logLoss_:function(e,t,n,r,o){r===void 0&&(r=1e-7),o===void 0&&(o=Yn.SUM_BY_NONZERO_WEIGHTS);var i=O(e,"labels","logLoss"),a=O(t,"predictions","logLoss"),s=null;n!=null&&(s=O(n,"weights","logLoss")),Tt(i.shape,a.shape,"Error in logLoss: ");var u=Ee(1),l=Ee(r),c=i.mul(a.add(l).log()).neg().sub(u.sub(i).mul(u.sub(a).add(l).log()));return Ei(c,s,o)}}),PW=H({meanSquaredError_:function(e,t,n,r){r===void 0&&(r=Yn.SUM_BY_NONZERO_WEIGHTS);var o=O(e,"labels","meanSquaredError"),i=O(t,"predictions","meanSquaredError"),a=null;n!=null&&(a=O(n,"weights","meanSquaredError")),Tt(o.shape,i.shape,"Error in meanSquaredError: ");var s=o.squaredDifference(i);return Ei(s,a,r)}}),FW=H({sigmoidCrossEntropy_:function(e,t,n,r,o){r===void 0&&(r=0),o===void 0&&(o=Yn.SUM_BY_NONZERO_WEIGHTS);var i=O(e,"multiClassLabels","sigmoidCrossEntropy"),a=O(t,"logits","sigmoidCrossEntropy"),s=null;if(n!=null&&(s=O(n,"weights","sigmoidCrossEntropy")),Tt(i.shape,a.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=Ee(r),l=Ee(1),c=Ee(.5);i=i.mul(l.sub(u)).add(c.mul(u))}var f=function(d,p){var v=O(d,"labels","sigmoidCrossEntropyWithLogits"),x=O(p,"logits","sigmoidCrossEntropyWithLogits");Tt(v.shape,x.shape,"Error in sigmoidCrossEntropyWithLogits: ");var w=x.relu(),y=x.mul(v),b=x.abs().neg().exp().log1p();return w.sub(y).add(b)}(i,a);return Ei(f,s,o)}}),OW=H({softmaxCrossEntropy_:function(e,t,n,r,o){r===void 0&&(r=0),o===void 0&&(o=Yn.SUM_BY_NONZERO_WEIGHTS);var i=O(e,"onehotLabels","softmaxCrossEntropy"),a=O(t,"logits","softmaxCrossEntropy"),s=null;if(n!=null&&(s=O(n,"weights","softmaxCrossEntropy")),Tt(i.shape,a.shape,"Error in softmaxCrossEntropy: "),r>0){var u=Ee(r),l=Ee(1),c=Ee(i.shape[1]);i=i.mul(l.sub(u)).add(u.div(c))}var f=function(d,p,v){if(v===void 0&&(v=-1),v===-1&&(v=p.rank-1),v!==p.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+p.rank+" and dim was "+v);return hh(function(x,w,y){var b=w.logSumExp([v],!0),E=w.toFloat().sub(b);return y([x,E]),{value:E.mul(x).neg().sum([v]),gradFunc:function(S,R){var k=R[0],m=R[1],P=Sr(S.shape,[v]);return[S.reshape(P).mul(k.toFloat().sub(m.exp())),S.reshape(P).mul(m.exp().sub(k.toFloat()))]}}})(d,p)}(i,a);return Ei(f,s,o)}}),MW=Object.freeze({get Reduction(){return Yn},absoluteDifference:TW,computeWeightedLoss:Ei,cosineDistance:IW,hingeLoss:DW,huberLoss:NW,logLoss:AW,meanSquaredError:PW,sigmoidCrossEntropy:FW,softmaxCrossEntropy:OW});function Bw(e,t){return t===void 0&&(t=!1),q.tidy(function(){if(e.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+e.shape.length+"D Tensor.");for(var n=e.shape[0],r=e.shape[1],o=PS(n),i=e.clone(),a=oa([[1]],[1,1]),s=a.clone(),u=n>=r?r:n,l=function(f){var d,p=i,v=s,x=o;d=q.tidy(function(){var w=i.slice([f,f],[n-f,1]),y=w.norm(),b=i.slice([f,f],[1,1]),E=oa([[-1]]).where(b.greater(0),oa([[1]])),S=b.sub(E.mul(y)),R=w.div(S);s=R.shape[0]===1?a.clone():a.concat(R.slice([1,0],[R.shape[0]-1,R.shape[1]]),0);var k=E.matMul(S).div(y).neg(),m=i.slice([f,0],[n-f,r]),P=k.mul(s);if(f===0)i=m.sub(P.matMul(s.transpose().matMul(m)));else{var D=m.sub(P.matMul(s.transpose().matMul(m)));i=i.slice([0,0],[f,r]).concat(D,0)}var N=o.slice([0,f],[n,o.shape[1]-f]);if(f===0)o=N.sub(N.matMul(s).matMul(P.transpose()));else{var B=N.sub(N.matMul(s).matMul(P.transpose()));o=o.slice([0,0],[n,f]).concat(B,1)}return[s,i,o]}),s=d[0],i=d[1],o=d[2],Cr([p,v,x])},c=0;c<u;++c)l(c);return!t&&n>r&&(o=o.slice([0,0],[n,r]),i=i.slice([0,0],[r,r])),[o,i]})}var LW=H({bandPart_:function(e,t,n){if(t%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+t+".");if(n%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+n+".");var r=O(e,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var o=r.shape,i=r.shape.slice(-2),a=i[0],s=i[1];if(!(t<=a))throw new Error("bandPart(): numLower ("+t+") must not be greater than the number of rows ("+a+").");if(!(n<=s))throw new Error("bandPart(): numUpper ("+n+") must not be greater than the number of columns ("+s+").");t<0&&(t=a),n<0&&(n=s);var u=wd(0,a,1,"int32").reshape([-1,1]),l=wd(0,s,1,"int32"),c=_n(u,l),f=vh(c.lessEqual(Ee(+t,"int32")),c.greaterEqual(Ee(-n,"int32"))),d=Wt([a,s],r.dtype);return Or(En(r.reshape([-1,a,s])).map(function(p){return ns(f,p,d)})).reshape(o)}}),BW=H({gramSchmidt_:function(e){var t;if(Array.isArray(e)){t=!1,M(e!=null&&e.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var n=e[0].shape[0],r=function(u){M(e[u].shape[0]===n,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+e[u].shape[0]+" vs. "+n+")"})},o=1;o<e.length;++o)r(o)}else t=!0,e=xy(e,e.shape[0],0).map(function(u){return MS(u,[0])});M(e.length<=e[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+e.length+") exceeds number of dimensions ("+e[0].shape[0]+")."});var i=[],a=e,s=function(u){i.push(q.tidy(function(){var l=a[u];if(u>0)for(var c=0;c<u;++c){var f=A_(i[c].mulStrict(l)).mul(i[c]);l=l.sub(f)}return l.div(M_(l,"euclidean"))}))};for(o=0;o<e.length;++o)s(o);return t?Or(i,0):i}}),jW=H({qr_:function(e,t){if(t===void 0&&(t=!1),e.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+e.rank);if(e.rank===2)return Bw(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce(function(a,s){return a*s}),r=En(e.reshape([n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),o=[],i=[];return r.forEach(function(a){var s=Bw(a,t),u=s[0],l=s[1];o.push(u),i.push(l)}),[Or(o,0).reshape(e.shape),Or(i,0).reshape(e.shape)]}}),WW=Object.freeze({bandPart:LW,gramSchmidt:BW,qr:jW});function xh(e,t,n,r,o,i){r==null&&(r=.5),o==null&&(o=Number.NEGATIVE_INFINITY),i==null&&(i=0);var a=e.shape[0];return n=Math.min(n,a),M(0<=r&&r<=1,function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"}),M(e.rank===2,function(){return"boxes must be a 2D tensor, but was of rank '"+e.rank+"'"}),M(e.shape[1]===4,function(){return"boxes must have 4 columns, but 2nd dimension was "+e.shape[1]}),M(t.rank===1,function(){return"scores must be a 1D tensor"}),M(t.shape[0]===a,function(){return"scores has incompatible shape with boxes. Expected "+a+", but was "+t.shape[0]}),M(0<=i&&i<=1,function(){return"softNmsSigma must be in [0, 1], but was '"+i+"'"}),{maxOutputSize:n,iouThreshold:r,scoreThreshold:o,softNmsSigma:i}}var zW=H({resizeBilinear_:function(e,t,n){n===void 0&&(n=!1);var r=O(e,"images","resizeBilinear");M(r.rank===3||r.rank===4,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."}),M(t.length===2,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+t+"."});var o=r,i=!1;r.rank===3&&(i=!0,o=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var a=t[0],s=t[1],u=q.runKernelFunc(function(l,c){return c([o]),l.resizeBilinear(o,a,s,n)},{x:o},function(l,c){return{x:function(){return q.runKernelFunc(function(f){return f.resizeBilinearBackprop(l,c[0],n)},{})}}},"ResizeBilinear",{alignCorners:n,newHeight:a,newWidth:s});return i?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),UW=H({resizeNearestNeighbor_:function(e,t,n){n===void 0&&(n=!1);var r=O(e,"images","resizeNearestNeighbor");M(r.rank===3||r.rank===4,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."}),M(t.length===2,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+t+"."}),M(r.dtype==="float32"||r.dtype==="int32",function(){return"`images` must have `int32` or `float32` as dtype"});var o=r,i=!1;r.rank===3&&(i=!0,o=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var a=t[0],s=t[1],u=q.runKernelFunc(function(l,c){return c([o]),l.resizeNearestNeighbor(o,a,s,n)},{batchImages:o},function(l,c){return{batchImages:function(){return q.runKernelFunc(function(f){return f.resizeNearestNeighborBackprop(l,c[0],n)},{})}}});return i?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),$W=H({nonMaxSuppression_:function(e,t,n,r,o){r===void 0&&(r=.5),o===void 0&&(o=Number.NEGATIVE_INFINITY);var i=O(e,"boxes","nonMaxSuppression"),a=O(t,"scores","nonMaxSuppression"),s=xh(i,a,n,r,o);n=s.maxOutputSize,r=s.iouThreshold,o=s.scoreThreshold;var u={maxOutputSize:n,iouThreshold:r,scoreThreshold:o};return q.runKernelFunc(function(l){return l.nonMaxSuppression(i,a,n,r,o)},{boxes:i,scores:a},null,"NonMaxSuppressionV3",u)}}),HW=function(e,t,n,r,o){return r===void 0&&(r=.5),o===void 0&&(o=Number.NEGATIVE_INFINITY),Ie(this,void 0,void 0,function(){var i,a,s,u,l,c,f;return De(this,function(d){switch(d.label){case 0:return i=O(e,"boxes","nonMaxSuppressionAsync"),a=O(t,"scores","nonMaxSuppressionAsync"),s=xh(i,a,n,r,o),n=s.maxOutputSize,r=s.iouThreshold,o=s.scoreThreshold,[4,Promise.all([i.data(),a.data()])];case 1:return u=d.sent(),l=u[0],c=u[1],f=Cy(l,c,n,r,o),i!==e&&i.dispose(),a!==t&&a.dispose(),[2,f]}})})},VW=H({nonMaxSuppressionWithScore_:function(e,t,n,r,o,i){r===void 0&&(r=.5),o===void 0&&(o=Number.NEGATIVE_INFINITY),i===void 0&&(i=0);var a=O(e,"boxes","nonMaxSuppression"),s=O(t,"scores","nonMaxSuppression"),u=xh(a,s,n,r,o,i),l={maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:o=u.scoreThreshold,softNmsSigma:i=u.softNmsSigma},c=q.runKernel("NonMaxSuppressionV5",{boxes:a,scores:s},l);return{selectedIndices:c[0],selectedScores:c[1]}}}),GW=function(e,t,n,r,o,i){return r===void 0&&(r=.5),o===void 0&&(o=Number.NEGATIVE_INFINITY),i===void 0&&(i=0),Ie(this,void 0,void 0,function(){var a,s,u,l,c,f,d;return De(this,function(p){switch(p.label){case 0:return a=O(e,"boxes","nonMaxSuppressionAsync"),s=O(t,"scores","nonMaxSuppressionAsync"),u=xh(a,s,n,r,o,i),n=u.maxOutputSize,r=u.iouThreshold,o=u.scoreThreshold,i=u.softNmsSigma,[4,Promise.all([a.data(),s.data()])];case 1:return l=p.sent(),c=l[0],f=l[1],d=Sy(c,f,n,r,o,i),a!==e&&a.dispose(),s!==t&&s.dispose(),[2,d]}})})},qW=H({cropAndResize_:function(e,t,n,r,o,i){var a=O(e,"image","cropAndResize"),s=O(t,"boxes","cropAndResize","float32"),u=O(n,"boxInd","cropAndResize","int32");o=o||"bilinear",i=i||0;var l=s.shape[0];return M(a.rank===4,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+a.rank+"."}),M(s.rank===2&&s.shape[1]===4,function(){return"Error in cropAndResize: boxes must be have size ["+l+",4] but had shape "+s.shape+"."}),M(u.rank===1&&u.shape[0]===l,function(){return"Error in cropAndResize: boxInd must be have size ["+l+"] but had shape "+s.shape+"."}),M(r.length===2,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."}),M(r[0]>=1&&r[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+r}),M(o==="bilinear"||o==="nearest",function(){return"method must be bilinear or nearest, but was "+o}),q.runKernelFunc(function(c,f){return c.cropAndResize(a,s,u,r,o,i)},{images:a,boxes:s,boxInd:u},null,"CropAndResize",{method:o,extrapolationValue:i,cropSize:r})}}),By=Object.freeze({resizeBilinear:zW,resizeNearestNeighbor:UW,nonMaxSuppression:$W,nonMaxSuppressionAsync:HW,nonMaxSuppressionWithScore:VW,nonMaxSuppressionWithScoreAsync:GW,cropAndResize:qW}),jy=function(e,t){return!(e>0)||t==="linear"},Wy=function(e,t,n){if(n==null||n==="linear")return e;if(n==="relu")return e.mul(t.step());throw new Error("Gradient for activation "+n+" has not been implemented yet.")},zy=function(e,t){var n=t,r=Sn(e.shape,t.shape);return r.length>0&&(n=n.sum(r)),n.reshape(e.shape)},Uy=function(e,t,n){if(t==="linear")return e;if(t==="relu")return qt(e);if(t==="elu")return P_(e);if(t==="relu6")return O_(e);if(t==="prelu")return F_(e,n);throw new Error("Unknown fused activation "+t+".")},KW=H({fusedMatMul_:function(e){var t,n=e.a,r=e.b,o=e.transposeA,i=o!==void 0&&o,a=e.transposeB,s=a!==void 0&&a,u=e.bias,l=e.activation,c=l===void 0?"linear":l,f=e.preluActivationWeights;if(jy(q.state.gradientDepth,c)===!1){var d=gh(n,r,i,s);return u!=null&&(d=ct(d,u)),Uy(d,c,f)}var p=O(n,"a","fused matMul"),v=O(r,"b","fused matMul");t=Yt(p,v),p=t[0],v=t[1];var x=i?p.shape[p.rank-2]:p.shape[p.rank-1],w=s?v.shape[v.rank-1]:v.shape[v.rank-2],y=i?p.shape[p.rank-1]:p.shape[p.rank-2],b=s?v.shape[v.rank-2]:v.shape[v.rank-1],E=p.shape.slice(0,-2),S=v.shape.slice(0,-2),R=Fe(E),k=Fe(S);M(p.rank>=2&&v.rank>=2&&p.rank===v.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+p.rank+" and "+v.rank+"."}),M(Nn(E,S),function(){return"Error in fused matMul: outer dimensions ("+E+") and ("+S+") of Tensors with shapes "+p.shape+" and "+v.shape+" must match."}),M(x===w,function(){return"Error in fused matMul: inner shapes ("+x+") and ("+w+") of Tensors with shapes "+p.shape+" and "+v.shape+" and transposeA="+i+" and transposeB="+s+" must match."});var m,P,D=p.shape.slice(0,-2).concat([y,b]),N=i?p.as3D(R,x,y):p.as3D(R,y,x),B=s?v.as3D(k,b,w):v.as3D(k,w,b);u!=null&&ht(D,(m=Yt(m=O(u,"bias","fused matMul"),p)[0]).shape),f!=null&&(P=O(f,"prelu weights","fused matMul"));var z={a:N,b:B};u!=null&&(z.bias=m),f!=null&&(z.preluActivationWeights=P);var V=[N,B];return q.runKernelFunc(function(Z,K){var ne=Z.fusedBatchMatMul({a:N,b:B,transposeA:i,transposeB:s,bias:m,activation:c,preluActivationWeights:P});return K([N,B,ne]),ne},z,function(Z,K){var ne=K[0],J=K[1],$=K[2],Y=Wy(Z,$,c),ee={};return u!=null&&(ee={bias:function(){return zy(m,Y)}}),Object.assign(i||s?!i&&s?{a:function(){return Y.matMul(J,!1,!1)},b:function(){return Y.matMul(ne,!0,!1)}}:i&&!s?{a:function(){return J.matMul(Y,!1,!0)},b:function(){return ne.matMul(Y,!1,!1)}}:{a:function(){return J.matMul(Y,!0,!0)},b:function(){return Y.matMul(ne,!0,!0)}}:{a:function(){return Y.matMul(J,!1,!0)},b:function(){return ne.matMul(Y,!0,!1)}},ee)},"_FusedMatMul",{transposeA:i,transposeB:s,activation:c},V,[!0]).reshape(D)}}),XW=H({fusedConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,o=e.pad,i=e.dataFormat,a=i===void 0?"NHWC":i,s=e.dilations,u=s===void 0?[1,1]:s,l=e.dimRoundingMode,c=e.bias,f=e.activation,d=f===void 0?"linear":f,p=e.preluActivationWeights;if(d=d||"linear",jy(q.state.gradientDepth,d)===!1){var v=Zr(t,n,r,o,a,u,l);return c!=null&&(v=ct(v,c)),Uy(v,d,p)}var x=O(t,"x","conv2d"),w=O(n,"filter","conv2d"),y=x,b=!1;x.rank===3&&(b=!0,y=x.as4D(1,x.shape[0],x.shape[1],x.shape[2])),M(y.rank===4,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+y.rank+"."}),M(w.rank===4,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+w.rank+"."}),l!=null&&M(rn(o),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+l+" but got pad "+o+"."}),M(y.shape[3]===w.shape[2],function(){return"Error in conv2d: depth of input ("+y.shape[3]+") must match input depth for filter "+w.shape[2]+"."}),M(_r(r,u),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"}),M(a==="NHWC",function(){return"Error in conv2d: got dataFormat of "+a+" but only NHWC is currently supported."});var E,S,R=us(y.shape,w.shape,r,u,o,l);c!=null&&(E=Yt(E=O(c,"bias","fused conv2d"),x)[0],ht(R.outShape,E.shape)),p!=null&&(S=O(p,"prelu weights","fused conv2d"));var k={x:y,filter:w};c!=null&&(k.bias=E),p!=null&&(k.preluActivationWeights=S);var m=[w,y],P=q.runKernelFunc(function(D,N){var B=D.fusedConv2d({input:y,filter:w,convInfo:R,bias:E,activation:d,preluActivationWeights:S});return N([w,y,B]),B},k,function(D,N){var B=N,z=B[0],V=B[1],Z=B[2],K=Wy(D,Z,d);M(xu(u),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+u+"'"});var ne={};return c!=null&&(ne={bias:function(){return zy(E,K)}}),Object.assign({x:function(){return __(V.shape,K,z,r,o)},filter:function(){return Ay(V,K,z.shape,r,o)}},ne)},"FusedConv2D",{convInfo:R,activation:d},m,[!0]);return b?P.as3D(P.shape[1],P.shape[2],P.shape[3]):P}}),YW=H({fusedDepthwiseConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,o=e.pad,i=e.dataFormat,a=i===void 0?"NHWC":i,s=e.dilations,u=s===void 0?[1,1]:s,l=e.dimRoundingMode,c=e.bias,f=e.activation,d=f===void 0?"linear":f,p=e.preluActivationWeights;if(jy(q.state.gradientDepth,d)===!1){var v=mh(t,n,r,o,a,u,l);return c!=null&&(v=ct(v,c)),Uy(v,d,p)}var x=O(t,"x","depthwiseConv2d"),w=O(n,"filter","depthwiseConv2d"),y=x,b=!1;x.rank===3&&(b=!0,y=x.as4D(1,x.shape[0],x.shape[1],x.shape[2])),M(y.rank===4,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+y.rank+"."}),M(w.rank===4,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+w.rank+"."}),M(y.shape[3]===w.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels ("+y.shape[3]+") must match the inChannels dimension in filter "+w.shape[2]+"."}),u==null&&(u=[1,1]),M(_r(r,u),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"}),l!=null&&M(rn(o),function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+l+" but got pad "+o+"."});var E,S,R=us(y.shape,w.shape,r,u,o,l,!0);c!=null&&(E=Yt(E=O(c,"bias","fused conv2d"),x)[0],ht(R.outShape,E.shape)),p!=null&&(S=O(p,"prelu weights","fused depthwiseConv2d"));var k={x:y,filter:w};c!=null&&(k.bias=E),p!=null&&(k.preluActivationWeights=S);var m=[w,y],P=q.runKernelFunc(function(D,N){var B=D.fusedDepthwiseConv2D({input:y,filter:w,convInfo:R,bias:E,activation:d,preluActivationWeights:S});return N([w,y,B]),B},k,function(D,N){M(xu(u),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+u+"'"});var B=N[0],z=N[1],V=N[2],Z=Wy(D,V,d),K={};return c!=null&&(K={bias:function(){return zy(E,Z)}}),Object.assign({x:function(){return k_(z.shape,Z,B,R)},filter:function(){return R_(z,Z,B.shape,R)}},K)},"FusedDepthwiseConv2D",{convInfo:R,activation:d},m,[!0]);return b?P.as3D(P.shape[1],P.shape[2],P.shape[3]):P}}),QW=Object.freeze({matMul:KW,conv2d:XW,depthwiseConv2d:YW}),JW=Object.freeze({image:By,linalg:WW,losses:MW,spectral:bW,fused:QW,signal:kW,square:AB,squaredDifference:l_,conv1d:zj,conv2d:Zr,conv3d:Uj,depthwiseConv2d:mh,separableConv2d:Py,conv2dTranspose:$j,conv3dTranspose:Hj,op:H,batchNormalization2d:uj,batchNormalization3d:lj,batchNormalization4d:cj,batchNormalization:fj,batchNorm:v_,batchNorm2d:dj,batchNorm3d:hj,batchNorm4d:pj,booleanMaskAsync:Wj,complex:Bn,real:Gr,imag:Mo,concat:bn,concat1d:QM,concat2d:JM,concat3d:ZM,concat4d:e4,split:xy,matMul:gh,dot:Vj,outerProduct:Gj,reverse:gc,reverse1d:qj,reverse2d:Kj,reverse3d:Xj,reverse4d:Yj,maxPool:Rn,avgPool:yc,pool:Qj,maxPool3d:Jj,avgPool3d:Zj,slice:Ho,slice1d:eW,slice2d:tW,slice3d:D_,slice4d:nW,abs:PB,acos:FB,acosh:OB,asin:MB,asinh:LB,atan:BB,atanh:jB,ceil:WB,clipByValue:Iy,cos:zB,cosh:UB,erf:$B,exp:Hm,expm1:HB,floor:VB,log:GB,log1p:qB,logSigmoid:KB,neg:Td,reciprocal:XB,round:YB,rsqrt:c_,sigmoid:f_,sign:QB,isNaN:JB,isInf:ZB,isFinite:ej,sin:tj,sinh:nj,softplus:rj,sqrt:oj,step:ij,tan:aj,tanh:sj,all:rW,any:oW,argMax:iW,argMin:aW,logSumExp:sW,max:yh,mean:uW,min:lW,moments:cW,sum:A_,prod:fW,equal:w_,equalStrict:Dj,greater:Nj,greaterEqual:b_,greaterEqualStrict:Aj,greaterStrict:Pj,less:Fj,lessEqual:Oj,lessEqualStrict:Mj,lessStrict:Lj,notEqual:Bj,notEqualStrict:jj,add:ct,addN:gj,addStrict:yj,atan2:xj,div:uo,divNoNan:wj,divStrict:bj,floorDiv:y_,maximum:Dy,maximumStrict:Ej,minimum:x_,minimumStrict:Cj,mod:Sj,modStrict:_j,mul:Qn,mulStrict:kj,pow:Id,powStrict:Rj,squaredDifferenceStrict:Tj,sub:_n,subStrict:Ij,elu:P_,leakyRelu:dW,prelu:F_,relu:qt,relu6:O_,selu:hW,logicalAnd:vh,logicalNot:vj,logicalOr:m_,logicalXor:mj,where:ns,whereAsync:g_,buffer:ot,print:l4,batchToSpaceND:AS,broadcastTo:c4,cast:f4,clone:d4,cumsum:h4,depthToSpace:p4,expandDims:Vr,eye:PS,multinomial:v4,oneHot:Wm,pad:ss,pad1d:m4,pad2d:g4,pad3d:y4,pad4d:x4,rand:w4,randomNormal:b4,randomGamma:E4,randomUniform:FS,reshape:lo,spaceToBatchND:OS,squeeze:MS,stack:Or,tile:Js,truncatedNormal:C4,unstack:En,setdiff1dAsync:S4,fill:$o,linspace:YM,ones:Iu,range:wd,scalar:Ee,tensor:Wn,tensor1d:hn,tensor2d:oa,tensor3d:yy,tensor4d:gr,tensor5d:qM,tensor6d:KM,variable:XM,zeros:Wt,onesLike:NS,zerosLike:Ct,transpose:la,softmax:bi,logSoftmax:N4,localResponseNormalization:pW,norm:M_,gather:Ny,unsortedSegmentSum:E_,basicLSTMCell:vW,multiRNNCell:mW,movingAverage:gW,stridedSlice:yW,topk:xW,scatterND:wW,fft:Fy,ifft:Dd,rfft:Oy,irfft:L_,sparseToDense:EW,gatherND:CW,diag:SW,dropout:_W,hannWindow:My,hammingWindow:j_,frame:Ly,stft:W_,inTopKAsync:RW});function ve(e,t){Array.isArray(e)||(e=[e]),e.forEach(function(n){n!=null&&M(n.dtype!=="complex64",function(){return t+" does not support complex64 tensors."})})}function iv(e,t,n,r){if(n==="linear")return e.linear(t);if(n==="relu")return e.relu(t);if(n==="elu")return e.elu(t);if(n==="relu6")return e.relu6(t);if(n==="prelu")return e.prelu(t,r);throw new Error("Activation "+n+" has not been implemented for the CPU backend.")}var ZW=function(e){function t(){var n=e.call(this)||this;return n.blockSize=48,n.firstUse=!0,n.data=new $S(n,q),n}return vo(t,e),t.prototype.write=function(n,r,o){this.firstUse&&(this.firstUse=!1,ce().get("IS_NODE")&&yd(`
============================
Hi there 👋. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));var i={};return this.data.set(i,{values:n,dtype:o}),i},t.prototype.move=function(n,r,o,i){this.data.set(n,{values:r,dtype:i})},t.prototype.numDataIds=function(){return this.data.numDataIds()},t.prototype.read=function(n){return Ie(this,void 0,void 0,function(){return De(this,function(r){return[2,this.readSync(n)]})})},t.prototype.readSync=function(n){var r=this.data.get(n),o=r.dtype,i=r.complexTensors;return o==="complex64"?$m(this.readSync(i.real.dataId),this.readSync(i.imag.dataId)):this.data.get(n).values},t.prototype.bufferSync=function(n){var r=this.readSync(n.dataId),o=r;if(n.dtype==="string")try{o=r.map(function(i){return vd(i)})}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return ot(n.shape,n.dtype,o)},t.prototype.makeOutput=function(n,r,o){var i=this.write(n,r,o);return q.makeTensorFromDataId(i,r,o,this)},t.prototype.disposeData=function(n){if(this.data.has(n)){var r=this.data.get(n).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.data.delete(n)}},t.prototype.time=function(n){return Ie(this,void 0,void 0,function(){var r;return De(this,function(o){return r=No(),n(),[2,{kernelMs:No()-r}]})})},t.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},t.prototype.complex=function(n,r){var o=this.makeOutput(null,n.shape,"complex64");return this.data.get(o.dataId).complexTensors={real:q.keep(n.clone()),imag:q.keep(r.clone())},o},t.prototype.real=function(n){return this.data.get(n.dataId).complexTensors.real.clone()},t.prototype.imag=function(n){return this.data.get(n.dataId).complexTensors.imag.clone()},t.prototype.slice=function(n,r,o){if(ve(n,"slice"),zS(n.shape,r,o)){var i=US(r,n.strides),a=Fe(o);return Wn(this.readSync(n.dataId).subarray(i,i+a),o,n.dtype)}for(var s=ot(o,n.dtype),u=this.bufferSync(n),l=0;l<s.size;++l){var c=s.indexToLoc(l).map(function(f,d){return f+r[d]});s.values[l]=u.get.apply(u,c)}return s.toTensor()},t.prototype.stridedSlice=function(n,r,o,i){ve(n,"stridedSlice");var a=by(r,o,i);if(a.some(function(p){return p===0}))return Wn([],a);for(var s=ot(a,n.dtype),u=this.bufferSync(n),l=0;l<s.size;l++){for(var c=s.indexToLoc(l),f=new Array(c.length),d=0;d<f.length;d++)f[d]=c[d]*i[d]+r[d];s.set.apply(s,[u.get.apply(u,f)].concat(c))}return s.toTensor()},t.prototype.diag=function(n){for(var r=this.readSync(n.dataId),o=ot([n.size,n.size],n.dtype),i=o.values,a=0;a<r.length;a++)i[a*n.size+a]=r[a];return o.toTensor()},t.prototype.unstack=function(n,r){for(var o=n.shape[r],i=new Array(n.rank-1),a=0,s=0;s<n.rank;s++)s!==r&&(i[a++]=n.shape[s]);var u=new Array(n.rank).fill(0),l=n.shape.slice();l[r]=1;var c=new Array(o);for(s=0;s<c.length;s++)u[r]=s,c[s]=this.slice(n,u,l).reshape(i);return c},t.prototype.reverse=function(n,r){ve(n,"reverse");for(var o=ot(n.shape,n.dtype),i=this.bufferSync(n),a=function(u){var l=o.indexToLoc(u),c=l.slice();r.forEach(function(f){return c[f]=n.shape[f]-1-c[f]}),o.set.apply(o,[i.get.apply(i,c)].concat(l))},s=0;s<o.size;s++)a(s);return o.toTensor()},t.prototype.concat=function(n,r){var o=this;if(n[0].dtype==="complex64"){var i=n.map(function(p){return Gr(p)}),a=n.map(function(p){return Mo(p)});return Bn(this.concat(i,r),this.concat(a,r))}var s=n.map(function(p){var v=Fe(p.shape.slice(r));return p.as2D(-1,v)}),u=yu(s.map(function(p){return p.shape}),1),l=ot(u,n[0].dtype).values;if(s[0].shape[0]===1){var c=0;s.forEach(function(p){l.set(o.readSync(p.dataId),c),c+=p.size})}else{var f=0;s.forEach(function(p){for(var v=o.readSync(p.dataId),x=0,w=0;w<p.shape[0];++w)for(var y=w*u[1]+f,b=0;b<p.shape[1];++b)l[y+b]=v[x++];f+=p.shape[1]})}var d=yu(n.map(function(p){return p.shape}),r);return Wn(l,d,n[0].dtype)},t.prototype.neg=function(n){return ve(n,"neg"),this.multiply(Ee(-1),n)},t.prototype.add=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),function(o,i,a,s){return{real:o+a,imag:i+s}}):this.broadcastedBinaryOp(n,r,jn(n.dtype,r.dtype),function(o,i){return o+i})},t.prototype.addN=function(n){var r=this;ve(n,"addN");for(var o=n.map(function(c){return r.readSync(c.dataId)}),i=ot(n[0].shape,n[0].dtype),a=i.values,s=0;s<n.length;s++)for(var u=o[s],l=0;l<a.length;l++)a[l]+=u[l];return i.toTensor()},t.prototype.softmax=function(n,r){var o=kn([r],n.shape),i=this.max(n,o),a=Sr(i.shape,o),s=this.subtract(n,i.reshape(a)),u=this.exp(s),l=this.sum(u,o).reshape(a);return this.realDivide(u,l)},t.prototype.subtract=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),function(o,i,a,s){return{real:o-a,imag:i-s}}):this.broadcastedBinaryOp(n,r,jn(n.dtype,r.dtype),function(o,i){return o-i})},t.prototype.pow=function(n,r){return ve([n,r],"pow"),this.broadcastedBinaryOp(n,r,n.dtype,function(o,i){return Math.pow(o,i)})},t.prototype.batchMatMul=function(n,r,o,i){ve([n,r],"matMul");for(var a=o?n.shape[1]:n.shape[2],s=o?n.shape[2]:n.shape[1],u=i?r.shape[1]:r.shape[2],l=n.shape[0],c=this.readSync(n.dataId),f=this.readSync(r.dataId),d=o?[n.strides[0],1,n.strides[1]]:[n.strides[0],n.strides[1],1],p=d[0],v=d[1],x=d[2],w=i?[1,r.strides[1],r.strides[0]]:[r.strides[1],1,r.strides[0]],y=w[0],b=w[1],E=w[2],S=s*u,R=ot([l,s,u],n.dtype),k=R.values,m=this.blockSize,P=0;P<l;P++)for(var D=0;D<s;D+=m)for(var N=0;N<u;N+=m)for(var B=0;B<a;B+=m)for(var z=Math.min(D+m,s),V=Math.min(N+m,u),Z=Math.min(B+m,a),K=D;K<z;K++)for(var ne=N;ne<V;ne++){for(var J=0,$=B;$<Z;$++)J+=c[P*p+K*v+$*x]*f[$*y+ne*b+P*E];k[P*S+(K*u+ne)]+=J}return R.toTensor()},t.prototype.fusedBatchMatMul=function(n){var r=n.a,o=n.b,i=n.transposeA,a=n.transposeB,s=n.bias,u=n.activation,l=n.preluActivationWeights,c=this.batchMatMul(r,o,i,a);return s&&(c=this.add(c,s)),u&&(c=iv(this,c,u,l)),c},t.prototype.multiply=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),function(o,i,a,s){return{real:o*a-i*s,imag:o*s+i*a}}):this.broadcastedBinaryOp(n,r,jn(n.dtype,r.dtype),function(o,i){return o*i})},t.prototype.realDivide=function(n,r){return ve([n,r],"realDivide"),this.broadcastedBinaryOp(n,r,"float32",function(o,i){return o/i})},t.prototype.floorDiv=function(n,r){return ve([n,r],"floorDiv"),this.broadcastedBinaryOp(n,r,"int32",function(o,i){return Math.floor(o/i)})},t.prototype.sum=function(n,r){ve(n,"sum"),Rr("sum",r,n.rank);for(var o=Gn(n.shape,r),i=o[0],a=o[1],s=Wt(i,jn(n.dtype,"int32")),u=Fe(a),l=this.readSync(s.dataId),c=this.readSync(n.dataId),f=0;f<l.length;++f){for(var d=f*u,p=0,v=0;v<u;++v)p+=c[d+v];l[f]=p}return s},t.prototype.prod=function(n,r){ve(n,"sum");for(var o=Gn(n.shape,r),i=o[0],a=o[1],s=Wt(i,jn(n.dtype,"int32")),u=Fe(a),l=this.readSync(s.dataId),c=this.readSync(n.dataId),f=0;f<l.length;++f){for(var d=f*u,p=1,v=0;v<u;++v)p*=c[d+v];l[f]=p}return s},t.prototype.unsortedSegmentSum=function(n,r,o){ve(n,"unsortedSegmentSum");for(var i=[],a=n.rank-r.rank,s=0;s<a;++s)r=r.expandDims(s+1);for(s=0;s<o;++s){var u=Ee(s,"int32"),l=w_(u,r).asType("float32").mul(n).sum(0);i.push(l)}return Or(i)},t.prototype.argMin=function(n,r){ve(n,"argMin");var o=[r];Rr("argMin",o,n.rank);for(var i=Gn(n.shape,o),a=i[0],s=i[1],u=Wt(a,"int32"),l=Fe(s),c=this.readSync(u.dataId),f=this.readSync(n.dataId),d=0;d<c.length;++d){for(var p=d*l,v=f[p],x=0,w=0;w<l;++w){var y=f[p+w];y<v&&(v=y,x=w)}c[d]=x}return u},t.prototype.argMax=function(n,r){ve(n,"argMax");var o=[r];Rr("argMax",o,n.rank);for(var i=Gn(n.shape,o),a=i[0],s=i[1],u=Wt(a,"int32"),l=Fe(s),c=this.readSync(u.dataId),f=this.readSync(n.dataId),d=0;d<c.length;++d){for(var p=d*l,v=f[p],x=0,w=0;w<l;++w){var y=f[p+w];y>v&&(v=y,x=w)}c[d]=x}return u},t.prototype.cumsum=function(n,r,o,i){if(ve(n,"cumsum"),r!==n.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(n.rank-1)+" but got axis="+r);for(var a=jn(n.dtype,"int32"),s=Wt(n.shape,a),u=this.readSync(s.dataId),l=this.readSync(n.dataId),c=n.shape[n.rank-1],f=i?function(w,y){return w+c-y-1}:function(w,y){return w+y},d=0;d<l.length;d+=c)for(var p=0;p<c;p++){var v=f(d,p);if(p===0)u[v]=o?0:l[v];else{var x=f(d,p-1);u[v]=o?l[x]+u[x]:l[v]+u[x]}}return s},t.prototype.equal=function(n,r){return ve([n,r],"equal"),this.broadcastedBinaryOp(n,r,"bool",function(o,i){return o===i?1:0})},t.prototype.notEqual=function(n,r){return ve([n,r],"notEqual"),this.broadcastedBinaryOp(n,r,"bool",function(o,i){return o!==i?1:0})},t.prototype.less=function(n,r){return ve([n,r],"less"),this.broadcastedBinaryOp(n,r,"bool",function(o,i){return o<i?1:0})},t.prototype.lessEqual=function(n,r){return ve([n,r],"lessEqual"),this.broadcastedBinaryOp(n,r,"bool",function(o,i){return o<=i?1:0})},t.prototype.greater=function(n,r){return ve([n,r],"greater"),this.broadcastedBinaryOp(n,r,"bool",function(o,i){return o>i?1:0})},t.prototype.greaterEqual=function(n,r){return ve([n,r],"greaterEqual"),this.broadcastedBinaryOp(n,r,"bool",function(o,i){return o>=i?1:0})},t.prototype.logicalNot=function(n){ve(n,"logicalNot");for(var r=this.readSync(n.dataId),o=new Uint8Array(r.length),i=0;i<r.length;++i)o[i]=r[i]?0:1;return this.makeOutput(o,n.shape,"bool")},t.prototype.logicalAnd=function(n,r){return ve([n,r],"logicalAnd"),this.broadcastedBinaryOp(n,r,"bool",function(o,i){return o&&i})},t.prototype.logicalOr=function(n,r){return ve([n,r],"logicalOr"),this.broadcastedBinaryOp(n,r,"bool",function(o,i){return o||i})},t.prototype.select=function(n,r,o){ve([n,r,o],"select");for(var i=this.readSync(n.dataId),a=this.readSync(r.dataId),s=this.readSync(o.dataId),u=Wt(r.shape,jn(r.dtype,o.dtype)),l=this.readSync(u.dataId),c=0,f=n.rank===0||n.rank>1||r.rank===1?1:Fe(r.shape.slice(1)),d=0;d<i.length;d++)for(var p=0;p<f;p++)i[d]===1?l[c++]=a[d]:l[c++]=s[d];return u},t.prototype.where=function(n){ve([n],"where");var r=this.readSync(n.dataId);return _y(n.shape,r)},t.prototype.topk=function(n,r,o){return ve(n,"topk"),QS(this.readSync(n.dataId),n.shape,n.dtype,r)},t.prototype.min=function(n,r){ve(n,"min"),Rr("min",r,n.rank);for(var o=Gn(n.shape,r),i=o[0],a=o[1],s=Wt(i,n.dtype),u=Fe(a),l=this.readSync(s.dataId),c=this.readSync(n.dataId),f=0;f<l.length;++f){for(var d=f*u,p=c[d],v=0;v<u;++v){var x=c[d+v];x<p&&(p=x)}l[f]=p}return s},t.prototype.minimum=function(n,r){return ve([n,r],"minimum"),this.broadcastedBinaryOp(n,r,n.dtype,function(o,i){return Math.min(o,i)})},t.prototype.mod=function(n,r){return ve([n,r],"mod"),this.broadcastedBinaryOp(n,r,n.dtype,function(o,i){var a=o%i;return o<0&&i<0||o>=0&&i>=0?a:(a+i)%i})},t.prototype.max=function(n,r){ve(n,"max"),Rr("max",r,n.rank);for(var o=Gn(n.shape,r),i=o[0],a=o[1],s=Wt(i,n.dtype),u=Fe(a),l=this.readSync(s.dataId),c=this.readSync(n.dataId),f=0;f<l.length;++f){for(var d=f*u,p=c[d],v=0;v<u;++v){var x=c[d+v];x>p&&(p=x)}l[f]=p}return s},t.prototype.maximum=function(n,r){return ve([n,r],"maximum"),this.broadcastedBinaryOp(n,r,n.dtype,function(o,i){return Math.max(o,i)})},t.prototype.all=function(n,r){ve(n,"all"),Rr("all",r,n.rank);for(var o=Gn(n.shape,r),i=o[0],a=o[1],s=Wt(i,n.dtype),u=Fe(a),l=this.readSync(s.dataId),c=this.readSync(n.dataId),f=0;f<l.length;++f){for(var d=f*u,p=c[d],v=0;v<u;++v){var x=c[d+v];p=p&&x}l[f]=p}return s},t.prototype.any=function(n,r){ve(n,"any"),Rr("any",r,n.rank);for(var o=Gn(n.shape,r),i=o[0],a=o[1],s=Wt(i,n.dtype),u=Fe(a),l=this.readSync(s.dataId),c=this.readSync(n.dataId),f=0;f<l.length;++f){for(var d=f*u,p=c[d],v=0;v<u;++v){var x=c[d+v];p=p||x}l[f]=p}return s},t.prototype.squaredDifference=function(n,r){return ve([n,r],"squaredDifference"),this.broadcastedBinaryOp(n,r,n.dtype,function(o,i){var a=o-i;return a*a})},t.prototype.ceil=function(n){ve(n,"ceil");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),i=0;i<r.length;++i)o[i]=Math.ceil(r[i]);return this.makeOutput(o,n.shape,"float32")},t.prototype.floor=function(n){ve(n,"floor");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),i=0;i<r.length;++i)o[i]=Math.floor(r[i]);return this.makeOutput(o,n.shape,"float32")},t.prototype.sign=function(n){ve(n,"x");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),i=0;i<r.length;++i)r[i]<0?o[i]=-1:r[i]>0?o[i]=1:o[i]=0;return this.makeOutput(o,n.shape,"float32")},t.prototype.isNaN=function(n){ve(n,"x");for(var r=this.readSync(n.dataId),o=new Uint8Array(r.length),i=0;i<r.length;++i)Number.isNaN(r[i])&&(o[i]=1);return this.makeOutput(o,n.shape,"bool")},t.prototype.isInf=function(n){ve(n,"x");for(var r=this.readSync(n.dataId),o=new Uint8Array(r.length),i=0;i<r.length;++i)Math.abs(r[i])===1/0&&(o[i]=1);return this.makeOutput(o,n.shape,"bool")},t.prototype.isFinite=function(n){ve(n,"x");for(var r=this.readSync(n.dataId),o=new Uint8Array(r.length),i=0;i<r.length;++i)Number.isFinite(r[i])&&(o[i]=1);return this.makeOutput(o,n.shape,"bool")},t.prototype.round=function(n){ve(n,"round");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),i=0;i<r.length;++i){var a=Math.floor(r[i]);r[i]-a<.5?o[i]=Math.floor(r[i]):r[i]-a>.5?o[i]=Math.ceil(r[i]):o[i]=a%2==0?a:a+1}return this.makeOutput(o,n.shape,"float32")},t.prototype.exp=function(n){ve(n,"exp");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),i=0;i<r.length;++i)o[i]=Math.exp(r[i]);return this.makeOutput(o,n.shape,"float32")},t.prototype.expm1=function(n){ve(n,"expm1");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),i=0;i<r.length;++i)o[i]=Math.expm1(r[i]);return this.makeOutput(o,n.shape,"float32")},t.prototype.log=function(n){ve(n,"log");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),i=0;i<r.length;++i){var a=r[i];o[i]=Math.log(a)}return this.makeOutput(o,n.shape,"float32")},t.prototype.log1p=function(n){ve(n,"log1p");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),i=0;i<r.length;++i){var a=r[i];o[i]=Math.log1p(a)}return this.makeOutput(o,n.shape,"float32")},t.prototype.sqrt=function(n){ve(n,"sqrt");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),i=0;i<r.length;++i){var a=r[i];o[i]=Math.sqrt(a)}return this.makeOutput(o,n.shape,"float32")},t.prototype.rsqrt=function(n){ve(n,"rsqrt");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),i=0;i<r.length;++i){var a=r[i];o[i]=1/Math.sqrt(a)}return this.makeOutput(o,n.shape,"float32")},t.prototype.reciprocal=function(n){ve(n,"reciprocal");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),i=0;i<r.length;++i)o[i]=1/r[i];return this.makeOutput(o,n.shape,"float32")},t.prototype.linear=function(n){return n},t.prototype.relu=function(n){ve(n,"relu");for(var r=Wt(n.shape,n.dtype),o=this.readSync(r.dataId),i=this.readSync(n.dataId),a=0;a<i.length;++a)o[a]=Math.max(0,i[a]);return r},t.prototype.relu6=function(n){ve(n,"relu");for(var r=Wt(n.shape,n.dtype),o=this.readSync(r.dataId),i=this.readSync(n.dataId),a=0;a<i.length;++a)o[a]=Math.min(Math.max(0,i[a]),6);return r},t.prototype.prelu=function(n,r){return ve([n,r],"prelu"),this.broadcastedBinaryOp(n,r,n.dtype,function(o,i){return o<0?i*o:o})},t.prototype.elu=function(n){ve(n,"elu");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i){var a=o[i];r[i]=a>=0?a:Math.exp(a)-1}return this.makeOutput(r,n.shape,"float32")},t.prototype.eluDer=function(n,r){ve([n,r],"eluDer");for(var o=new Float32Array(r.size),i=this.readSync(r.dataId),a=this.readSync(n.dataId),s=0;s<i.length;++s){var u=i[s];o[s]=u>=1?a[s]:a[s]*(u+1)}return this.makeOutput(o,r.shape,"float32")},t.prototype.selu=function(n){ve(n,"selu");for(var r=Ry,o=Ty,i=new Float32Array(n.size),a=this.readSync(n.dataId),s=0;s<a.length;++s){var u=a[s];i[s]=u>=0?o*u:r*(Math.exp(u)-1)}return this.makeOutput(i,n.shape,"float32")},t.prototype.clip=function(n,r,o){ve(n,"clip");for(var i=new Float32Array(n.size),a=this.readSync(n.dataId),s=0;s<a.length;++s){var u=a[s];i[s]=u>o?o:u<r?r:u}return this.makeOutput(i,n.shape,"float32")},t.prototype.abs=function(n){for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=Math.abs(o[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.complexAbs=function(n){for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<n.size;++i){var a=o[2*i],s=o[2*i+1];r[i]=Math.hypot(a,s)}return this.makeOutput(r,n.shape,"float32")},t.prototype.int=function(n){ve(n,"int");for(var r=new Int32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=o[i];return this.makeOutput(r,n.shape,"int32")},t.prototype.sigmoid=function(n){ve(n,"sigmoid");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=1/(1+Math.exp(-o[i]));return this.makeOutput(r,n.shape,"float32")},t.prototype.softplus=function(n){ve(n,"softplus");for(var r=Math.log(11920928955078125e-23)+2,o=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a){var s=i[a]>-r,u=i[a]<r,l=Math.exp(i[a]),c=void 0;c=u?l:s?i[a]:Math.log(1+l),o[a]=c}return this.makeOutput(o,n.shape,"float32")},t.prototype.sin=function(n){ve(n,"sin");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=Math.sin(o[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.cos=function(n){ve(n,"cos");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=Math.cos(o[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.tan=function(n){ve(n,"tan");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=Math.tan(o[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.asin=function(n){ve(n,"asin");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=Math.asin(o[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.acos=function(n){ve(n,"acos");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=Math.acos(o[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.atan=function(n){ve(n,"atan");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=Math.atan(o[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.atan2=function(n,r){return ve([n,r],"atan2"),this.broadcastedBinaryOp(n,r,n.dtype,function(o,i){return Math.atan2(o,i)})},t.prototype.sinh=function(n){ve(n,"sinh");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=Math.sinh(o[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.cosh=function(n){ve(n,"cosh");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=Math.cosh(o[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.tanh=function(n){ve(n,"tanh");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=eM(o[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.asinh=function(n){ve(n,"asinh");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=Math.asinh(o[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.acosh=function(n){ve(n,"acosh");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=Math.acosh(o[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.atanh=function(n){ve(n,"atanh");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=Math.atanh(o[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.erf=function(n){ve(n,"erf");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i){var a=Math.sign(o[i]),s=Math.abs(o[i]),u=1/(1+.3275911*s);r[i]=a*(1-((((1.061405429*u-1.453152027)*u+1.421413741)*u-.284496736)*u+.254829592)*u*Math.exp(-s*s))}return this.makeOutput(r,n.shape,"float32")},t.prototype.step=function(n,r){r===void 0&&(r=0),ve(n,"step");for(var o=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a){var s=i[a];isNaN(s)?o[a]=NaN:o[a]=s>0?1:r}return this.makeOutput(o,n.shape,"float32")},t.prototype.fusedConv2d=function(n){var r=n.input,o=n.filter,i=n.convInfo,a=n.bias,s=n.activation,u=n.preluActivationWeights,l=this.conv2d(r,o,i);return a&&(l=this.add(l,a)),s&&(l=iv(this,l,s,u)),l},t.prototype.conv2d=function(n,r,o){ve([n,r],"conv2d");for(var i=o.filterHeight,a=o.filterWidth,s=o.dilationHeight,u=o.dilationWidth,l=o.padInfo.left,c=o.padInfo.top,f=o.dataFormat==="channelsLast",d=ot(o.outShape,n.dtype),p=n.strides[0],v=f?n.strides[1]:n.strides[2],x=f?n.strides[2]:1,w=f?1:n.strides[1],y=d.strides[0],b=f?d.strides[1]:d.strides[2],E=f?d.strides[2]:1,S=f?1:d.strides[1],R=this.readSync(n.dataId),k=this.readSync(r.dataId),m=d.values,P=0;P<o.batchSize;++P)for(var D=P*p,N=P*y,B=0;B<o.outHeight;++B)for(var z=N+B*b,V=B*o.strideHeight-c,Z=0;Z<i;Z++){var K=V+Z*s;if(!(K<0||K>=o.inHeight))for(var ne=Z*r.strides[0],J=D+K*v,$=0;$<o.outWidth;++$)for(var Y=z+$*E,ee=$*o.strideWidth-l,he=0;he<a;he++){var me=ee+he*u;if(!(me<0||me>=o.inWidth))for(var be=J+me*x,Se=ne+he*r.strides[1],Ae=0;Ae<o.inChannels;++Ae){for(var Pe=R[be+Ae*w],$e=0;$e<o.outChannels;++$e)m[Y+$e*S]+=Pe*k[Se+$e];Se+=o.outChannels}}}return d.toTensor()},t.prototype.conv3d=function(n,r,o){for(var i=o.filterDepth,a=o.filterHeight,s=o.filterWidth,u=o.dilationDepth,l=o.dilationHeight,c=o.dilationWidth,f=o.padInfo.front,d=o.padInfo.left,p=o.padInfo.top,v=ot(o.outShape,n.dtype),x=this.readSync(n.dataId),w=this.readSync(r.dataId),y=v.values,b=0;b<o.batchSize;++b)for(var E=b*n.strides[0],S=b*v.strides[0],R=0;R<o.outDepth;++R)for(var k=S+R*v.strides[1],m=R*o.strideDepth-f,P=0;P<i;P++){var D=m+P*u;if(!(D<0||D>=o.inDepth))for(var N=P*r.strides[0],B=E+D*n.strides[1],z=0;z<o.outHeight;++z)for(var V=k+z*v.strides[2],Z=z*o.strideHeight-p,K=0;K<a;K++){var ne=Z+K*l;if(!(ne<0||ne>=o.inHeight))for(var J=N+K*r.strides[1],$=B+ne*n.strides[2],Y=0;Y<o.outWidth;++Y)for(var ee=V+Y*o.outChannels,he=Y*o.strideWidth-d,me=0;me<s;me++){var be=he+me*c;if(!(be<0||be>=o.inWidth))for(var Se=J+me*r.strides[2],Ae=$+be*o.inChannels,Pe=Se,$e=0;$e<o.inChannels;++$e){for(var et=x[Ae+$e],Qe=0;Qe<o.outChannels;++Qe)y[ee+Qe]+=et*w[Pe+Qe];Pe+=o.outChannels}}}}return v.toTensor()},t.prototype.conv2dDerInput=function(n,r,o){ve([n,r],"conv2dDerInput");for(var i=ot(o.inShape,"float32"),a=i.values,s=this.readSync(n.dataId),u=this.readSync(r.dataId),l=r.strides,c=l[0],f=l[1],d=l[2],p=o.batchSize,v=o.filterHeight,x=o.filterWidth,w=o.inChannels,y=o.inHeight,b=o.inWidth,E=o.outChannels,S=o.outHeight,R=o.outWidth,k=o.strideHeight,m=o.strideWidth,P=o.dataFormat,D=v-1-o.padInfo.top,N=x-1-o.padInfo.left,B=P==="channelsLast",z=i.strides[0],V=B?i.strides[1]:i.strides[2],Z=B?i.strides[2]:1,K=B?1:i.strides[1],ne=n.strides[0],J=B?n.strides[1]:n.strides[2],$=B?n.strides[2]:1,Y=B?1:n.strides[1],ee=0;ee<p;++ee)for(var he=0;he<w;++he)for(var me=0;me<y;++me)for(var be=me-D,Se=Math.max(0,Math.ceil(be/k)),Ae=Math.min(S,(v+be)/k),Pe=0;Pe<b;++Pe){for(var $e=Pe-N,et=Math.max(0,Math.ceil($e/m)),Qe=Math.min(R,(x+$e)/m),it=0,ze=Se;ze<Ae;++ze)for(var Ke=ze*k-be,qe=et;qe<Qe;++qe)for(var pt=ne*ee+J*ze+$*qe,Oe=c*(v-1-Ke)+f*(x-1-(qe*m-$e))+d*he,vt=0;vt<E;++vt)it+=s[pt+Y*vt]*u[Oe+vt];a[z*ee+V*me+Z*Pe+K*he]=it}return i.toTensor()},t.prototype.conv3dDerInput=function(n,r,o){for(var i=ot(o.inShape,"float32"),a=i.values,s=i.strides,u=s[0],l=s[1],c=s[2],f=s[3],d=this.readSync(n.dataId),p=n.strides,v=p[0],x=p[1],w=p[2],y=p[3],b=this.readSync(r.dataId),E=r.strides,S=E[0],R=E[1],k=E[2],m=E[3],P=o.batchSize,D=o.filterDepth,N=o.filterHeight,B=o.filterWidth,z=o.inChannels,V=o.inDepth,Z=o.inHeight,K=o.inWidth,ne=o.outChannels,J=o.outDepth,$=o.outHeight,Y=o.outWidth,ee=o.strideDepth,he=o.strideHeight,me=o.strideWidth,be=D-1-o.padInfo.front,Se=N-1-o.padInfo.top,Ae=B-1-o.padInfo.left,Pe=0;Pe<P;++Pe)for(var $e=0;$e<z;++$e)for(var et=0;et<V;++et)for(var Qe=et-be,it=Math.max(0,Math.ceil(Qe/ee)),ze=Math.min(J,(D+Qe)/ee),Ke=0;Ke<Z;++Ke)for(var qe=Ke-Se,pt=Math.max(0,Math.ceil(qe/he)),Oe=Math.min($,(N+qe)/he),vt=0;vt<K;++vt){for(var Ue=vt-Ae,It=Math.max(0,Math.ceil(Ue/me)),on=Math.min(Y,(B+Ue)/me),cr=0,pn=it;pn<ze;++pn)for(var Ut=pn*ee-Qe,an=pt;an<Oe;++an)for(var $t=an*he-qe,Ce=It;Ce<on;++Ce)for(var He=v*Pe+x*pn+w*an+y*Ce,fn=S*(D-1-Ut)+R*(N-1-$t)+k*(B-1-(Ce*me-Ue))+m*$e,Pn=0;Pn<ne;++Pn)cr+=d[He+Pn]*b[fn+Pn];a[u*Pe+l*et+c*Ke+f*vt+$e]=cr}return i.toTensor()},t.prototype.conv2dDerFilter=function(n,r,o){ve([n,r],"conv2dDerFilter");for(var i=o.strideHeight,a=o.strideWidth,s=o.filterHeight,u=o.filterWidth,l=o.dataFormat==="channelsLast",c=ot(o.filterShape,"float32"),f=o.padInfo.left,d=o.padInfo.top,p=this.bufferSync(n),v=this.bufferSync(r),x=0;x<s;++x)for(var w=Math.max(0,Math.ceil((d-x)/i)),y=Math.min(o.outHeight,(o.inHeight+d-x)/i),b=0;b<u;++b)for(var E=Math.max(0,Math.ceil((f-b)/a)),S=Math.min(o.outWidth,(o.inWidth+f-b)/a),R=0;R<o.inChannels;++R)for(var k=0;k<o.outChannels;++k){for(var m=0,P=0;P<o.batchSize;++P)for(var D=w;D<y;++D)for(var N=x+D*i-d,B=E;B<S;++B){var z=b+B*a-f;m+=l?p.get(P,N,z,R)*v.get(P,D,B,k):p.get(P,R,N,z)*v.get(P,k,D,B)}c.set(m,x,b,R,k)}return c.toTensor()},t.prototype.conv3dDerFilter=function(n,r,o){for(var i=o.strideDepth,a=o.strideHeight,s=o.strideWidth,u=o.filterDepth,l=o.filterHeight,c=o.filterWidth,f=ot(o.filterShape,"float32"),d=f.values,p=f.strides,v=p[0],x=p[1],w=p[2],y=p[3],b=this.readSync(r.dataId),E=r.strides,S=E[0],R=E[1],k=E[2],m=E[3],P=this.readSync(n.dataId),D=n.strides,N=D[0],B=D[1],z=D[2],V=D[3],Z=o.padInfo.front,K=o.padInfo.left,ne=o.padInfo.top,J=0;J<u;++J)for(var $=Math.max(0,Math.ceil((Z-J)/i)),Y=Math.min(o.outDepth,(o.inDepth+Z-J)/i),ee=J*v,he=0;he<l;++he)for(var me=Math.max(0,Math.ceil((ne-he)/a)),be=Math.min(o.outHeight,(o.inHeight+ne-he)/a),Se=he*x+ee,Ae=0;Ae<c;++Ae)for(var Pe=Math.max(0,Math.ceil((K-Ae)/s)),$e=Math.min(o.outWidth,(o.inWidth+K-Ae)/s),et=Ae*w+Se,Qe=0;Qe<o.inChannels;++Qe)for(var it=Qe*y+et,ze=0;ze<o.outChannels;++ze){for(var Ke=0,qe=0;qe<o.batchSize;++qe)for(var pt=qe*N,Oe=qe*S,vt=$;vt<Y;++vt)for(var Ue=(J+vt*i-Z)*B+pt,It=vt*R+Oe,on=me;on<be;++on)for(var cr=(he+on*a-ne)*z+Ue,pn=on*k+It,Ut=Pe;Ut<$e;++Ut){var an=Ut*m+pn;Ke+=P[(Ae+Ut*s-K)*V+cr+Qe]*b[an+ze]}d[it+ze]=Ke}return f.toTensor()},t.prototype.fusedDepthwiseConv2D=function(n){var r=n.input,o=n.filter,i=n.convInfo,a=n.bias,s=n.activation,u=n.preluActivationWeights,l=this.depthwiseConv2D(r,o,i);return a&&(l=this.add(l,a)),s&&(l=iv(this,l,s,u)),l},t.prototype.depthwiseConv2D=function(n,r,o){ve([n,r],"depthwiseConv2D");for(var i=o.filterHeight,a=o.filterWidth,s=o.dilationHeight,u=o.dilationWidth,l=o.padInfo.left,c=o.padInfo.top,f=o.outChannels/o.inChannels,d=ot(o.outShape,n.dtype),p=this.readSync(n.dataId),v=this.readSync(r.dataId),x=d.values,w=0;w<o.batchSize;++w)for(var y=w*n.strides[0],b=w*d.strides[0],E=0;E<o.outHeight;++E)for(var S=b+E*d.strides[1],R=E*o.strideHeight-l,k=0;k<i;++k){var m=R+k*s;if(!(m<0||m>=o.inHeight))for(var P=k*r.strides[0],D=y+m*n.strides[1],N=0;N<o.outWidth;++N)for(var B=S+N*d.strides[2],z=N*o.strideWidth-c,V=0;V<a;++V){var Z=z+V*u;if(!(Z<0||Z>=o.inWidth))for(var K=P+V*r.strides[1],ne=D+Z*o.inChannels,J=B,$=K,Y=0;Y<o.inChannels;++Y){for(var ee=p[ne+Y],he=0;he<f;++he)x[J+he]+=ee*v[$+he];J+=f,$+=f}}}return d.toTensor()},t.prototype.depthwiseConv2DDerInput=function(n,r,o){ve([n,r],"depthwiseConv2DDerInput");for(var i=ot(o.inShape,"float32"),a=i.values,s=i.strides,u=s[0],l=s[1],c=s[2],f=this.readSync(n.dataId),d=n.strides,p=d[0],v=d[1],x=d[2],w=this.readSync(r.dataId),y=r.strides,b=y[0],E=y[1],S=y[2],R=o.batchSize,k=o.filterHeight,m=o.filterWidth,P=o.inChannels,D=o.inHeight,N=o.inWidth,B=o.outChannels,z=o.outHeight,V=o.outWidth,Z=o.strideHeight,K=o.strideWidth,ne=k-1-o.padInfo.top,J=m-1-o.padInfo.left,$=B/P,Y=0;Y<R;++Y)for(var ee=0;ee<P;++ee)for(var he=0;he<D;++he)for(var me=he-ne,be=Math.max(0,Math.ceil(me/Z)),Se=Math.min(z,(k+me)/Z),Ae=0;Ae<N;++Ae){for(var Pe=Ae-J,$e=Math.max(0,Math.ceil(Pe/K)),et=Math.min(V,(m+Pe)/K),Qe=0,it=be;it<Se;++it)for(var ze=it*Z-me,Ke=$e;Ke<et;++Ke)for(var qe=p*Y+v*it+x*Ke,pt=b*(k-1-ze)+E*(m-1-(Ke*K-Pe))+S*ee,Oe=0;Oe<$;++Oe)Qe+=f[qe+(ee*$+Oe)]*w[pt+Oe];a[u*Y+l*he+c*Ae+ee]=Qe}return i.toTensor()},t.prototype.depthwiseConv2DDerFilter=function(n,r,o){ve([n,r],"depthwiseConv2DDerFilter");for(var i=o.strideHeight,a=o.strideWidth,s=o.filterHeight,u=o.filterWidth,l=ot(o.filterShape,"float32"),c=o.padInfo.left,f=o.padInfo.top,d=o.outChannels/o.inChannels,p=this.bufferSync(n),v=this.bufferSync(r),x=0;x<s;++x)for(var w=Math.max(0,Math.ceil((f-x)/i)),y=Math.min(o.outHeight,(o.inHeight+f-x)/i),b=0;b<u;++b)for(var E=Math.max(0,Math.ceil((c-b)/a)),S=Math.min(o.outWidth,(o.inWidth+c-b)/a),R=0;R<o.outChannels;++R){for(var k=Math.trunc(R/d),m=R%d,P=0,D=0;D<o.batchSize;++D)for(var N=w;N<y;++N)for(var B=x+N*i-f,z=E;z<S;++z){var V=b+z*a-c;P+=p.get(D,B,V,k)*v.get(D,N,z,R)}l.set(P,x,b,k,m)}return l.toTensor()},t.prototype.tile=function(n,r){return ve(n,"tile"),YS(this.bufferSync(n),r)},t.prototype.pad=function(n,r,o){ve(n,"pad");var i=r.map(function(d,p){return d[0]+n.shape[p]+d[1]}),a=r.map(function(d){return d[0]}),s=this.bufferSync(n),u=ot(i,n.dtype);o!==0&&u.values.fill(o);for(var l=0;l<n.size;l++){var c=s.indexToLoc(l),f=c.map(function(d,p){return d+a[p]});u.set.apply(u,[s.get.apply(s,c)].concat(f))}return u.toTensor()},t.prototype.transpose=function(n,r){ve(n,"transpose");for(var o=new Array(n.rank),i=0;i<o.length;i++)o[i]=n.shape[r[i]];var a=this.readSync(n.dataId),s=ot(o,n.dtype),u=this.bufferSync(n);for(i=0;i<n.size;++i){for(var l=u.indexToLoc(i),c=new Array(l.length),f=0;f<c.length;f++)c[f]=l[r[f]];var d=s.locToIndex(c);s.values[d]=a[i]}return s.toTensor()},t.prototype.gather=function(n,r,o){ve([n,r],"gather");var i=n.shape.slice(),a=this.readSync(r.dataId);i[o]=a.length;for(var s=ot(i,n.dtype),u=this.bufferSync(n),l=0;l<s.size;++l){var c=s.indexToLoc(l),f=c.slice();f[o]=a[c[o]];var d=u.locToIndex(f);s.values[l]=u.values[d]}return s.toTensor()},t.prototype.batchToSpaceND=function(n,r,o){ve([n],"batchToSpaceND");var i=r.reduce(function(f,d){return f*d}),a=bd(n.shape,r,i),s=Ed(a.length,r.length),u=Cd(n.shape,r,i),l=LS(o,r.length),c=BS(u,o,r.length);return n.reshape(a).transpose(s).reshape(u).slice(l,c)},t.prototype.spaceToBatchND=function(n,r,o){ve([n],"spaceToBatchND");var i=r.reduce(function(d,p){return d*p}),a=[[0,0]];a.push.apply(a,o);for(var s=1+r.length;s<n.shape.length;++s)a.push([0,0]);var u=n.pad(a),l=bd(u.shape,r,i,!1),c=Ed(l.length,r.length,!1),f=Cd(u.shape,r,i,!1);return u.reshape(l).transpose(c).reshape(f)},t.prototype.pool=function(n,r,o){ve(n,"pool");for(var i=r.strideHeight,a=r.strideWidth,s=r.dilationHeight,u=r.dilationWidth,l=r.effectiveFilterHeight,c=r.effectiveFilterWidth,f=r.padInfo.top,d=r.padInfo.left,p=o==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=this.readSync(n.dataId),x=ot(r.outShape,n.dtype),w=x.values,y=r.outShape[1]*r.outShape[2]*r.outShape[3],b=r.outShape[2]*r.outShape[3],E=r.outShape[3],S=0;S<r.batchSize;++S)for(var R=S*y,k=S*n.strides[0],m=0;m<r.inChannels;++m)for(var P=0;P<r.outHeight;++P)for(var D=P*i-f,N=Math.max(0,D),B=Math.min(r.inHeight,l+D),z=R+P*b,V=0;V<r.outWidth;++V){for(var Z=V*a-d,K=Math.max(0,Z),ne=Math.min(r.inWidth,c+Z),J=p,$=0,Y=0,ee=N;ee<B;ee+=s){for(var he=k+ee*n.strides[1],me=K;me<ne;me+=u){var be=v[he+me*n.strides[2]+m];o==="max"&&be>J?J=be:o==="avg"&&($+=be,Y++)}if(isNaN(J))break}w[z+V*E+m]=o==="avg"?$/Y:J}return x.toTensor()},t.prototype.maxPool=function(n,r){return this.pool(n,r,"max")},t.prototype.maxPoolPositions=function(n,r){for(var o=ot(r.outShape,"int32"),i=r.strideHeight,a=r.strideWidth,s=r.dilationHeight,u=r.dilationWidth,l=r.effectiveFilterHeight,c=r.effectiveFilterWidth,f=r.padInfo.top,d=r.padInfo.left,p=this.bufferSync(n),v=0;v<r.batchSize;++v)for(var x=0;x<r.inChannels;++x)for(var w=0;w<r.outHeight;++w){for(var y=w*i-f,b=y;b<0;)b+=s;for(var E=Math.min(r.inHeight,l+y),S=0;S<r.outWidth;++S){for(var R=S*a-d,k=R;k<0;)k+=u;for(var m=Math.min(r.inWidth,c+R),P=Number.NEGATIVE_INFINITY,D=-1,N=b;N<E;N+=s)for(var B=N-y,z=k;z<m;z+=u){var V=z-R,Z=p.get(v,N,z,x);Z>P&&(P=Z,D=B*c+V)}o.set(D,v,w,S,x)}}return o.toTensor()},t.prototype.maxPoolBackprop=function(n,r,o,i){ve([r,o],"maxPoolBackprop");for(var a=this.maxPoolPositions(r,i),s=i.strideHeight,u=i.strideWidth,l=i.dilationHeight,c=i.dilationWidth,f=i.effectiveFilterHeight,d=i.effectiveFilterWidth,p=d-1-i.padInfo.left,v=f-1-i.padInfo.top,x=ot(r.shape,"float32"),w=this.bufferSync(a),y=this.bufferSync(n),b=0;b<i.batchSize;++b)for(var E=0;E<i.inChannels;++E)for(var S=0;S<i.inHeight;++S)for(var R=0;R<i.inWidth;++R){for(var k=S-v,m=R-p,P=0,D=0;D<f;D+=l){var N=(k+D)/s;if(!(N<0||N>=i.outHeight||Math.floor(N)!==N))for(var B=0;B<d;B+=c){var z=(m+B)/u;if(!(z<0||z>=i.outWidth||Math.floor(z)!==z)){var V=f*d-1-w.get(b,N,z,E)===D*d+B?1:0;V!==0&&(P+=y.get(b,N,z,E)*V)}}}x.set(P,b,S,R,E)}return x.toTensor()},t.prototype.avgPoolBackprop=function(n,r,o){ve([n,r],"avgPoolBackprop");for(var i=o.strideHeight,a=o.strideWidth,s=o.filterHeight,u=o.filterWidth,l=o.dilationHeight,c=o.dilationWidth,f=o.effectiveFilterHeight,d=o.effectiveFilterWidth,p=d-1-o.padInfo.left,v=f-1-o.padInfo.top,x=ot(r.shape,"float32"),w=1/(s*u),y=this.bufferSync(n),b=0;b<o.batchSize;++b)for(var E=0;E<o.inChannels;++E)for(var S=0;S<o.inHeight;++S)for(var R=0;R<o.inWidth;++R){for(var k=S-v,m=R-p,P=0,D=0;D<f;D+=l){var N=(k+D)/i;if(!(N<0||N>=o.outHeight||Math.floor(N)!==N))for(var B=0;B<d;B+=c){var z=(m+B)/a;z<0||z>=o.outWidth||Math.floor(z)!==z||(P+=y.get(b,N,z,E))}}x.set(P*w,b,S,R,E)}return x.toTensor()},t.prototype.pool3d=function(n,r,o){ve(n,"pool3d");for(var i=r.strideDepth,a=r.strideHeight,s=r.strideWidth,u=r.dilationDepth,l=r.dilationHeight,c=r.dilationWidth,f=r.effectiveFilterDepth,d=r.effectiveFilterHeight,p=r.effectiveFilterWidth,v=r.padInfo.front,x=r.padInfo.top,w=r.padInfo.left,y=o==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,b=this.readSync(n.dataId),E=ot(r.outShape,n.dtype),S=E.values,R=r.outShape[1]*r.outShape[2]*r.outShape[3]*r.outShape[4],k=r.outShape[2]*r.outShape[3]*r.outShape[4],m=r.outShape[3]*r.outShape[4],P=r.outShape[4],D=0;D<r.batchSize;++D)for(var N=D*R,B=D*n.strides[0],z=0;z<r.inChannels;++z)for(var V=0;V<r.outDepth;++V){for(var Z=V*i-v,K=Z;K<0;)K+=u;for(var ne=Math.min(r.inDepth,f+Z),J=N+V*k,$=0;$<r.outHeight;++$){for(var Y=$*a-x,ee=Y;ee<0;)ee+=l;for(var he=Math.min(r.inHeight,d+Y),me=J+$*m,be=0;be<r.outWidth;++be){for(var Se=be*s-w,Ae=Se;Ae<0;)Ae+=c;for(var Pe=Math.min(r.inWidth,p+Se),$e=me+be*P,et=y,Qe=0,it=0,ze=K;ze<ne;ze+=u){for(var Ke=B+ze*n.strides[1],qe=ee;qe<he;qe+=l){for(var pt=Ke+qe*n.strides[2],Oe=Ae;Oe<Pe;Oe+=c){var vt=b[pt+Oe*n.strides[3]+z];if(o==="max"&&vt>et?et=vt:o==="avg"&&(Qe+=vt,it++),isNaN(et))break}if(isNaN(et))break}if(isNaN(et))break}S[$e+z]=o==="avg"?Qe/it:et}}}return E.toTensor()},t.prototype.avgPool3d=function(n,r){return ve(n,"avgPool3d"),this.pool3d(n,r,"avg").toFloat()},t.prototype.avgPool3dBackprop=function(n,r,o){ve([n,r],"avgPool3dBackprop");for(var i=o.strideDepth,a=o.strideHeight,s=o.strideWidth,u=o.filterDepth,l=o.filterHeight,c=o.filterWidth,f=o.dilationDepth,d=o.dilationHeight,p=o.dilationWidth,v=o.effectiveFilterDepth,x=o.effectiveFilterHeight,w=o.effectiveFilterWidth,y=v-1-o.padInfo.front,b=w-1-o.padInfo.left,E=x-1-o.padInfo.top,S=ot(r.shape,"float32"),R=1/(u*l*c),k=this.bufferSync(n),m=0;m<o.batchSize;++m)for(var P=0;P<o.inChannels;++P)for(var D=0;D<o.inDepth;++D)for(var N=0;N<o.inHeight;++N)for(var B=0;B<o.inWidth;++B){for(var z=D-y,V=N-E,Z=B-b,K=0,ne=0;ne<v;ne+=f){var J=(z+ne)/i;if(!(J<0||J>=o.outDepth||Math.floor(J)!==J))for(var $=0;$<x;$+=d){var Y=(V+$)/a;if(!(Y<0||Y>=o.outHeight||Math.floor(Y)!==Y))for(var ee=0;ee<w;ee+=p){var he=(Z+ee)/s;he<0||he>=o.outWidth||Math.floor(he)!==he||(K+=k.get(m,J,Y,he,P))}}}S.set(K*R,m,D,N,B,P)}return S.toTensor()},t.prototype.maxPool3d=function(n,r){return ve(n,"maxPool3d"),this.pool3d(n,r,"max").toFloat()},t.prototype.maxPool3dPositions=function(n,r){for(var o=ot(r.outShape,"int32"),i=r.strideDepth,a=r.strideHeight,s=r.strideWidth,u=r.dilationDepth,l=r.dilationHeight,c=r.dilationWidth,f=r.effectiveFilterDepth,d=r.effectiveFilterHeight,p=r.effectiveFilterWidth,v=r.padInfo.front,x=r.padInfo.top,w=r.padInfo.left,y=this.bufferSync(n),b=0;b<r.batchSize;++b)for(var E=0;E<r.inChannels;++E)for(var S=0;S<r.outDepth;++S){for(var R=S*i-v,k=R;k<0;)k+=u;for(var m=Math.min(r.inDepth,f+R),P=0;P<r.outHeight;++P){for(var D=P*a-x,N=D;N<0;)N+=l;for(var B=Math.min(r.inHeight,d+D),z=0;z<r.outWidth;++z){for(var V=z*s-w,Z=V;Z<0;)Z+=c;for(var K=Math.min(r.inWidth,p+V),ne=Number.NEGATIVE_INFINITY,J=-1,$=k;$<m;$+=u)for(var Y=$-R,ee=N;ee<B;ee+=l)for(var he=ee-D,me=Z;me<K;me+=c){var be=me-V,Se=y.get(b,$,ee,me,E);Se>=ne&&(ne=Se,J=Y*d*p+he*d+be)}o.set(J,b,S,P,z,E)}}}return o.toTensor()},t.prototype.maxPool3dBackprop=function(n,r,o,i){ve([r,o],"maxPool3dBackprop");for(var a=this.maxPool3dPositions(r,i),s=i.strideDepth,u=i.strideHeight,l=i.strideWidth,c=i.dilationDepth,f=i.dilationHeight,d=i.dilationWidth,p=i.effectiveFilterDepth,v=i.effectiveFilterHeight,x=i.effectiveFilterWidth,w=p-1-i.padInfo.front,y=x-1-i.padInfo.left,b=v-1-i.padInfo.top,E=ot(r.shape,"float32"),S=this.bufferSync(a),R=this.bufferSync(n),k=0;k<i.batchSize;++k)for(var m=0;m<i.inChannels;++m)for(var P=0;P<i.inDepth;++P)for(var D=0;D<i.inHeight;++D)for(var N=0;N<i.inWidth;++N){for(var B=P-w,z=D-b,V=N-y,Z=0,K=0;K<p;K+=c){var ne=(B+K)/s;if(!(ne<0||ne>=i.outDepth||Math.floor(ne)!==ne))for(var J=0;J<v;J+=f){var $=(z+J)/u;if(!($<0||$>=i.outHeight||Math.floor($)!==$))for(var Y=0;Y<x;Y+=d){var ee=(V+Y)/l;if(!(ee<0||ee>=i.outWidth||Math.floor(ee)!==ee)){var he=p*v*x-1-S.get(k,ne,$,ee,m)===K*v*x+J*x+Y?1:0;he!==0&&(Z+=R.get(k,ne,$,ee,m)*he)}}}}E.set(Z,k,P,D,N,m)}return E.toTensor()},t.prototype.cast=function(n,r){return GS(n,r,this)},t.prototype.reshape=function(n,r){return Um(n,r)},t.prototype.avgPool=function(n,r){return ve(n,"avgPool"),this.pool(n,r,"avg").toFloat()},t.prototype.resizeBilinear=function(n,r,o,i){ve(n,"resizeBilinear");for(var a=n.shape,s=a[0],u=a[1],l=a[2],c=a[3],f=this.readSync(n.dataId),d=new Float32Array(Fe([s,r,o,c])),p=[i&&r>1?u-1:u,i&&o>1?l-1:l],v=[i&&r>1?r-1:r,i&&o>1?o-1:o],x=0,w=p[0]/v[0],y=p[1]/v[1],b=0;b<s;b++)for(var E=0;E<r;E++)for(var S=w*E,R=Math.floor(S),k=S-R,m=Math.min(u-1,Math.ceil(S)),P=b*n.strides[0]+R*n.strides[1],D=b*n.strides[0]+m*n.strides[1],N=0;N<o;N++)for(var B=y*N,z=Math.floor(B),V=B-z,Z=Math.min(l-1,Math.ceil(B)),K=P+z*n.strides[2],ne=D+z*n.strides[2],J=P+Z*n.strides[2],$=D+Z*n.strides[2],Y=0;Y<c;Y++){var ee=f[K+Y],he=f[ne+Y],me=ee+(f[J+Y]-ee)*V,be=me+(he+(f[$+Y]-he)*V-me)*k;d[x++]=be}return Wn(d,[s,r,o,c])},t.prototype.resizeBilinearBackprop=function(n,r,o){ve([n,r],"resizeBilinearBackprop");for(var i=r.shape,a=i[0],s=i[1],u=i[2],l=i[3],c=n.shape,f=c[1],d=c[2],p=new Float32Array(a*s*u*l),v=[o&&f>1?s-1:s,o&&d>1?u-1:u],x=[o&&f>1?f-1:f,o&&d>1?d-1:d],w=v[0]/x[0],y=v[1]/x[1],b=this.readSync(n.dataId),E=0,S=0;S<a;S++)for(var R=S*r.strides[0],k=0;k<f;k++)for(var m=k*w,P=Math.floor(m),D=Math.min(Math.ceil(m),s-1),N=R+P*r.strides[1],B=R+D*r.strides[1],z=m-P,V=1-z,Z=0;Z<d;Z++)for(var K=Z*y,ne=Math.floor(K),J=Math.min(Math.ceil(K),u-1),$=K-ne,Y=1-$,ee=N+ne*r.strides[2],he=N+J*r.strides[2],me=B+ne*r.strides[2],be=B+J*r.strides[2],Se=V*Y,Ae=V*$,Pe=z*Y,$e=z*$,et=0;et<l;et++){var Qe=b[E++];p[ee+et]+=Qe*Se,p[he+et]+=Qe*Ae,p[me+et]+=Qe*Pe,p[be+et]+=Qe*$e}return gr(p,[a,u,s,l],r.dtype)},t.prototype.resizeNearestNeighbor=function(n,r,o,i){ve(n,"resizeNearestNeighbor");for(var a=n.shape,s=a[0],u=a[1],l=a[2],c=a[3],f=this.readSync(n.dataId),d=new Float32Array(s*r*o*c),p=[i&&r>1?u-1:u,i&&o>1?l-1:l],v=[i&&r>1?r-1:r,i&&o>1?o-1:o],x=p[0]/v[0],w=p[1]/v[1],y=0,b=0;b<s;b++)for(var E=b*n.strides[0],S=0;S<r;S++)for(var R=x*S,k=E+Math.min(u-1,i?Math.round(R):Math.floor(R))*n.strides[1],m=0;m<o;m++)for(var P=w*m,D=k+Math.min(l-1,i?Math.round(P):Math.floor(P))*n.strides[2],N=0;N<c;N++){var B=f[D+N];d[y++]=B}return Wn(d,[s,r,o,c],n.dtype)},t.prototype.resizeNearestNeighborBackprop=function(n,r,o){ve([n,r],"resizeNearestNeighborBackprop");for(var i=r.shape,a=i[0],s=i[1],u=i[2],l=i[3],c=n.shape,f=c[1],d=c[2],p=new Float32Array(a*s*u*l),v=this.readSync(n.dataId),x=[o&&f>1?s-1:s,o&&d>1?u-1:u],w=[o&&f>1?f-1:f,o&&d>1?d-1:d],y=x[0]/w[0],b=x[1]/w[1],E=1/y,S=1/b,R=2*Math.ceil(E)+2,k=2*Math.ceil(S)+2,m=0;m<a;m++)for(var P=m*r.strides[0],D=0;D<s;D++)for(var N=P+D*r.strides[1],B=Math.floor(D*E),z=Math.floor(B-R/2),V=0;V<u;V++)for(var Z=N+V*r.strides[2],K=Math.floor(V*S),ne=Math.floor(K-k/2),J=0;J<l;J++){for(var $=0,Y=0;Y<R;Y++){var ee=Y+z;if(!(ee<0||ee>=f)){var he=P+ee*n.strides[1],me=ee*y;if(D===Math.min(s-1,o?Math.round(me):Math.floor(me)))for(var be=0;be<k;be++){var Se=be+ne;if(!(Se<0||Se>=d)){var Ae=he+Se*n.strides[2],Pe=Se*b;V===Math.min(u-1,o?Math.round(Pe):Math.floor(Pe))&&($+=v[Ae+J])}}}}p[Z+J]=$}return gr(p,r.shape,r.dtype)},t.prototype.batchNormalization=function(n,r,o,i,a,s){ve([n,r,o,a,s],"batchNorm");for(var u=this.readSync(n.dataId),l=this.readSync(r.dataId),c=this.readSync(o.dataId),f=a?this.readSync(a.dataId):new Float32Array([1]),d=s?this.readSync(s.dataId):new Float32Array([0]),p=new Float32Array(u.length),v=d.length,x=f.length,w=c.length,y=l.length,b=0,E=0,S=0,R=0,k=0;k<u.length;++k)p[k]=d[b++]+(u[k]-l[E++])*f[S++]/Math.sqrt(c[R++]+i),b>=v&&(b=0),E>=y&&(E=0),S>=x&&(S=0),R>=w&&(R=0);return gr(p,n.shape)},t.prototype.localResponseNormalization4D=function(n,r,o,i,a){ve(n,"localResponseNormalization4D");var s=n.shape[3],u=s-1,l=this.readSync(n.dataId),c=n.size,f=new Float32Array(c);function d(w){for(var y=w%s,b=w-y+Math.max(0,y-r),E=w-y+Math.min(y+r,u),S=0;b<=E;b++){var R=l[b];S+=R*R}return S}for(var p=0;p<c;p++){var v=d(p),x=l[p]*Math.pow(o+i*v,-a);f[p]=x}return gr(f,n.shape)},t.prototype.LRNGrad=function(n,r,o,i,a,s,u){ve(n,"LRNGrad");for(var l=n.shape[3],c=this.readSync(n.dataId),f=this.readSync(r.dataId),d=this.readSync(o.dataId),p=new Float32Array(n.size),v=n.size,x=0;x<v;x++){for(var w=x%l,y=x-w+Math.max(0,w-i),b=x-w+Math.min(l,w+i+1),E=0,S=y;S<b;S++)E+=Math.pow(f[S],2);for(E=s*E+a,S=y;S<b;S++){var R=-2*s*u*f[S]*d[x]/E;x===S&&(R+=Math.pow(E,-u)),R*=c[x],p[S]+=R}}return gr(p,n.shape)},t.prototype.multinomial=function(n,r,o,i){ve(n,"multinomial");for(var a=r?n:bi(n),s=a.shape[0],u=a.shape[1],l=Wt([s,o],"int32"),c=this.readSync(l.dataId),f=this.readSync(a.dataId),d=0;d<s;++d){var p=d*u,v=new Float32Array(u-1);v[0]=f[p];for(var x=1;x<v.length;++x)v[x]=v[x-1]+f[p+x];for(var w=dh(i.toString()),y=d*o,b=0;b<o;++b){var E=w();c[y+b]=v.length;for(var S=0;S<v.length;S++)if(E<v[S]){c[y+b]=S;break}}}return l},t.prototype.oneHot=function(n,r,o,i){ve(n,"oneHot");var a=new Float32Array(n.size*r);a.fill(i);for(var s=this.readSync(n.dataId),u=0;u<n.size;++u)s[u]>=0&&s[u]<r&&(a[u*r+s[u]]=o);return oa(a,[n.size,r],"int32")},t.prototype.nonMaxSuppression=function(n,r,o,i,a){return ve(n,"nonMaxSuppression"),Cy(this.readSync(n.dataId),this.readSync(r.dataId),o,i,a)},t.prototype.fft=function(n){return this.fftBatch(n,!1)},t.prototype.ifft=function(n){return this.fftBatch(n,!0)},t.prototype.fftBatch=function(n,r){for(var o=n.shape[0],i=n.shape[1],a=ot(n.shape,"float32"),s=ot(n.shape,"float32"),u=Gr(n).as2D(o,i),l=Mo(n).as2D(o,i),c=0;c<o;c++)for(var f=u.slice([c,0],[1,i]),d=l.slice([c,0],[1,i]),p=Bn(f,d),v=this.readSync(this.fftImpl(p,r).dataId),x=0;x<i;x++){var w=gw(v,x);a.values[c*i+x]=w.real,s.values[c*i+x]=w.imag}return Bn(a.toTensor(),s.toTensor()).as2D(o,i)},t.prototype.fftImpl=function(n,r){var o=n.as1D(),i=o.size;if(this.isExponentOf2(i)){var a=this.fftRadix2(o,i,r).as2D(n.shape[0],n.shape[1]);return r&&(a=Bn(Gr(a).div(Ee(i)),Mo(a).div(Ee(i)))),a}var s=this.readSync(n.dataId),u=function(l){for(var c=new Float32Array(l.length/2),f=new Float32Array(l.length/2),d=0;d<l.length;d+=2)c[d/2]=l[d],f[d/2]=l[d+1];return{real:c,imag:f}}(this.fourierTransformByMatmul(s,i,r));return Bn(u.real,u.imag).as2D(n.shape[0],n.shape[1])},t.prototype.isExponentOf2=function(n){return(n&n-1)==0},t.prototype.fftRadix2=function(n,r,o){if(r===1)return n;var i=this.readSync(n.dataId),a=r/2,s=function(y){for(var b=Math.ceil(y.length/4),E=new Float32Array(b),S=new Float32Array(b),R=0;R<y.length;R+=4)E[Math.floor(R/4)]=y[R],S[Math.floor(R/4)]=y[R+1];return{real:E,imag:S}}(i),u=Bn(s.real,s.imag).as1D(),l=function(y){for(var b=Math.floor(y.length/4),E=new Float32Array(b),S=new Float32Array(b),R=2;R<y.length;R+=4)E[Math.floor(R/4)]=y[R],S[Math.floor(R/4)]=y[R+1];return{real:E,imag:S}}(i),c=Bn(l.real,l.imag).as1D();u=this.fftRadix2(u,a,o),c=this.fftRadix2(c,a,o);var f=function(y,b){for(var E=new Float32Array(y/2),S=new Float32Array(y/2),R=0;R<Math.ceil(y/2);R++){var k=(b?2:-2)*Math.PI*(R/y);E[R]=Math.cos(k),S[R]=Math.sin(k)}return{real:E,imag:S}}(r,o),d=Bn(f.real,f.imag).mul(c),p=u.add(d),v=u.sub(d),x=Gr(p).concat(Gr(v)),w=Mo(p).concat(Mo(v));return Bn(x,w).as1D()},t.prototype.fourierTransformByMatmul=function(n,r,o){for(var i=new Float32Array(2*r),a=0;a<r;a++){for(var s=0,u=0,l=0;l<r;l++){var c=P4(a*l,r,o),f=gw(n,l);s+=f.real*c.real-f.imag*c.imag,u+=f.real*c.imag+f.imag*c.real}o&&(s/=r,u/=r),A4(i,s,u,a)}return i},t.prototype.depthToSpace=function(n,r,o){M(o==="NHWC",function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+o}),M(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});for(var i=n.shape[0],a=n.shape[1],s=n.shape[2],u=n.shape[3],l=a*r,c=s*r,f=u/(r*r),d=this.readSync(n.dataId),p=new Float32Array(i*l*c*f),v=0,x=0;x<i;++x)for(var w=0;w<l;++w)for(var y=Math.floor(w/r),b=w%r,E=0;E<c;++E)for(var S=Math.floor(E/r),R=(b*r+E%r)*f,k=0;k<f;++k){var m=k+R+u*(S+s*(y+a*x));p[v++]=d[m]}return gr(p,[i,l,c,f])},t.prototype.broadcastedBinaryOp=function(n,r,o,i){var a=ht(n.shape,r.shape),s=ot(a,o),u=this.readSync(n.dataId),l=this.readSync(r.dataId),c=Gi(n.shape,a),f=Gi(r.shape,a),d=s.values;if(c.length+f.length===0)for(var p=0;p<d.length;++p)d[p]=i(u[p%u.length],l[p%l.length]);else{var v=this.bufferSync(n),x=this.bufferSync(r),w=function(y){var b=s.indexToLoc(y),E=b.slice(-n.rank);c.forEach(function(m){return E[m]=0});var S=v.locToIndex(E),R=b.slice(-r.rank);f.forEach(function(m){return R[m]=0});var k=x.locToIndex(R);d[y]=i(u[S],l[k])};for(p=0;p<d.length;++p)w(p)}return s.toTensor()},t.prototype.broadcastedBinaryComplexOp=function(n,r,o){var i=ht(n.shape,r.shape),a=ot(i,"float32"),s=ot(i,"float32"),u=this.readSync(n.dataId),l=this.readSync(r.dataId),c=Gi(n.shape,i),f=Gi(r.shape,i),d=a.values,p=s.values;if(c.length+f.length===0)for(var v=0;v<d.length;v++){var x=v%u.length,w=v%l.length,y=o(u[2*x],u[2*x+1],l[2*w],l[2*w+1]);d[v]=y.real,p[v]=y.imag}else{var b=this.bufferSync(this.data.get(n.dataId).complexTensors.real),E=this.bufferSync(this.data.get(r.dataId).complexTensors.real),S=function(R){var k=a.indexToLoc(R),m=k.slice(-n.rank);c.forEach(function(z){return m[z]=0});var P=b.locToIndex(m),D=k.slice(-r.rank);f.forEach(function(z){return D[z]=0});var N=E.locToIndex(D),B=o(u[2*P],u[2*P+1],l[2*N],l[2*N+1]);d[R]=B.real,p[R]=B.imag};for(v=0;v<d.length;v++)S(v)}return this.complex(a.toTensor(),s.toTensor())},t.prototype.split=function(n,r,o){return XS(n,r,o)},t.prototype.dispose=function(){},t.prototype.floatPrecision=function(){return 32},t.prototype.epsilon=function(){return 1e-7},t.prototype.cropAndResize=function(n,r,o,i,a,s){for(var u=n.shape,l=u[0],c=u[1],f=u[2],d=u[3],p=r.shape[0],v=i[0],x=i[1],w=ot([p,v,x,d],"float32"),y=this.readSync(r.dataId),b=this.readSync(o.dataId),E=this.readSync(n.dataId),S=n.strides,R=w.strides,k=0;k<p;k++){var m=4*k,P=y[m],D=y[m+1],N=y[m+2],B=y[m+3],z=b[k];if(!(z>=l))for(var V=v>1?(N-P)*(c-1)/(v-1):0,Z=x>1?(B-D)*(f-1)/(x-1):0,K=0;K<v;K++){var ne=v>1?P*(c-1)+K*V:.5*(P+N)*(c-1);if(ne<0||ne>c-1)for(var J=0;J<x;J++)for(var $=0;$<d;$++){var Y=$+J*R[2]+K*R[1]+k*R[0];w.values[Y]=s}else if(a==="bilinear"){var ee=Math.floor(ne),he=Math.ceil(ne),me=ne-ee;for(J=0;J<x;J++)if((ze=x>1?D*(f-1)+J*Z:.5*(D+B)*(f-1))<0||ze>f-1)for($=0;$<d;$++)Y=$+J*R[2]+K*R[1]+k*R[0],w.values[Y]=s;else{var be=Math.floor(ze),Se=Math.ceil(ze),Ae=ze-be;for($=0;$<d;$++){var Pe=E[Y=$+be*S[2]+ee*S[1]+z*S[0]],$e=E[Y=$+Se*S[2]+ee*S[1]+z*S[0]],et=E[Y=$+be*S[2]+he*S[1]+z*S[0]],Qe=Pe+($e-Pe)*Ae,it=et+(E[Y=$+Se*S[2]+he*S[1]+z*S[0]]-et)*Ae;Y=$+J*R[2]+K*R[1]+k*R[0],w.values[Y]=Qe+(it-Qe)*me}}}else for(J=0;J<x;++J){var ze;if((ze=x>1?D*(f-1)+J*Z:.5*(D+B)*(f-1))<0||ze>f-1)for($=0;$<d;$++)Y=$+J*R[2]+K*R[1]+k*R[0],w.values[Y]=s;else{var Ke=Math.round(ze),qe=Math.round(ne);for($=0;$<d;$++){var pt=$+Ke*S[2]+qe*S[1]+z*S[0],Oe=$+J*R[2]+K*R[1]+k*R[0];w.values[Oe]=E[pt]}}}}}return w.toTensor()},t.prototype.sparseToDense=function(n,r,o,i){var a=Sd(0,n,o),s=a.sliceRank,u=a.numUpdates,l=a.sliceSize,c=a.strides,f=a.outputSize;return this.scatter(n,r,o,f,l,u,s,c,i,!1)},t.prototype.gatherND=function(n,r){var o=r.shape,i=o[o.length-1],a=jS(n,r),s=a[0],u=a[1],l=a[2],c=a[3];if(u===0)return Wn([],s,n.dtype);for(var f=new Vl([u,l],n.dtype),d=this.readSync(r.dataId),p=this.readSync(n.dataId),v=0;v<u;v++){for(var x=[],w=0,y=0;y<i;y++){var b=d[v*i+y];w+=b*c[y],x.push(b)}if(w<0||w>=n.size/l)throw new Error("Invalid indices: "+x+" does not index into "+n.shape);for(var E=0;E<l;E++)f.values[v*l+E]=p[w*l+E]}return f.toTensor().reshape(s)},t.prototype.scatterND=function(n,r,o){var i=Sd(0,n,o),a=i.sliceRank,s=i.numUpdates,u=i.sliceSize,l=i.strides,c=i.outputSize,f=Ee(0);return this.scatter(n,r,o,c,u,s,a,l,f,!0)},t.prototype.fill=function(n,r,o){var i=pd(o=o||dc(r),Fe(n));return i.fill(r),q.makeTensor(i,n,o,this)},t.prototype.onesLike=function(n){if(n.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(n.shape,1,n.dtype)},t.prototype.zerosLike=function(n){var r=pd(n.dtype,Fe(n.shape));return this.makeOutput(r,n.shape,n.dtype)},t.prototype.linspace=function(n,r,o){return qS(n,r,o)},t.prototype.scatter=function(n,r,o,i,a,s,u,l,c,f){var d=[i/a,a],p=this.readSync(n.dataId),v=this.readSync(r.dataId);if(i===0)return Wn([],o,r.dtype);var x=new Vl(d,r.dtype);x.values.fill(this.readSync(c.dataId)[0]);for(var w=0;w<s;w++){for(var y=[],b=0,E=0;E<u;E++){var S=p[w*u+E];y.push(S),b+=S*l[E]}if(b<0||b>=i/a)throw new Error("Invalid indices: "+y+" does not index into "+o);for(var R=0;R<a;R++)f?x.values[b*a+R]+=v[w*a+R]:x.values[b*a+R]=r.rank===0?v[0]:v[w*a+R]}return x.toTensor().reshape(o)},t}(HS);q.registerBackend("cpu",function(){return new ZW},1);for(var av=0,jw=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t,i=o.boxes,a=o.scores,s=r,u=s.maxOutputSize,l=s.iouThreshold,c=s.scoreThreshold,f=s.softNmsSigma,d=n;ve(i,"NonMaxSuppressionWithScore");var p=Sy(d.data.get(i.dataId).values,d.data.get(a.dataId).values,u,l,c,f);return[p.selectedIndices,p.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,o=n;ve(r,"square");for(var i=o.data.get(r.dataId).values,a=new Float32Array(i.length),s=0;s<i.length;++s){var u=i[s];a[s]=u*u}return{dataId:o.write(a,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},{kernelName:Kl,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,o=r.a,i=r.b,a=n;ve([o,i],Kl);var s=a.data.get(o.dataId).values,u=a.data.get(i.dataId).values,l=function(d,p,v,x,w,y){var b=ht(d,p),E=b.length,S=Uo(b),R=Hl(w,Fe(b)),k=d.length,m=p.length,P=Uo(d),D=Uo(p),N=Gi(d,b),B=Gi(p,b);if(N.length+B.length===0)for(var z=0;z<R.length;++z)R[z]=y(v[z%v.length],x[z%x.length]);else{var V=function(Z){var K=lM(Z,E,S),ne=K.slice(-k);N.forEach(function(ee){return ne[ee]=0});var J=uw(ne,k,P),$=K.slice(-m);B.forEach(function(ee){return $[ee]=0});var Y=uw($,m,D);R[Z]=y(v[J],x[Y])};for(z=0;z<R.length;++z)V(z)}return[R,b]}(o.shape,i.shape,s,u,o.dtype,function(d,p){var v=d-p;return v*v}),c=l[0],f=l[1];return{dataId:a.write(c,f,o.dtype),shape:f,dtype:o.dtype}}}];av<jw.length;av++)yS(jw[av]);var Es,ez=function(e){this.variableNames=["A"];var t=Xn(),n=e[0],r=e[1];this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+r+".0, "+n+`.0);

        vec4 values = `+t.texture2D+`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `},tz=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var t=Xn(),n=e[0],r=e[1];this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(`+r+".0, "+n+`.0);
            vec4 values = `+t.texture2D+`(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        `+t.output+` = result;
      }
    `};for(var sv=0,Ww=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.pixels,i=r.numChannels,a=typeof HTMLVideoElement<"u"&&o instanceof HTMLVideoElement,s=typeof HTMLImageElement<"u"&&o instanceof HTMLImageElement,u=a?[o.videoWidth,o.videoHeight]:[o.width,o.height],l=u[0],c=u[1],f=[c,l],d=[c,l,i];(s||a)&&(Es==null&&(Es=document.createElement("canvas").getContext("2d")),Es.canvas.width=l,Es.canvas.height=c,Es.drawImage(o,0,0,l,c),o=Es.canvas);var p=n.makeTensorInfo(f,"int32");n.texData.get(p.dataId).usage=Dr.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(p.dataId),o);var v=ce().getBool("WEBGL_PACK")?new tz(d):new ez(d),x=n.runWebGLProgram(v,[p],"int32");return n.disposeData(p.dataId),x}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;yd("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var o=t,i=o.boxes,a=o.scores,s=r,u=s.maxOutputSize,l=s.iouThreshold,c=s.scoreThreshold,f=s.softNmsSigma,d=n,p=Sy(d.readSync(i.dataId),d.readSync(a.dataId),u,l,c,f);return[p.selectedIndices,p.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,o=n,i=new st(r.shape,"return x * x;");return o.runWebGLProgram(i,[r],r.dtype)}},{kernelName:Kl,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,o=r.a,i=r.b,a=n,s=ce().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ni("return (a - b) * (a - b);",o.shape,i.shape):new Zt("return (a - b) * (a - b);",o.shape,i.shape);return a.compileAndRun(s,[o,i])}}];sv<Ww.length;sv++)yS(Ww[sv]);for(var uv=0,zw=[{kernelName:"Square",gradFunc:function(e,t){var n=t[0];return{x:function(){return e.mul(n.toFloat().mul(2))}}}},{kernelName:Kl,gradFunc:function(e,t){var n=t[0],r=t[1],o=Ee(2);return{a:function(){return Qn(e,Qn(o,_n(n,r)))},b:function(){return Qn(e,Qn(o,_n(r,n)))}}}}];uv<zw.length;uv++)JO(zw[uv]);var nz=function(){function e(){}return e.prototype.fetch=function(t,n){return fetch(t,n)},e.prototype.now=function(){return performance.now()},e.prototype.encode=function(t,n){if(n!=="utf-8"&&n!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got "+n);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)},e.prototype.decode=function(t,n){return new TextDecoder(n).decode(t)},e}();ce().get("IS_BROWSER")&&ce().setPlatform("browser",new nz);var lv,rz=function(){return require("node-fetch")},oz=function(){function e(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return e.prototype.fetch=function(t,n){return ce().global.fetch!=null?ce().global.fetch(t,n):(lv==null&&(lv=rz()),lv(t,n))},e.prototype.now=function(){var t=process.hrtime();return 1e3*t[0]+t[1]/1e6},e.prototype.encode=function(t,n){if(n!=="utf-8"&&n!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got "+n);return this.textEncoder.encode(t)},e.prototype.decode=function(t,n){return t.length===0?"":new this.util.TextDecoder(n).decode(t)},e}();ce().get("IS_NODE")&&ce().setPlatform("node",new oz);var Vm={float32:4,int32:4,uint16:2,uint8:1,bool:1},Nd=4;function z_(e,t){for(var n={},r=0,o=function(s){var u=s.name,l=s.dtype,c=s.shape,f=Fe(c),d=void 0;if("quantization"in s){var p=s.quantization;if(p.dtype!=="uint8"&&p.dtype!=="uint16")throw new Error("Weight "+s.name+" has unknown quantization dtype "+p.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var v=Vm[p.dtype],x=e.slice(r,r+f*v),w=p.dtype==="uint8"?new Uint8Array(x):new Uint16Array(x);if(l==="float32")d=Float32Array.from(w,function(k){return k*p.scale+p.min});else{if(l!=="int32")throw new Error("Unsupported dtype in weight '"+u+"': "+l);d=Int32Array.from(w,function(k){return Math.round(k*p.scale+p.min)})}r+=f*v}else if(l==="string"){var y=Fe(s.shape);d=[];for(var b=0;b<y;b++){var E=new Uint32Array(e.slice(r,r+Nd))[0];r+=Nd;var S=new Uint8Array(e.slice(r,r+E));d.push(S),r+=E}}else{var R=Vm[l];if(x=e.slice(r,r+f*R),l==="float32")d=new Float32Array(x);else if(l==="int32")d=new Int32Array(x);else{if(l!=="bool")throw new Error("Unsupported dtype in weight '"+u+"': "+l);d=new Uint8Array(x)}r+=f*R}n[u]=Wn(d,c,l)},i=0,a=t;i<a.length;i++)o(a[i]);return n}function iz(e){if(e===null)throw new Error("Invalid input value: "+JSON.stringify(e));var t=0,n=[];e.forEach(function(i){if(t+=i.byteLength,n.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+i.constructor.name)});var r=new Uint8Array(t),o=0;return n.forEach(function(i){r.set(new Uint8Array(i.buffer),o),o+=i.byteLength}),r.buffer}var Gm=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function Uw(e){return Gm?Buffer.byteLength(e):new Blob([e]).size}function $y(e){var t=0;e.forEach(function(o){t+=o.byteLength});var n=new Uint8Array(t),r=0;return e.forEach(function(o){n.set(new Uint8Array(o),r),r+=o.byteLength}),n.buffer}function $w(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function xc(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:e.modelTopology==null?0:Uw(JSON.stringify(e.modelTopology)),weightSpecsBytes:e.weightSpecs==null?0:Uw(JSON.stringify(e.weightSpecs)),weightDataBytes:e.weightData==null?0:e.weightData.byteLength}}var Nr=function(){function e(){this.saveRouters=[],this.loadRouters=[]}return e.getInstance=function(){return e.instance==null&&(e.instance=new e),e.instance},e.registerSaveRouter=function(t){e.getInstance().saveRouters.push(t)},e.registerLoadRouter=function(t){e.getInstance().loadRouters.push(t)},e.getSaveHandlers=function(t){return e.getHandlers(t,"save")},e.getLoadHandlers=function(t,n){return e.getHandlers(t,"load",n)},e.getHandlers=function(t,n,r){var o=[];return(n==="load"?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach(function(i){var a=i(t,r);a!==null&&o.push(a)}),o},e}(),eu="://",ia=function(){function e(){this.managers={}}return e.getInstance=function(){return e.instance==null&&(e.instance=new e),e.instance},e.registerManager=function(t,n){M(t!=null,function(){return"scheme must not be undefined or null."}),t.endsWith(eu)&&(t=t.slice(0,t.indexOf(eu))),M(t.length>0,function(){return"scheme must not be an empty string."});var r=e.getInstance();M(r.managers[t]==null,function(){return"A model store manager is already registered for scheme '"+t+"'."}),r.managers[t]=n},e.getManager=function(t){var n=this.getInstance().managers[t];if(n==null)throw new Error("Cannot find model manager for scheme '"+t+"'");return n},e.getSchemes=function(){return Object.keys(this.getInstance().managers)},e}();function Nf(e){if(e.indexOf(eu)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+ia.getSchemes().join(","));return{scheme:e.split(eu)[0],path:e.split(eu)[1]}}function Hw(e,t,n){return n===void 0&&(n=!1),Ie(this,void 0,void 0,function(){var r,o,i,a,s,u,l,c,f;return De(this,function(d){switch(d.label){case 0:return M(e!==t,function(){return"Old path and new path are the same: '"+e+"'"}),M((r=Nr.getLoadHandlers(e)).length>0,function(){return"Copying failed because no load handler is found for source URL "+e+"."}),M(r.length<2,function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+e+"."}),o=r[0],M((i=Nr.getSaveHandlers(t)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+t+"."}),M(i.length<2,function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+t+"."}),a=i[0],s=Nf(e).scheme,u=Nf(e).path,l=s===Nf(e).scheme,[4,o.load()];case 1:return c=d.sent(),n&&l?[4,ia.getManager(s).removeModel(u)]:[3,3];case 2:d.sent(),d.label=3;case 3:return[4,a.save(c)];case 4:return f=d.sent(),!n||l?[3,6]:[4,ia.getManager(s).removeModel(u)];case 5:d.sent(),d.label=6;case 6:return[2,f.modelArtifactsInfo]}})})}var $a="models_store",qi="model_info_store";function U_(){if(!ce().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e=window||self,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(t==null)throw new Error("The current browser does not appear to support IndexedDB.");return t}function qm(e){var t=e.result;t.createObjectStore($a,{keyPath:"modelPath"}),t.createObjectStore(qi,{keyPath:"modelPath"})}var tu=function(){function e(t){if(this.indexedDB=U_(),t==null||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return e.prototype.save=function(t){return Ie(this,void 0,void 0,function(){return De(this,function(n){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,t)]})})},e.prototype.load=function(){return Ie(this,void 0,void 0,function(){return De(this,function(t){return[2,this.databaseAction(this.modelPath)]})})},e.prototype.databaseAction=function(t,n){var r=this;return new Promise(function(o,i){var a=r.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return qm(a)},a.onsuccess=function(){var s=a.result;if(n==null){var u=s.transaction($a,"readonly"),l=u.objectStore($a).get(r.modelPath);l.onsuccess=function(){if(l.result==null)return s.close(),i(new Error("Cannot find model with path '"+r.modelPath+"' in IndexedDB."));o(l.result.modelArtifacts)},l.onerror=function(x){return s.close(),i(l.error)},u.oncomplete=function(){return s.close()}}else{var c,f=xc(n),d=s.transaction(qi,"readwrite"),p=d.objectStore(qi),v=p.put({modelPath:r.modelPath,modelArtifactsInfo:f});v.onsuccess=function(){var x=(c=s.transaction($a,"readwrite")).objectStore($a).put({modelPath:r.modelPath,modelArtifacts:n,modelArtifactsInfo:f});x.onsuccess=function(){return o({modelArtifactsInfo:f})},x.onerror=function(w){var y=(p=d.objectStore(qi)).delete(r.modelPath);y.onsuccess=function(){return s.close(),i(x.error)},y.onerror=function(b){return s.close(),i(x.error)}}},v.onerror=function(x){return s.close(),i(v.error)},d.oncomplete=function(){c==null?s.close():c.oncomplete=function(){return s.close()}}}},a.onerror=function(s){return i(a.error)}})},e.URL_SCHEME="indexeddb://",e}(),Vw=function(e){return ce().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(tu.URL_SCHEME)?(t=e.slice(tu.URL_SCHEME.length),new tu(t)):null;var t};Nr.registerSaveRouter(Vw),Nr.registerLoadRouter(Vw);var az=function(){function e(){this.indexedDB=U_()}return e.prototype.listModels=function(){return Ie(this,void 0,void 0,function(){var t=this;return De(this,function(n){return[2,new Promise(function(r,o){var i=t.indexedDB.open("tensorflowjs",1);i.onupgradeneeded=function(){return qm(i)},i.onsuccess=function(){var a=i.result,s=a.transaction(qi,"readonly"),u=s.objectStore(qi).getAll();u.onsuccess=function(){for(var l={},c=0,f=u.result;c<f.length;c++){var d=f[c];l[d.modelPath]=d.modelArtifactsInfo}r(l)},u.onerror=function(l){return a.close(),o(u.error)},s.oncomplete=function(){return a.close()}},i.onerror=function(a){return o(i.error)}})]})})},e.prototype.removeModel=function(t){return Ie(this,void 0,void 0,function(){var n=this;return De(this,function(r){var o;return t=(o=t).startsWith(tu.URL_SCHEME)?o.slice(tu.URL_SCHEME.length):o,[2,new Promise(function(i,a){var s=n.indexedDB.open("tensorflowjs",1);s.onupgradeneeded=function(){return qm(s)},s.onsuccess=function(){var u,l=s.result,c=l.transaction(qi,"readwrite"),f=c.objectStore(qi),d=f.get(t);d.onsuccess=function(){if(d.result==null)return l.close(),a(new Error("Cannot find model with path '"+t+"' in IndexedDB."));var p=f.delete(t),v=function(){var x=(u=l.transaction($a,"readwrite")).objectStore($a).delete(t);x.onsuccess=function(){return i(d.result.modelArtifactsInfo)},x.onerror=function(w){return a(d.error)}};p.onsuccess=v,p.onerror=function(x){return v(),l.close(),a(d.error)}},d.onerror=function(p){return l.close(),a(d.error)},c.oncomplete=function(){u==null?l.close():u.oncomplete=function(){return l.close()}}},s.onerror=function(u){return a(s.error)}})]})})},e}();if(ce().getBool("IS_BROWSER"))try{ia.registerManager(tu.URL_SCHEME,new az)}catch{}var ii="/",Is="tensorflowjs_models",$_="info",sz="model_topology",uz="weight_specs",lz="weight_data",cz="model_metadata";function H_(e){return{info:[Is,e,$_].join(ii),topology:[Is,e,sz].join(ii),weightSpecs:[Is,e,uz].join(ii),weightData:[Is,e,lz].join(ii),modelMetadata:[Is,e,cz].join(ii)}}function fz(e){var t=e.split(ii);if(t.length<3)throw new Error("Invalid key format: "+e);return t.slice(1,t.length-1).join(ii)}var nu=function(){function e(t){if(!ce().getBool("IS_BROWSER")||typeof window>"u"||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,t==null||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=H_(this.modelPath)}return e.prototype.save=function(t){return Ie(this,void 0,void 0,function(){var n,r,o;return De(this,function(i){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),o=xc(t);try{return this.LS.setItem(this.keys.info,JSON.stringify(o)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(a){if(Gm)return Buffer.from(a).toString("base64");for(var s=new Uint8Array(a),u="",l=0,c=s.length;l<c;l++)u+=String.fromCharCode(s[l]);return btoa(u)}(t.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata})),[2,{modelArtifactsInfo:o}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+o.modelTopologyBytes+", weightSpecsBytes="+o.weightSpecsBytes+", weightDataBytes="+o.weightDataBytes+".")}return[2]})})},e.prototype.load=function(){return Ie(this,void 0,void 0,function(){var t,n,r,o,i,a,s;return De(this,function(u){if((t=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(t.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(n={},(r=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(n.modelTopology=r,(o=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(n.weightSpecs=o,(i=this.LS.getItem(this.keys.modelMetadata))!=null&&(a=JSON.parse(i),n.format=a.format,n.generatedBy=a.generatedBy,n.convertedBy=a.convertedBy,n.userDefinedMetadata=a.userDefinedMetadata),(s=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return n.weightData=function(l){if(Gm){var c=Buffer.from(l,"base64");return c.buffer.slice(c.byteOffset,c.byteOffset+c.byteLength)}for(var f=atob(l),d=new Uint8Array(f.length),p=0;p<f.length;++p)d.set([f.charCodeAt(p)],p);return d.buffer}(s),[2,n]})})},e.URL_SCHEME="localstorage://",e}(),Gw=function(e){return ce().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(nu.URL_SCHEME)?(t=e.slice(nu.URL_SCHEME.length),new nu(t)):null;var t};Nr.registerSaveRouter(Gw),Nr.registerLoadRouter(Gw);var dz=function(){function e(){M(ce().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),M(typeof window>"u"||window.localStorage!==void 0,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return e.prototype.listModels=function(){return Ie(this,void 0,void 0,function(){var t,n,r,o,i,a;return De(this,function(s){for(t={},n=Is+ii,r=ii+$_,o=0;o<this.LS.length;++o)(i=this.LS.key(o)).startsWith(n)&&i.endsWith(r)&&(a=fz(i),t[a]=JSON.parse(this.LS.getItem(i)));return[2,t]})})},e.prototype.removeModel=function(t){return Ie(this,void 0,void 0,function(){var n,r;return De(this,function(o){var i;if(t=(i=t).startsWith(nu.URL_SCHEME)?i.slice(nu.URL_SCHEME.length):i,n=H_(t),this.LS.getItem(n.info)==null)throw new Error("Cannot find model at path '"+t+"'");return r=JSON.parse(this.LS.getItem(n.info)),this.LS.removeItem(n.info),this.LS.removeItem(n.topology),this.LS.removeItem(n.weightSpecs),this.LS.removeItem(n.weightData),[2,r]})})},e}();if(ce().getBool("IS_BROWSER"))try{ia.registerManager(nu.URL_SCHEME,new dz)}catch{}var hz="model",pz=".json",vz=".weights.bin";function qw(e){return new Promise(function(t){return setTimeout(t)}).then(e)}var cv=function(){function e(t){if(!ce().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),t!=null&&t.length!==0||(t=hz),this.modelTopologyFileName=t+pz,this.weightDataFileName=t+vz}return e.prototype.save=function(t){return Ie(this,void 0,void 0,function(){var n,r,o,i,a,s;return De(this,function(u){switch(u.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(n=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return r=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],o={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:r},i=window.URL.createObjectURL(new Blob([JSON.stringify(o)],{type:"application/json"})),(a=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,a.href=i,[4,qw(function(){return a.dispatchEvent(new MouseEvent("click"))})];case 2:return u.sent(),t.weightData==null?[3,4]:((s=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=n,[4,qw(function(){return s.dispatchEvent(new MouseEvent("click"))})]);case 3:u.sent(),u.label=4;case 4:return[2,{modelArtifactsInfo:xc(t)}]}})})},e.URL_SCHEME="downloads://",e}(),mz=function(){function e(t){if(t==null||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+t);this.files=t}return e.prototype.load=function(){return Ie(this,void 0,void 0,function(){var t,n,r=this;return De(this,function(o){return t=this.files[0],n=this.files.slice(1),[2,new Promise(function(i,a){var s=new FileReader;s.onload=function(u){var l=JSON.parse(u.target.result),c=l.modelTopology;if(c!=null){n.length===0&&i({modelTopology:c});var f=l.weightsManifest;if(f!=null){var d;try{d=r.checkManifestAndWeightFiles(f,n)}catch(w){return void a(w)}var p=[],v=[],x=[];f.forEach(function(w){w.paths.forEach(function(y){v.push(y),x.push(null)}),p.push.apply(p,w.weights)}),f.forEach(function(w){w.paths.forEach(function(y){var b=new FileReader;b.onload=function(E){var S=E.target.result,R=v.indexOf(y);x[R]=S,x.indexOf(null)===-1&&i({modelTopology:c,weightSpecs:p,weightData:$y(x),format:l.format,generatedBy:l.generatedBy,convertedBy:l.convertedBy,userDefinedMetadata:l.userDefinedMetadata})},b.onerror=function(E){return a("Failed to weights data from file of path '"+y+"'.")},b.readAsArrayBuffer(d[y])})})}else a(new Error("weightManifest field is missing from file "+t.name))}else a(new Error("modelTopology field is missing from file "+t.name))},s.onerror=function(u){return a("Failed to read model topology and weights manifest JSON from file '"+t.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},s.readAsText(t)})]})})},e.prototype.checkManifestAndWeightFiles=function(t,n){for(var r=[],o=n.map(function(u){return $w(u.name)}),i={},a=0,s=t;a<s.length;a++)s[a].paths.forEach(function(u){var l=$w(u);if(r.indexOf(l)!==-1)throw new Error("Duplicate file basename found in weights manifest: '"+l+"'");if(r.push(l),o.indexOf(l)===-1)throw new Error("Weight file with basename '"+l+"' is not provided.");i[u]=n[o.indexOf(l)]});if(r.length!==n.length)throw new Error("Mismatch in the number of files in weights manifest ("+r.length+") and the number of weight files provided ("+n.length+").");return i},e}();function Kw(e,t,n,r){(function(i){M(i!=null&&Array.isArray(i)&&i.length>0,function(){return"promises must be a none empty array"})})(e),function(i,a){M(i>=0&&i<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+i}),M(a>=0&&a<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+a}),M(a>=i,function(){return"startFraction must be no more than endFraction, but got startFraction "+i+" and endFraction "+a})}(n=n??0,r=r??1);var o=0;return Promise.all(e.map(function(i){return i.then(function(a){var s=n+ ++o/e.length*(r-n);return t(s),a}),i}))}function V_(e,t){return Ie(this,void 0,void 0,function(){var n,r,o,i,a,s,u,l,c;return De(this,function(f){switch(f.label){case 0:return t==null&&(t={}),n=t.fetchFunc==null?ce().platform.fetch:t.fetchFunc,r=e.map(function(d){return n(d,t.requestInit,{isBinary:!0})}),o=0,i=.5,t.onProgress!=null?[3,2]:[4,Promise.all(r)];case 1:return a=f.sent(),[3,4];case 2:return[4,Kw(r,t.onProgress,o,i)];case 3:a=f.sent(),f.label=4;case 4:return s=a.map(function(d){return d.arrayBuffer()}),u=.5,l=1,t.onProgress!=null?[3,6]:[4,Promise.all(s)];case 5:return c=f.sent(),[3,8];case 6:return[4,Kw(s,t.onProgress,u,l)];case 7:c=f.sent(),f.label=8;case 8:return[2,c]}})})}function Xw(e){var t=this;return function(n,r,o){return r===void 0&&(r=""),Ie(t,void 0,void 0,function(){var i,a,s,u,l,c,f,d,p,v;return De(this,function(x){switch(x.label){case 0:if(i=n.map(function(){return!1}),a={},s=o!=null?o.map(function(){return!1}):[],u=[],n.forEach(function(w,y){var b=0;w.weights.forEach(function(E){var S="quantization"in E?E.quantization.dtype:E.dtype,R=Vm[S]*Fe(E.shape),k=function(){i[y]=!0,a[y]==null&&(a[y]=[]),a[y].push({manifestEntry:E,groupOffset:b,sizeBytes:R})};o!=null?o.forEach(function(m,P){m===E.name&&(k(),s[P]=!0)}):k(),u.push(E.name),b+=R})}),!s.every(function(w){return w}))throw l=o.filter(function(w,y){return!s[y]}),new Error("Could not find weights in manifest with names: "+l.join(", ")+`. 
Manifest JSON has weights with names: `+u.join(", ")+".");return c=i.reduce(function(w,y,b){return y&&w.push(b),w},[]),f=[],c.forEach(function(w){n[w].paths.forEach(function(y){var b=r+(r.endsWith("/")?"":"/")+y;f.push(b)})}),[4,e(f)];case 1:return d=x.sent(),p={},v=0,c.forEach(function(w){for(var y=n[w].paths.length,b=0,E=0;E<y;E++)b+=d[v+E].byteLength;for(var S=new ArrayBuffer(b),R=new Uint8Array(S),k=0,m=0;m<y;m++){var P=new Uint8Array(d[v+m]);R.set(P,k),k+=P.byteLength}a[w].forEach(function(D){var N=z_(S.slice(D.groupOffset,D.groupOffset+D.sizeBytes),[D.manifestEntry]);for(var B in N)p[B]=N[B]}),v+=y}),[2,p]}})})}}Nr.registerSaveRouter(function(e){return ce().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(cv.URL_SCHEME)?function(t){return t===void 0&&(t="model"),new cv(t)}(e.slice(cv.URL_SCHEME.length)):null});var G_=function(){function e(t,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,n.fetchFunc!=null?(M(typeof n.fetchFunc=="function",function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=n.fetchFunc):this.fetch=ce().platform.fetch,M(t!=null&&t.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(t)&&M(t.length===2,function(){return"URL paths for http must have a length of 2, (actual length is "+t.length+")."}),this.path=t,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}return e.prototype.save=function(t){return Ie(this,void 0,void 0,function(){var n,r,o,i;return De(this,function(a){switch(a.label){case 0:if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],o={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata,weightsManifest:r},n.body.append("model.json",new Blob([JSON.stringify(o)],{type:"application/json"}),"model.json"),t.weightData!=null&&n.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,n)];case 1:if((i=a.sent()).ok)return[2,{modelArtifactsInfo:xc(t),responses:[i]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+i.status+".")}})})},e.prototype.load=function(){return Ie(this,void 0,void 0,function(){var t,n,r,o,i,a,s,u,l,c,f,d;return De(this,function(p){switch(p.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(t=p.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+t.status+". Please verify this URL points to the model JSON of the model to load.");p.label=2;case 2:return p.trys.push([2,4,,5]),[4,t.json()];case 3:return n=p.sent(),[3,5];case 4:throw p.sent(),r="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 5:if(o=n.modelTopology,i=n.weightsManifest,a=n.generatedBy,s=n.convertedBy,u=n.format,l=n.userDefinedMetadata,o==null&&i==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return i==null?[3,7]:[4,this.loadWeights(i)];case 6:d=p.sent(),c=d[0],f=d[1],p.label=7;case 7:return[2,{modelTopology:o,weightSpecs:c,weightData:f,userDefinedMetadata:l,generatedBy:a,convertedBy:s,format:u}]}})})},e.prototype.loadWeights=function(t){return Ie(this,void 0,void 0,function(){var n,r,o,i,a,s,u,l,c,f,d;return De(this,function(p){switch(p.label){case 0:for(n=Array.isArray(this.path)?this.path[1]:this.path,r=function(v){var x=v.lastIndexOf("/"),w=v.lastIndexOf("?"),y=v.substring(0,x),b=w>x?v.substring(w):"";return[y+"/",b]}(n),o=r[0],i=r[1],a=this.weightPathPrefix||o,s=[],u=0,l=t;u<l.length;u++)c=l[u],s.push.apply(s,c.weights);return f=[],t.forEach(function(v){v.paths.forEach(function(x){f.push(a+x+i)})}),[4,V_(f,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return d=p.sent(),[2,[s,$y(d)]]}})})},e.URL_SCHEME_REGEX=/^https?:\/\//,e}();function Km(e){return e.match(G_.URL_SCHEME_REGEX)!=null}var Yw=function(e,t){return typeof fetch>"u"?null:(Array.isArray(e)?e.every(function(n){return Km(n)}):Km(e))?Xm(e,{onProgress:t}):null};function Xm(e,t){return new G_(e,t)}Nr.registerSaveRouter(Yw),Nr.registerLoadRouter(Yw);var fv=function(){function e(t){this.modelArtifacts=t}return e.prototype.load=function(){return Ie(this,void 0,void 0,function(){return De(this,function(t){return[2,this.modelArtifacts]})})},e}(),gz=function(){function e(t){this.saveHandler=t}return e.prototype.save=function(t){return Ie(this,void 0,void 0,function(){return De(this,function(n){return[2,this.saveHandler(t)]})})},e}(),q_=Object.freeze({browserFiles:function(e){return new mz(e)},browserHTTPRequest:function(e,t){return Xm(e,t)},concatenateArrayBuffers:$y,decodeWeights:z_,encodeWeights:function(e,t){return Ie(this,void 0,void 0,function(){var n,r,o,i,a,s=this;return De(this,function(u){switch(u.label){case 0:for(n=[],r=[],o=Array.isArray(e)?e.map(function(l){return l.name}):Object.keys(e),i=function(l){var c=o[l],f=Array.isArray(e)?e[l].tensor:e[c];if(f.dtype!=="float32"&&f.dtype!=="int32"&&f.dtype!=="bool"&&f.dtype!=="string")throw new Error("Unsupported dtype in weight '"+c+"': "+f.dtype);var d={name:c,shape:f.shape,dtype:f.dtype};if(f.dtype==="string"){var p=new Promise(function(v){return Ie(s,void 0,void 0,function(){var x,w,y,b,E,S,R;return De(this,function(k){switch(k.label){case 0:return[4,f.bytes()];case 1:for(x=k.sent(),w=x.reduce(function(m,P){return m+P.length},0)+Nd*x.length,y=new Uint8Array(w),b=0,E=0;E<x.length;E++)S=x[E],R=new Uint8Array(new Uint32Array([S.length]).buffer),y.set(R,b),b+=Nd,y.set(S,b),b+=S.length;return v(y),[2]}})})});r.push(p)}else r.push(f.data());t!=null&&(d.group=t),n.push(d)},a=0;a<o.length;++a)i(a);return[4,Promise.all(r)];case 1:return[2,{data:iz(u.sent()),specs:n}]}})})},fromMemory:function(e,t,n,r){return arguments.length===1?e.modelTopology!=null||e.weightSpecs!=null?new fv(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new fv({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new fv({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))},getLoadHandlers:function(e,t){return Nr.getLoadHandlers(e,t)},getModelArtifactsInfoForJSON:xc,getSaveHandlers:function(e){return Nr.getSaveHandlers(e)},http:Xm,isHTTPScheme:Km,loadWeights:function(e,t,n,r){return t===void 0&&(t=""),Ie(this,void 0,void 0,function(){return De(this,function(o){return[2,Xw(function(i){return V_(i,{requestInit:r})})(e,t,n)]})})},registerLoadRouter:function(e){return Nr.registerLoadRouter(e)},registerSaveRouter:function(e){return Nr.registerSaveRouter(e)},weightsLoaderFactory:Xw,withSaveHandler:function(e){return new gz(e)},copyModel:function(e,t){return Ie(this,void 0,void 0,function(){return De(this,function(n){return[2,Hw(e,t,!1)]})})},listModels:function(){return Ie(this,void 0,void 0,function(){var e,t,n,r,o,i,a;return De(this,function(s){switch(s.label){case 0:e=ia.getSchemes(),t={},n=0,r=e,s.label=1;case 1:return n<r.length?(o=r[n],[4,ia.getManager(o).listModels()]):[3,4];case 2:for(a in i=s.sent())t[o+eu+a]=i[a];s.label=3;case 3:return n++,[3,1];case 4:return[2,t]}})})},moveModel:function(e,t){return Ie(this,void 0,void 0,function(){return De(this,function(n){return[2,Hw(e,t,!0)]})})},removeModel:function(e){return Ie(this,void 0,void 0,function(){var t;return De(this,function(n){return t=Nf(e),[2,ia.getManager(t.scheme).removeModel(t.path)]})})}}),Cs;H({confusionMatrix_:function(e,t,n){var r=O(e,"labels","confusionMatrix"),o=O(t,"predictions","confusionMatrix");M(n==null||n>0&&Number.isInteger(n),function(){return"If provided, numClasses must be a positive integer, but got "+n}),M(r.rank===1,function(){return"Expected the rank of labels to be 1, but got "+r.rank}),M(o.rank===1,function(){return"Expected the rank of predictions to be 1, but got "+o.rank}),M(r.shape[0]===o.shape[0],function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+o.shape[0]+". Labels and predictions should have the same number of elements."}),M(n>0&&Number.isInteger(n),function(){return"numClasses is required to be a positive integer, but got "+n});var i=Wm(r.asType("int32"),n),a=Wm(o.asType("int32"),n);return i.transpose().matMul(a).asType("int32")}});var yz=H({fromPixels_:function(e,t){if(t===void 0&&(t=3),t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(e==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,o=!1,i=!1,a=!1;if(e.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&e instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement)o=!0;else if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement)i=!0;else{if(e.getContext==null)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name);a=!0}if(o&&o&&e.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(gS("FromPixels",q.backendName)!=null)return q.runKernel("FromPixels",{pixels:e},{numChannels:t});var s,u,l=o?[e.videoWidth,e.videoHeight]:[e.width,e.height],c=l[0],f=l[1];if(a?s=e.getContext("2d").getImageData(0,0,c,f).data:r||n?s=e.data:(i||o)&&(Cs==null&&(Cs=document.createElement("canvas").getContext("2d")),Cs.canvas.width=c,Cs.canvas.height=f,Cs.drawImage(e,0,0,c,f),s=Cs.getImageData(0,0,c,f).data),t===4)u=new Int32Array(s);else{var d=c*f;u=new Int32Array(d*t);for(var p=0;p<d;p++)for(var v=0;v<t;++v)u[p*t+v]=s[4*p+v]}return yy(u,[f,c,t],"int32")}}),Hy=Object.freeze({toPixels:function(e,t){return Ie(this,void 0,void 0,function(){var n,r,o,i,a,s,u,l,c,f,d,p,v,x,w,y,b,E,S,R,k,m,P;return De(this,function(D){switch(D.label){case 0:if(n=O(e,"img","toPixels"),e instanceof Gt||(n=n.toInt()),n.rank!==2&&n.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".");if(r=n.shape.slice(0,2),o=r[0],i=r[1],(a=n.rank===2?1:n.shape[2])>4||a===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+a);return[4,n.data()];case 1:return s=D.sent(),u=n.min(),l=n.max(),[4,Promise.all([u.data(),l.data()])];case 2:if(c=D.sent(),f=c[0],d=c[1],p=f[0],v=d[0],u.dispose(),l.dispose(),n.dtype==="float32"){if(p<0||v>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+p+" - "+v+"].")}else{if(n.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.");if(p<0||v>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+p+" - "+v+"].")}for(x=n.dtype==="float32"?255:1,w=new Uint8ClampedArray(i*o*4),y=0;y<o*i;++y)b=void 0,E=void 0,S=void 0,R=void 0,a===1?(b=s[y]*x,E=s[y]*x,S=s[y]*x,R=255):a===3?(b=s[3*y]*x,E=s[3*y+1]*x,S=s[3*y+2]*x,R=255):a===4&&(b=s[4*y]*x,E=s[4*y+1]*x,S=s[4*y+2]*x,R=s[4*y+3]*x),w[(k=4*y)+0]=Math.round(b),w[k+1]=Math.round(E),w[k+2]=Math.round(S),w[k+3]=Math.round(R);return t!=null&&(t.width=i,t.height=o,m=t.getContext("2d"),P=new ImageData(w,i,o),m.putImageData(P,0,0)),n!==e&&n.dispose(),[2,w]}})})},fromPixels:yz}),xz=function(){function e(){}return e.prototype.getClassName=function(){return this.constructor.className},e.fromConfig=function(t,n){return new t(n)},e}(),wz=function(){function e(){this.classNameMap={}}return e.getMap=function(){return e.instance==null&&(e.instance=new e),e.instance},e.register=function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]},e}();function ls(e){M(e.className!=null,function(){return"Class being registered does not have the static className property defined."}),M(typeof e.className=="string",function(){return"className is required to be a string, but got type "+typeof e.className}),M(e.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),wz.register(e)}var cs=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return vo(t,e),t.prototype.minimize=function(n,r,o){r===void 0&&(r=!1);var i=this.computeGradients(n,o),a=i.value,s=i.grads;if(o!=null){var u=o.map(function(l){return{name:l.name,tensor:s[l.name]}});this.applyGradients(u)}else this.applyGradients(s);return Cr(s),r?a:(a.dispose(),null)},Object.defineProperty(t.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),t.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},t.prototype.computeGradients=function(n,r){return D4(n,r)},t.prototype.dispose=function(){this.iterations_!=null&&Cr(this.iterations_)},t.prototype.saveIterations=function(){return Ie(this,void 0,void 0,function(){return De(this,function(n){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:Ee(this.iterations_,"int32")}]})})},t.prototype.getWeights=function(){return Ie(this,void 0,void 0,function(){return De(this,function(n){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},t.prototype.setWeights=function(n){return Ie(this,void 0,void 0,function(){return De(this,function(r){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},t.prototype.extractIterations=function(n){return Ie(this,void 0,void 0,function(){var r;return De(this,function(o){switch(o.label){case 0:return r=this,[4,n[0].tensor.data()];case 1:return r.iterations_=o.sent()[0],[2,n.slice(1)]}})})},t}(xz);Object.defineProperty(cs,Symbol.hasInstance,{value:function(e){return e.minimize!=null&&e.computeGradients!=null&&e.applyGradients!=null}});var bz=function(e){function t(n,r,o){o===void 0&&(o=null);var i=e.call(this)||this;return i.learningRate=n,i.rho=r,i.epsilon=o,i.accumulatedGrads=[],i.accumulatedUpdates=[],o==null&&(i.epsilon=q.backend.epsilon()),i}return vo(t,e),t.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(o){return o.name}):Object.keys(n)).forEach(function(o,i){var a=q.registeredVariables[o];r.accumulatedGrads[i]==null&&(r.accumulatedGrads[i]={originalName:o+"/accum_grad",variable:Re(function(){return Ct(a).variable(!1)})}),r.accumulatedUpdates[i]==null&&(r.accumulatedUpdates[i]={originalName:o+"/accum_var",variable:Re(function(){return Ct(a).variable(!1)})});var s=Array.isArray(n)?n[i].tensor:n[o];if(s!=null){var u=r.accumulatedGrads[i].variable,l=r.accumulatedUpdates[i].variable;Re(function(){var c=u.mul(r.rho).add(s.square().mul(1-r.rho)),f=l.add(r.epsilon).sqrt().div(u.add(r.epsilon).sqrt()).mul(s),d=l.mul(r.rho).add(f.square().mul(1-r.rho));u.assign(c),l.assign(d);var p=f.mul(-r.learningRate).add(a);a.assign(p)})}}),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedUpdates!=null&&(Cr(this.accumulatedGrads.map(function(n){return n.variable})),Cr(this.accumulatedUpdates.map(function(n){return n.variable})))},t.prototype.getWeights=function(){return Ie(this,void 0,void 0,function(){var n;return De(this,function(r){switch(r.label){case 0:return n=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map(function(o){return{name:o.originalName,tensor:o.variable}}))]}})})},t.prototype.setWeights=function(n){return Ie(this,void 0,void 0,function(){var r;return De(this,function(o){switch(o.label){case 0:return[4,this.extractIterations(n)];case 1:return n=o.sent(),r=n.length/2,this.accumulatedGrads=n.slice(0,r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.accumulatedUpdates=n.slice(r,2*r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},t.fromConfig=function(n,r){return new n(r.learningRate,r.rho,r.epsilon)},t.className="Adadelta",t}(cs);ls(bz);var Ez=function(e){function t(n,r){r===void 0&&(r=.1);var o=e.call(this)||this;return o.learningRate=n,o.initialAccumulatorValue=r,o.accumulatedGrads=[],o}return vo(t,e),t.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(o){return o.name}):Object.keys(n)).forEach(function(o,i){var a=q.registeredVariables[o];r.accumulatedGrads[i]==null&&(r.accumulatedGrads[i]={originalName:o+"/accumulator",variable:Re(function(){return $o(a.shape,r.initialAccumulatorValue).variable(!1)})});var s=Array.isArray(n)?n[i].tensor:n[o];if(s!=null){var u=r.accumulatedGrads[i].variable;Re(function(){var l=u.add(s.square());u.assign(l);var c=s.div(l.add(q.backend.epsilon()).sqrt()).mul(-r.learningRate).add(a);a.assign(c)})}}),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedGrads!=null&&Cr(this.accumulatedGrads.map(function(n){return n.variable}))},t.prototype.getWeights=function(){return Ie(this,void 0,void 0,function(){return De(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(this.accumulatedGrads.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},t.prototype.setWeights=function(n){return Ie(this,void 0,void 0,function(){return De(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:return n=r.sent(),this.accumulatedGrads=n.map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},t.fromConfig=function(n,r){return new n(r.learningRate,r.initialAccumulatorValue)},t.className="Adagrad",t}(cs);ls(Ez);var Cz=function(e){function t(n,r,o,i){i===void 0&&(i=null);var a=e.call(this)||this;return a.learningRate=n,a.beta1=r,a.beta2=o,a.epsilon=i,a.accumulatedFirstMoment=[],a.accumulatedSecondMoment=[],Re(function(){a.accBeta1=Ee(r).variable(),a.accBeta2=Ee(o).variable()}),i==null&&(a.epsilon=q.backend.epsilon()),a}return vo(t,e),t.prototype.applyGradients=function(n){var r=this,o=Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n);Re(function(){var i=_n(1,r.accBeta1),a=_n(1,r.accBeta2);o.forEach(function(s,u){var l=q.registeredVariables[s];r.accumulatedFirstMoment[u]==null&&(r.accumulatedFirstMoment[u]={originalName:s+"/m",variable:Re(function(){return Ct(l).variable(!1)})}),r.accumulatedSecondMoment[u]==null&&(r.accumulatedSecondMoment[u]={originalName:s+"/v",variable:Re(function(){return Ct(l).variable(!1)})});var c=Array.isArray(n)?n[u].tensor:n[s];if(c!=null){var f=r.accumulatedFirstMoment[u].variable,d=r.accumulatedSecondMoment[u].variable,p=f.mul(r.beta1).add(c.mul(1-r.beta1)),v=d.mul(r.beta2).add(c.square().mul(1-r.beta2)),x=p.div(i),w=v.div(a);f.assign(p),d.assign(v);var y=x.div(w.sqrt().add(r.epsilon)).mul(-r.learningRate).add(l);l.assign(y)}}),r.accBeta1.assign(r.accBeta1.mul(r.beta1)),r.accBeta2.assign(r.accBeta2.mul(r.beta2))}),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Cr(this.accumulatedFirstMoment.map(function(n){return n.variable})),this.accumulatedSecondMoment!=null&&Cr(this.accumulatedSecondMoment.map(function(n){return n.variable}))},t.prototype.getWeights=function(){return Ie(this,void 0,void 0,function(){var n;return De(this,function(r){switch(r.label){case 0:return n=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map(function(o){return{name:o.originalName,tensor:o.variable}}))]}})})},t.prototype.setWeights=function(n){return Ie(this,void 0,void 0,function(){var r,o=this;return De(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(n)];case 1:return n=i.sent(),Re(function(){o.accBeta1.assign(Id(o.beta1,o.iterations_+1)),o.accBeta2.assign(Id(o.beta2,o.iterations_+1))}),r=n.length/2,this.accumulatedFirstMoment=n.slice(0,r).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),this.accumulatedSecondMoment=n.slice(r,2*r).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},t.fromConfig=function(n,r){return new n(r.learningRate,r.beta1,r.beta2,r.epsilon)},t.className="Adam",t}(cs);ls(Cz);var Sz=function(e){function t(n,r,o,i,a){i===void 0&&(i=null),a===void 0&&(a=0);var s=e.call(this)||this;return s.learningRate=n,s.beta1=r,s.beta2=o,s.epsilon=i,s.decay=a,s.accumulatedFirstMoment=[],s.accumulatedWeightedInfNorm=[],Re(function(){s.iteration=Ee(0).variable(),s.accBeta1=Ee(r).variable()}),i==null&&(s.epsilon=q.backend.epsilon()),s}return vo(t,e),t.prototype.applyGradients=function(n){var r=this,o=Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n);Re(function(){var i=_n(1,r.accBeta1),a=uo(-r.learningRate,r.iteration.mul(r.decay).add(1));o.forEach(function(s,u){var l=q.registeredVariables[s];r.accumulatedFirstMoment[u]==null&&(r.accumulatedFirstMoment[u]={originalName:s+"/m",variable:Ct(l).variable(!1)}),r.accumulatedWeightedInfNorm[u]==null&&(r.accumulatedWeightedInfNorm[u]={originalName:s+"/v",variable:Ct(l).variable(!1)});var c=Array.isArray(n)?n[u].tensor:n[s];if(c!=null){var f=r.accumulatedFirstMoment[u].variable,d=r.accumulatedWeightedInfNorm[u].variable,p=f.mul(r.beta1).add(c.mul(1-r.beta1)),v=d.mul(r.beta2),x=c.abs(),w=v.maximum(x);f.assign(p),d.assign(w);var y=a.div(i).mul(p.div(w.add(r.epsilon))).add(l);l.assign(y)}}),r.iteration.assign(r.iteration.add(1)),r.accBeta1.assign(r.accBeta1.mul(r.beta1))}),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Cr(this.accumulatedFirstMoment.map(function(n){return n.variable})),this.accumulatedWeightedInfNorm!=null&&Cr(this.accumulatedWeightedInfNorm.map(function(n){return n.variable}))},t.prototype.getWeights=function(){return Ie(this,void 0,void 0,function(){return De(this,function(n){throw new Error("getWeights() is not implemented for Adamax yet.")})})},t.prototype.setWeights=function(n){return Ie(this,void 0,void 0,function(){return De(this,function(r){throw new Error("setWeights() is not implemented for Adamax yet.")})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},t.fromConfig=function(n,r){return new n(r.learningRate,r.beta1,r.beta2,r.epsilon,r.decay)},t.className="Adamax",t}(cs);ls(Sz);var K_=function(e){function t(n){var r=e.call(this)||this;return r.learningRate=n,r.setLearningRate(n),r}return vo(t,e),t.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(o){return o.name}):Object.keys(n)).forEach(function(o,i){var a=Array.isArray(n)?n[i].tensor:n[o];if(a!=null){var s=q.registeredVariables[o];Re(function(){var u=r.c.mul(a).add(s);s.assign(u)})}}),this.incrementIterations()},t.prototype.setLearningRate=function(n){this.learningRate=n,this.c!=null&&this.c.dispose(),this.c=HM(Ee(-n))},t.prototype.dispose=function(){this.c.dispose()},t.prototype.getWeights=function(){return Ie(this,void 0,void 0,function(){return De(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()]]}})})},t.prototype.setWeights=function(n){return Ie(this,void 0,void 0,function(){return De(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:if((n=r.sent()).length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate}},t.fromConfig=function(n,r){return new n(r.learningRate)},t.className="SGD",t}(cs);ls(K_);var _z=function(e){function t(n,r,o){o===void 0&&(o=!1);var i=e.call(this,n)||this;return i.learningRate=n,i.momentum=r,i.useNesterov=o,i.accumulations=[],i.m=Ee(i.momentum),i}return vo(t,e),t.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(o){return o.name}):Object.keys(n)).forEach(function(o,i){var a=q.registeredVariables[o];r.accumulations[i]==null&&(r.accumulations[i]={originalName:o+"/momentum",variable:Re(function(){return Ct(a).variable(!1)})});var s=r.accumulations[i].variable,u=Array.isArray(n)?n[i].tensor:n[o];u!=null&&Re(function(){var l,c=r.m.mul(s).add(u);l=r.useNesterov?r.c.mul(u.add(c.mul(r.m))).add(a):r.c.mul(c).add(a),s.assign(c),a.assign(l)})}),this.incrementIterations()},t.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&Cr(this.accumulations.map(function(n){return n.variable}))},t.prototype.setMomentum=function(n){this.momentum=n},t.prototype.getWeights=function(){return Ie(this,void 0,void 0,function(){return De(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(this.accumulations.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},t.prototype.setWeights=function(n){return Ie(this,void 0,void 0,function(){return De(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:return n=r.sent(),this.accumulations=n.map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},t.fromConfig=function(n,r){return new n(r.learningRate,r.momentum,r.useNesterov)},t.className="Momentum",t}(K_);ls(_z);var kz=function(e){function t(n,r,o,i,a){r===void 0&&(r=.9),o===void 0&&(o=0),i===void 0&&(i=null),a===void 0&&(a=!1);var s=e.call(this)||this;if(s.learningRate=n,s.decay=r,s.momentum=o,s.epsilon=i,s.accumulatedMeanSquares=[],s.accumulatedMoments=[],s.accumulatedMeanGrads=[],s.centered=a,i==null&&(s.epsilon=q.backend.epsilon()),n==null)throw new Error("learningRate for RMSPropOptimizer must be defined.");return s}return vo(t,e),t.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(o){return o.name}):Object.keys(n)).forEach(function(o,i){var a=q.registeredVariables[o];r.accumulatedMeanSquares[i]==null&&(r.accumulatedMeanSquares[i]={originalName:o+"/rms",variable:Re(function(){return Ct(a).variable(!1)})}),r.accumulatedMoments[i]==null&&(r.accumulatedMoments[i]={originalName:o+"/momentum",variable:Re(function(){return Ct(a).variable(!1)})}),r.accumulatedMeanGrads[i]==null&&r.centered&&(r.accumulatedMeanGrads[i]={originalName:o+"/mg",variable:Re(function(){return Ct(a).variable(!1)})});var s=Array.isArray(n)?n[i].tensor:n[o];if(s!=null){var u=r.accumulatedMeanSquares[i].variable,l=r.accumulatedMoments[i].variable;Re(function(){var c=u.mul(r.decay).add(s.square().mul(1-r.decay));if(r.centered){var f=r.accumulatedMeanGrads[i].variable,d=f.mul(r.decay).add(s.mul(1-r.decay)),p=l.mul(r.momentum).add(s.mul(r.learningRate).div(c.sub(d.square().add(r.epsilon)).sqrt()));u.assign(c),f.assign(d),l.assign(p);var v=a.sub(p);a.assign(v)}else{var x=u.mul(r.decay).add(s.square().mul(1-r.decay));p=l.mul(r.momentum).add(s.mul(r.learningRate).div(x.add(r.epsilon).sqrt())),u.assign(x),l.assign(p),v=a.sub(p),a.assign(v)}})}}),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&Cr(this.accumulatedMeanSquares.map(function(n){return n.variable})),this.accumulatedMeanGrads!=null&&this.centered&&Cr(this.accumulatedMeanGrads.map(function(n){return n.variable})),this.accumulatedMoments!=null&&Cr(this.accumulatedMoments.map(function(n){return n.variable}))},t.prototype.getWeights=function(){return Ie(this,void 0,void 0,function(){var n;return De(this,function(r){switch(r.label){case 0:return n=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&n.push.apply(n,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map(function(o){return{name:o.originalName,tensor:o.variable}}))]}})})},t.prototype.setWeights=function(n){return Ie(this,void 0,void 0,function(){var r;return De(this,function(o){switch(o.label){case 0:return[4,this.extractIterations(n)];case 1:return n=o.sent(),r=this.centered?n.length/3:n.length/2,this.accumulatedMeanSquares=n.slice(0,r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.accumulatedMoments=n.slice(r,2*r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=n.slice(2*r,3*r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}})),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},t.fromConfig=function(n,r){return new n(r.learningRate,r.decay,r.momentum,r.epsilon,r.centered)},t.className="RMSProp",t}(cs);ls(kz);Gt.prototype.squaredDifference=function(e){return l_(this,e)},se=JW;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ym=function(e,t){return Ym=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)r.hasOwnProperty(o)&&(n[o]=r[o])},Ym(e,t)};function rt(e,t){Ym(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Kn=function(){return Kn=Object.assign||function(t){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Kn.apply(this,arguments)};function je(e,t,n,r){function o(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function s(c){try{l(r.next(c))}catch(f){a(f)}}function u(c){try{l(r.throw(c))}catch(f){a(f)}}function l(c){c.done?i(c.value):o(c.value).then(s,u)}l((r=r.apply(e,t||[])).next())})}function We(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,o&&(i=l[0]&2?o.return:l[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,l[1])).done)return i;switch(o=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,o=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],o=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Cl(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),o=0,t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}var Xa=function(){function e(t,n){if(!Ya(t)||!Ya(n))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:t,height:n}));this._width=t,this._height=n}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),e.prototype.reverse=function(){return new e(1/this.width,1/this.height)},e}();function wh(e,t){return e instanceof Gt&&e.shape.length===t}function Rz(e){return wh(e,2)}function bh(e){return wh(e,3)}function aa(e){return wh(e,4)}function Tz(e){return e%1!==0}function Qw(e){return e%2===0}function X_(e,t){t===void 0&&(t=2);var n=Math.pow(10,t);return Math.floor(e*n)/n}function Jw(e){return e&&e.width&&e.height}function Iz(e,t){var n=e.width,r=e.height,o=t/Math.max(r,n);return new Xa(Math.round(n*o),Math.round(r*o))}function Vy(e){return e.reduce(function(t,n){return t.add(n)},new Rt(0,0)).div(new Rt(e.length,e.length))}function Xl(e,t,n){return Array(e).fill(0).map(function(r,o){return t+o*n})}function Ya(e){return!!e&&e!==1/0&&e!==-1/0&&!isNaN(e)||e===0}function Zw(e){return Ya(e)&&0<=e&&e<=1}var Rt=function(){function e(t,n){this._x=t,this._y=n}return Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y)},e.prototype.sub=function(t){return new e(this.x-t.x,this.y-t.y)},e.prototype.mul=function(t){return new e(this.x*t.x,this.y*t.y)},e.prototype.div=function(t){return new e(this.x/t.x,this.y/t.y)},e.prototype.abs=function(){return new e(Math.abs(this.x),Math.abs(this.y))},e.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},e.prototype.floor=function(){return new e(Math.floor(this.x),Math.floor(this.y))},e}(),Vo=function(){function e(t,n){n===void 0&&(n=!0);var r=t||{},o=[r.left,r.top,r.right,r.bottom].every(Ya),i=[r.x,r.y,r.width,r.height].every(Ya);if(!i&&!o)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(r));var a=i?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],s=a[0],u=a[1],l=a[2],c=a[3];e.assertIsValidBox({x:s,y:u,width:l,height:c},"Box.constructor",n),this._x=s,this._y=u,this._width=l,this._height=c}return e.isRect=function(t){return!!t&&[t.x,t.y,t.width,t.height].every(Ya)},e.assertIsValidBox=function(t,n,r){if(r===void 0&&(r=!1),!e.isRect(t))throw new Error(n+" - invalid box: "+JSON.stringify(t)+", expected object with properties x, y, width, height");if(!r&&(t.width<0||t.height<0))throw new Error(n+" - width ("+t.width+") and height ("+t.height+") must be positive numbers")},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLeft",{get:function(){return new Rt(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topRight",{get:function(){return new Rt(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomLeft",{get:function(){return new Rt(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRight",{get:function(){return new Rt(this.right,this.bottom)},enumerable:!0,configurable:!0}),e.prototype.round=function(){var t=[this.x,this.y,this.width,this.height].map(function(a){return Math.round(a)}),n=t[0],r=t[1],o=t[2],i=t[3];return new e({x:n,y:r,width:o,height:i})},e.prototype.floor=function(){var t=[this.x,this.y,this.width,this.height].map(function(a){return Math.floor(a)}),n=t[0],r=t[1],o=t[2],i=t[3];return new e({x:n,y:r,width:o,height:i})},e.prototype.toSquare=function(){var t=this,n=t.x,r=t.y,o=t.width,i=t.height,a=Math.abs(o-i);return o<i&&(n-=a/2,o+=a),i<o&&(r-=a/2,i+=a),new e({x:n,y:r,width:o,height:i})},e.prototype.rescale=function(t){var n=Jw(t)?t.width:t,r=Jw(t)?t.height:t;return new e({x:this.x*n,y:this.y*r,width:this.width*n,height:this.height*r})},e.prototype.pad=function(t,n){var r=[this.x-t/2,this.y-n/2,this.width+t,this.height+n],o=r[0],i=r[1],a=r[2],s=r[3];return new e({x:o,y:i,width:a,height:s})},e.prototype.clipAtImageBorders=function(t,n){var r=this,o=r.x,i=r.y,a=r.right,s=r.bottom,u=Math.max(o,0),l=Math.max(i,0),c=a-u,f=s-l,d=Math.min(c,t-u),p=Math.min(f,n-l);return new e({x:u,y:l,width:d,height:p}).floor()},e.prototype.shift=function(t,n){var r=this,o=r.width,i=r.height,a=this.x+t,s=this.y+n;return new e({x:a,y:s,width:o,height:i})},e.prototype.padAtBorders=function(t,n){var r=this.width+1,o=this.height+1,i=1,a=1,s=r,u=o,l=this.left,c=this.top,f=this.right,d=this.bottom;return f>n&&(s=-f+n+r,f=n),d>t&&(u=-d+t+o,d=t),l<1&&(u=2-l,l=1),c<1&&(u=2-c,c=1),{dy:a,edy:u,dx:i,edx:s,y:c,ey:d,x:l,ex:f,w:r,h:o}},e.prototype.calibrate=function(t){return new e({left:this.left+t.left*this.width,top:this.top+t.top*this.height,right:this.right+t.right*this.width,bottom:this.bottom+t.bottom*this.height}).toSquare().round()},e}(),Eh=function(e){rt(t,e);function t(n,r,o,i,a){return a===void 0&&(a=!1),e.call(this,{left:n,top:r,right:o,bottom:i},a)||this}return t}(Vo),Y_=function(){function e(t,n,r,o,i){this._imageDims=new Xa(i.width,i.height),this._score=t,this._classScore=n,this._className=r,this._box=new Vo(o).rescale(this._imageDims)}return Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeBox",{get:function(){return new Vo(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),e.prototype.forSize=function(t,n){return new e(this.score,this.classScore,this.className,this.relativeBox,{width:t,height:n})},e}(),Lr=function(e){rt(t,e);function t(n,r,o){return e.call(this,n,n,"",r,o)||this}return t.prototype.forSize=function(n,r){var o=e.prototype.forSize.call(this,n,r),i=o.score,a=o.relativeBox,s=o.imageDims;return new t(i,a,s)},t}(Y_);function Dz(e,t,n){n===void 0&&(n=!0);var r=Math.max(0,Math.min(e.right,t.right)-Math.max(e.left,t.left)),o=Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)),i=r*o;return n?i/(e.area+t.area-i):i/Math.min(e.area,t.area)}function Nz(e){var t=e.map(function(s){return s.x}),n=e.map(function(s){return s.y}),r=t.reduce(function(s,u){return u<s?u:s},1/0),o=n.reduce(function(s,u){return u<s?u:s},1/0),i=t.reduce(function(s,u){return s<u?u:s},0),a=n.reduce(function(s,u){return s<u?u:s},0);return new Eh(r,o,i,a)}function Yl(e,t,n,r){r===void 0&&(r=!0);for(var o=t.map(function(s,u){return{score:s,boxIndex:u}}).sort(function(s,u){return s.score-u.score}).map(function(s){return s.boxIndex}),i=[],a=function(){var s=o.pop();i.push(s);for(var u=o,l=[],c=0;c<u.length;c++){var f=u[c],d=e[s],p=e[f];l.push(Dz(d,p,r))}o=o.filter(function(v,x){return l[x]<=n})};o.length>0;)a();return i}function wc(e,t){return Re(function(){var n=t[0],r=t[1],o=t[2],i=$o(Cl(e.shape.slice(0,3),[1]),n),a=$o(Cl(e.shape.slice(0,3),[1]),r),s=$o(Cl(e.shape.slice(0,3),[1]),o),u=bn([i,a,s],3);return _n(e,u)})}function Az(e,t){return t===void 0&&(t=!1),Re(function(){var n=e.shape.slice(1),r=n[0],o=n[1];if(r===o)return e;var i=Math.abs(r-o),a=Math.round(i*(t?.5:1)),s=r>o?2:1,u=function(p){var v=e.shape.slice();return v[s]=p,$o(v,0)},l=u(a),c=i-l.shape[s],f=t&&c?u(c):null,d=[f,e,l].filter(function(p){return!!p}).map(function(p){return p.toFloat()});return bn(d,s)})}function dv(e){return 1/(1+Math.exp(-e))}var Gy=function(e){rt(t,e);function t(n,r,o,i,a){return a===void 0&&(a=!1),e.call(this,{x:n,y:r,width:o,height:i},a)||this}return t}(Vo),Pz=.5,Fz=.43,Oz=.45,Ql=function(){function e(t,n,r){r===void 0&&(r=new Rt(0,0));var o=n.width,i=n.height;this._imgDims=new Xa(o,i),this._shift=r,this._positions=t.map(function(a){return a.mul(new Rt(o,i)).add(r)})}return Object.defineProperty(e.prototype,"shift",{get:function(){return new Rt(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativePositions",{get:function(){var t=this;return this._positions.map(function(n){return n.sub(t._shift).div(new Rt(t.imageWidth,t.imageHeight))})},enumerable:!0,configurable:!0}),e.prototype.forSize=function(t,n){return new this.constructor(this.relativePositions,{width:t,height:n})},e.prototype.shiftBy=function(t,n){return new this.constructor(this.relativePositions,this._imgDims,new Rt(t,n))},e.prototype.shiftByPoint=function(t){return this.shiftBy(t.x,t.y)},e.prototype.align=function(t,n){if(n===void 0&&(n={}),t){var r=t instanceof Lr?t.box.floor():new Vo(t);return this.shiftBy(r.x,r.y).align(null,n)}var o=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},n),i=o.useDlibAlignment,a=o.minBoxPadding;return i?this.alignDlib():this.alignMinBbox(a)},e.prototype.alignDlib=function(){var t=this.getRefPointsForAlignment(),n=t[0],r=t[1],o=t[2],i=function(f){return o.sub(f).magnitude()},a=(i(n)+i(r))/2,s=Math.floor(a/Oz),u=Vy(t),l=Math.floor(Math.max(0,u.x-Pz*s)),c=Math.floor(Math.max(0,u.y-Fz*s));return new Gy(l,c,Math.min(s,this.imageWidth+l),Math.min(s,this.imageHeight+c))},e.prototype.alignMinBbox=function(t){var n=Nz(this.positions);return n.pad(n.width*t,n.height*t)},e.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},e}(),Mz=function(e){rt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getRefPointsForAlignment=function(){var n=this.positions;return[n[0],n[1],Vy([n[3],n[4]])]},t}(Ql),Lz=function(e){rt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getJawOutline=function(){return this.positions.slice(0,17)},t.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},t.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},t.prototype.getNose=function(){return this.positions.slice(27,36)},t.prototype.getLeftEye=function(){return this.positions.slice(36,42)},t.prototype.getRightEye=function(){return this.positions.slice(42,48)},t.prototype.getMouth=function(){return this.positions.slice(48,68)},t.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(Vy)},t}(Ql),eb=function(){function e(t,n){this._label=t,this._distance=n}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),e.prototype.toString=function(t){return t===void 0&&(t=!0),""+this.label+(t?" ("+X_(this.distance)+")":"")},e}(),tb=function(e){rt(t,e);function t(n,r){var o=e.call(this,n)||this;return o._label=r,o}return t.assertIsValidLabeledBox=function(n,r){if(Vo.assertIsValidBox(n,r),!Ya(n.label))throw new Error(r+" - expected property label ("+n.label+") to be a number")},Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),t}(Vo),lf=function(){function e(t,n){if(typeof t!="string")throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(n)||n.some(function(r){return!(r instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=t,this._descriptors=n}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),e.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map(function(t){return Array.from(t)})}},e.fromJSON=function(t){var n=t.descriptors.map(function(r){return new Float32Array(r)});return new e(t.label,n)},e}();(function(e){rt(t,e);function t(n,r,o,i){var a=e.call(this,n,r)||this;return a._score=o,a._classScore=i,a}return t.assertIsValidPredictedBox=function(n,r){if(tb.assertIsValidLabeledBox(n,r),!Zw(n.score)||!Zw(n.classScore))throw new Error(r+" - expected properties score ("+n.score+") and ("+n.classScore+") to be a number between [0, 1]")},Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),t})(tb);function Ad(e){return e.detection instanceof Lr}function Jl(e,t){var n={detection:t};return Object.assign({},e,n)}function Q_(){var e=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")},t=function(){throw new Error("readFile - filesystem not available for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D,Image:HTMLImageElement,ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:e,readFile:t}}function J_(e){var t="";if(!e)try{e=require("fs")}catch(r){t=r.toString()}var n=e?function(r){return new Promise(function(o,i){e.readFile(r,function(a,s){return a?i(a):o(s)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+t)};return{readFile:n}}function Z_(){var e=global.Canvas||global.HTMLCanvasElement,t=global.Image||global.HTMLImageElement,n=function(){if(e)return new e;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},r=function(){if(t)return new t;throw new Error("createImageElement - missing Image implementation for nodejs environment")},o=global.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},i=J_();return Kn({Canvas:e||function(){function a(){}return a}(),CanvasRenderingContext2D:global.CanvasRenderingContext2D||function(){function a(){}return a}(),Image:t||function(){function a(){}return a}(),ImageData:global.ImageData||function(){function a(){}return a}(),Video:global.HTMLVideoElement||function(){function a(){}return a}(),createCanvasElement:n,createImageElement:r,fetch:o},i)}function ek(){return typeof window=="object"&&typeof document<"u"&&typeof HTMLImageElement<"u"&&typeof HTMLCanvasElement<"u"&&typeof HTMLVideoElement<"u"&&typeof ImageData<"u"&&typeof CanvasRenderingContext2D<"u"}function tk(){return typeof global=="object"&&typeof require=="function"&&typeof Ok<"u"&&typeof process<"u"&&!!process.version}var yn;function Bz(){if(!yn)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return yn}function Qm(e){yn=e}function qy(){ek()&&Qm(Q_()),tk()&&Qm(Z_())}function jz(e){if(yn||qy(),!yn)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var t=e.Canvas,n=t===void 0?yn.Canvas:t,r=e.Image,o=r===void 0?yn.Image:r;yn.Canvas=n,yn.Image=o,yn.createCanvasElement=e.createCanvasElement||function(){return new n},yn.createImageElement=e.createImageElement||function(){return new o},yn.ImageData=e.ImageData||yn.ImageData,yn.Video=e.Video||yn.Video,yn.fetch=e.fetch||yn.fetch,yn.readFile=e.readFile||yn.readFile}var er={getEnv:Bz,setEnv:Qm,initialize:qy,createBrowserEnv:Q_,createFileSystem:J_,createNodejsEnv:Z_,monkeyPatch:jz,isBrowser:ek,isNodejs:tk};qy();function Ky(e){return!er.isNodejs()&&typeof e=="string"?document.getElementById(e):e}function mi(e){var t=er.getEnv(),n=t.Canvas,r=t.CanvasRenderingContext2D;if(e instanceof r)return e;var o=Ky(e);if(!(o instanceof n))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var i=o.getContext("2d");if(!i)throw new Error("resolveContext2d - canvas 2d context is null");return i}var Ki;(function(e){e.TOP_LEFT="TOP_LEFT",e.TOP_RIGHT="TOP_RIGHT",e.BOTTOM_LEFT="BOTTOM_LEFT",e.BOTTOM_RIGHT="BOTTOM_RIGHT"})(Ki||(Ki={}));var nk=function(){function e(t){t===void 0&&(t={});var n=t.anchorPosition,r=t.backgroundColor,o=t.fontColor,i=t.fontSize,a=t.fontStyle,s=t.padding;this.anchorPosition=n||Ki.TOP_LEFT,this.backgroundColor=r||"rgba(0, 0, 0, 0.5)",this.fontColor=o||"rgba(255, 255, 255, 1)",this.fontSize=i||14,this.fontStyle=a||"Georgia",this.padding=s||4}return e}(),Wz=function(){function e(t,n,r){r===void 0&&(r={}),this.text=typeof t=="string"?[t]:t instanceof e?t.text:t,this.anchor=n,this.options=new nk(r)}return e.prototype.measureWidth=function(t){var n=this.options.padding;return this.text.map(function(r){return t.measureText(r).width}).reduce(function(r,o){return r<o?o:r},0)+2*n},e.prototype.measureHeight=function(){var t=this.options,n=t.fontSize,r=t.padding;return this.text.length*n+2*r},e.prototype.getUpperLeft=function(t,n){var r=this.options.anchorPosition,o=r===Ki.BOTTOM_RIGHT||r===Ki.TOP_RIGHT,i=r===Ki.BOTTOM_LEFT||r===Ki.BOTTOM_RIGHT,a=this.measureWidth(t),s=this.measureHeight(),u=o?this.anchor.x-a:this.anchor.x,l=i?this.anchor.y-s:this.anchor.y;if(n){var c=n.width,f=n.height,d=Math.max(Math.min(u,c-a),0),p=Math.max(Math.min(l,f-s),0);return{x:d,y:p}}return{x:u,y:l}},e.prototype.draw=function(t){var n=Ky(t),r=mi(n),o=this.options,i=o.backgroundColor,a=o.fontColor,s=o.fontSize,u=o.fontStyle,l=o.padding;r.font=s+"px "+u;var c=this.measureWidth(r),f=this.measureHeight();r.fillStyle=i;var d=this.getUpperLeft(r,n);r.fillRect(d.x,d.y,c,f),r.fillStyle=a,this.text.forEach(function(p,v){var x=l+d.x,w=l+d.y+(v+1)*s;r.fillText(p,x,w)})},e}(),zz=function(){function e(t){t===void 0&&(t={});var n=t.boxColor,r=t.lineWidth,o=t.label,i=t.drawLabelOptions;this.boxColor=n||"rgba(0, 0, 255, 1)",this.lineWidth=r||2,this.label=o;var a={anchorPosition:Ki.BOTTOM_LEFT,backgroundColor:this.boxColor};this.drawLabelOptions=new nk(Object.assign({},a,i))}return e}(),Uz=function(){function e(t,n){n===void 0&&(n={}),this.box=new Vo(t),this.options=new zz(n)}return e.prototype.draw=function(t){var n=mi(t),r=this.options,o=r.boxColor,i=r.lineWidth,a=this.box,s=a.x,u=a.y,l=a.width,c=a.height;n.strokeStyle=o,n.lineWidth=i,n.strokeRect(s,u,l,c);var f=this.options.label;f&&new Wz([f],{x:s-i/2,y:u},this.options.drawLabelOptions).draw(t)},e}();function $z(e,t){var n=Array.isArray(t)?t:[t];n.forEach(function(r){var o=r instanceof Lr?r.score:Ad(r)?r.detection.score:void 0,i=r instanceof Lr?r.box:Ad(r)?r.detection.box:new Vo(r),a=o?""+X_(o):void 0;new Uz(i,{label:a}).draw(e)})}function rk(e){var t=er.getEnv(),n=t.Image,r=t.Video;return e instanceof n&&e.complete||e instanceof r&&e.readyState>=3}function Hz(e){return new Promise(function(t,n){if(e instanceof er.getEnv().Canvas||rk(e))return t();function r(i){i.currentTarget&&(i.currentTarget.removeEventListener("load",r),i.currentTarget.removeEventListener("error",o),t(i))}function o(i){i.currentTarget&&(i.currentTarget.removeEventListener("load",r),i.currentTarget.removeEventListener("error",o),n(i))}e.addEventListener("load",r),e.addEventListener("error",o)})}function Xy(e){var t=er.getEnv(),n=t.Image,r=t.Video;return e instanceof n?new Xa(e.naturalWidth,e.naturalHeight):e instanceof r?new Xa(e.videoWidth,e.videoHeight):new Xa(e.width,e.height)}function Ch(e){var t=e.width,n=e.height,r=er.getEnv().createCanvasElement,o=r();return o.width=t,o.height=n,o}function Yy(e,t){var n=er.getEnv().ImageData;if(!(e instanceof n)&&!rk(e))throw new Error("createCanvasFromMedia - media has not finished loading yet");var r=t||Xy(e),o=r.width,i=r.height,a=Ch({width:o,height:i});return e instanceof n?mi(a).putImageData(e,0,0):mi(a).drawImage(e,0,0,o,i),a}function Vz(e,t){return je(this,void 0,void 0,function(){var n,r,o,i,a,s;return We(this,function(u){switch(u.label){case 0:return n=t||er.getEnv().createCanvasElement(),r=e.shape.slice(aa(e)?1:0),o=r[0],i=r[1],a=r[2],s=Re(function(){return e.as3D(o,i,a).toInt()}),[4,Hy.toPixels(s,n)];case 1:return u.sent(),s.dispose(),[2,n]}})})}function nb(e){var t=er.getEnv(),n=t.Image,r=t.Canvas,o=t.Video;return e instanceof n||e instanceof r||e instanceof o}function Gz(e,t,n){n===void 0&&(n=!1);var r=er.getEnv(),o=r.Image,i=r.Canvas;if(!(e instanceof o||e instanceof i))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var a=Xy(e),s=t/Math.max(a.height,a.width),u=s*a.width,l=s*a.height,c=Ch({width:t,height:t}),f=e instanceof i?e:Yy(e),d=Math.abs(u-l)/2,p=n&&u<l?d:0,v=n&&l<u?d:0;return mi(c).drawImage(f,p,v,u,l),c}var Pd=function(){function e(t,n){var r=this;if(n===void 0&&(n=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(t))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+t);this._treatAsBatchInput=n,this._batchSize=t.length,t.forEach(function(o,i){if(bh(o)){r._imageTensors[i]=o,r._inputDimensions[i]=o.shape;return}if(aa(o)){var a=o.shape[0];if(a!==1)throw new Error("NetInput - tf.Tensor4D with batchSize "+a+" passed, but not supported in input array");r._imageTensors[i]=o,r._inputDimensions[i]=o.shape.slice(1);return}var s=o instanceof er.getEnv().Canvas?o:Yy(o);r._canvases[i]=s,r._inputDimensions[i]=[s.height,s.width,3]})}return Object.defineProperty(e.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reshapedInputDimensions",{get:function(){var t=this;return Xl(this.batchSize,0,1).map(function(n,r){return t.getReshapedInputDimensions(r)})},enumerable:!0,configurable:!0}),e.prototype.getInput=function(t){return this.canvases[t]||this.imageTensors[t]},e.prototype.getInputDimensions=function(t){return this._inputDimensions[t]},e.prototype.getInputHeight=function(t){return this._inputDimensions[t][0]},e.prototype.getInputWidth=function(t){return this._inputDimensions[t][1]},e.prototype.getReshapedInputDimensions=function(t){if(typeof this.inputSize!="number")throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");var n=this.getInputWidth(t),r=this.getInputHeight(t);return Iz({width:n,height:r},this.inputSize)},e.prototype.toBatchTensor=function(t,n){var r=this;return n===void 0&&(n=!0),this._inputSize=t,Re(function(){var o=Xl(r.batchSize,0,1).map(function(a){var s=r.getInput(a);if(s instanceof Gt){var u=aa(s)?s:s.expandDims();return u=Az(u,n),(u.shape[1]!==t||u.shape[2]!==t)&&(u=By.resizeBilinear(u,[t,t])),u.as3D(t,t,3)}if(s instanceof er.getEnv().Canvas)return Hy.fromPixels(Gz(s,t,n));throw new Error("toBatchTensor - at batchIdx "+a+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+s)}),i=Or(o.map(function(a){return a.toFloat()})).as4D(r.batchSize,t,t,3);return i})},e}();function An(e){return je(this,void 0,void 0,function(){var t,n,r;return We(this,function(o){switch(o.label){case 0:if(e instanceof Pd)return[2,e];if(t=Array.isArray(e)?e:[e],!t.length)throw new Error("toNetInput - empty array passed as input");return n=function(i){return Array.isArray(e)?" at input index "+i+":":""},r=t.map(Ky),r.forEach(function(i,a){if(!nb(i)&&!bh(i)&&!aa(i))throw typeof t[a]=="string"?new Error("toNetInput -"+n(a)+" string passed, but could not resolve HTMLElement for element id "+t[a]):new Error("toNetInput -"+n(a)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id");if(aa(i)){var s=i.shape[0];if(s!==1)throw new Error("toNetInput -"+n(a)+" tf.Tensor4D with batchSize "+s+" passed, but not supported in input array")}}),[4,Promise.all(r.map(function(i){return nb(i)&&Hz(i)}))];case 1:return o.sent(),[2,new Pd(r,Array.isArray(e))]}})})}function Qy(e,t){return je(this,void 0,void 0,function(){var n,r,o,i,a,s,u;return We(this,function(l){switch(l.label){case 0:return n=er.getEnv().Canvas,r=e,e instanceof n?[3,5]:[4,An(e)];case 1:if(o=l.sent(),o.batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return i=o.getInput(0),i instanceof n?(a=i,[3,4]):[3,2];case 2:return[4,Vz(i)];case 3:a=l.sent(),l.label=4;case 4:r=a,l.label=5;case 5:return s=mi(r),u=t.map(function(c){return c instanceof Lr?c.forSize(r.width,r.height).box.floor():c}).map(function(c){return c.clipAtImageBorders(r.width,r.height)}),[2,u.map(function(c){var f=c.x,d=c.y,p=c.width,v=c.height,x=Ch({width:p,height:v});return mi(x).putImageData(s.getImageData(f,d,p,v),0,0),x})]}})})}function Jy(e,t){return je(this,void 0,void 0,function(){return We(this,function(n){if(!bh(e)&&!aa(e))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(aa(e)&&e.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,Re(function(){var r=e.shape.slice(aa(e)?1:0),o=r[0],i=r[1],a=r[2],s=t.map(function(l){return l instanceof Lr?l.forSize(i,o).box:l}).map(function(l){return l.clipAtImageBorders(i,o)}),u=s.map(function(l){var c=l.x,f=l.y,d=l.width,p=l.height;return D_(e.as3D(o,i,a),[f,c,0],[p,d,a])});return u})]})})}function qz(e,t){return je(this,void 0,void 0,function(){var n,r;return We(this,function(o){switch(o.label){case 0:return n=er.getEnv().fetch,[4,n(e,t)];case 1:if(r=o.sent(),!(r.status<400))throw new Error("failed to fetch: ("+r.status+") "+r.statusText+", from url: "+r.url);return[2,r]}})})}function Kz(e){return je(this,void 0,void 0,function(){return We(this,function(t){switch(t.label){case 0:return[4,qz(e)];case 1:return[2,t.sent().json()]}})})}function ok(e,t){var n=t+"-weights_manifest.json";if(!e)return{modelBaseUri:"",manifestUri:n};if(e==="/")return{modelBaseUri:"/",manifestUri:"/"+n};var r=e.startsWith("http://")?"http://":e.startsWith("https://")?"https://":"";e=e.replace(r,"");var o=e.split("/").filter(function(s){return s}),i=e.endsWith(".json")?o[o.length-1]:n,a=r+(e.endsWith(".json")?o.slice(0,o.length-1):o).join("/");return a=e.startsWith("/")?"/"+a:a,{modelBaseUri:a,manifestUri:a==="/"?"/"+i:a+"/"+i}}function Xz(e,t){return je(this,void 0,void 0,function(){var n,r,o,i;return We(this,function(a){switch(a.label){case 0:return n=ok(e,t),r=n.manifestUri,o=n.modelBaseUri,[4,Kz(r)];case 1:return i=a.sent(),[2,q_.loadWeights(i,o)]}})})}function Yz(e,t,n){n===void 0&&(n=!1);var r=n?Xy(t):t,o=r.width,i=r.height;return e.width=o,e.height=i,{width:o,height:i}}var Ci=function(){function e(t){this._name=t,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(e.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),e.prototype.getParamFromPath=function(t){var n=this.traversePropertyPath(t),r=n.obj,o=n.objProp;return r[o]},e.prototype.reassignParamFromPath=function(t,n){var r=this.traversePropertyPath(t),o=r.obj,i=r.objProp;o[i].dispose(),o[i]=n},e.prototype.getParamList=function(){var t=this;return this._paramMappings.map(function(n){var r=n.paramPath;return{path:r,tensor:t.getParamFromPath(r)}})},e.prototype.getTrainableParams=function(){return this.getParamList().filter(function(t){return t.tensor instanceof gu})},e.prototype.getFrozenParams=function(){return this.getParamList().filter(function(t){return!(t.tensor instanceof gu)})},e.prototype.variable=function(){var t=this;this.getFrozenParams().forEach(function(n){var r=n.path,o=n.tensor;t.reassignParamFromPath(r,o.variable())})},e.prototype.freeze=function(){var t=this;this.getTrainableParams().forEach(function(n){var r=n.path,o=n.tensor,i=Wn(o.dataSync());o.dispose(),t.reassignParamFromPath(r,i)})},e.prototype.dispose=function(t){t===void 0&&(t=!0),this.getParamList().forEach(function(n){if(t&&n.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+n.path);n.tensor.dispose()}),this._params=void 0},e.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(t){var n=t.tensor;return Array.from(n.dataSync())}).reduce(function(t,n){return t.concat(n)}))},e.prototype.load=function(t){return je(this,void 0,void 0,function(){return We(this,function(n){switch(n.label){case 0:return t instanceof Float32Array?(this.extractWeights(t),[2]):[4,this.loadFromUri(t)];case 1:return n.sent(),[2]}})})},e.prototype.loadFromUri=function(t){return je(this,void 0,void 0,function(){var n;return We(this,function(r){switch(r.label){case 0:if(t&&typeof t!="string")throw new Error(this._name+".loadFromUri - expected model uri");return[4,Xz(t,this.getDefaultModelName())];case 1:return n=r.sent(),this.loadFromWeightMap(n),[2]}})})},e.prototype.loadFromDisk=function(t){return je(this,void 0,void 0,function(){var n,r,o,i,a,s,u,l,c,f;return We(this,function(d){switch(d.label){case 0:if(t&&typeof t!="string")throw new Error(this._name+".loadFromDisk - expected model file path");return n=er.getEnv().readFile,r=ok(t,this.getDefaultModelName()),o=r.manifestUri,i=r.modelBaseUri,a=function(p){return Promise.all(p.map(function(v){return n(v).then(function(x){return x.buffer})}))},s=q_.weightsLoaderFactory(a),c=(l=JSON).parse,[4,n(o)];case 1:return u=c.apply(l,[d.sent().toString()]),[4,s(u,i)];case 2:return f=d.sent(),this.loadFromWeightMap(f),[2]}})})},e.prototype.loadFromWeightMap=function(t){var n=this.extractParamsFromWeigthMap(t),r=n.paramMappings,o=n.params;this._paramMappings=r,this._params=o},e.prototype.extractWeights=function(t){var n=this.extractParams(t),r=n.paramMappings,o=n.params;this._paramMappings=r,this._params=o},e.prototype.traversePropertyPath=function(t){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var n=t.split("/").reduce(function(i,a){if(!i.nextObj.hasOwnProperty(a))throw new Error("traversePropertyPath - object does not have property "+a+", for path "+t);return{obj:i.nextObj,objProp:a,nextObj:i.nextObj[a]}},{nextObj:this.params}),r=n.obj,o=n.objProp;if(!r||!o||!(r[o]instanceof Gt))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+t);return{obj:r,objProp:o}},e}();function Ar(e,t,n){return Re(function(){var r=Py(e,t.depthwise_filter,t.pointwise_filter,n,"same");return r=ct(r,t.bias),r})}function hv(e,t,n){return n===void 0&&(n=!1),Re(function(){var r=qt(n?ct(Zr(e,t.conv0.filters,[2,2],"same"),t.conv0.bias):Ar(e,t.conv0,[2,2])),o=Ar(r,t.conv1,[1,1]),i=qt(ct(r,o)),a=Ar(i,t.conv2,[1,1]);return qt(ct(r,ct(o,a)))})}function cf(e,t,n,r){return n===void 0&&(n=!1),r===void 0&&(r=!0),Re(function(){var o=qt(n?ct(Zr(e,t.conv0.filters,r?[2,2]:[1,1],"same"),t.conv0.bias):Ar(e,t.conv0,r?[2,2]:[1,1])),i=Ar(o,t.conv1,[1,1]),a=qt(ct(o,i)),s=Ar(a,t.conv2,[1,1]),u=qt(ct(o,ct(i,s))),l=Ar(u,t.conv3,[1,1]);return qt(ct(o,ct(i,ct(s,l))))})}function ho(e,t,n,r){return n===void 0&&(n="same"),r===void 0&&(r=!1),Re(function(){var o=ct(Zr(e,t.filters,[1,1],n),t.bias);return r?qt(o):o})}function Si(e,t){Object.keys(e).forEach(function(n){t.some(function(r){return r.originalPath===n})||e[n].dispose()})}function Sh(e,t){return function(n,r,o,i){var a=gr(e(n*r*o*o),[o,o,n,r]),s=hn(e(r));return t.push({paramPath:i+"/filters"},{paramPath:i+"/bias"}),{filters:a,bias:s}}}function Zy(e,t){return function(n,r,o){var i=oa(e(n*r),[n,r]),a=hn(e(r));return t.push({paramPath:o+"/weights"},{paramPath:o+"/bias"}),{weights:i,bias:a}}}var ik=function(){function e(t,n,r){this.depthwise_filter=t,this.pointwise_filter=n,this.bias=r}return e}();function e0(e,t){return function(n,r,o){var i=gr(e(9*n),[3,3,n,1]),a=gr(e(n*r),[1,1,n,r]),s=hn(e(r));return t.push({paramPath:o+"/depthwise_filter"},{paramPath:o+"/pointwise_filter"},{paramPath:o+"/bias"}),new ik(i,a,s)}}function t0(e){return function(t){var n=e(t+"/depthwise_filter",4),r=e(t+"/pointwise_filter",4),o=e(t+"/bias",1);return new ik(n,r,o)}}function ma(e,t){return function(n,r,o){var i=e[n];if(!wh(i,r))throw new Error("expected weightMap["+n+"] to be a Tensor"+r+"D, instead have "+i);return t.push({originalPath:n,paramPath:o||n}),i}}function _i(e){var t=e;function n(o){var i=t.slice(0,o);return t=t.slice(o),i}function r(){return t}return{extractWeights:n,getRemainingWeights:r}}function ak(e,t){var n=Sh(e,t),r=e0(e,t);function o(a,s,u,l){l===void 0&&(l=!1);var c=l?n(a,s,3,u+"/conv0"):r(a,s,u+"/conv0"),f=r(s,s,u+"/conv1"),d=r(s,s,u+"/conv2");return{conv0:c,conv1:f,conv2:d}}function i(a,s,u,l){l===void 0&&(l=!1);var c=o(a,s,u,l),f=c.conv0,d=c.conv1,p=c.conv2,v=r(s,s,u+"/conv3");return{conv0:f,conv1:d,conv2:p,conv3:v}}return{extractDenseBlock3Params:o,extractDenseBlock4Params:i}}function Qz(e){var t=[],n=_i(e),r=n.extractWeights,o=n.getRemainingWeights,i=ak(r,t).extractDenseBlock4Params,a=i(3,32,"dense0",!0),s=i(32,64,"dense1"),u=i(64,128,"dense2"),l=i(128,256,"dense3");if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:t,params:{dense0:a,dense1:s,dense2:u,dense3:l}}}function sk(e){return function(t){var n=e(t+"/filters",4),r=e(t+"/bias",1);return{filters:n,bias:r}}}function uk(e,t){var n=ma(e,t),r=sk(n),o=t0(n);function i(s,u){u===void 0&&(u=!1);var l=u?r(s+"/conv0"):o(s+"/conv0"),c=o(s+"/conv1"),f=o(s+"/conv2");return{conv0:l,conv1:c,conv2:f}}function a(s,u){u===void 0&&(u=!1);var l=u?r(s+"/conv0"):o(s+"/conv0"),c=o(s+"/conv1"),f=o(s+"/conv2"),d=o(s+"/conv3");return{conv0:l,conv1:c,conv2:f,conv3:d}}return{extractDenseBlock3Params:i,extractDenseBlock4Params:a}}function Jz(e){var t=[],n=uk(e,t).extractDenseBlock4Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2"),dense3:n("dense3")};return Si(e,t),{params:r,paramMappings:t}}var lk=function(e){rt(t,e);function t(){return e.call(this,"FaceFeatureExtractor")||this}return t.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("FaceFeatureExtractor - load model before inference");return Re(function(){var o=n.toBatchTensor(112,!0),i=[122.782,117.001,104.298],a=wc(o,i).div(Ee(255)),s=cf(a,r.dense0,!0);return s=cf(s,r.dense1),s=cf(s,r.dense2),s=cf(s,r.dense3),s=yc(s,[7,7],[2,2],"valid"),s})},t.prototype.forward=function(n){return je(this,void 0,void 0,function(){var r;return We(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,An(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},t.prototype.extractParamsFromWeigthMap=function(n){return Jz(n)},t.prototype.extractParams=function(n){return Qz(n)},t}(Ci);function Bo(e,t){return Re(function(){return ct(gh(e,t.weights),t.bias)})}function Zz(e,t,n){var r=[],o=_i(e),i=o.extractWeights,a=o.getRemainingWeights,s=Zy(i,r),u=s(t,n,"fc");if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:r,params:{fc:u}}}function e5(e){var t=[],n=ma(e,t);function r(i){var a=n(i+"/weights",2),s=n(i+"/bias",1);return{weights:a,bias:s}}var o={fc:r("fc")};return Si(e,t),{params:o,paramMappings:t}}function ck(e){var t={},n={};return Object.keys(e).forEach(function(r){var o=r.startsWith("fc")?n:t;o[r]=e[r]}),{featureExtractorMap:t,classifierMap:n}}var fk=function(e){rt(t,e);function t(n,r){var o=e.call(this,n)||this;return o._faceFeatureExtractor=r,o}return Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(n){var r=this,o=this.params;if(!o)throw new Error(this._name+" - load model before inference");return Re(function(){var i=n instanceof Pd?r.faceFeatureExtractor.forwardInput(n):n;return Bo(i.as2D(i.shape[0],-1),o.fc)})},t.prototype.dispose=function(n){n===void 0&&(n=!0),this.faceFeatureExtractor.dispose(n),e.prototype.dispose.call(this,n)},t.prototype.loadClassifierParams=function(n){var r=this.extractClassifierParams(n),o=r.params,i=r.paramMappings;this._params=o,this._paramMappings=i},t.prototype.extractClassifierParams=function(n){return Zz(n,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},t.prototype.extractParamsFromWeigthMap=function(n){var r=ck(n),o=r.featureExtractorMap,i=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(o),e5(i)},t.prototype.extractParams=function(n){var r=this.getClassifierChannelsIn(),o=this.getClassifierChannelsOut(),i=o*r+o,a=n.slice(0,n.length-i),s=n.slice(n.length-i);return this.faceFeatureExtractor.extractWeights(a),this.extractClassifierParams(s)},t}(Ci),rb=["neutral","happy","sad","angry","fearful","disgusted","surprised"],t5=function(){function e(t){var n=this;if(t.length!==7)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+t.length);rb.forEach(function(r,o){n[r]=t[o]})}return e.prototype.asSortedArray=function(){var t=this;return rb.map(function(n){return{expression:n,probability:t[n]}}).sort(function(n,r){return r.probability-n.probability})},e}(),n5=function(e){rt(t,e);function t(n){return n===void 0&&(n=new lk),e.call(this,"FaceExpressionNet",n)||this}return t.prototype.forwardInput=function(n){var r=this;return Re(function(){return bi(r.runNet(n))})},t.prototype.forward=function(n){return je(this,void 0,void 0,function(){var r;return We(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,An(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},t.prototype.predictExpressions=function(n){return je(this,void 0,void 0,function(){var r,o,i,a,s=this;return We(this,function(u){switch(u.label){case 0:return[4,An(n)];case 1:return r=u.sent(),[4,this.forwardInput(r)];case 2:return o=u.sent(),[4,Promise.all(En(o).map(function(l){return je(s,void 0,void 0,function(){var c;return We(this,function(f){switch(f.label){case 0:return[4,l.data()];case 1:return c=f.sent(),l.dispose(),[2,c]}})})}))];case 3:return i=u.sent(),o.dispose(),a=i.map(function(l){return new t5(l)}),[2,r.isBatchInput?a:a[0]]}})})},t.prototype.getDefaultModelName=function(){return"face_expression_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t.prototype.getClassifierChannelsOut=function(){return 7},t}(fk);function dk(e,t){var n={expressions:t};return Object.assign({},e,n)}function hk(e){return Ad(e)&&e.landmarks instanceof Ql&&e.unshiftedLandmarks instanceof Ql&&e.alignedRect instanceof Lr}function _h(e,t){var n=e.detection.box,r=t.shiftBy(n.x,n.y),o=r.align(),i=e.detection.imageDims,a=new Lr(e.detection.score,o.rescale(i.reverse()),i),s={landmarks:r,unshiftedLandmarks:t,alignedRect:a};return Object.assign({},e,s)}function r5(e,t){var n=Sh(e,t),r=e0(e,t);function o(a,s,u){var l=r(a,s,u+"/separable_conv0"),c=r(s,s,u+"/separable_conv1"),f=n(a,s,1,u+"/expansion_conv");return{separable_conv0:l,separable_conv1:c,expansion_conv:f}}function i(a,s){var u=r(a,a,s+"/separable_conv0"),l=r(a,a,s+"/separable_conv1"),c=r(a,a,s+"/separable_conv2");return{separable_conv0:u,separable_conv1:l,separable_conv2:c}}return{extractConvParams:n,extractSeparableConvParams:r,extractReductionBlockParams:o,extractMainBlockParams:i}}function o5(e,t){var n=[],r=_i(e),o=r.extractWeights,i=r.getRemainingWeights,a=r5(o,n),s=a.extractConvParams,u=a.extractSeparableConvParams,l=a.extractReductionBlockParams,c=a.extractMainBlockParams,f=s(3,32,3,"entry_flow/conv_in"),d=l(32,64,"entry_flow/reduction_block_0"),p=l(64,128,"entry_flow/reduction_block_1"),v={conv_in:f,reduction_block_0:d,reduction_block_1:p},x={};Xl(t,0,1).forEach(function(E){x["main_block_"+E]=c(128,"middle_flow/main_block_"+E)});var w=l(128,256,"exit_flow/reduction_block"),y=u(256,512,"exit_flow/separable_conv"),b={reduction_block:w,separable_conv:y};if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:n,params:{entry_flow:v,middle_flow:x,exit_flow:b}}}function i5(e,t){var n=ma(e,t),r=sk(n),o=t0(n);function i(s){var u=o(s+"/separable_conv0"),l=o(s+"/separable_conv1"),c=r(s+"/expansion_conv");return{separable_conv0:u,separable_conv1:l,expansion_conv:c}}function a(s){var u=o(s+"/separable_conv0"),l=o(s+"/separable_conv1"),c=o(s+"/separable_conv2");return{separable_conv0:u,separable_conv1:l,separable_conv2:c}}return{extractConvParams:r,extractSeparableConvParams:o,extractReductionBlockParams:i,extractMainBlockParams:a}}function a5(e,t){var n=[],r=i5(e,n),o=r.extractConvParams,i=r.extractSeparableConvParams,a=r.extractReductionBlockParams,s=r.extractMainBlockParams,u=o("entry_flow/conv_in"),l=a("entry_flow/reduction_block_0"),c=a("entry_flow/reduction_block_1"),f={conv_in:u,reduction_block_0:l,reduction_block_1:c},d={};Xl(t,0,1).forEach(function(w){d["main_block_"+w]=s("middle_flow/main_block_"+w)});var p=a("exit_flow/reduction_block"),v=i("exit_flow/separable_conv"),x={reduction_block:p,separable_conv:v};return Si(e,n),{params:{entry_flow:f,middle_flow:d,exit_flow:x},paramMappings:n}}function pk(e,t,n){return ct(Zr(e,t.filters,n,"same"),t.bias)}function pv(e,t,n){n===void 0&&(n=!0);var r=n?qt(e):e;return r=Ar(r,t.separable_conv0,[1,1]),r=Ar(qt(r),t.separable_conv1,[1,1]),r=Rn(r,[3,3],[2,2],"same"),r=ct(r,pk(e,t.expansion_conv,[2,2])),r}function s5(e,t){var n=Ar(qt(e),t.separable_conv0,[1,1]);return n=Ar(qt(n),t.separable_conv1,[1,1]),n=Ar(qt(n),t.separable_conv2,[1,1]),n=ct(n,e),n}var u5=function(e){rt(t,e);function t(n){var r=e.call(this,"TinyXception")||this;return r._numMainBlocks=n,r}return t.prototype.forwardInput=function(n){var r=this,o=this.params;if(!o)throw new Error("TinyXception - load model before inference");return Re(function(){var i=n.toBatchTensor(112,!0),a=[122.782,117.001,104.298],s=wc(i,a).div(Ee(256)),u=qt(pk(s,o.entry_flow.conv_in,[2,2]));return u=pv(u,o.entry_flow.reduction_block_0,!1),u=pv(u,o.entry_flow.reduction_block_1),Xl(r._numMainBlocks,0,1).forEach(function(l){u=s5(u,o.middle_flow["main_block_"+l])}),u=pv(u,o.exit_flow.reduction_block),u=qt(Ar(u,o.exit_flow.separable_conv,[1,1])),u})},t.prototype.forward=function(n){return je(this,void 0,void 0,function(){var r;return We(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,An(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"tiny_xception_model"},t.prototype.extractParamsFromWeigthMap=function(n){return a5(n,this._numMainBlocks)},t.prototype.extractParams=function(n){return o5(n,this._numMainBlocks)},t}(Ci);function l5(e){var t=[],n=_i(e),r=n.extractWeights,o=n.getRemainingWeights,i=Zy(r,t),a=i(512,1,"fc/age"),s=i(512,2,"fc/gender");if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:t,params:{fc:{age:a,gender:s}}}}function c5(e){var t=[],n=ma(e,t);function r(i){var a=n(i+"/weights",2),s=n(i+"/bias",1);return{weights:a,bias:s}}var o={fc:{age:r("fc/age"),gender:r("fc/gender")}};return Si(e,t),{params:o,paramMappings:t}}var Fd;(function(e){e.FEMALE="female",e.MALE="male"})(Fd||(Fd={}));var f5=function(e){rt(t,e);function t(n){n===void 0&&(n=new u5(2));var r=e.call(this,"AgeGenderNet")||this;return r._faceFeatureExtractor=n,r}return Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(n){var r=this,o=this.params;if(!o)throw new Error(this._name+" - load model before inference");return Re(function(){var i=n instanceof Pd?r.faceFeatureExtractor.forwardInput(n):n,a=yc(i,[7,7],[2,2],"valid").as2D(i.shape[0],-1),s=Bo(a,o.fc.age).as1D(),u=Bo(a,o.fc.gender);return{age:s,gender:u}})},t.prototype.forwardInput=function(n){var r=this;return Re(function(){var o=r.runNet(n),i=o.age,a=o.gender;return{age:i,gender:bi(a)}})},t.prototype.forward=function(n){return je(this,void 0,void 0,function(){var r;return We(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,An(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},t.prototype.predictAgeAndGender=function(n){return je(this,void 0,void 0,function(){var r,o,i,a,s,u,l=this;return We(this,function(c){switch(c.label){case 0:return[4,An(n)];case 1:return r=c.sent(),[4,this.forwardInput(r)];case 2:return o=c.sent(),i=En(o.age),a=En(o.gender),s=i.map(function(f,d){return{ageTensor:f,genderTensor:a[d]}}),[4,Promise.all(s.map(function(f){var d=f.ageTensor,p=f.genderTensor;return je(l,void 0,void 0,function(){var v,x,w,y,b;return We(this,function(E){switch(E.label){case 0:return[4,d.data()];case 1:return v=E.sent()[0],[4,p.data()];case 2:return x=E.sent()[0],w=x>.5,y=w?Fd.MALE:Fd.FEMALE,b=w?x:1-x,d.dispose(),p.dispose(),[2,{age:v,gender:y,genderProbability:b}]}})})}))];case 3:return u=c.sent(),o.age.dispose(),o.gender.dispose(),[2,r.isBatchInput?u:u[0]]}})})},t.prototype.getDefaultModelName=function(){return"age_gender_model"},t.prototype.dispose=function(n){n===void 0&&(n=!0),this.faceFeatureExtractor.dispose(n),e.prototype.dispose.call(this,n)},t.prototype.loadClassifierParams=function(n){var r=this.extractClassifierParams(n),o=r.params,i=r.paramMappings;this._params=o,this._paramMappings=i},t.prototype.extractClassifierParams=function(n){return l5(n)},t.prototype.extractParamsFromWeigthMap=function(n){var r=ck(n),o=r.featureExtractorMap,i=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(o),c5(i)},t.prototype.extractParams=function(n){var r=1539,o=n.slice(0,n.length-r),i=n.slice(n.length-r);return this.faceFeatureExtractor.extractWeights(o),this.extractClassifierParams(i)},t}(Ci),vk=function(e){rt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.postProcess=function(n,r,o){var i=o.map(function(s){var u=s.width,l=s.height,c=r/Math.max(l,u);return{width:u*c,height:l*c}}),a=i.length;return Re(function(){var s=function(d,p){return Or([$o([68],d),$o([68],p)],1).as2D(1,136).as1D()},u=function(d,p){var v=i[d],x=v.width,w=v.height;return p(x,w)?Math.abs(x-w)/2:0},l=function(d){return u(d,function(p,v){return p<v})},c=function(d){return u(d,function(p,v){return v<p})},f=n.mul($o([a,136],r)).sub(Or(Array.from(Array(a),function(d,p){return s(l(p),c(p))}))).div(Or(Array.from(Array(a),function(d,p){return s(i[p].width,i[p].height)})));return f})},t.prototype.forwardInput=function(n){var r=this;return Re(function(){var o=r.runNet(n);return r.postProcess(o,n.inputSize,n.inputDimensions.map(function(i){var a=i[0],s=i[1];return{height:a,width:s}}))})},t.prototype.forward=function(n){return je(this,void 0,void 0,function(){var r;return We(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,An(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},t.prototype.detectLandmarks=function(n){return je(this,void 0,void 0,function(){var r,o,i,a=this;return We(this,function(s){switch(s.label){case 0:return[4,An(n)];case 1:return r=s.sent(),o=Re(function(){return En(a.forwardInput(r))}),[4,Promise.all(o.map(function(u,l){return je(a,void 0,void 0,function(){var c,f,d,p,v;return We(this,function(x){switch(x.label){case 0:return d=(f=Array).from,[4,u.data()];case 1:return c=d.apply(f,[x.sent()]),p=c.filter(function(w,y){return Qw(y)}),v=c.filter(function(w,y){return!Qw(y)}),[2,new Lz(Array(68).fill(0).map(function(w,y){return new Rt(p[y],v[y])}),{height:r.getInputHeight(l),width:r.getInputWidth(l)})]}})})}))];case 2:return i=s.sent(),o.forEach(function(u){return u.dispose()}),[2,r.isBatchInput?i:i[0]]}})})},t.prototype.getClassifierChannelsOut=function(){return 136},t}(fk),mk=function(e){rt(t,e);function t(n){return n===void 0&&(n=new lk),e.call(this,"FaceLandmark68Net",n)||this}return t.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t}(vk);function d5(e){var t=[],n=uk(e,t).extractDenseBlock3Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2")};return Si(e,t),{params:r,paramMappings:t}}function h5(e){var t=[],n=_i(e),r=n.extractWeights,o=n.getRemainingWeights,i=ak(r,t).extractDenseBlock3Params,a=i(3,32,"dense0",!0),s=i(32,64,"dense1"),u=i(64,128,"dense2");if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:t,params:{dense0:a,dense1:s,dense2:u}}}var p5=function(e){rt(t,e);function t(){return e.call(this,"TinyFaceFeatureExtractor")||this}return t.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("TinyFaceFeatureExtractor - load model before inference");return Re(function(){var o=n.toBatchTensor(112,!0),i=[122.782,117.001,104.298],a=wc(o,i).div(Ee(255)),s=hv(a,r.dense0,!0);return s=hv(s,r.dense1),s=hv(s,r.dense2),s=yc(s,[14,14],[2,2],"valid"),s})},t.prototype.forward=function(n){return je(this,void 0,void 0,function(){var r;return We(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,An(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},t.prototype.extractParamsFromWeigthMap=function(n){return d5(n)},t.prototype.extractParams=function(n){return h5(n)},t}(Ci),v5=function(e){rt(t,e);function t(n){return n===void 0&&(n=new p5),e.call(this,"FaceLandmark68TinyNet",n)||this}return t.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},t.prototype.getClassifierChannelsIn=function(){return 128},t}(vk);(function(e){rt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(mk);function m5(e,t){return ct(Qn(e,t.weights),t.biases)}function n0(e,t,n,r,o){o===void 0&&(o="same");var i=t.conv,a=i.filters,s=i.bias,u=Zr(e,a,n,o);return u=ct(u,s),u=m5(u,t.scale),r?qt(u):u}function g5(e,t){return n0(e,t,[1,1],!0)}function gk(e,t){return n0(e,t,[1,1],!1)}function yk(e,t){return n0(e,t,[2,2],!0,"valid")}function y5(e,t){function n(s,u,l){var c=e(s),f=c.length/(u*l*l);if(Tz(f))throw new Error("depth has to be an integer: "+f+", weights.length: "+c.length+", numFilters: "+u+", filterSize: "+l);return Re(function(){return la(gr(c,[u,f,l,l]),[2,3,1,0])})}function r(s,u,l,c){var f=n(s,u,l),d=hn(e(u));return t.push({paramPath:c+"/filters"},{paramPath:c+"/bias"}),{filters:f,bias:d}}function o(s,u){var l=hn(e(s)),c=hn(e(s));return t.push({paramPath:u+"/weights"},{paramPath:u+"/biases"}),{weights:l,biases:c}}function i(s,u,l,c){var f=r(s,u,l,c+"/conv"),d=o(u,c+"/scale");return{conv:f,scale:d}}function a(s,u,l,c,f){f===void 0&&(f=!1);var d=i((f?.5:1)*s,u,l,c+"/conv1"),p=i(s,u,l,c+"/conv2");return{conv1:d,conv2:p}}return{extractConvLayerParams:i,extractResidualLayerParams:a}}function x5(e){var t=_i(e),n=t.extractWeights,r=t.getRemainingWeights,o=[],i=y5(n,o),a=i.extractConvLayerParams,s=i.extractResidualLayerParams,u=a(4704,32,7,"conv32_down"),l=s(9216,32,3,"conv32_1"),c=s(9216,32,3,"conv32_2"),f=s(9216,32,3,"conv32_3"),d=s(36864,64,3,"conv64_down",!0),p=s(36864,64,3,"conv64_1"),v=s(36864,64,3,"conv64_2"),x=s(36864,64,3,"conv64_3"),w=s(147456,128,3,"conv128_down",!0),y=s(147456,128,3,"conv128_1"),b=s(147456,128,3,"conv128_2"),E=s(589824,256,3,"conv256_down",!0),S=s(589824,256,3,"conv256_1"),R=s(589824,256,3,"conv256_2"),k=s(589824,256,3,"conv256_down_out"),m=Re(function(){return la(oa(n(256*128),[128,256]),[1,0])});if(o.push({paramPath:"fc"}),r().length!==0)throw new Error("weights remaing after extract: "+r().length);var P={conv32_down:u,conv32_1:l,conv32_2:c,conv32_3:f,conv64_down:d,conv64_1:p,conv64_2:v,conv64_3:x,conv128_down:w,conv128_1:y,conv128_2:b,conv256_down:E,conv256_1:S,conv256_2:R,conv256_down_out:k,fc:m};return{params:P,paramMappings:o}}function w5(e,t){var n=ma(e,t);function r(a){var s=n(a+"/scale/weights",1),u=n(a+"/scale/biases",1);return{weights:s,biases:u}}function o(a){var s=n(a+"/conv/filters",4),u=n(a+"/conv/bias",1),l=r(a);return{conv:{filters:s,bias:u},scale:l}}function i(a){return{conv1:o(a+"/conv1"),conv2:o(a+"/conv2")}}return{extractConvLayerParams:o,extractResidualLayerParams:i}}function b5(e){var t=[],n=w5(e,t),r=n.extractConvLayerParams,o=n.extractResidualLayerParams,i=r("conv32_down"),a=o("conv32_1"),s=o("conv32_2"),u=o("conv32_3"),l=o("conv64_down"),c=o("conv64_1"),f=o("conv64_2"),d=o("conv64_3"),p=o("conv128_down"),v=o("conv128_1"),x=o("conv128_2"),w=o("conv256_down"),y=o("conv256_1"),b=o("conv256_2"),E=o("conv256_down_out"),S=e.fc;if(t.push({originalPath:"fc",paramPath:"fc"}),!Rz(S))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+S);var R={conv32_down:i,conv32_1:a,conv32_2:s,conv32_3:u,conv64_down:l,conv64_1:c,conv64_2:f,conv64_3:d,conv128_down:p,conv128_1:v,conv128_2:x,conv256_down:w,conv256_1:y,conv256_2:b,conv256_down_out:E,fc:S};return Si(e,t),{params:R,paramMappings:t}}function ko(e,t){var n=g5(e,t.conv1);return n=gk(n,t.conv2),n=ct(n,e),n=qt(n),n}function ff(e,t){var n=yk(e,t.conv1);n=gk(n,t.conv2);var r=yc(e,2,2,"valid"),o=Wt(r.shape),i=r.shape[3]!==n.shape[3],a=r.shape[1]!==n.shape[1]||r.shape[2]!==n.shape[2];if(a){var s=Cl(n.shape);s[1]=1;var u=Wt(s);n=bn([n,u],1);var l=Cl(n.shape);l[2]=1;var c=Wt(l);n=bn([n,c],2)}return r=i?bn([r,o],3):r,n=ct(r,n),n=qt(n),n}var E5=function(e){rt(t,e);function t(){return e.call(this,"FaceRecognitionNet")||this}return t.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("FaceRecognitionNet - load model before inference");return Re(function(){var o=n.toBatchTensor(150,!0).toFloat(),i=[122.782,117.001,104.298],a=wc(o,i).div(Ee(256)),s=yk(a,r.conv32_down);s=Rn(s,3,2,"valid"),s=ko(s,r.conv32_1),s=ko(s,r.conv32_2),s=ko(s,r.conv32_3),s=ff(s,r.conv64_down),s=ko(s,r.conv64_1),s=ko(s,r.conv64_2),s=ko(s,r.conv64_3),s=ff(s,r.conv128_down),s=ko(s,r.conv128_1),s=ko(s,r.conv128_2),s=ff(s,r.conv256_down),s=ko(s,r.conv256_1),s=ko(s,r.conv256_2),s=ff(s,r.conv256_down_out);var u=s.mean([1,2]),l=gh(u,r.fc);return l})},t.prototype.forward=function(n){return je(this,void 0,void 0,function(){var r;return We(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,An(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},t.prototype.computeFaceDescriptor=function(n){return je(this,void 0,void 0,function(){var r,o,i,a=this;return We(this,function(s){switch(s.label){case 0:return[4,An(n)];case 1:return r=s.sent(),o=Re(function(){return En(a.forwardInput(r))}),[4,Promise.all(o.map(function(u){return u.data()}))];case 2:return i=s.sent(),o.forEach(function(u){return u.dispose()}),[2,r.isBatchInput?i:i[0]]}})})},t.prototype.getDefaultModelName=function(){return"face_recognition_model"},t.prototype.extractParamsFromWeigthMap=function(n){return b5(n)},t.prototype.extractParams=function(n){return x5(n)},t}(Ci);function xk(e,t){var n={descriptor:t};return Object.assign({},e,n)}function wk(e,t){var n={age:t};return Object.assign({},e,n)}function bk(e,t,n){var r={gender:t,genderProbability:n};return Object.assign({},e,r)}var Ek=function(){function e(t){var n=t===void 0?{}:t,r=n.minFaceSize,o=n.scaleFactor,i=n.maxNumScales,a=n.scoreThresholds,s=n.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=r||20,this._scaleFactor=o||.709,this._maxNumScales=i||10,this._scoreThresholds=a||[.6,.7,.7],this._scaleSteps=s,typeof this._minFaceSize!="number"||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if(typeof this._scaleFactor!="number"||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if(typeof this._maxNumScales!="number"||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||this._scoreThresholds.length!==3||this._scoreThresholds.some(function(u){return typeof u!="number"}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(u){return typeof u!="number"})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(e.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),e}();function C5(e,t){function n(u,l){var c=gr(e(9*u),[3,3,u,1]),f=hn(e(u)),d=hn(e(u)),p=hn(e(u)),v=hn(e(u));return t.push({paramPath:l+"/filters"},{paramPath:l+"/batch_norm_scale"},{paramPath:l+"/batch_norm_offset"},{paramPath:l+"/batch_norm_mean"},{paramPath:l+"/batch_norm_variance"}),{filters:c,batch_norm_scale:f,batch_norm_offset:d,batch_norm_mean:p,batch_norm_variance:v}}function r(u,l,c,f,d){var p=gr(e(u*l*c*c),[c,c,u,l]),v=hn(e(l));return t.push({paramPath:f+"/filters"},{paramPath:f+"/"+(d?"batch_norm_offset":"bias")}),{filters:p,bias:v}}function o(u,l,c,f){var d=r(u,l,c,f,!0),p=d.filters,v=d.bias;return{filters:p,batch_norm_offset:v}}function i(u,l,c){var f=n(u,c+"/depthwise_conv"),d=o(u,l,1,c+"/pointwise_conv");return{depthwise_conv:f,pointwise_conv:d}}function a(){var u=o(3,32,3,"mobilenetv1/conv_0"),l=i(32,64,"mobilenetv1/conv_1"),c=i(64,128,"mobilenetv1/conv_2"),f=i(128,128,"mobilenetv1/conv_3"),d=i(128,256,"mobilenetv1/conv_4"),p=i(256,256,"mobilenetv1/conv_5"),v=i(256,512,"mobilenetv1/conv_6"),x=i(512,512,"mobilenetv1/conv_7"),w=i(512,512,"mobilenetv1/conv_8"),y=i(512,512,"mobilenetv1/conv_9"),b=i(512,512,"mobilenetv1/conv_10"),E=i(512,512,"mobilenetv1/conv_11"),S=i(512,1024,"mobilenetv1/conv_12"),R=i(1024,1024,"mobilenetv1/conv_13");return{conv_0:u,conv_1:l,conv_2:c,conv_3:f,conv_4:d,conv_5:p,conv_6:v,conv_7:x,conv_8:w,conv_9:y,conv_10:b,conv_11:E,conv_12:S,conv_13:R}}function s(){var u=o(1024,256,1,"prediction_layer/conv_0"),l=o(256,512,3,"prediction_layer/conv_1"),c=o(512,128,1,"prediction_layer/conv_2"),f=o(128,256,3,"prediction_layer/conv_3"),d=o(256,128,1,"prediction_layer/conv_4"),p=o(128,256,3,"prediction_layer/conv_5"),v=o(256,64,1,"prediction_layer/conv_6"),x=o(64,128,3,"prediction_layer/conv_7"),w=r(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),y=r(512,9,1,"prediction_layer/box_predictor_0/class_predictor"),b=r(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),E=r(1024,18,1,"prediction_layer/box_predictor_1/class_predictor"),S=r(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),R=r(512,18,1,"prediction_layer/box_predictor_2/class_predictor"),k=r(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),m=r(256,18,1,"prediction_layer/box_predictor_3/class_predictor"),P=r(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),D=r(256,18,1,"prediction_layer/box_predictor_4/class_predictor"),N=r(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),B=r(128,18,1,"prediction_layer/box_predictor_5/class_predictor"),z={box_encoding_predictor:w,class_predictor:y},V={box_encoding_predictor:b,class_predictor:E},Z={box_encoding_predictor:S,class_predictor:R},K={box_encoding_predictor:k,class_predictor:m},ne={box_encoding_predictor:P,class_predictor:D},J={box_encoding_predictor:N,class_predictor:B};return{conv_0:u,conv_1:l,conv_2:c,conv_3:f,conv_4:d,conv_5:p,conv_6:v,conv_7:x,box_predictor_0:z,box_predictor_1:V,box_predictor_2:Z,box_predictor_3:K,box_predictor_4:ne,box_predictor_5:J}}return{extractMobilenetV1Params:a,extractPredictionLayerParams:s}}function S5(e){var t=[],n=_i(e),r=n.extractWeights,o=n.getRemainingWeights,i=C5(r,t),a=i.extractMobilenetV1Params,s=i.extractPredictionLayerParams,u=a(),l=s(),c=yy(r(5118*4),[1,5118,4]),f={extra_dim:c};if(t.push({paramPath:"output_layer/extra_dim"}),o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{params:{mobilenetv1:u,prediction_layer:l,output_layer:f},paramMappings:t}}function _5(e,t){var n=ma(e,t);function r(l,c,f){var d=n(l+"/Conv2d_"+c+"_pointwise/weights",4,f+"/filters"),p=n(l+"/Conv2d_"+c+"_pointwise/convolution_bn_offset",1,f+"/batch_norm_offset");return{filters:d,batch_norm_offset:p}}function o(l){var c="mobilenetv1/conv_"+l,f="MobilenetV1/Conv2d_"+l+"_depthwise",d=c+"/depthwise_conv",p=c+"/pointwise_conv",v=n(f+"/depthwise_weights",4,d+"/filters"),x=n(f+"/BatchNorm/gamma",1,d+"/batch_norm_scale"),w=n(f+"/BatchNorm/beta",1,d+"/batch_norm_offset"),y=n(f+"/BatchNorm/moving_mean",1,d+"/batch_norm_mean"),b=n(f+"/BatchNorm/moving_variance",1,d+"/batch_norm_variance");return{depthwise_conv:{filters:v,batch_norm_scale:x,batch_norm_offset:w,batch_norm_mean:y,batch_norm_variance:b},pointwise_conv:r("MobilenetV1",l,p)}}function i(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:o(1),conv_2:o(2),conv_3:o(3),conv_4:o(4),conv_5:o(5),conv_6:o(6),conv_7:o(7),conv_8:o(8),conv_9:o(9),conv_10:o(10),conv_11:o(11),conv_12:o(12),conv_13:o(13)}}function a(l,c){var f=n(l+"/weights",4,c+"/filters"),d=n(l+"/biases",1,c+"/bias");return{filters:f,bias:d}}function s(l){var c=a("Prediction/BoxPredictor_"+l+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+l+"/box_encoding_predictor"),f=a("Prediction/BoxPredictor_"+l+"/ClassPredictor","prediction_layer/box_predictor_"+l+"/class_predictor");return{box_encoding_predictor:c,class_predictor:f}}function u(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:s(0),box_predictor_1:s(1),box_predictor_2:s(2),box_predictor_3:s(3),box_predictor_4:s(4),box_predictor_5:s(5)}}return{extractMobilenetV1Params:i,extractPredictionLayerParams:u}}function k5(e){var t=[],n=_5(e,t),r=n.extractMobilenetV1Params,o=n.extractPredictionLayerParams,i=e["Output/extra_dim"];if(t.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!bh(i))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+i);var a={mobilenetv1:r(),prediction_layer:o(),output_layer:{extra_dim:i}};return Si(e,t),{params:a,paramMappings:t}}function To(e,t,n){return Re(function(){var r=Zr(e,t.filters,n,"same");return r=ct(r,t.batch_norm_offset),Iy(r,0,6)})}var R5=.0010000000474974513;function T5(e,t,n){return Re(function(){var r=mh(e,t.filters,n,"same");return r=v_(r,t.batch_norm_mean,t.batch_norm_variance,t.batch_norm_offset,t.batch_norm_scale,R5),Iy(r,0,6)})}function I5(e){return[2,4,6,12].some(function(t){return t===e})?[2,2]:[1,1]}function D5(e,t){return Re(function(){var n=null,r=To(e,t.conv_0,[2,2]),o=[t.conv_1,t.conv_2,t.conv_3,t.conv_4,t.conv_5,t.conv_6,t.conv_7,t.conv_8,t.conv_9,t.conv_10,t.conv_11,t.conv_12,t.conv_13];if(o.forEach(function(i,a){var s=a+1,u=I5(s);r=T5(r,i.depthwise_conv,u),r=To(r,i.pointwise_conv,[1,1]),s===11&&(n=r)}),n===null)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:n}})}function N5(e,t,n,r,o){var i=e.shape[0],a=Math.min(n,i),s=t.map(function(c,f){return{score:c,boxIndex:f}}).filter(function(c){return c.score>o}).sort(function(c,f){return f.score-c.score}),u=function(c){return c<=r?1:0},l=[];return s.forEach(function(c){if(!(l.length>=a)){for(var f=c.score,d=l.length-1;d>=0;--d){var p=A5(e,c.boxIndex,l[d]);if(p!==0&&(c.score*=u(p),c.score<=o))break}f===c.score&&l.push(c.boxIndex)}}),l}function A5(e,t,n){var r=e.arraySync(),o=Math.min(r[t][0],r[t][2]),i=Math.min(r[t][1],r[t][3]),a=Math.max(r[t][0],r[t][2]),s=Math.max(r[t][1],r[t][3]),u=Math.min(r[n][0],r[n][2]),l=Math.min(r[n][1],r[n][3]),c=Math.max(r[n][0],r[n][2]),f=Math.max(r[n][1],r[n][3]),d=(a-o)*(s-i),p=(c-u)*(f-l);if(d<=0||p<=0)return 0;var v=Math.max(o,u),x=Math.max(i,l),w=Math.min(a,c),y=Math.min(s,f),b=Math.max(w-v,0)*Math.max(y-x,0);return b/(d+p-b)}function P5(e){var t=En(la(e,[1,0])),n=[_n(t[2],t[0]),_n(t[3],t[1])],r=[ct(t[0],uo(n[0],Ee(2))),ct(t[1],uo(n[1],Ee(2)))];return{sizes:n,centers:r}}function F5(e,t){var n=P5(e),r=n.sizes,o=n.centers,i=En(la(t,[1,0])),a=uo(Qn(Hm(uo(i[2],Ee(5))),r[0]),Ee(2)),s=ct(Qn(uo(i[0],Ee(10)),r[0]),o[0]),u=uo(Qn(Hm(uo(i[3],Ee(5))),r[1]),Ee(2)),l=ct(Qn(uo(i[1],Ee(10)),r[1]),o[1]);return la(Or([_n(s,a),_n(l,u),ct(s,a),ct(l,u)]),[1,0])}function O5(e,t,n){return Re(function(){var r=e.shape[0],o=F5(lo(Js(n.extra_dim,[r,1,1]),[-1,4]),lo(e,[-1,4]));o=lo(o,[r,o.shape[0]/r,4]);var i=f_(Ho(t,[0,0,1],[-1,-1,-1])),a=Ho(i,[0,0,0],[-1,-1,1]);a=lo(a,[r,a.shape[1]]);var s=En(o),u=En(a);return{boxes:s,scores:u}})}function Ss(e,t){return Re(function(){var n=e.shape[0],r=lo(ho(e,t.box_encoding_predictor),[n,-1,1,4]),o=lo(ho(e,t.class_predictor),[n,-1,3]);return{boxPredictionEncoding:r,classPrediction:o}})}function M5(e,t,n){return Re(function(){var r=To(e,n.conv_0,[1,1]),o=To(r,n.conv_1,[2,2]),i=To(o,n.conv_2,[1,1]),a=To(i,n.conv_3,[2,2]),s=To(a,n.conv_4,[1,1]),u=To(s,n.conv_5,[2,2]),l=To(u,n.conv_6,[1,1]),c=To(l,n.conv_7,[2,2]),f=Ss(t,n.box_predictor_0),d=Ss(e,n.box_predictor_1),p=Ss(o,n.box_predictor_2),v=Ss(a,n.box_predictor_3),x=Ss(u,n.box_predictor_4),w=Ss(c,n.box_predictor_5),y=bn([f.boxPredictionEncoding,d.boxPredictionEncoding,p.boxPredictionEncoding,v.boxPredictionEncoding,x.boxPredictionEncoding,w.boxPredictionEncoding],1),b=bn([f.classPrediction,d.classPrediction,p.classPrediction,v.classPrediction,x.classPrediction,w.classPrediction],1);return{boxPredictions:y,classPredictions:b}})}var kh=function(){function e(t){var n=t===void 0?{}:t,r=n.minConfidence,o=n.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=r||.5,this._maxResults=o||100,typeof this._minConfidence!="number"||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if(typeof this._maxResults!="number")throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(e.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),e}(),Ck=function(e){rt(t,e);function t(){return e.call(this,"SsdMobilenetv1")||this}return t.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("SsdMobilenetv1 - load model before inference");return Re(function(){var o=n.toBatchTensor(512,!1).toFloat(),i=_n(Qn(o,Ee(.007843137718737125)),Ee(1)),a=D5(i,r.mobilenetv1),s=M5(a.out,a.conv11,r.prediction_layer),u=s.boxPredictions,l=s.classPredictions;return O5(u,l,r.output_layer)})},t.prototype.forward=function(n){return je(this,void 0,void 0,function(){var r;return We(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,An(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},t.prototype.locateFaces=function(n,r){return r===void 0&&(r={}),je(this,void 0,void 0,function(){var o,i,a,s,u,l,c,f,d,p,v,x,w,y,b,E,S,R,k,m,P;return We(this,function(D){switch(D.label){case 0:return o=new kh(r),i=o.maxResults,a=o.minConfidence,[4,An(n)];case 1:for(s=D.sent(),u=this.forwardInput(s),l=u.boxes,c=u.scores,f=l[0],d=c[0],p=1;p<l.length;p++)l[p].dispose(),c[p].dispose();return w=(x=Array).from,[4,d.data()];case 2:return v=w.apply(x,[D.sent()]),y=.5,b=N5(f,v,i,y,a),E=s.getReshapedInputDimensions(0),S=s.inputSize,R=S/E.width,k=S/E.height,m=f.arraySync(),P=b.map(function(N){var B=[Math.max(0,m[N][0]),Math.min(1,m[N][2])].map(function(J){return J*k}),z=B[0],V=B[1],Z=[Math.max(0,m[N][1]),Math.min(1,m[N][3])].map(function(J){return J*R}),K=Z[0],ne=Z[1];return new Lr(v[N],new Gy(K,z,ne-K,V-z),{height:s.getInputHeight(0),width:s.getInputWidth(0)})}),f.dispose(),d.dispose(),[2,P]}})})},t.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},t.prototype.extractParamsFromWeigthMap=function(n){return k5(n)},t.prototype.extractParams=function(n){return S5(n)},t}(Ci);(function(e){rt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(Ck);var L5=.4,B5=[new Rt(.738768,.874946),new Rt(2.42204,2.65704),new Rt(4.30971,7.04493),new Rt(10.246,4.59428),new Rt(12.6868,11.8741)],j5=[new Rt(1.603231,2.094468),new Rt(6.041143,7.080126),new Rt(2.882459,3.518061),new Rt(4.266906,5.178857),new Rt(9.041765,10.66308)],W5=[117.001,114.697,97.404],z5="tiny_yolov2_model",U5="tiny_yolov2_separable_conv_model",df=function(e){return typeof e=="number"};function $5(e){if(!e)throw new Error("invalid config: "+e);if(typeof e.withSeparableConvs!="boolean")throw new Error("config.withSeparableConvs has to be a boolean, have: "+e.withSeparableConvs);if(!df(e.iouThreshold)||e.iouThreshold<0||e.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+e.iouThreshold);if(!Array.isArray(e.classes)||!e.classes.length||!e.classes.every(function(t){return typeof t=="string"}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(e.classes));if(!Array.isArray(e.anchors)||!e.anchors.length||!e.anchors.map(function(t){return t||{}}).every(function(t){return df(t.x)&&df(t.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(e.anchors));if(e.meanRgb&&(!Array.isArray(e.meanRgb)||e.meanRgb.length!==3||!e.meanRgb.every(df)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(e.meanRgb))}function r0(e){return Re(function(){var t=Qn(e,Ee(.10000000149011612));return ct(qt(_n(e,t)),t)})}function Pi(e,t){return Re(function(){var n=ss(e,[[0,0],[1,1],[1,1],[0,0]]);return n=Zr(n,t.conv.filters,[1,1],"valid"),n=_n(n,t.bn.sub),n=Qn(n,t.bn.truediv),n=ct(n,t.conv.bias),r0(n)})}function Fi(e,t){return Re(function(){var n=ss(e,[[0,0],[1,1],[1,1],[0,0]]);return n=Py(n,t.depthwise_filter,t.pointwise_filter,[1,1],"valid"),n=ct(n,t.bias),r0(n)})}function H5(e,t){var n=Sh(e,t);function r(a,s){var u=hn(e(a)),l=hn(e(a));return t.push({paramPath:s+"/sub"},{paramPath:s+"/truediv"}),{sub:u,truediv:l}}function o(a,s,u){var l=n(a,s,3,u+"/conv"),c=r(s,u+"/bn");return{conv:l,bn:c}}var i=e0(e,t);return{extractConvParams:n,extractConvWithBatchNormParams:o,extractSeparableConvParams:i}}function V5(e,t,n,r){var o=_i(e),i=o.extractWeights,a=o.getRemainingWeights,s=[],u=H5(i,s),l=u.extractConvParams,c=u.extractConvWithBatchNormParams,f=u.extractSeparableConvParams,d;if(t.withSeparableConvs){var p=r[0],v=r[1],x=r[2],w=r[3],y=r[4],b=r[5],E=r[6],S=r[7],R=r[8],k=t.isFirstLayerConv2d?l(p,v,3,"conv0"):f(p,v,"conv0"),m=f(v,x,"conv1"),P=f(x,w,"conv2"),D=f(w,y,"conv3"),N=f(y,b,"conv4"),B=f(b,E,"conv5"),z=S?f(E,S,"conv6"):void 0,V=R?f(S,R,"conv7"):void 0,Z=l(R||S||E,5*n,1,"conv8");d={conv0:k,conv1:m,conv2:P,conv3:D,conv4:N,conv5:B,conv6:z,conv7:V,conv8:Z}}else{var p=r[0],v=r[1],x=r[2],w=r[3],y=r[4],b=r[5],E=r[6],S=r[7],R=r[8],k=c(p,v,"conv0"),m=c(v,x,"conv1"),P=c(x,w,"conv2"),D=c(w,y,"conv3"),N=c(y,b,"conv4"),B=c(b,E,"conv5"),z=c(E,S,"conv6"),V=c(S,R,"conv7"),Z=l(R,5*n,1,"conv8");d={conv0:k,conv1:m,conv2:P,conv3:D,conv4:N,conv5:B,conv6:z,conv7:V,conv8:Z}}if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{params:d,paramMappings:s}}function G5(e,t){var n=ma(e,t);function r(s){var u=n(s+"/sub",1),l=n(s+"/truediv",1);return{sub:u,truediv:l}}function o(s){var u=n(s+"/filters",4),l=n(s+"/bias",1);return{filters:u,bias:l}}function i(s){var u=o(s+"/conv"),l=r(s+"/bn");return{conv:u,bn:l}}var a=t0(n);return{extractConvParams:o,extractConvWithBatchNormParams:i,extractSeparableConvParams:a}}function q5(e,t){var n=[],r=G5(e,n),o=r.extractConvParams,i=r.extractConvWithBatchNormParams,a=r.extractSeparableConvParams,s;if(t.withSeparableConvs){var u=t.filterSizes&&t.filterSizes.length||9;s={conv0:t.isFirstLayerConv2d?o("conv0"):a("conv0"),conv1:a("conv1"),conv2:a("conv2"),conv3:a("conv3"),conv4:a("conv4"),conv5:a("conv5"),conv6:u>7?a("conv6"):void 0,conv7:u>8?a("conv7"):void 0,conv8:o("conv8")}}else s={conv0:i("conv0"),conv1:i("conv1"),conv2:i("conv2"),conv3:i("conv3"),conv4:i("conv4"),conv5:i("conv5"),conv6:i("conv6"),conv7:i("conv7"),conv8:o("conv8")};return Si(e,n),{params:s,paramMappings:n}}var ob;(function(e){e[e.XS=224]="XS",e[e.SM=320]="SM",e[e.MD=416]="MD",e[e.LG=608]="LG"})(ob||(ob={}));var o0=function(){function e(t){var n=t===void 0?{}:t,r=n.inputSize,o=n.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=r||416,this._scoreThreshold=o||.5,typeof this._inputSize!="number"||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if(typeof this._scoreThreshold!="number"||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),e}(),Sk=function(e){rt(t,e);function t(n){var r=e.call(this,"TinyYolov2")||this;return $5(n),r._config=n,r}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),t.prototype.runTinyYolov2=function(n,r){var o=Pi(n,r.conv0);return o=Rn(o,[2,2],[2,2],"same"),o=Pi(o,r.conv1),o=Rn(o,[2,2],[2,2],"same"),o=Pi(o,r.conv2),o=Rn(o,[2,2],[2,2],"same"),o=Pi(o,r.conv3),o=Rn(o,[2,2],[2,2],"same"),o=Pi(o,r.conv4),o=Rn(o,[2,2],[2,2],"same"),o=Pi(o,r.conv5),o=Rn(o,[2,2],[1,1],"same"),o=Pi(o,r.conv6),o=Pi(o,r.conv7),ho(o,r.conv8,"valid",!1)},t.prototype.runMobilenet=function(n,r){var o=this.config.isFirstLayerConv2d?r0(ho(n,r.conv0,"valid",!1)):Fi(n,r.conv0);return o=Rn(o,[2,2],[2,2],"same"),o=Fi(o,r.conv1),o=Rn(o,[2,2],[2,2],"same"),o=Fi(o,r.conv2),o=Rn(o,[2,2],[2,2],"same"),o=Fi(o,r.conv3),o=Rn(o,[2,2],[2,2],"same"),o=Fi(o,r.conv4),o=Rn(o,[2,2],[2,2],"same"),o=Fi(o,r.conv5),o=Rn(o,[2,2],[1,1],"same"),o=r.conv6?Fi(o,r.conv6):o,o=r.conv7?Fi(o,r.conv7):o,ho(o,r.conv8,"valid",!1)},t.prototype.forwardInput=function(n,r){var o=this,i=this.params;if(!i)throw new Error("TinyYolov2 - load model before inference");return Re(function(){var a=n.toBatchTensor(r,!1).toFloat();return a=o.config.meanRgb?wc(a,o.config.meanRgb):a,a=a.div(Ee(256)),o.config.withSeparableConvs?o.runMobilenet(a,i):o.runTinyYolov2(a,i)})},t.prototype.forward=function(n,r){return je(this,void 0,void 0,function(){var o;return We(this,function(i){switch(i.label){case 0:return o=this.forwardInput,[4,An(n)];case 1:return[4,o.apply(this,[i.sent(),r])];case 2:return[2,i.sent()]}})})},t.prototype.detect=function(n,r){return r===void 0&&(r={}),je(this,void 0,void 0,function(){var o,i,a,s,u,l,c,f,d,p,v,x,w,y,b=this;return We(this,function(E){switch(E.label){case 0:return o=new o0(r),i=o.inputSize,a=o.scoreThreshold,[4,An(n)];case 1:return s=E.sent(),[4,this.forwardInput(s,i)];case 2:return u=E.sent(),l=Re(function(){return En(u)[0].expandDims()}),c={width:s.getInputWidth(0),height:s.getInputHeight(0)},[4,this.extractBoxes(l,s.getReshapedInputDimensions(0),a)];case 3:return f=E.sent(),u.dispose(),l.dispose(),d=f.map(function(S){return S.box}),p=f.map(function(S){return S.score}),v=f.map(function(S){return S.classScore}),x=f.map(function(S){return b.config.classes[S.label]}),w=Yl(d.map(function(S){return S.rescale(i)}),p,this.config.iouThreshold,!0),y=w.map(function(S){return new Y_(p[S],v[S],x[S],d[S],c)}),[2,y]}})})},t.prototype.getDefaultModelName=function(){return""},t.prototype.extractParamsFromWeigthMap=function(n){return q5(n,this.config)},t.prototype.extractParams=function(n){var r=this.config.filterSizes||t.DEFAULT_FILTER_SIZES,o=r?r.length:void 0;if(o!==7&&o!==8&&o!==9)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+o+" filterSizes in config");return V5(n,this.config,this.boxEncodingSize,r)},t.prototype.extractBoxes=function(n,r,o){return je(this,void 0,void 0,function(){var i,a,s,u,l,c,f,d,p,v,x,w,y,b,E,S,R,k,m,P,D,N,B,z,V,Z,K,ne,J,$=this;return We(this,function(Y){switch(Y.label){case 0:return i=r.width,a=r.height,s=Math.max(i,a),u=s/i,l=s/a,c=n.shape[1],f=this.config.anchors.length,d=Re(function(){var ee=n.reshape([c,c,f,$.boxEncodingSize]),he=ee.slice([0,0,0,0],[c,c,f,4]),me=ee.slice([0,0,0,4],[c,c,f,1]),be=$.withClassScores?bi(ee.slice([0,0,0,5],[c,c,f,$.config.classes.length]),3):Ee(0);return[he,me,be]}),p=d[0],v=d[1],x=d[2],w=[],[4,v.array()];case 1:return y=Y.sent(),[4,p.array()];case 2:b=Y.sent(),E=0,Y.label=3;case 3:if(!(E<c))return[3,12];S=0,Y.label=4;case 4:if(!(S<c))return[3,11];R=0,Y.label=5;case 5:return R<f?(k=dv(y[E][S][R][0]),!o||k>o?(m=(S+dv(b[E][S][R][0]))/c*u,P=(E+dv(b[E][S][R][1]))/c*l,D=Math.exp(b[E][S][R][2])*this.config.anchors[R].x/c*u,N=Math.exp(b[E][S][R][3])*this.config.anchors[R].y/c*l,B=m-D/2,z=P-N/2,V={row:E,col:S,anchor:R},this.withClassScores?[4,this.extractPredictedClass(x,V)]:[3,7]):[3,9]):[3,10];case 6:return J=Y.sent(),[3,8];case 7:J={classScore:1,label:0},Y.label=8;case 8:Z=J,K=Z.classScore,ne=Z.label,w.push(Kn({box:new Eh(B,z,B+D,z+N),score:k,classScore:k*K,label:ne},V)),Y.label=9;case 9:return R++,[3,5];case 10:return S++,[3,4];case 11:return E++,[3,3];case 12:return p.dispose(),v.dispose(),x.dispose(),[2,w]}})})},t.prototype.extractPredictedClass=function(n,r){return je(this,void 0,void 0,function(){var o,i,a,s;return We(this,function(u){switch(u.label){case 0:return o=r.row,i=r.col,a=r.anchor,[4,n.array()];case 1:return s=u.sent(),[2,Array(this.config.classes.length).fill(0).map(function(l,c){return s[o][i][a][c]}).map(function(l,c){return{classScore:l,label:c}}).reduce(function(l,c){return l.classScore>c.classScore?l:c})]}})})},t.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],t}(Ci),K5=function(e){rt(t,e);function t(n){n===void 0&&(n=!0);var r=this,o=Object.assign({},{withSeparableConvs:n,iouThreshold:L5,classes:["face"]},n?{anchors:j5,meanRgb:W5}:{anchors:B5,withClassScores:!0});return r=e.call(this,o)||this,r}return Object.defineProperty(t.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(n,r){return je(this,void 0,void 0,function(){var o;return We(this,function(i){switch(i.label){case 0:return[4,this.detect(n,r)];case 1:return o=i.sent(),[2,o.map(function(a){return new Lr(a.score,a.relativeBox,{width:a.imageWidth,height:a.imageHeight})})]}})})},t.prototype.getDefaultModelName=function(){return this.withSeparableConvs?U5:z5},t.prototype.extractParamsFromWeigthMap=function(n){return e.prototype.extractParamsFromWeigthMap.call(this,n)},t}(Sk),_k=function(e){rt(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n._name="TinyFaceDetectorOptions",n}return t}(o0),bc=function(){function e(){}return e.prototype.then=function(t){return je(this,void 0,void 0,function(){var n;return We(this,function(r){switch(r.label){case 0:return n=t,[4,this.run()];case 1:return[2,n.apply(void 0,[r.sent()])]}})})},e.prototype.run=function(){return je(this,void 0,void 0,function(){return We(this,function(t){throw new Error("ComposableTask - run is not implemented")})})},e}();function Rh(e,t,n,r,o){return o===void 0&&(o=function(i){var a=i.alignedRect;return a}),je(this,void 0,void 0,function(){var i,a,s,u,l;return We(this,function(c){switch(c.label){case 0:return i=e.map(function(f){return hk(f)?o(f):f.detection}),s=r,s?[3,5]:t instanceof Gt?[4,Jy(t,i)]:[3,2];case 1:return u=c.sent(),[3,4];case 2:return[4,Qy(t,i)];case 3:u=c.sent(),c.label=4;case 4:s=u,c.label=5;case 5:return a=s,[4,n(a)];case 6:return l=c.sent(),a.forEach(function(f){return f instanceof Gt&&f.dispose()}),[2,l]}})})}function i0(e,t,n,r,o){return je(this,void 0,void 0,function(){var i=this;return We(this,function(a){return[2,Rh([e],t,function(s){return je(i,void 0,void 0,function(){return We(this,function(u){return[2,n(s[0])]})})},r,o)]})})}function X5(e){return Re(function(){return Or(En(e,3).reverse(),3)})}var hf=2,Od=12;function Y5(e,t){var n=Sh(e,t),r=Zy(e,t);function o(l,c){var f=hn(e(l));return t.push({paramPath:c}),f}function i(l,c,f){f===void 0&&(f=!1);var d=n(l[0],l[1],3,c+"/conv1"),p=o(l[1],c+"/prelu1_alpha"),v=n(l[1],l[2],3,c+"/conv2"),x=o(l[2],c+"/prelu2_alpha"),w=n(l[2],l[3],f?2:3,c+"/conv3"),y=o(l[3],c+"/prelu3_alpha");return{conv1:d,prelu1_alpha:p,conv2:v,prelu2_alpha:x,conv3:w,prelu3_alpha:y}}function a(){var l=i([3,10,16,32],"pnet"),c=n(32,2,1,"pnet/conv4_1"),f=n(32,4,1,"pnet/conv4_2");return Kn(Kn({},l),{conv4_1:c,conv4_2:f})}function s(){var l=i([3,28,48,64],"rnet",!0),c=r(576,128,"rnet/fc1"),f=o(128,"rnet/prelu4_alpha"),d=r(128,2,"rnet/fc2_1"),p=r(128,4,"rnet/fc2_2");return Kn(Kn({},l),{fc1:c,prelu4_alpha:f,fc2_1:d,fc2_2:p})}function u(){var l=i([3,32,64,64],"onet"),c=n(64,128,2,"onet/conv4"),f=o(128,"onet/prelu4_alpha"),d=r(1152,256,"onet/fc1"),p=o(256,"onet/prelu5_alpha"),v=r(256,2,"onet/fc2_1"),x=r(256,4,"onet/fc2_2"),w=r(256,10,"onet/fc2_3");return Kn(Kn({},l),{conv4:c,prelu4_alpha:f,fc1:d,prelu5_alpha:p,fc2_1:v,fc2_2:x,fc2_3:w})}return{extractPNetParams:a,extractRNetParams:s,extractONetParams:u}}function Q5(e){var t=_i(e),n=t.extractWeights,r=t.getRemainingWeights,o=[],i=Y5(n,o),a=i.extractPNetParams,s=i.extractRNetParams,u=i.extractONetParams,l=a(),c=s(),f=u();if(r().length!==0)throw new Error("weights remaing after extract: "+r().length);return{params:{pnet:l,rnet:c,onet:f},paramMappings:o}}function J5(e,t){var n=ma(e,t);function r(c){var f=n(c+"/weights",4,c+"/filters"),d=n(c+"/bias",1);return{filters:f,bias:d}}function o(c){var f=n(c+"/weights",2),d=n(c+"/bias",1);return{weights:f,bias:d}}function i(c){return n(c,1)}function a(c){var f=r(c+"/conv1"),d=i(c+"/prelu1_alpha"),p=r(c+"/conv2"),v=i(c+"/prelu2_alpha"),x=r(c+"/conv3"),w=i(c+"/prelu3_alpha");return{conv1:f,prelu1_alpha:d,conv2:p,prelu2_alpha:v,conv3:x,prelu3_alpha:w}}function s(){var c=a("pnet"),f=r("pnet/conv4_1"),d=r("pnet/conv4_2");return Kn(Kn({},c),{conv4_1:f,conv4_2:d})}function u(){var c=a("rnet"),f=o("rnet/fc1"),d=i("rnet/prelu4_alpha"),p=o("rnet/fc2_1"),v=o("rnet/fc2_2");return Kn(Kn({},c),{fc1:f,prelu4_alpha:d,fc2_1:p,fc2_2:v})}function l(){var c=a("onet"),f=r("onet/conv4"),d=i("onet/prelu4_alpha"),p=o("onet/fc1"),v=i("onet/prelu5_alpha"),x=o("onet/fc2_1"),w=o("onet/fc2_2"),y=o("onet/fc2_3");return Kn(Kn({},c),{conv4:f,prelu4_alpha:d,fc1:p,prelu5_alpha:v,fc2_1:x,fc2_2:w,fc2_3:y})}return{extractPNetParams:s,extractRNetParams:u,extractONetParams:l}}function Z5(e){var t=[],n=J5(e,t),r=n.extractPNetParams,o=n.extractRNetParams,i=n.extractONetParams,a=r(),s=o(),u=i();return Si(e,t),{params:{pnet:a,rnet:s,onet:u},paramMappings:t}}function Jm(e,t){var n=t[0],r=t[1];return{height:Math.floor(n*e),width:Math.floor(r*e)}}function eU(e,t,n){for(var r=n[0],o=n[1],i=Od/e,a=[],s=Math.min(r,o)*i,u=0;s>=12;)a.push(i*Math.pow(t,u)),s=s*t,u+=1;return a}var a0=function(e){rt(t,e);function t(n,r,o,i){return e.call(this,{left:n,top:r,right:o,bottom:i},!0)||this}return t}(Vo);function kk(e){return Re(function(){return Qn(_n(e,Ee(127.5)),Ee(.0078125))})}function ru(e,t){return Re(function(){return ct(qt(e),Qn(t,Td(qt(Td(e)))))})}function s0(e,t,n){return n===void 0&&(n=!1),Re(function(){var r=ho(e,t.conv1,"valid");return r=ru(r,t.prelu1_alpha),r=Rn(r,n?[2,2]:[3,3],[2,2],"same"),r=ho(r,t.conv2,"valid"),r=ru(r,t.prelu2_alpha),r=n?r:Rn(r,[3,3],[2,2],"valid"),r=ho(r,t.conv3,"valid"),r=ru(r,t.prelu3_alpha),r})}function tU(e,t){return Re(function(){var n=s0(e,t,!0),r=ho(n,t.conv4_1,"valid"),o=Vr(yh(r,3),3),i=bi(_n(r,o),3),a=ho(n,t.conv4_2,"valid");return{prob:i,regions:a}})}function nU(e,t){return Re(function(){var n=Jm(t,e.shape.slice(1)),r=n.height,o=n.width,i=By.resizeBilinear(e,[r,o]),a=kk(i);return la(a,[0,2,1,3])})}function rU(e,t,n,r){for(var o=[],i=e.arraySync(),a=0;a<e.shape[0];a++)for(var s=0;s<e.shape[1];s++)i[a][s]>=r&&o.push(new Rt(s,a));var u=o.map(function(l){var c=new Eh(Math.round((l.y*hf+1)/n),Math.round((l.x*hf+1)/n),Math.round((l.y*hf+Od)/n),Math.round((l.x*hf+Od)/n)),f=i[l.y][l.x],d=t.arraySync(),p=new a0(d[l.y][l.x][0],d[l.y][l.x][1],d[l.y][l.x][2],d[l.y][l.x][3]);return{cell:c,score:f,region:p}});return u}function oU(e,t,n,r,o){o.stage1=[];var i=t.map(function(d){return Re(function(){var p={scale:d},v=nU(e,d),x=Date.now(),w=tU(v,r),y=w.prob,b=w.regions;p.pnet=Date.now()-x;var E=En(En(y,3)[1])[0],S=En(b)[0];return{scoresTensor:E,regionsTensor:S,scale:d,statsForScale:p}})}),a=i.map(function(d){var p=d.scoresTensor,v=d.regionsTensor,x=d.scale,w=d.statsForScale,y=rU(p,v,x,n);if(p.dispose(),v.dispose(),!y.length)return o.stage1.push(w),[];var b=Date.now(),E=Yl(y.map(function(S){return S.cell}),y.map(function(S){return S.score}),.5);return w.nms=Date.now()-b,w.numBoxes=E.length,o.stage1.push(w),E.map(function(S){return y[S]})}),s=a.reduce(function(d,p){return d.concat(p)},[]),u=[],l=[];if(s.length>0){var c=Date.now(),f=Yl(s.map(function(d){return d.cell}),s.map(function(d){return d.score}),.7);o.stage1_nms=Date.now()-c,l=f.map(function(d){return s[d].score}),u=f.map(function(d){return s[d]}).map(function(d){var p=d.cell,v=d.region;return new Eh(p.left+v.left*p.width,p.top+v.top*p.height,p.right+v.right*p.width,p.bottom+v.bottom*p.height).toSquare().round()})}return{boxes:u,scores:l}}function Rk(e,t,n){var r=n.width,o=n.height;return je(this,void 0,void 0,function(){var i,a,s,u=this;return We(this,function(l){switch(l.label){case 0:return i=mi(e),[4,Promise.all(t.map(function(c){return je(u,void 0,void 0,function(){var f,d,p,v,x,w,y,b;return We(this,function(E){return f=c.padAtBorders(e.height,e.width),d=f.y,p=f.ey,v=f.x,x=f.ex,w=v-1,y=d-1,b=i.getImageData(w,y,x-w,p-y),[2,er.isNodejs()?Yy(b):createImageBitmap(b)]})})}))];case 1:return a=l.sent(),s=[],a.forEach(function(c){var f=Ch({width:r,height:o}),d=mi(f);d.drawImage(c,0,0,r,o);for(var p=d.getImageData(0,0,r,o).data,v=[],x=0;x<p.length;x+=4)v.push(p[x+2]),v.push(p[x+1]),v.push(p[x]);s.push(v)}),[2,s.map(function(c){var f=Re(function(){var d=la(gr(c,[1,r,o,3]),[0,2,1,3]).toFloat();return kk(d)});return f})]}})})}function iU(e,t){return Re(function(){var n=s0(e,t),r=lo(n,[n.shape[0],t.fc1.weights.shape[0]]),o=Bo(r,t.fc1),i=ru(o,t.prelu4_alpha),a=Bo(i,t.fc2_1),s=Vr(yh(a,1),1),u=bi(_n(a,s),1),l=Bo(i,t.fc2_2),c=En(u,1)[1];return{scores:c,regions:l}})}function aU(e,t,n,r,o){return je(this,void 0,void 0,function(){var i,a,s,u,l,c,f,d,p,v,x,w,y,b;return We(this,function(E){switch(E.label){case 0:return i=Date.now(),[4,Rk(e,t,{width:24,height:24})];case 1:return a=E.sent(),o.stage2_extractImagePatches=Date.now()-i,i=Date.now(),s=a.map(function(S){var R=iU(S,r);return S.dispose(),R}),o.stage2_rnet=Date.now()-i,u=s.length>1?bn(s.map(function(S){return S.scores})):s[0].scores,f=(c=Array).from,[4,u.data()];case 2:return l=f.apply(c,[E.sent()]),u.dispose(),d=l.map(function(S,R){return{score:S,idx:R}}).filter(function(S){return S.score>n}).map(function(S){var R=S.idx;return R}),p=d.map(function(S){return t[S]}),v=d.map(function(S){return l[S]}),x=[],w=[],p.length>0&&(i=Date.now(),y=Yl(p,v,.7),o.stage2_nms=Date.now()-i,b=y.map(function(S){var R=s[d[S]].regions.arraySync();return new a0(R[0][0],R[0][1],R[0][2],R[0][3])}),w=y.map(function(S){return v[S]}),x=y.map(function(S,R){return p[S].calibrate(b[R])})),s.forEach(function(S){S.regions.dispose(),S.scores.dispose()}),[2,{boxes:x,scores:w}]}})})}function sU(e,t){return Re(function(){var n=s0(e,t);n=Rn(n,[2,2],[2,2],"same"),n=ho(n,t.conv4,"valid"),n=ru(n,t.prelu4_alpha);var r=lo(n,[n.shape[0],t.fc1.weights.shape[0]]),o=Bo(r,t.fc1),i=ru(o,t.prelu5_alpha),a=Bo(i,t.fc2_1),s=Vr(yh(a,1),1),u=bi(_n(a,s),1),l=Bo(i,t.fc2_2),c=Bo(i,t.fc2_3),f=En(u,1)[1];return{scores:f,regions:l,points:c}})}function uU(e,t,n,r,o){return je(this,void 0,void 0,function(){var i,a,s,u,l,c,f,d,p,v,x,w,y,b,E;return We(this,function(S){switch(S.label){case 0:return i=Date.now(),[4,Rk(e,t,{width:48,height:48})];case 1:return a=S.sent(),o.stage3_extractImagePatches=Date.now()-i,i=Date.now(),s=a.map(function(R){var k=sU(R,r);return R.dispose(),k}),o.stage3_onet=Date.now()-i,u=s.length>1?bn(s.map(function(R){return R.scores})):s[0].scores,f=(c=Array).from,[4,u.data()];case 2:return l=f.apply(c,[S.sent()]),u.dispose(),d=l.map(function(R,k){return{score:R,idx:k}}).filter(function(R){return R.score>n}).map(function(R){var k=R.idx;return k}),p=d.map(function(R){var k=s[R].regions.arraySync();return new a0(k[0][0],k[0][1],k[0][2],k[0][3])}),v=d.map(function(R,k){return t[R].calibrate(p[k])}),x=d.map(function(R){return l[R]}),w=[],y=[],b=[],v.length>0&&(i=Date.now(),E=Yl(v,x,.7,!1),o.stage3_nms=Date.now()-i,w=E.map(function(R){return v[R]}),y=E.map(function(R){return x[R]}),b=E.map(function(R,k){return Array(5).fill(0).map(function(m,P){var D=s[R].points.arraySync();return new Rt(D[0][P]*(w[k].width+1)+w[k].left,D[0][P+5]*(w[k].height+1)+w[k].top)})})),s.forEach(function(R){R.regions.dispose(),R.scores.dispose(),R.points.dispose()}),[2,{boxes:w,scores:y,points:b}]}})})}var lU=function(e){rt(t,e);function t(){return e.call(this,"Mtcnn")||this}return t.prototype.load=function(n){return je(this,void 0,void 0,function(){return We(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.load.call(this,n)]})})},t.prototype.loadFromDisk=function(n){return je(this,void 0,void 0,function(){return We(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.loadFromDisk.call(this,n)]})})},t.prototype.forwardInput=function(n,r){return r===void 0&&(r={}),je(this,void 0,void 0,function(){var o,i,a,s,u,l,c,f,d,p,v,x,w,y,b,E,S,R,k,m,P;return We(this,function(D){switch(D.label){case 0:if(o=this.params,!o)throw new Error("Mtcnn - load model before inference");if(i=n.canvases[0],!i)throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return a={},s=Date.now(),u=Re(function(){return X5(Vr(Hy.fromPixels(i)).toFloat())}),l=function(N){return u.dispose(),a.total=Date.now()-s,N},c=u.shape.slice(1),f=c[0],d=c[1],p=new Ek(r),v=p.minFaceSize,x=p.scaleFactor,w=p.maxNumScales,y=p.scoreThresholds,b=p.scaleSteps,E=(b||eU(v,x,[f,d])).filter(function(N){var B=Jm(N,[f,d]);return Math.min(B.width,B.height)>Od}).slice(0,w),a.scales=E,a.pyramid=E.map(function(N){return Jm(N,[f,d])}),S=Date.now(),[4,oU(u,E,y[0],o.pnet,a)];case 1:return R=D.sent(),a.total_stage1=Date.now()-S,R.boxes.length?(a.stage2_numInputBoxes=R.boxes.length,S=Date.now(),[4,aU(i,R.boxes,y[1],o.rnet,a)]):[2,l({results:[],stats:a})];case 2:return k=D.sent(),a.total_stage2=Date.now()-S,k.boxes.length?(a.stage3_numInputBoxes=k.boxes.length,S=Date.now(),[4,uU(i,k.boxes,y[2],o.onet,a)]):[2,l({results:[],stats:a})];case 3:return m=D.sent(),a.total_stage3=Date.now()-S,P=m.boxes.map(function(N,B){return _h(Jl({},new Lr(m.scores[B],new Gy(N.left/d,N.top/f,N.width/d,N.height/f),{height:f,width:d})),new Mz(m.points[B].map(function(z){return z.sub(new Rt(N.left,N.top)).div(new Rt(N.width,N.height))}),{width:N.width,height:N.height}))}),[2,l({results:P,stats:a})]}})})},t.prototype.forward=function(n,r){return r===void 0&&(r={}),je(this,void 0,void 0,function(){var o;return We(this,function(i){switch(i.label){case 0:return o=this.forwardInput,[4,An(n)];case 1:return[4,o.apply(this,[i.sent(),r])];case 2:return[2,i.sent().results]}})})},t.prototype.forwardWithStats=function(n,r){return r===void 0&&(r={}),je(this,void 0,void 0,function(){var o;return We(this,function(i){switch(i.label){case 0:return o=this.forwardInput,[4,An(n)];case 1:return[2,o.apply(this,[i.sent(),r])]}})})},t.prototype.getDefaultModelName=function(){return"mtcnn_model"},t.prototype.extractParamsFromWeigthMap=function(n){return Z5(n)},t.prototype.extractParams=function(n){return Q5(n)},t}(Ci),cU=.4,fU=[new Rt(1.603231,2.094468),new Rt(6.041143,7.080126),new Rt(2.882459,3.518061),new Rt(4.266906,5.178857),new Rt(9.041765,10.66308)],dU=[117.001,114.697,97.404],hU=function(e){rt(t,e);function t(){var n=this,r={withSeparableConvs:!0,iouThreshold:cU,classes:["face"],anchors:fU,meanRgb:dU,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return n=e.call(this,r)||this,n}return Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(n,r){return je(this,void 0,void 0,function(){var o;return We(this,function(i){switch(i.label){case 0:return[4,this.detect(n,r)];case 1:return o=i.sent(),[2,o.map(function(a){return new Lr(a.score,a.relativeBox,{width:a.imageWidth,height:a.imageHeight})})]}})})},t.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},t.prototype.extractParamsFromWeigthMap=function(n){return e.prototype.extractParamsFromWeigthMap.call(this,n)},t}(Sk),Pr={ssdMobilenetv1:new Ck,tinyFaceDetector:new hU,tinyYolov2:new K5,mtcnn:new lU,faceLandmark68Net:new mk,faceLandmark68TinyNet:new v5,faceRecognitionNet:new E5,faceExpressionNet:new n5,ageGenderNet:new f5},pU=function(e){return Pr.tinyFaceDetector.load(e)},Tk=function(e){rt(t,e);function t(n,r,o){var i=e.call(this)||this;return i.parentTask=n,i.input=r,i.extractedFaces=o,i}return t}(bc),u0=function(e){rt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return je(this,void 0,void 0,function(){var n,r,o=this;return We(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return n=i.sent(),[4,Rh(n,this.input,function(a){return je(o,void 0,void 0,function(){return We(this,function(s){switch(s.label){case 0:return[4,Promise.all(a.map(function(u){return Pr.faceExpressionNet.predictExpressions(u)}))];case 1:return[2,s.sent()]}})})},this.extractedFaces)];case 2:return r=i.sent(),[2,n.map(function(a,s){return dk(a,r[s])})]}})})},t.prototype.withAgeAndGender=function(){return new d0(this,this.input)},t}(Tk),l0=function(e){rt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return je(this,void 0,void 0,function(){var n,r;return We(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return n=o.sent(),n?[4,i0(n,this.input,function(i){return Pr.faceExpressionNet.predictExpressions(i)},this.extractedFaces)]:[2];case 2:return r=o.sent(),[2,dk(n,r)]}})})},t.prototype.withAgeAndGender=function(){return new h0(this,this.input)},t}(Tk),c0=function(e){rt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withAgeAndGender=function(){return new p0(this,this.input)},t.prototype.withFaceDescriptors=function(){return new m0(this,this.input)},t}(u0),f0=function(e){rt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withAgeAndGender=function(){return new v0(this,this.input)},t.prototype.withFaceDescriptor=function(){return new g0(this,this.input)},t}(l0),Ik=function(e){rt(t,e);function t(n,r,o){var i=e.call(this)||this;return i.parentTask=n,i.input=r,i.extractedFaces=o,i}return t}(bc),d0=function(e){rt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return je(this,void 0,void 0,function(){var n,r,o=this;return We(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return n=i.sent(),[4,Rh(n,this.input,function(a){return je(o,void 0,void 0,function(){return We(this,function(s){switch(s.label){case 0:return[4,Promise.all(a.map(function(u){return Pr.ageGenderNet.predictAgeAndGender(u)}))];case 1:return[2,s.sent()]}})})},this.extractedFaces)];case 2:return r=i.sent(),[2,n.map(function(a,s){var u=r[s],l=u.age,c=u.gender,f=u.genderProbability;return wk(bk(a,c,f),l)})]}})})},t.prototype.withFaceExpressions=function(){return new u0(this,this.input)},t}(Ik),h0=function(e){rt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return je(this,void 0,void 0,function(){var n,r,o,i,a;return We(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return n=s.sent(),n?[4,i0(n,this.input,function(u){return Pr.ageGenderNet.predictAgeAndGender(u)},this.extractedFaces)]:[2];case 2:return r=s.sent(),o=r.age,i=r.gender,a=r.genderProbability,[2,wk(bk(n,i,a),o)]}})})},t.prototype.withFaceExpressions=function(){return new l0(this,this.input)},t}(Ik),p0=function(e){rt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withFaceExpressions=function(){return new c0(this,this.input)},t.prototype.withFaceDescriptors=function(){return new m0(this,this.input)},t}(d0),v0=function(e){rt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withFaceExpressions=function(){return new f0(this,this.input)},t.prototype.withFaceDescriptor=function(){return new g0(this,this.input)},t}(h0),Dk=function(e){rt(t,e);function t(n,r){var o=e.call(this)||this;return o.parentTask=n,o.input=r,o}return t}(bc),m0=function(e){rt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return je(this,void 0,void 0,function(){var n,r;return We(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return n=o.sent(),[4,Rh(n,this.input,function(i){return Promise.all(i.map(function(a){return Pr.faceRecognitionNet.computeFaceDescriptor(a)}))},null,function(i){return i.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return r=o.sent(),[2,r.map(function(i,a){return xk(n[a],i)})]}})})},t.prototype.withFaceExpressions=function(){return new c0(this,this.input)},t.prototype.withAgeAndGender=function(){return new p0(this,this.input)},t}(Dk),g0=function(e){rt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return je(this,void 0,void 0,function(){var n,r;return We(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return n=o.sent(),n?[4,i0(n,this.input,function(i){return Pr.faceRecognitionNet.computeFaceDescriptor(i)},null,function(i){return i.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return r=o.sent(),[2,xk(n,r)]}})})},t.prototype.withFaceExpressions=function(){return new f0(this,this.input)},t.prototype.withAgeAndGender=function(){return new v0(this,this.input)},t}(Dk),Nk=function(e){rt(t,e);function t(n,r,o){var i=e.call(this)||this;return i.parentTask=n,i.input=r,i.useTinyLandmarkNet=o,i}return Object.defineProperty(t.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?Pr.faceLandmark68TinyNet:Pr.faceLandmark68Net},enumerable:!0,configurable:!0}),t}(bc),vU=function(e){rt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return je(this,void 0,void 0,function(){var n,r,o,i,a,s=this;return We(this,function(u){switch(u.label){case 0:return[4,this.parentTask];case 1:return n=u.sent(),r=n.map(function(l){return l.detection}),this.input instanceof Gt?[4,Jy(this.input,r)]:[3,3];case 2:return i=u.sent(),[3,5];case 3:return[4,Qy(this.input,r)];case 4:i=u.sent(),u.label=5;case 5:return o=i,[4,Promise.all(o.map(function(l){return s.landmarkNet.detectLandmarks(l)}))];case 6:return a=u.sent(),o.forEach(function(l){return l instanceof Gt&&l.dispose()}),[2,n.map(function(l,c){return _h(l,a[c])})]}})})},t.prototype.withFaceExpressions=function(){return new c0(this,this.input)},t.prototype.withAgeAndGender=function(){return new p0(this,this.input)},t.prototype.withFaceDescriptors=function(){return new m0(this,this.input)},t}(Nk),mU=function(e){rt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return je(this,void 0,void 0,function(){var n,r,o,i,a;return We(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return n=s.sent(),n?(r=n.detection,this.input instanceof Gt?[4,Jy(this.input,[r])]:[3,3]):[2];case 2:return i=s.sent(),[3,5];case 3:return[4,Qy(this.input,[r])];case 4:i=s.sent(),s.label=5;case 5:return o=i,[4,this.landmarkNet.detectLandmarks(o[0])];case 6:return a=s.sent(),o.forEach(function(u){return u instanceof Gt&&u.dispose()}),[2,_h(n,a)]}})})},t.prototype.withFaceExpressions=function(){return new f0(this,this.input)},t.prototype.withAgeAndGender=function(){return new v0(this,this.input)},t.prototype.withFaceDescriptor=function(){return new g0(this,this.input)},t}(Nk),Ak=function(e){rt(t,e);function t(n,r){r===void 0&&(r=new kh);var o=e.call(this)||this;return o.input=n,o.options=r,o}return t}(bc),Pk=function(e){rt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return je(this,void 0,void 0,function(){var n,r,o,i;return We(this,function(a){switch(a.label){case 0:return n=this,r=n.input,o=n.options,o instanceof Ek?[4,Pr.mtcnn.forward(r,o)]:[3,2];case 1:return[2,a.sent().map(function(s){return s.detection})];case 2:if(i=o instanceof _k?function(s){return Pr.tinyFaceDetector.locateFaces(s,o)}:o instanceof kh?function(s){return Pr.ssdMobilenetv1.locateFaces(s,o)}:o instanceof o0?function(s){return Pr.tinyYolov2.locateFaces(s,o)}:null,!i)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,i(r)]}})})},t.prototype.runAndExtendWithFaceDetections=function(){var n=this;return new Promise(function(r){return je(n,void 0,void 0,function(){var o;return We(this,function(i){switch(i.label){case 0:return[4,this.run()];case 1:return o=i.sent(),[2,r(o.map(function(a){return Jl({},a)}))]}})})})},t.prototype.withFaceLandmarks=function(n){return n===void 0&&(n=!1),new vU(this.runAndExtendWithFaceDetections(),this.input,n)},t.prototype.withFaceExpressions=function(){return new u0(this.runAndExtendWithFaceDetections(),this.input)},t.prototype.withAgeAndGender=function(){return new d0(this.runAndExtendWithFaceDetections(),this.input)},t}(Ak);(function(e){rt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return je(this,void 0,void 0,function(){var n,r;return We(this,function(o){switch(o.label){case 0:return[4,new Pk(this.input,this.options)];case 1:return n=o.sent(),r=n[0],n.forEach(function(i){i.score>r.score&&(r=i)}),[2,r]}})})},t.prototype.runAndExtendWithFaceDetection=function(){var n=this;return new Promise(function(r){return je(n,void 0,void 0,function(){var o;return We(this,function(i){switch(i.label){case 0:return[4,this.run()];case 1:return o=i.sent(),[2,r(o?Jl({},o):void 0)]}})})})},t.prototype.withFaceLandmarks=function(n){return n===void 0&&(n=!1),new mU(this.runAndExtendWithFaceDetection(),this.input,n)},t.prototype.withFaceExpressions=function(){return new l0(this.runAndExtendWithFaceDetection(),this.input)},t.prototype.withAgeAndGender=function(){return new h0(this.runAndExtendWithFaceDetection(),this.input)},t})(Ak);function gU(e,t){return t===void 0&&(t=new kh),new Pk(e,t)}function yU(e,t){if(e.length!==t.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var n=Array.from(e),r=Array.from(t);return Math.sqrt(n.map(function(o,i){return o-r[i]}).reduce(function(o,i){return o+Math.pow(i,2)},0))}(function(){function e(t,n){n===void 0&&(n=.6),this._distanceThreshold=n;var r=Array.isArray(t)?t:[t];if(!r.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var o=1,i=function(){return"person "+o++};this._labeledDescriptors=r.map(function(a){if(a instanceof lf)return a;if(a instanceof Float32Array)return new lf(i(),[a]);if(a.descriptor&&a.descriptor instanceof Float32Array)return new lf(i(),[a.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}return Object.defineProperty(e.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),e.prototype.computeMeanDistance=function(t,n){return n.map(function(r){return yU(r,t)}).reduce(function(r,o){return r+o},0)/(n.length||1)},e.prototype.matchDescriptor=function(t){var n=this;return this.labeledDescriptors.map(function(r){var o=r.descriptors,i=r.label;return new eb(i,n.computeMeanDistance(t,o))}).reduce(function(r,o){return r.distance<o.distance?r:o})},e.prototype.findBestMatch=function(t){var n=this.matchDescriptor(t);return n.distance<this.distanceThreshold?n:new eb("unknown",n.distance)},e.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map(function(t){return t.toJSON()})}},e.fromJSON=function(t){var n=t.labeledDescriptors.map(function(r){return lf.fromJSON(r)});return new e(n,t.distanceThreshold)},e})();function Fk(e,t){var n=new Xa(t.width,t.height),r=n.width,o=n.height;if(r<=0||o<=0)throw new Error("resizeResults - invalid dimensions: "+JSON.stringify({width:r,height:o}));if(Array.isArray(e))return e.map(function(s){return Fk(s,{width:r,height:o})});if(hk(e)){var i=e.detection.forSize(r,o),a=e.unshiftedLandmarks.forSize(i.box.width,i.box.height);return _h(Jl(e,i),a)}return Ad(e)?Jl(e,e.detection.forSize(r,o)):e instanceof Ql||e instanceof Lr?e.forSize(r,o):e}const xU=()=>{W.useRef(!1);const e=W.useRef(null),t=W.useRef(null);W.useState(null);const[n,r]=W.useState(3),[o,i]=W.useState(!1),s=new URLSearchParams(window.location.search).get("type"),u={width:1280,height:720,facingMode:"user"},l=c=>{const f=e.current.getScreenshot();window.opener&&!window.opener.closed&&window.opener.receivePhotoFromWebcam(f,c)};return W.useEffect(()=>{let c=3,f=3,d=!1;s==="recognition"&&(c=1);let p=null;const v=async()=>{await pU("/models")},x=e.current.video,w=t.current,y={width:x.offsetWidth,height:x.offsetHeight};Yz(w,y);const b=async()=>{if(!(!e.current||!t.current)){if(x.readyState>=4){const E=await gU(x,new _k),S=Fk(E,y);w.getContext("2d").clearRect(0,0,w.width,w.height),E.length>0&&c>0?(d||(d=!0,i(!0),p=setInterval(()=>{if(f>0)f-=1,r(f);else if(clearInterval(p),l(c),c-=1,f=3,r(f),d=!1,i(!1),c===0){window.opener&&!window.opener.closed&&window.close();return}},1e3)),$z(w,S)):d&&(clearInterval(p),f=3,r(f),d=!1,i(!1))}requestAnimationFrame(b)}};return v().then(b),()=>{clearInterval(p)}},[]),F.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",width:"100vw"},children:[F.jsx(KO,{ref:e,audio:!1,screenshotFormat:"image/png",style:{width:"100%",height:"100%"},videoConstraints:u}),F.jsx("canvas",{ref:t,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}}),o&&F.jsx("div",{style:{position:"absolute",top:"40%",left:"50%",color:"#fff",fontSize:"6rem"},children:n})]})},wU=YD([{path:"/",element:F.jsx(Nx,{})},{path:"/home",element:F.jsx(Nx,{})},{path:"/testing",element:F.jsx(p3,{})},{path:"/about",element:F.jsx(h3,{})},{path:"/register",element:F.jsx(VO,{})},{path:"/recognition",element:F.jsx(GO,{})},{path:"/webcam",element:F.jsx(xU,{})}]);Ot.options={closeButton:!0,debug:!1,newestOnTop:!0,progressBar:!0,positionClass:"toast-top-right",preventDuplicates:!1,onclick:null,showDuration:"500",hideDuration:"1000",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"};vv.createRoot(document.getElementById("root")).render(F.jsx(iN,{router:wU}))});export default bU();
